/*! For license information please see 2.fa2bfeb3.chunk.js.LICENSE.txt */
(this["webpackJsonpacm-ioit"]=this["webpackJsonpacm-ioit"]||[]).push([[2],[function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(2),r=i.n(n),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.a.createContext&&r.a.createContext(o),s=function(){return(s=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},l=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i};function c(t){return t&&t.map((function(t,e){return r.a.createElement(t.tag,s({key:e},t.attr),c(t.child))}))}function u(t){return function(e){return r.a.createElement(h,s({attr:s({},t.attr)},e),c(t.child))}}function h(t){var e=function(e){var i,n=t.attr,o=t.size,a=t.title,c=l(t,["attr","size","title"]),u=o||e.size||"1em";return e.className&&(i=e.className),t.className&&(i=(i?i+" ":"")+t.className),r.a.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,c,{className:i,style:s(s({color:t.color||e.color},e.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&r.a.createElement("title",null,a),t.children)};return void 0!==a?r.a.createElement(a.Consumer,null,(function(t){return e(t)})):e(o)}},function(t,e,i){"use strict";t.exports=i(135)},function(t,e,i){"use strict";t.exports=i(136)},function(t,e,i){t.exports=i(395)()},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,i){"use strict";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(252),e),r(i(78),e),r(i(112),e),r(i(109),e),r(i(77),e),r(i(254),e),r(i(65),e),r(i(258),e),r(i(259),e),r(i(260),e),r(i(79),e),r(i(80),e),r(i(110),e)},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(69);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(t,e)||Object(n.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,i){var n=i(102);t.exports=function(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(64),e),r(i(26),e),r(i(222),e),r(i(45),e),r(i(106),e)},function(t,e,i){"use strict";i.d(e,"a",(function(){return x})),i.d(e,"b",(function(){return v})),i.d(e,"c",(function(){return T})),i.d(e,"d",(function(){return y})),i.d(e,"e",(function(){return b})),i.d(e,"f",(function(){return A})),i.d(e,"g",(function(){return C}));var n=i(20),r=i(2),o=i.n(r),a=(i(3),i(30)),s=i(84),l=i(25),c=i(6),u=i(85),h=i.n(u),d=(i(124),i(14)),p=i(68),f=i.n(p),m=function(t){var e=Object(s.a)();return e.displayName=t,e}("Router-History"),y=function(t){var e=Object(s.a)();return e.displayName=t,e}("Router"),v=function(t){function e(e){var i;return(i=t.call(this,e)||this).state={location:e.history.location},i._isMounted=!1,i._pendingLocation=null,e.staticContext||(i.unlisten=e.history.listen((function(t){i._isMounted?i.setState({location:t}):i._pendingLocation=t}))),i}Object(n.a)(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var i=e.prototype;return i.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&this.unlisten()},i.render=function(){return o.a.createElement(y.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(m.Provider,{children:this.props.children||null,value:this.props.history}))},e}(o.a.Component);o.a.Component;o.a.Component;var g={},_=0;function b(t,e){void 0===e&&(e={}),("string"===typeof e||Array.isArray(e))&&(e={path:e});var i=e,n=i.path,r=i.exact,o=void 0!==r&&r,a=i.strict,s=void 0!==a&&a,l=i.sensitive,c=void 0!==l&&l;return[].concat(n).reduce((function(e,i){if(!i&&""!==i)return null;if(e)return e;var n=function(t,e){var i=""+e.end+e.strict+e.sensitive,n=g[i]||(g[i]={});if(n[t])return n[t];var r=[],o={regexp:h()(t,r,e),keys:r};return _<1e4&&(n[t]=o,_++),o}(i,{end:o,strict:s,sensitive:c}),r=n.regexp,a=n.keys,l=r.exec(t);if(!l)return null;var u=l[0],d=l.slice(1),p=t===u;return o&&!p?null:{path:i,url:"/"===i&&""===u?"/":u,isExact:p,params:a.reduce((function(t,e,i){return t[e.name]=d[i],t}),{})}}),null)}var x=function(t){function e(){return t.apply(this,arguments)||this}return Object(n.a)(e,t),e.prototype.render=function(){var t=this;return o.a.createElement(y.Consumer,null,(function(e){e||Object(l.a)(!1);var i=t.props.location||e.location,n=t.props.computedMatch?t.props.computedMatch:t.props.path?b(i.pathname,t.props):e.match,r=Object(c.a)({},e,{location:i,match:n}),a=t.props,s=a.children,u=a.component,h=a.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(y.Provider,{value:r},r.match?s?"function"===typeof s?s(r):s:u?o.a.createElement(u,r):h?h(r):null:"function"===typeof s?s(r):null)}))},e}(o.a.Component);function w(t){return"/"===t.charAt(0)?t:"/"+t}function S(t,e){if(!t)return e;var i=w(t);return 0!==e.pathname.indexOf(i)?e:Object(c.a)({},e,{pathname:e.pathname.substr(i.length)})}function E(t){return"string"===typeof t?t:Object(a.e)(t)}function k(t){return function(){Object(l.a)(!1)}}function P(){}o.a.Component;var T=function(t){function e(){return t.apply(this,arguments)||this}return Object(n.a)(e,t),e.prototype.render=function(){var t=this;return o.a.createElement(y.Consumer,null,(function(e){e||Object(l.a)(!1);var i,n,r=t.props.location||e.location;return o.a.Children.forEach(t.props.children,(function(t){if(null==n&&o.a.isValidElement(t)){i=t;var a=t.props.path||t.props.from;n=a?b(r.pathname,Object(c.a)({},t.props,{path:a})):e.match}})),n?o.a.cloneElement(i,{location:r,computedMatch:n}):null}))},e}(o.a.Component);function C(t){var e="withRouter("+(t.displayName||t.name)+")",i=function(e){var i=e.wrappedComponentRef,n=Object(d.a)(e,["wrappedComponentRef"]);return o.a.createElement(y.Consumer,null,(function(e){return e||Object(l.a)(!1),o.a.createElement(t,Object(c.a)({},n,e,{ref:i}))}))};return i.displayName=e,i.WrappedComponent=t,f()(i,t)}var M=o.a.useContext;function A(){var t=M(y).match;return t?t.params:{}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(14);function r(t,e){if(null==t)return{};var i,r,o=Object(n.a)(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}},function(t,e,i){"use strict";function n(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i.d(e,"a",(function(){return r}))},function(t,e,i){var n=i(236);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,i){var n=i(22),r=i(237),o=i(238);t.exports=function(t){var e=r();return function(){var i,r=n(t);if(e){var a=n(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return o(this,i)}}},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsColor=void 0;var o=function(){function t(){n(this,t),this.value="#fff"}return r(t,[{key:"load",value:function(t){void 0!==(null===t||void 0===t?void 0:t.value)&&(this.value=t.value)}}],[{key:"create",value:function(e,i){var n=null!==e&&void 0!==e?e:new t;return void 0!==i&&n.load("string"===typeof i?{value:i}:i),n}}]),t}();e.OptionsColor=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}i.d(e,"a",(function(){return n}))},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e,i){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.anime=e.default=e.Anime=void 0;var n=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==c(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=n?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(1));function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function(t){return t};if(e.anime=u,"undefined"!=typeof window){var h=i(2);e.anime=u="object"===c(h)?h.default:h}var d=function(){function t(e){var i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=o(t).call(this,e),i=!n||"object"!==c(n)&&"function"!=typeof n?a(this):n,l(a(i),"createAnime",(function(){var t=i.props;0<i.targets.length&&void 0!==i.anime&&u.remove(i.targets);var e=!0,n=!(i.targets=[]),o=void 0;try{for(var a,s=i.targetRefs[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var c=a.value;c.current&&i.targets.push(c.current)}}catch(t){n=!0,o=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw o}}var h=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t,{targets:i.targets});delete h.children,delete h.svg,i.anime=u(h)})),i.targets=[],i.targetRefs=[],i.anime=null,i}var e;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(t,n.Component),(e=[{key:"componentDidMount",value:function(){this.createAnime()}},{key:"componentDidUpdate",value:function(){this.createAnime()}},{key:"render",value:function(){var t=this,e=this.props.children,i=this.targetRefs;return Array.isArray(e)||(e=[e]),n.default.createElement(n.Fragment,null,e.map((function(e,r){i.push(n.default.createRef());var o=t.props.svg?"g":"div";return n.default.createElement(o,{ref:i[i.length-1],key:"".concat("__anime__").concat(r)},e)})))}}])&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}(),p=e.Anime=d;e.default=p},function(t,e){t.exports=i(2)},function(t,e){t.exports=i(144)}])},function(t,e,i){var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)&&n.length){var a=r.apply(null,n);a&&t.push(a)}else if("object"===o)for(var s in n)i.call(n,s)&&n[s]&&t.push(s)}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},function(t,e,i){"use strict";var n="Invariant failed";e.a=function(t,e){if(!t)throw new Error(n)}},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(103),e),r(i(104),e),r(i(105),e),r(i(218),e),r(i(219),e),r(i(220),e),r(i(221),e)},function(t,e,i){var n=i(235);function r(e,i,o){return"undefined"!==typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,i){var r=n(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(i):o.value}},r(e,i,o||e)}t.exports=r},function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s}));var n=i(2),r=1,o=Object(n.createContext)(null),a=o.Provider;function s(){var t=Object(n.useContext)(o);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}},function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return n}));"undefined"!==typeof window&&window,"undefined"!==typeof t||window;var n="undefined"!==typeof document?document:{}}).call(this,i(44))},function(t,e,i){"use strict";i.d(e,"a",(function(){return S})),i.d(e,"b",(function(){return M})),i.d(e,"d",(function(){return O})),i.d(e,"c",(function(){return m})),i.d(e,"f",(function(){return y})),i.d(e,"e",(function(){return f}));var n=i(6);function r(t){return"/"===t.charAt(0)}function o(t,e){for(var i=e,n=i+1,r=t.length;n<r;i+=1,n+=1)t[i]=t[n];t.pop()}var a=function(t,e){void 0===e&&(e="");var i,n=t&&t.split("/")||[],a=e&&e.split("/")||[],s=t&&r(t),l=e&&r(e),c=s||l;if(t&&r(t)?a=n:n.length&&(a.pop(),a=a.concat(n)),!a.length)return"/";if(a.length){var u=a[a.length-1];i="."===u||".."===u||""===u}else i=!1;for(var h=0,d=a.length;d>=0;d--){var p=a[d];"."===p?o(a,d):".."===p?(o(a,d),h++):h&&(o(a,d),h--)}if(!c)for(;h--;h)a.unshift("..");!c||""===a[0]||a[0]&&r(a[0])||a.unshift("");var f=a.join("/");return i&&"/"!==f.substr(-1)&&(f+="/"),f};function s(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}var l=function t(e,i){if(e===i)return!0;if(null==e||null==i)return!1;if(Array.isArray(e))return Array.isArray(i)&&e.length===i.length&&e.every((function(e,n){return t(e,i[n])}));if("object"===typeof e||"object"===typeof i){var n=s(e),r=s(i);return n!==e||r!==i?t(n,r):Object.keys(Object.assign({},e,i)).every((function(n){return t(e[n],i[n])}))}return!1},c=i(25);function u(t){return"/"===t.charAt(0)?t:"/"+t}function h(t){return"/"===t.charAt(0)?t.substr(1):t}function d(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function p(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function f(t){var e=t.pathname,i=t.search,n=t.hash,r=e||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function m(t,e,i,r){var o;"string"===typeof t?(o=function(t){var e=t||"/",i="",n="",r=e.indexOf("#");-1!==r&&(n=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");return-1!==o&&(i=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===i?"":i,hash:"#"===n?"":n}}(t)).state=e:(void 0===(o=Object(n.a)({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return i&&(o.key=i),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function y(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&l(t.state,e.state)}function v(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,i,n,r){if(null!=t){var o="function"===typeof t?t(e,i):t;"string"===typeof o?"function"===typeof n?n(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(t){var i=!0;function n(){i&&t.apply(void 0,arguments)}return e.push(n),function(){i=!1,e=e.filter((function(t){return t!==n}))}},notifyListeners:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.forEach((function(t){return t.apply(void 0,i)}))}}}var g=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(t,e){e(window.confirm(t))}var b="popstate",x="hashchange";function w(){try{return window.history.state||{}}catch(t){return{}}}function S(t){void 0===t&&(t={}),g||Object(c.a)(!1);var e=window.history,i=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),o=t,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,h=void 0===l?_:l,y=o.keyLength,S=void 0===y?6:y,E=t.basename?p(u(t.basename)):"";function k(t){var e=t||{},i=e.key,n=e.state,r=window.location,o=r.pathname+r.search+r.hash;return E&&(o=d(o,E)),m(o,n,i)}function P(){return Math.random().toString(36).substr(2,S)}var T=v();function C(t){Object(n.a)(N,t),N.length=e.length,T.notifyListeners(N.location,N.action)}function M(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||I(k(t.state))}function A(){I(k(w()))}var O=!1;function I(t){if(O)O=!1,C();else{T.confirmTransitionTo(t,"POP",h,(function(e){e?C({action:"POP",location:t}):function(t){var e=N.location,i=z.indexOf(e.key);-1===i&&(i=0);var n=z.indexOf(t.key);-1===n&&(n=0);var r=i-n;r&&(O=!0,R(r))}(t)}))}}var D=k(w()),z=[D.key];function L(t){return E+f(t)}function R(t){e.go(t)}var F=0;function B(t){1===(F+=t)&&1===t?(window.addEventListener(b,M),r&&window.addEventListener(x,A)):0===F&&(window.removeEventListener(b,M),r&&window.removeEventListener(x,A))}var j=!1;var N={length:e.length,action:"POP",location:D,createHref:L,push:function(t,n){var r="PUSH",o=m(t,n,P(),N.location);T.confirmTransitionTo(o,r,h,(function(t){if(t){var n=L(o),a=o.key,l=o.state;if(i)if(e.pushState({key:a,state:l},null,n),s)window.location.href=n;else{var c=z.indexOf(N.location.key),u=z.slice(0,c+1);u.push(o.key),z=u,C({action:r,location:o})}else window.location.href=n}}))},replace:function(t,n){var r="REPLACE",o=m(t,n,P(),N.location);T.confirmTransitionTo(o,r,h,(function(t){if(t){var n=L(o),a=o.key,l=o.state;if(i)if(e.replaceState({key:a,state:l},null,n),s)window.location.replace(n);else{var c=z.indexOf(N.location.key);-1!==c&&(z[c]=o.key),C({action:r,location:o})}else window.location.replace(n)}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(t){void 0===t&&(t=!1);var e=T.setPrompt(t);return j||(B(1),j=!0),function(){return j&&(j=!1,B(-1)),e()}},listen:function(t){var e=T.appendListener(t);return B(1),function(){B(-1),e()}}};return N}var E="hashchange",k={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+h(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:h,decodePath:u},slash:{encodePath:u,decodePath:u}};function P(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function T(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function C(t){window.location.replace(P(window.location.href)+"#"+t)}function M(t){void 0===t&&(t={}),g||Object(c.a)(!1);var e=window.history,i=(window.navigator.userAgent.indexOf("Firefox"),t),r=i.getUserConfirmation,o=void 0===r?_:r,a=i.hashType,s=void 0===a?"slash":a,l=t.basename?p(u(t.basename)):"",h=k[s],y=h.encodePath,b=h.decodePath;function x(){var t=b(T());return l&&(t=d(t,l)),m(t)}var w=v();function S(t){Object(n.a)(N,t),N.length=e.length,w.notifyListeners(N.location,N.action)}var M=!1,A=null;function O(){var t,e,i=T(),n=y(i);if(i!==n)C(n);else{var r=x(),a=N.location;if(!M&&(e=r,(t=a).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(A===f(r))return;A=null,function(t){if(M)M=!1,S();else{var e="POP";w.confirmTransitionTo(t,e,o,(function(i){i?S({action:e,location:t}):function(t){var e=N.location,i=L.lastIndexOf(f(e));-1===i&&(i=0);var n=L.lastIndexOf(f(t));-1===n&&(n=0);var r=i-n;r&&(M=!0,R(r))}(t)}))}}(r)}}var I=T(),D=y(I);I!==D&&C(D);var z=x(),L=[f(z)];function R(t){e.go(t)}var F=0;function B(t){1===(F+=t)&&1===t?window.addEventListener(E,O):0===F&&window.removeEventListener(E,O)}var j=!1;var N={length:e.length,action:"POP",location:z,createHref:function(t){var e=document.querySelector("base"),i="";return e&&e.getAttribute("href")&&(i=P(window.location.href)),i+"#"+y(l+f(t))},push:function(t,e){var i="PUSH",n=m(t,void 0,void 0,N.location);w.confirmTransitionTo(n,i,o,(function(t){if(t){var e=f(n),r=y(l+e);if(T()!==r){A=e,function(t){window.location.hash=t}(r);var o=L.lastIndexOf(f(N.location)),a=L.slice(0,o+1);a.push(e),L=a,S({action:i,location:n})}else S()}}))},replace:function(t,e){var i="REPLACE",n=m(t,void 0,void 0,N.location);w.confirmTransitionTo(n,i,o,(function(t){if(t){var e=f(n),r=y(l+e);T()!==r&&(A=e,C(r));var o=L.indexOf(f(N.location));-1!==o&&(L[o]=e),S({action:i,location:n})}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(t){void 0===t&&(t=!1);var e=w.setPrompt(t);return j||(B(1),j=!0),function(){return j&&(j=!1,B(-1)),e()}},listen:function(t){var e=w.appendListener(t);return B(1),function(){B(-1),e()}}};return N}function A(t,e,i){return Math.min(Math.max(t,e),i)}function O(t){void 0===t&&(t={});var e=t,i=e.getUserConfirmation,r=e.initialEntries,o=void 0===r?["/"]:r,a=e.initialIndex,s=void 0===a?0:a,l=e.keyLength,c=void 0===l?6:l,u=v();function h(t){Object(n.a)(b,t),b.length=b.entries.length,u.notifyListeners(b.location,b.action)}function d(){return Math.random().toString(36).substr(2,c)}var p=A(s,0,o.length-1),y=o.map((function(t){return m(t,void 0,"string"===typeof t?d():t.key||d())})),g=f;function _(t){var e=A(b.index+t,0,b.entries.length-1),n=b.entries[e];u.confirmTransitionTo(n,"POP",i,(function(t){t?h({action:"POP",location:n,index:e}):h()}))}var b={length:y.length,action:"POP",location:y[p],index:p,entries:y,createHref:g,push:function(t,e){var n="PUSH",r=m(t,e,d(),b.location);u.confirmTransitionTo(r,n,i,(function(t){if(t){var e=b.index+1,i=b.entries.slice(0);i.length>e?i.splice(e,i.length-e,r):i.push(r),h({action:n,location:r,index:e,entries:i})}}))},replace:function(t,e){var n="REPLACE",r=m(t,e,d(),b.location);u.confirmTransitionTo(r,n,i,(function(t){t&&(b.entries[b.index]=r,h({action:n,location:r}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(t){var e=b.index+t;return e>=0&&e<b.entries.length},block:function(t){return void 0===t&&(t=!1),u.setPrompt(t)},listen:function(t){return u.appendListener(t)}};return b}},,function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(331),e),r(i(332),e),r(i(333),e)},function(t,e,i){"use strict";function n(t){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.d(e,"a",(function(){return n}))},function(t,e,i){var n=i(92),r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")();t.exports=o},function(t,e,i){"use strict";e.a=function(t,e){}},function(t,e,i){"use strict";function n(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function r(t,e){var i=e.distance,n=e.left,r=e.right,o=e.up,a=e.down,s=e.top,c=e.bottom,u=e.big,h=e.mirror,p=e.opposite,f=(i?i.toString():0)+((n?1:0)|(r?2:0)|(s||a?4:0)|(c||o?8:0)|(h?16:0)|(p?32:0)|(t?64:0)|(u?128:0));if(d.hasOwnProperty(f))return d[f];var m=n||r||o||a||s||c,y=void 0,v=void 0;if(m){if(!h!=!(t&&p)){var g=[r,n,c,s,a,o];n=g[0],r=g[1],s=g[2],c=g[3],o=g[4],a=g[5]}var _=i||(u?"2000px":"100%");y=n?"-"+_:r?_:"0",v=a||s?"-"+_:o||c?_:"0"}return d[f]=(0,l.animation)((t?"to":"from")+" {opacity: 0;"+(m?" transform: translate3d("+y+", "+v+", 0);":"")+"}\n     "+(t?"from":"to")+" {opacity: 1;transform: none;} "),d[f]}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.defaults,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.children,o=(t.out,t.forever),a=t.timeout,s=t.duration,c=void 0===s?l.defaults.duration:s,h=t.delay,d=void 0===h?l.defaults.delay:h,p=t.count,f=void 0===p?l.defaults.count:p,m=n(t,["children","out","forever","timeout","duration","delay","count"]),y={make:r,duration:void 0===a?c:a,delay:d,forever:o,count:f,style:{animationFillMode:"both"},reverse:m.left};return e?(0,u.default)(m,y,y,i):y}Object.defineProperty(e,"__esModule",{value:!0});var a,s=i(3),l=i(128),c=i(414),u=(a=c)&&a.__esModule?a:{default:a},h={out:s.bool,left:s.bool,right:s.bool,top:s.bool,bottom:s.bool,big:s.bool,mirror:s.bool,opposite:s.bool,duration:s.number,timeout:s.number,distance:s.string,delay:s.number,count:s.number,forever:s.bool},d={};o.propTypes=h,e.default=o,t.exports=e.default},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.ValueWithRandom=void 0;var o=i(275),a=function(){function t(){n(this,t),this.random=new o.Random,this.value=0}return r(t,[{key:"load",value:function(t){t&&("boolean"===typeof t.random?this.random.enable=t.random:this.random.load(t.random),void 0!==t.value&&(this.value=t.value))}}]),t}();e.ValueWithRandom=a},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i(6);var n=i(2),r=i.n(n),o=r.a.createContext({});o.Consumer,o.Provider;function a(t,e){var i=Object(n.useContext)(o);return t||i[e]||e}},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=((n=i(380))&&n.__esModule?n:{default:n}).default;e.default=r},function(t,e,i){t.exports=i(253)},function(t,e,i){var n=i(255),r=i(256),o=i(102),a=i(257);t.exports=function(t,e){return n(t)||r(t,e)||o(t,e)||a()}},function(t,e,i){"use strict";(function(t){i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return o}));const n="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r="undefined"!==typeof window?window:t;"undefined"!==typeof t||window,"undefined"!==typeof document&&document;let o=!1;try{const t={get passive(){return o=!0,!0}};r.addEventListener("test",t,t),r.removeEventListener("test",t,t)}catch(a){}}).call(this,i(44))},function(t,e,i){var n=i(160),r=i(165);t.exports=function(t,e){var i=r(t,e);return n(i)?i:void 0}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(223),e),r(i(224),e),r(i(225),e),r(i(226),e),r(i(227),e)},function(t,e,i){"use strict";i.d(e,"a",(function(){return h})),i.d(e,"b",(function(){return b}));var n=i(12),r=i(20),o=i(2),a=i.n(o),s=i(30),l=(i(3),i(6)),c=i(14),u=i(25);a.a.Component;var h=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).history=Object(s.b)(e.props),e}return Object(r.a)(e,t),e.prototype.render=function(){return a.a.createElement(n.b,{history:this.history,children:this.props.children})},e}(a.a.Component);var d=function(t,e){return"function"===typeof t?t(e):t},p=function(t,e){return"string"===typeof t?Object(s.c)(t,null,null,e):t},f=function(t){return t},m=a.a.forwardRef;"undefined"===typeof m&&(m=f);var y=m((function(t,e){var i=t.innerRef,n=t.navigate,r=t.onClick,o=Object(c.a)(t,["innerRef","navigate","onClick"]),s=o.target,u=Object(l.a)({},o,{onClick:function(t){try{r&&r(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),n())}});return u.ref=f!==m&&e||i,a.a.createElement("a",u)}));var v=m((function(t,e){var i=t.component,r=void 0===i?y:i,o=t.replace,s=t.to,h=t.innerRef,v=Object(c.a)(t,["component","replace","to","innerRef"]);return a.a.createElement(n.d.Consumer,null,(function(t){t||Object(u.a)(!1);var i=t.history,n=p(d(s,t.location),t.location),c=n?i.createHref(n):"",y=Object(l.a)({},v,{href:c,navigate:function(){var e=d(s,t.location);(o?i.replace:i.push)(e)}});return f!==m?y.ref=e||h:y.innerRef=h,a.a.createElement(r,y)}))})),g=function(t){return t},_=a.a.forwardRef;"undefined"===typeof _&&(_=g);var b=_((function(t,e){var i=t["aria-current"],r=void 0===i?"page":i,o=t.activeClassName,s=void 0===o?"active":o,h=t.activeStyle,f=t.className,m=t.exact,y=t.isActive,b=t.location,x=t.sensitive,w=t.strict,S=t.style,E=t.to,k=t.innerRef,P=Object(c.a)(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(n.d.Consumer,null,(function(t){t||Object(u.a)(!1);var i=b||t.location,o=p(d(E,i),i),c=o.pathname,T=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=T?Object(n.e)(i.pathname,{path:T,exact:m,sensitive:x,strict:w}):null,M=!!(y?y(C,i):C),A=M?function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter((function(t){return t})).join(" ")}(f,s):f,O=M?Object(l.a)({},S,{},h):S,I=Object(l.a)({"aria-current":M&&r||null,className:A,style:O,to:o},P);return g!==_?I.ref=e||k:I.innerRef=k,a.a.createElement(v,I)}))}))},function(t,e,i){!function(t){"use strict";var e="1.7.1";function i(t){var e,i,n,r;for(i=1,n=arguments.length;i<n;i++)for(e in r=arguments[i])t[e]=r[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,i){var n,r,o,a;return a=function(){n=!1,r&&(o.apply(i,r),r=!1)},o=function(){n?r=arguments:(t.apply(i,arguments),setTimeout(a,e),n=!0)}}function l(t,e,i){var n=e[1],r=e[0],o=n-r;return t===n&&i?t:((t-r)%o+o)%o+r}function c(){return!1}function u(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function p(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,i){var n=[];for(var r in t)n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function y(t,e){return t.replace(m,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"===typeof n&&(n=n(e)),n}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function g(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,i=Math.max(0,16-(e-x));return x=e+i,window.setTimeout(t,i)}var S=window.requestAnimationFrame||b("RequestAnimationFrame")||w,E=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function k(t,e,i){if(!i||S!==w)return S.call(window,r(t,e));t.call(e)}function P(t){t&&E.call(window,t)}var T={extend:i,create:n,bind:r,lastId:o,stamp:a,throttle:s,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:p,getParamString:f,template:y,isArray:v,indexOf:g,emptyImageUrl:_,requestFn:S,cancelFn:E,requestAnimFrame:k,cancelAnimFrame:P};function C(){}function M(t){if("undefined"!==typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}C.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,o=n(r);for(var a in o.constructor=e,e.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(M(t.includes),i.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=i(n(o.options),t.options)),i(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},C.include=function(t){return i(this.prototype,t),this},C.mergeOptions=function(t){return i(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var A={on:function(t,e,i){if("object"===typeof t)for(var n in t)this._on(n,t[n],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._on(t[r],e,i);return this},off:function(t,e,i){if(t)if("object"===typeof t)for(var n in t)this._off(n,t[n],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._off(t[r],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var r={fn:e,ctx:i},o=n,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===i)return;o.push(r)},_off:function(t,e,i){var n,r,o;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(r=0,o=n.length;r<o;r++){var a=n[r];if(a.ctx===i&&a.fn===e)return a.fn=c,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(r,1)}}else{for(r=0,o=n.length;r<o;r++)n[r].fn=c;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var r=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var l=o[a];l.fn.call(l.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"===typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=r((function(){this.off(t,e,i).off(t,o,i)}),this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var O=C.extend(A);function I(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var D=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function z(t,e,i){return t instanceof I?t:v(t)?new I(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new I(t.x,t.y):new I(t,e,i)}function R(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function F(t,e){return!t||t instanceof R?t:new R(t,e)}function B(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function j(t,e){return t instanceof B?t:new B(t,e)}function N(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function V(t,e,i){return t instanceof N?t:v(t)&&"object"!==typeof t[0]?3===t.length?new N(t[0],t[1],t[2]):2===t.length?new N(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new N(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new N(t,e,i)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(t){return this.clone()._add(z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new I(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new I(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(t){var e=(t=z(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=z(t)).x===this.x&&t.y===this.y},contains:function(t){return t=z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},R.prototype={extend:function(t){return t=z(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new I(this.min.x,this.max.y)},getTopRight:function(){return new I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"===typeof t[0]||t instanceof I?z(t):F(t))instanceof R?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=F(t);var e=this.min,i=this.max,n=t.min,r=t.max,o=r.x>=e.x&&n.x<=i.x,a=r.y>=e.y&&n.y<=i.y;return o&&a},overlaps:function(t){t=F(t);var e=this.min,i=this.max,n=t.min,r=t.max,o=r.x>e.x&&n.x<i.x,a=r.y>e.y&&n.y<i.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},B.prototype={extend:function(t){var e,i,n=this._southWest,r=this._northEast;if(t instanceof N)e=t,i=t;else{if(!(t instanceof B))return t?this.extend(V(t)||j(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||r?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new N(e.lat,e.lng),this._northEast=new N(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,r=Math.abs(e.lng-i.lng)*t;return new B(new N(e.lat-n,e.lng-r),new N(i.lat+n,i.lng+r))},getCenter:function(){return new N((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new N(this.getNorth(),this.getWest())},getSouthEast:function(){return new N(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof N||"lat"in t?V(t):j(t);var e,i,n=this._southWest,r=this._northEast;return t instanceof B?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=r.lat&&e.lng>=n.lng&&i.lng<=r.lng},intersects:function(t){t=j(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&n.lat<=i.lat,a=r.lng>=e.lng&&n.lng<=i.lng;return o&&a},overlaps:function(t){t=j(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&n.lat<i.lat,a=r.lng>e.lng&&n.lng<i.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},N.prototype={equals:function(t,e){return!!t&&(t=V(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return G.distance(this,V(t))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new N(this.lat,this.lng,this.alt)}};var U={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new R(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new N(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,r=e.lng-i.lng;if(0===n&&0===r)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new B(new N(o.lat-n,o.lng-r),new N(a.lat-n,a.lng-r))}},G=i({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),s=o*o+Math.cos(n)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),q=6378137,Z={R:q,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=Math.sin(n*e);return new I(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new N((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=q*Math.PI;return new R([-t,-t],[t,t])}()};function H(t,e,i,n){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function W(t,e,i,n){return new H(t,e,i,n)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new I((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X=i({},G,{code:"EPSG:3857",projection:Z,transformation:function(){var t=.5/(Math.PI*Z.R);return W(t,.5,-t,.5)}()}),Y=i({},X,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){var i,n,r,o,a,s,l="";for(i=0,r=t.length;i<r;i++){for(n=0,o=(a=t[i]).length;n<o;n++)l+=(n?"L":"M")+(s=a[n]).x+" "+s.y;l+=e?Mt?"z":"x":""}return l||"M0 0"}var J=document.documentElement.style,Q="ActiveXObject"in window,tt=Q&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=Ot("webkit"),nt=Ot("android"),rt=Ot("android 2")||Ot("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=nt&&Ot("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,lt=!et&&Ot("chrome"),ct=Ot("gecko")&&!it&&!st&&!Q,ut=!lt&&Ot("safari"),ht=Ot("phantom"),dt="OTransition"in J,pt=0===navigator.platform.indexOf("Win"),ft=Q&&"transition"in J,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,yt="MozPerspective"in J,vt=!window.L_DISABLE_3D&&(ft||mt||yt)&&!dt&&!ht,gt="undefined"!==typeof orientation||Ot("mobile"),_t=gt&&it,bt=gt&&mt,xt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!xt),St=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Et=gt&&st,kt=gt&&ct,Pt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(i){}return t}(),Ct=!!document.createElement("canvas").getContext,Mt=!(!document.createElementNS||!K("svg").createSVGRect),At=!Mt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(i){return!1}}();function Ot(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var It={ie:Q,ielt9:tt,edge:et,webkit:it,android:nt,android23:rt,androidStock:at,opera:st,chrome:lt,gecko:ct,safari:ut,phantom:ht,opera12:dt,win:pt,ie3d:ft,webkit3d:mt,gecko3d:yt,any3d:vt,mobile:gt,mobileWebkit:_t,mobileWebkit3d:bt,msPointer:xt,pointer:wt,touch:St,mobileOpera:Et,mobileGecko:kt,retina:Pt,passiveEvents:Tt,canvas:Ct,svg:Mt,vml:At},Dt=xt?"MSPointerDown":"pointerdown",zt=xt?"MSPointerMove":"pointermove",Lt=xt?"MSPointerUp":"pointerup",Rt=xt?"MSPointerCancel":"pointercancel",Ft={},Bt=!1;function jt(t,e,i,n){return"touchstart"===e?Vt(t,i,n):"touchmove"===e?Ht(t,i,n):"touchend"===e&&Wt(t,i,n),this}function Nt(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(Dt,n,!1):"touchmove"===e?t.removeEventListener(zt,n,!1):"touchend"===e&&(t.removeEventListener(Lt,n,!1),t.removeEventListener(Rt,n,!1)),this}function Vt(t,e,i){var n=r((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Ge(t),Zt(t,e)}));t["_leaflet_touchstart"+i]=n,t.addEventListener(Dt,n,!1),Bt||(document.addEventListener(Dt,Ut,!0),document.addEventListener(zt,Gt,!0),document.addEventListener(Lt,qt,!0),document.addEventListener(Rt,qt,!0),Bt=!0)}function Ut(t){Ft[t.pointerId]=t}function Gt(t){Ft[t.pointerId]&&(Ft[t.pointerId]=t)}function qt(t){delete Ft[t.pointerId]}function Zt(t,e){for(var i in t.touches=[],Ft)t.touches.push(Ft[i]);t.changedTouches=[t],e(t)}function Ht(t,e,i){var n=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Zt(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(zt,n,!1)}function Wt(t,e,i){var n=function(t){Zt(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(Lt,n,!1),t.addEventListener(Rt,n,!1)}var Xt=xt?"MSPointerDown":wt?"pointerdown":"touchstart",Yt=xt?"MSPointerUp":wt?"pointerup":"touchend",Kt="_leaflet_";function $t(t,e,i){var n,r,o=!1,a=250;function s(t){if(wt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),i=e-(n||e);r=t.touches?t.touches[0]:t,o=i>0&&i<=a,n=e}function l(t){if(o&&!r.cancelBubble){if(wt){if("mouse"===t.pointerType)return;var i,a,s={};for(a in r)i=r[a],s[a]=i&&i.bind?i.bind(r):i;r=s}r.type="dblclick",r.button=0,e(r),n=null}}return t[Kt+Xt+i]=s,t[Kt+Yt+i]=l,t[Kt+"dblclick"+i]=e,t.addEventListener(Xt,s,!!Tt&&{passive:!1}),t.addEventListener(Yt,l,!!Tt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Jt(t,e){var i=t[Kt+Xt+e],n=t[Kt+Yt+e],r=t[Kt+"dblclick"+e];return t.removeEventListener(Xt,i,!!Tt&&{passive:!1}),t.removeEventListener(Yt,n,!!Tt&&{passive:!1}),t.removeEventListener("dblclick",r,!1),this}var Qt,te,ee,ie,ne,re=xe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oe=xe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ae="webkitTransition"===oe||"OTransition"===oe?oe+"End":"transitionend";function se(t){return"string"===typeof t?document.getElementById(t):t}function le(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function ce(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function ue(t){var e=t.parentNode;e&&e.removeChild(t)}function he(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function de(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function pe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function fe(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=ge(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function me(t,e){if(void 0!==t.classList)for(var i=d(e),n=0,r=i.length;n<r;n++)t.classList.add(i[n]);else if(!fe(t,e)){var o=ge(t);ve(t,(o?o+" ":"")+e)}}function ye(t,e){void 0!==t.classList?t.classList.remove(e):ve(t,h((" "+ge(t)+" ").replace(" "+e+" "," ")))}function ve(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ge(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function _e(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&be(t,e)}function be(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(r){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}function xe(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function we(t,e,i){var n=e||new I(0,0);t.style[re]=(ft?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function Se(t,e){t._leaflet_pos=e,vt?we(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ee(t){return t._leaflet_pos||new I(0,0)}if("onselectstart"in document)Qt=function(){De(window,"selectstart",Ge)},te=function(){Le(window,"selectstart",Ge)};else{var ke=xe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qt=function(){if(ke){var t=document.documentElement.style;ee=t[ke],t[ke]="none"}},te=function(){ke&&(document.documentElement.style[ke]=ee,ee=void 0)}}function Pe(){De(window,"dragstart",Ge)}function Te(){Le(window,"dragstart",Ge)}function Ce(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Me(),ie=t,ne=t.style.outline,t.style.outline="none",De(window,"keydown",Me))}function Me(){ie&&(ie.style.outline=ne,ie=void 0,ne=void 0,Le(window,"keydown",Me))}function Ae(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Oe(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ie={TRANSFORM:re,TRANSITION:oe,TRANSITION_END:ae,get:se,getStyle:le,create:ce,remove:ue,empty:he,toFront:de,toBack:pe,hasClass:fe,addClass:me,removeClass:ye,setClass:ve,getClass:ge,setOpacity:_e,testProp:xe,setTransform:we,setPosition:Se,getPosition:Ee,disableTextSelection:Qt,enableTextSelection:te,disableImageDrag:Pe,enableImageDrag:Te,preventOutline:Ce,restoreOutline:Me,getSizedParentNode:Ae,getScale:Oe};function De(t,e,i,n){if("object"===typeof e)for(var r in e)Be(t,r,e[r],i);else for(var o=0,a=(e=d(e)).length;o<a;o++)Be(t,e[o],i,n);return this}var ze="_leaflet_events";function Le(t,e,i,n){if("object"===typeof e)for(var r in e)je(t,r,e[r],i);else if(e)for(var o=0,a=(e=d(e)).length;o<a;o++)je(t,e[o],i,n);else{for(var s in t[ze])je(t,s,t[ze][s]);delete t[ze]}return this}function Re(){if(wt)return!(et||ut)}var Fe={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Be(t,e,i,n){var r=e+a(i)+(n?"_"+a(n):"");if(t[ze]&&t[ze][r])return this;var o=function(e){return i.call(n||t,e||window.event)},s=o;wt&&0===e.indexOf("touch")?jt(t,e,o,r):St&&"dblclick"===e&&!Re()?$t(t,o,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Fe[e]||e,o,!!Tt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,$e(t,e)&&s(e)},t.addEventListener(Fe[e],o,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,o),t[ze]=t[ze]||{},t[ze][r]=o}function je(t,e,i,n){var r=e+a(i)+(n?"_"+a(n):""),o=t[ze]&&t[ze][r];if(!o)return this;wt&&0===e.indexOf("touch")?Nt(t,e,r):St&&"dblclick"===e&&!Re()?Jt(t,r):"removeEventListener"in t?t.removeEventListener(Fe[e]||e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o),t[ze][r]=null}function Ne(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ke(t),this}function Ve(t){return Be(t,"wheel",Ne),this}function Ue(t){return De(t,"mousedown touchstart dblclick",Ne),Be(t,"click",Ye),this}function Ge(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function qe(t){return Ge(t),Ne(t),this}function Ze(t,e){if(!e)return new I(t.clientX,t.clientY);var i=Oe(e),n=i.boundingClientRect;return new I((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var He=pt&&lt?2*window.devicePixelRatio:ct?window.devicePixelRatio:1;function We(t){return et?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/He:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Xe={};function Ye(t){Xe[t.type]=!0}function Ke(t){var e=Xe[t.type];return Xe[t.type]=!1,e}function $e(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t}var Je={on:De,off:Le,stopPropagation:Ne,disableScrollPropagation:Ve,disableClickPropagation:Ue,preventDefault:Ge,stop:qe,getMousePosition:Ze,getWheelDelta:We,fakeStop:Ye,skipped:Ke,isExternalTarget:$e,addListener:De,removeListener:Le},Qe=O.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Ee(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Se(this._el,i),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ti=O.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(V(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oe&&vt&&!Et&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),De(this._proxy,ae,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(V(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof I?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/n),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var i=z(e.paddingTopLeft||e.padding||[0,0]),n=z(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,i.add(n));if((r="number"===typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=z(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){me(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!vt)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),a=this._zoom;t=V(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,e),c=r.distanceTo(n)||1,u=1.42,h=u*u;function d(t){var e=(l*l-s*s+(t?-1:1)*h*h*c*c)/(2*(t?l:s)*h*c),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return p(t)/f(t)}var y=d(0);function v(t){return s*(f(y)/f(y+u*t))}function g(t){return s*(f(y)*m(y+u*t)-p(y))/h}function _(t){return 1-Math.pow(1-t,1.5)}var b=Date.now(),x=(d(1)-y)/u,w=i.duration?1e3*i.duration:1e3*x*.8;function S(){var i=(Date.now()-b)/w,o=_(i)*x;i<=1?(this._flyToFrame=k(S,this),this._move(this.unproject(n.add(r.subtract(n).multiplyBy(g(o)/c)),a),this.getScaleZoom(s/v(o),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),S.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,j(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=z((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=z(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),c=F([s.min.add(i),s.max.subtract(n)]);if(!c.contains(a)){this._enforcingBounds=!0;var u=o.subtract(a),h=z(a.x+u.x,a.y+u.y);(a.x<c.min.x||a.x>c.max.x)&&(h.x=o.x-u.x,u.x>0?h.x+=l.x-i.x:h.x-=l.x-n.x),(a.y<c.min.y||a.y>c.max.y)&&(h.y=o.y-u.y,u.y>0?h.y+=l.y-i.y:h.y-=l.y-n.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),o=e.divideBy(2).round(),a=n.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),n=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new N(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var r=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(r,n.maxZoom):r)}var o={latlng:e,bounds:i,timestamp:t.timestamp};for(var a in t.coords)"number"===typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ue(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ue(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ce("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new B(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=j(t),i=z(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),c=F(this.project(s,n),this.project(a,n)).getSize(),u=vt?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,p=e?Math.max(h,d):Math.min(h,d);return n=this.getScaleZoom(p,n),u&&(n=Math.round(n/(u/100))*(u/100),n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(r,Math.min(o,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new R(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(V(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(z(t),e)},layerPointToLatLng:function(t){var e=z(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(V(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(V(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(V(t),V(e))},containerPointToLayerPoint:function(t){return z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(z(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(t)))},mouseEventToContainerPoint:function(t){return Ze(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=se(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");De(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,me(t,"leaflet-container"+(St?" leaflet-touch":"")+(Pt?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=le(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Se(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(t.markerPane,"leaflet-zoom-hide"),me(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Se(this._mapPane,new I(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Se(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Le:De;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=k((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((i=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){s=!0;break}if(i&&i.listens(e,!0)){if(r&&!$e(o,t))break;if(n.push(i),r)break}if(o===this._container)break;o=o.parentNode}return n.length||s||r||!$e(o,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!Ke(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ce(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var r=i({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var o=n[0];"contextmenu"===e&&o.listens(e,!0)&&Ge(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(e,a,!0),a.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==g(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ee(this._mapPane)||new I(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return F([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),r=this.getSize().divideBy(2),o=new R(n.subtract(r),n.add(r)),a=this._getBoundsOffset(o,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new R(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=F(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),r=n.min.subtract(t.min),o=n.max.subtract(t.max);return new I(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=vt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=ce("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=re,i=this._proxy.style[e];we(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ue(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();we(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(r))&&(k((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),k((function(){this._moveEnd(!0)}),this))}});function ei(t,e){return new ti(t,e)}var ii=C.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return me(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ue(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),ni=function(t){return new ii(t)};ti.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ce("div",e+"control-container",this._container);function n(n,r){var o=e+n+" "+e+r;t[n+r]=ce("div",o,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ue(this._controlCorners[t]);ue(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ri=ii.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ii.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ce("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ue(e),Ve(e);var n=this._section=ce("section",t+"-list");i&&(this._map.on("click",this.collapse,this),nt||De(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ce("a",t+"-toggle",e);r.href="#",r.title="Layers",St?(De(r,"click",qe),De(r,"click",this.expand,this)):De(r,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ce("div",t+"-base",n),this._separator=ce("div",t+"-separator",n),this._overlaysList=ce("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;he(this._baseLayersList),he(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,r=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,r+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+a(this),n),this._layerControlInputs.push(e),e.layerId=a(t.layer),De(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");return i.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;r>=0;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),oi=function(t,e,i){return new ri(t,e,i)},ai=ii.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ce("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,r){var o=ce("a",i,n);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Ue(o),De(o,"click",qe),De(o,"click",r,this),De(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ye(this._zoomInButton,e),ye(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&me(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&me(this._zoomInButton,e)}});ti.mergeOptions({zoomControl:!0}),ti.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new ai,this.addControl(this.zoomControl))}));var si=function(t){return new ai(t)},li=ii.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ce("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ce("div",e,i)),t.imperial&&(this._iScale=ce("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,r=3.2808399*t;r>5280?(e=r/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(r),this._updateScale(this._iScale,n+" ft",n/r))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),ci=function(t){return new li(t)},ui=ii.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ce("div","leaflet-control-attribution"),Ue(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});ti.mergeOptions({attributionControl:!0}),ti.addInitHook((function(){this.options.attributionControl&&(new ui).addTo(this)}));var hi=function(t){return new ui(t)};ii.Layers=ri,ii.Zoom=ai,ii.Scale=li,ii.Attribution=ui,ni.layers=oi,ni.zoom=si,ni.scale=ci,ni.attribution=hi;var di=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});di.addTo=function(t,e){return t.addHandler(e,this),this};var pi,fi={Events:A},mi=St?"touchstart mousedown":"mousedown",yi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},vi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},gi=O.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){p(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(De(this._dragStartTarget,mi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(gi._dragging===this&&this.finishDrag(),Le(this._dragStartTarget,mi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!fe(this._element,"leaflet-zoom-anim")&&!(gi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(gi._dragging=this,this._preventOutline&&Ce(this._element),Pe(),Qt(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,i=Ae(this._element);this._startPoint=new I(e.clientX,e.clientY),this._parentScale=Oe(i),De(document,vi[t.type],this._onMove,this),De(document,yi[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new I(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ge(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Ee(this._element).subtract(i),me(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,P(this._animRequest),this._lastEvent=t,this._animRequest=k(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Se(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ye(document.body,"leaflet-dragging"),this._lastTarget&&(ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vi)Le(document,vi[t],this._onMove,this),Le(document,yi[t],this._onUp,this);Te(),te(),this._moved&&this._moving&&(P(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,gi._dragging=!1}});function _i(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=wi(t=Ei(t,i),i)}function bi(t,e,i){return Math.sqrt(Mi(t,e,i,!0))}function xi(t,e,i){return Mi(t,e,i)}function wi(t,e){var i=t.length,n=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,Si(t,n,e,0,i-1);var r,o=[];for(r=0;r<i;r++)n[r]&&o.push(t[r]);return o}function Si(t,e,i,n,r){var o,a,s,l=0;for(a=n+1;a<=r-1;a++)(s=Mi(t[a],t[n],t[r],!0))>l&&(o=a,l=s);l>i&&(e[o]=1,Si(t,e,i,n,o),Si(t,e,i,o,r))}function Ei(t,e){for(var i=[t[0]],n=1,r=0,o=t.length;n<o;n++)Ci(t[n],t[r])>e&&(i.push(t[n]),r=n);return r<o-1&&i.push(t[o-1]),i}function ki(t,e,i,n,r){var o,a,s,l=n?pi:Ti(t,i),c=Ti(e,i);for(pi=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=Ti(a=Pi(t,e,o=l||c,i,r),i),o===l?(t=a,l=s):(e=a,c=s)}}function Pi(t,e,i,n,r){var o,a,s=e.x-t.x,l=e.y-t.y,c=n.min,u=n.max;return 8&i?(o=t.x+s*(u.y-t.y)/l,a=u.y):4&i?(o=t.x+s*(c.y-t.y)/l,a=c.y):2&i?(o=u.x,a=t.y+l*(u.x-t.x)/s):1&i&&(o=c.x,a=t.y+l*(c.x-t.x)/s),new I(o,a,r)}function Ti(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Ci(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Mi(t,e,i,n){var r,o=e.x,a=e.y,s=i.x-o,l=i.y-a,c=s*s+l*l;return c>0&&((r=((t.x-o)*s+(t.y-a)*l)/c)>1?(o=i.x,a=i.y):r>0&&(o+=s*r,a+=l*r)),s=t.x-o,l=t.y-a,n?s*s+l*l:new I(o,a)}function Ai(t){return!v(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function Oi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ai(t)}var Ii={simplify:_i,pointToSegmentDistance:bi,closestPointOnSegment:xi,clipSegment:ki,_getEdgeIntersection:Pi,_getBitCode:Ti,_sqClosestPointOnSegment:Mi,isFlat:Ai,_flat:Oi};function Di(t,e,i){var n,r,o,a,s,l,c,u,h,d=[1,4,2,8];for(r=0,c=t.length;r<c;r++)t[r]._code=Ti(t[r],e);for(a=0;a<4;a++){for(u=d[a],n=[],r=0,o=(c=t.length)-1;r<c;o=r++)s=t[r],l=t[o],s._code&u?l._code&u||((h=Pi(l,s,u,e,i))._code=Ti(h,e),n.push(h)):(l._code&u&&((h=Pi(l,s,u,e,i))._code=Ti(h,e),n.push(h)),n.push(s));t=n}return t}var zi={clipPolygon:Di},Li={project:function(t){return new I(t.lng,t.lat)},unproject:function(t){return new N(t.y,t.x)},bounds:new R([-180,-90],[180,90])},Ri={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=o*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),o/2);return n=-i*Math.log(Math.max(s,1e-10)),new I(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/n),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new N(s*i,t.x*i/n)}},Fi={LonLat:Li,Mercator:Ri,SphericalMercator:Z},Bi=i({},G,{code:"EPSG:3395",projection:Ri,transformation:function(){var t=.5/(Math.PI*Ri.R);return W(t,.5,-t,.5)}()}),ji=i({},G,{code:"EPSG:4326",projection:Li,transformation:W(1/180,1,-1/180,.5)}),Ni=i({},U,{projection:Li,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});U.Earth=G,U.EPSG3395=Bi,U.EPSG3857=X,U.EPSG900913=Y,U.EPSG4326=ji,U.Simple=Ni;var Vi=O.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});ti.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?v(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ui=Vi.extend({initialize:function(t,e){var i,n;if(p(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"===typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Gi=function(t,e){return new Ui(t,e)},qi=Ui.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ui.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ui.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new B;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Zi=function(t,e){return new qi(t,e)},Hi=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"===typeof n&&(n=[n,n]);var r=z(n),o=z("shadow"===e&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Pt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Wi(t){return new Hi(t)}var Xi=Hi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Xi.imagePath||(Xi.imagePath=this._detectIconPath()),(this.options.imagePath||Xi.imagePath)+Hi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ce("div","leaflet-default-icon-path",document.body),e=le(t,"background-image")||le(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Yi=di.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new gi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=Ee(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),l=F(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!l.contains(o)){var c=z((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Se(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=k(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=Ee(e._icon),r=e._map.layerPointToLatLng(n);i&&Se(i,n),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ki=Vi.extend({options:{icon:new Xi,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=V(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=V(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),me(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(me(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ue(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ue(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Se(this._icon,t),this._shadow&&Se(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yi)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yi(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&_e(this._icon,t),this._shadow&&_e(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $i(t,e){return new Ki(t,e)}var Ji=Vi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Qi=Ji.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=V(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=V(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Ji.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new R(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tn(t,e){return new Qi(t,e)}var en=Qi.extend({initialize:function(t,e,n){if("number"===typeof e&&(e=i({},n,{radius:e})),p(this,e),this._latlng=V(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ji.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===G.distance){var r=Math.PI/180,o=this._mRadius/G.R/r,a=i.project([e+o,t]),s=i.project([e-o,t]),l=a.add(s).divideBy(2),c=i.unproject(l).lat,u=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(c*r))/(Math.cos(e*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([c,t-u]).x,this._radiusY=l.y-a.y}else{var h=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(h).x}this._updateBounds()}});function nn(t,e,i){return new en(t,e,i)}var rn=Ji.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,r=null,o=Mi,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var h=o(t,e=l[c-1],i=l[c],!0);h<n&&(n=h,r=o(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,r,o,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,n=0;t<l-1;t++)if(r=s[t],o=s[t+1],(n+=i=r.distanceTo(o))>e)return a=(n-e)/i,this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=V(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new B,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ai(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Ai(t),n=0,r=t.length;n<r;n++)i?(e[n]=V(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new I(t,t);this._pxBounds=new R([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n,r,o=t[0]instanceof N,a=t.length;if(o){for(r=[],n=0;n<a;n++)r[n]=this._map.latLngToLayerPoint(t[n]),i.extend(r[n]);e.push(r)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,r,o,a,s,l=this._parts;for(e=0,n=0,r=this._rings.length;e<r;e++)for(i=0,o=(s=this._rings[e]).length;i<o-1;i++)(a=ki(s[i],s[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===s[i+1]&&i!==o-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=_i(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,o=this._parts.length;i<o;i++)for(n=0,r=(a=(s=this._parts[i]).length)-1;n<a;r=n++)if((e||0!==n)&&bi(t,s[r],s[n])<=l)return!0;return!1}});function on(t,e){return new rn(t,e)}rn._flat=Oi;var an=rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,r,o,a,s,l,c=this._rings[0],u=c.length;if(!u)return null;for(o=a=s=0,t=0,e=u-1;t<u;e=t++)i=c[t],n=c[e],r=i.y*n.x-n.y*i.x,a+=(i.x+n.x)*r,s+=(i.y+n.y)*r,o+=3*r;return l=0===o?c[0]:[a/o,s/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=rn.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof N&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){rn.prototype._setLatLngs.call(this,t),Ai(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ai(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new I(e,e);if(t=new R(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,r=0,o=this._rings.length;r<o;r++)(n=Di(this._rings[r],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,r,o,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(e=this._parts[r]).length)-1;o<l;a=o++)i=e[o],n=e[a],i.y>t.y!==n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||rn.prototype._containsPoint.call(this,t,!0)}});function sn(t,e){return new an(t,e)}var ln=qi.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,r=v(t)?t:t.features;if(r){for(e=0,i=r.length;e<i;e++)((n=r[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=cn(t,o);return a?(a.feature=yn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function cn(t,e){var i,n,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||hn;if(!s&&!a)return null;switch(a.type){case"Point":return un(c,t,i=u(s),e);case"MultiPoint":for(r=0,o=s.length;r<o;r++)i=u(s[r]),l.push(un(c,t,i,e));return new qi(l);case"LineString":case"MultiLineString":return n=dn(s,"LineString"===a.type?0:1,u),new rn(n,e);case"Polygon":case"MultiPolygon":return n=dn(s,"Polygon"===a.type?1:2,u),new an(n,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=cn({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new qi(l);default:throw new Error("Invalid GeoJSON object.")}}function un(t,e,i,n){return t?t(e,i):new Ki(i,n&&n.markersInheritOptions&&n)}function hn(t){return new N(t[1],t[0],t[2])}function dn(t,e,i){for(var n,r=[],o=0,a=t.length;o<a;o++)n=e?dn(t[o],e-1,i):(i||hn)(t[o]),r.push(n);return r}function pn(t,e){return e="number"===typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function fn(t,e,i,n){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?fn(t[o],e-1,i,n):pn(t[o],n));return!e&&i&&r.push(r[0]),r}function mn(t,e){return t.feature?i({},t.feature,{geometry:e}):yn(e)}function yn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var vn={toGeoJSON:function(t){return mn(this,{type:"Point",coordinates:pn(this.getLatLng(),t)})}};function gn(t,e){return new ln(t,e)}Ki.include(vn),en.include(vn),Qi.include(vn),rn.include({toGeoJSON:function(t){var e=!Ai(this._latlngs);return mn(this,{type:(e?"Multi":"")+"LineString",coordinates:fn(this._latlngs,e?1:0,!1,t)})}}),an.include({toGeoJSON:function(t){var e=!Ai(this._latlngs),i=e&&!Ai(this._latlngs[0]),n=fn(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),mn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Ui.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),mn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(i)n.push(r.geometry);else{var o=yn(r);"FeatureCollection"===o.type?n.push.apply(n,o.features):n.push(o)}}})),i?mn(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var _n=gn,bn=Vi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=j(e),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ue(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&de(this._image),this},bringToBack:function(){return this._map&&pe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ce("img");me(e,"leaflet-image-layer"),this._zoomAnimated&&me(e,"leaflet-zoom-animated"),this.options.className&&me(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;we(this._image,i,e)},_reset:function(){var t=this._image,e=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Se(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){_e(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),xn=function(t,e,i){return new bn(t,e,i)},wn=bn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ce("video");if(me(e,"leaflet-image-layer"),this._zoomAnimated&&me(e,"leaflet-zoom-animated"),this.options.className&&me(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=r(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],o=0;o<i.length;o++)n.push(i[o].src);this._url=i.length>0?n:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var s=ce("source");s.src=this._url[a],e.appendChild(s)}}}});function Sn(t,e,i){return new wn(t,e,i)}var En=bn.extend({_initImage:function(){var t=this._image=this._url;me(t,"leaflet-image-layer"),this._zoomAnimated&&me(t,"leaflet-zoom-animated"),this.options.className&&me(t,this.options.className),t.onselectstart=c,t.onmousemove=c}});function kn(t,e,i){return new En(t,e,i)}var Pn=Vi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&_e(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&_e(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(_e(this._container,0),this._removeTimeout=setTimeout(r(ue,void 0,this._container),200)):ue(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=V(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&de(this._container),this},bringToBack:function(){return this._map&&pe(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof Vi||(i=e,e=t),e instanceof qi)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=z(this.options.offset),i=this._getAnchor();this._zoomAnimated?Se(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Tn=Pn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Pn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ji||this._source.on("preclick",Ne))},onRemove:function(t){Pn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ji||this._source.off("preclick",Ne))},getEvents:function(){var t=Pn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ce("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ce("div",t+"-content-wrapper",e);if(this._contentNode=ce("div",t+"-content",i),Ue(e),Ve(this._contentNode),De(e,"contextmenu",Ne),this._tipContainer=ce("div",t+"-tip-container",e),this._tip=ce("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=ce("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",De(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&n>r?(e.height=r+"px",me(t,o)):ye(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Se(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(le(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,r=new I(this._containerLeft,-i-this._containerBottom);r._add(Ee(this._container));var o=t.layerPointToContainerPoint(r),a=z(this.options.autoPanPadding),s=z(this.options.autoPanPaddingTopLeft||a),l=z(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),u=0,h=0;o.x+n+l.x>c.x&&(u=o.x+n-c.x+l.x),o.x-u-s.x<0&&(u=o.x-s.x),o.y+i+l.y>c.y&&(h=o.y+i-c.y+l.y),o.y-h-s.y<0&&(h=o.y-s.y),(u||h)&&t.fire("autopanstart").panBy([u,h])}},_onCloseButtonClick:function(t){this._close(),qe(t)},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Cn=function(t,e){return new Tn(t,e)};ti.mergeOptions({closePopupOnClick:!0}),ti.include({openPopup:function(t,e,i){return t instanceof Tn||(t=new Tn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Vi.include({bindPopup:function(t,e){return t instanceof Tn?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Tn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(qe(t),e instanceof Ji?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Mn=Pn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Pn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Pn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Pn.prototype.getEvents.call(this);return St&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ce("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,r=this._container,o=n.latLngToContainerPoint(n.getCenter()),a=n.layerPointToContainerPoint(t),s=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=z(this.options.offset),h=this._getAnchor();"top"===s?(e=l/2,i=c):"bottom"===s?(e=l/2,i=0):"center"===s?(e=l/2,i=c/2):"right"===s?(e=0,i=c/2):"left"===s?(e=l,i=c/2):a.x<o.x?(s="right",e=0,i=c/2):(s="left",e=l+2*(u.x+h.x),i=c/2),t=t.subtract(z(e,i,!0)).add(u).add(h),ye(r,"leaflet-tooltip-right"),ye(r,"leaflet-tooltip-left"),ye(r,"leaflet-tooltip-top"),ye(r,"leaflet-tooltip-bottom"),me(r,"leaflet-tooltip-"+s),Se(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&_e(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),An=function(t,e){return new Mn(t,e)};ti.include({openTooltip:function(t,e,i){return t instanceof Mn||(t=new Mn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Vi.include({bindTooltip:function(t,e){return t instanceof Mn?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Mn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),St&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(me(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ye(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var On=Hi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(he(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=z(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function In(t){return new On(t)}Hi.Default=Xi;var Dn=Vi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ue(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(de(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof I?t:new I(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),r=0,o=i.length;r<o;r++)e=i[r].style.zIndex,i[r]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt){_e(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var r=this._tiles[n];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);_e(r.el,o),o<1?e=!0:(r.active?i=!0:this._onOpaqueTile(r),r.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(P(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ce("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ue(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],r=this._map;return n||((n=this._levels[t]={}).el=ce("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,r.getCenter(),r.getZoom()),c(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ue(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),o=Math.floor(e/2),a=i-1,s=new I(+r,+o);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>n&&this._retainParent(r,o,a,n))},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new I(r,o);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var o=this.options.updateWhenZooming&&r!==this._tileZoom;n&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),r=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();vt?we(t.el,r,n):Se(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*n);return new R(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(n),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new R(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new I(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p=new I(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:a.push(p)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),r=n.add(i);return[e.unproject(n,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new B(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new I(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ue(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){me(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,tt&&this.options.opacity<1&&_e(t,this.options.opacity),nt&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&k(r(this._tileReady,this,t,null,o)),Se(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(_e(i.el,0),P(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(me(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new I(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new R(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function zn(t){return new Dn(t)}var Ln=Dn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&Pt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return De(i,"load",r(this._tileOnLoad,this,e,i)),De(i,"error",r(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:Pt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return y(this._url,i(e,this.options))},_tileOnLoad:function(t,e){tt?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=_,ue(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",_),Dn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==_))return Dn.prototype._tileReady.call(this,t,e,i)}});function Rn(t,e){return new Ln(t,e)}var Fn=Ln.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var r in e)r in this.options||(n[r]=e[r]);var o=(e=p(this,e)).detectRetina&&Pt?2:1,a=this.getTileSize();n.width=a.x*o,n.height=a.y*o,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ln.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=F(i.project(e[0]),i.project(e[1])),r=n.min,o=n.max,a=(this._wmsVersion>=1.3&&this._crs===ji?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=Ln.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});function Bn(t,e){return new Fn(t,e)}Ln.WMS=Fn,Rn.wms=Bn;var jn=Vi.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=Ee(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=r.multiplyBy(-i).add(n).add(r).subtract(a);vt?we(this._container,s,i):Se(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new R(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Nn=jn.extend({getEvents:function(){var t=jn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){jn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");De(t,"mousemove",this._onMouseMove,this),De(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),De(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,ue(this._container),Le(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){jn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Pt?2:1;Se(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Pt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){jn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),r=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,r,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,r=a[i].length;n<r;n++)o=a[i][n],l[n?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==r&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(e.x,e.y/r,n,0,2*Math.PI,!1),1!==r&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(i=e);i&&(Ye(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ye(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(me(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(r((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Vn(t){return Ct?new Nn(t):null}var Un=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Gn={_initContainer:function(){this._container=ce("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(jn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Un("shape");me(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Un("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ue(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,r=t._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(e||(e=t._stroke=Un("stroke")),r.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(r.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=Un("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){de(t._container)},_bringToBack:function(t){pe(t._container)}},qn=At?Un:K,Zn=jn.extend({getEvents:function(){var t=jn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=qn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ue(this._container),Le(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){jn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Se(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=qn("path");t.options.className&&me(e,t.options.className),t.options.interactive&&me(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ue(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){de(t._path)},_bringToBack:function(t){pe(t._path)}});function Hn(t){return Mt||At?new Zn(t):null}At&&Zn.include(Gn),ti.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Vn(t)||Hn(t)}});var Wn=an.extend({initialize:function(t,e){an.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Xn(t,e){return new Wn(t,e)}Zn.create=qn,Zn.pointsToPath=$,ln.geometryToLayer=cn,ln.coordsToLatLng=hn,ln.coordsToLatLngs=dn,ln.latLngToCoords=pn,ln.latLngsToCoords=fn,ln.getFeature=mn,ln.asFeature=yn,ti.mergeOptions({boxZoom:!0});var Yn=di.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ue(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Qt(),Pe(),this._startPoint=this._map.mouseEventToContainerPoint(t),De(document,{contextmenu:qe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ce("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new R(this._point,this._startPoint),i=e.getSize();Se(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ue(this._box),ye(this._container,"leaflet-crosshair")),te(),Te(),Le(document,{contextmenu:qe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});ti.addInitHook("addHandler","boxZoom",Yn),ti.mergeOptions({doubleClickZoom:!0});var Kn=di.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,r=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});ti.addInitHook("addHandler","doubleClickZoom",Kn),ti.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $n=di.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new gi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ye(this._map._container,"leaflet-grab"),ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,a=Math.abs(r+i)<Math.abs(o+i)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,s=r.multiplyBy(a/o),l=s.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),u=s.multiplyBy(c/l),h=c/(i.inertiaDeceleration*a),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),k((function(){e.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});ti.addInitHook("addHandler","dragging",$n),ti.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Jn=di.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),De(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Le(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},r=this.keyCodes;for(e=0,i=r.left.length;e<i;e++)n[r.left[e]]=[-1*t,0];for(e=0,i=r.right.length;e<i;e++)n[r.right[e]]=[t,0];for(e=0,i=r.down.length;e<i;e++)n[r.down[e]]=[0,t];for(e=0,i=r.up.length;e<i;e++)n[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},r=this.keyCodes;for(e=0,i=r.zoomIn.length;e<i;e++)n[r.zoomIn[e]]=t;for(e=0,i=r.zoomOut.length;e<i;e++)n[r.zoomOut[e]]=-t},_addHooks:function(){De(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=z(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}qe(t)}}});ti.addInitHook("addHandler","keyboard",Jn),ti.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Qn=di.extend({addHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=We(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),n),qe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,o=i?Math.ceil(r/i)*i:r,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});ti.addInitHook("addHandler","scrollWheelZoom",Qn),ti.mergeOptions({tap:!0,tapTolerance:15});var tr=di.extend({addHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ge(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new I(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&me(i,"leaflet-active"),this._holdTimeout=setTimeout(r((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),De(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Le(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&ye(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new I(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});!St||wt&&!ut||ti.addInitHook("addHandler","tap",tr),ti.mergeOptions({touchZoom:St&&!rt,bounceAtZoomLimits:!0});var er=di.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend",this._onTouchEnd,this),Ge(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=k(s,this,!0),Ge(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,P(this._animRequest),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});ti.addInitHook("addHandler","touchZoom",er),ti.BoxZoom=Yn,ti.DoubleClickZoom=Kn,ti.Drag=$n,ti.Keyboard=Jn,ti.ScrollWheelZoom=Qn,ti.Tap=tr,ti.TouchZoom=er,t.version=e,t.Control=ii,t.control=ni,t.Browser=It,t.Evented=O,t.Mixin=fi,t.Util=T,t.Class=C,t.Handler=di,t.extend=i,t.bind=r,t.stamp=a,t.setOptions=p,t.DomEvent=Je,t.DomUtil=Ie,t.PosAnimation=Qe,t.Draggable=gi,t.LineUtil=Ii,t.PolyUtil=zi,t.Point=I,t.point=z,t.Bounds=R,t.bounds=F,t.Transformation=H,t.transformation=W,t.Projection=Fi,t.LatLng=N,t.latLng=V,t.LatLngBounds=B,t.latLngBounds=j,t.CRS=U,t.GeoJSON=ln,t.geoJSON=gn,t.geoJson=_n,t.Layer=Vi,t.LayerGroup=Ui,t.layerGroup=Gi,t.FeatureGroup=qi,t.featureGroup=Zi,t.ImageOverlay=bn,t.imageOverlay=xn,t.VideoOverlay=wn,t.videoOverlay=Sn,t.SVGOverlay=En,t.svgOverlay=kn,t.DivOverlay=Pn,t.Popup=Tn,t.popup=Cn,t.Tooltip=Mn,t.tooltip=An,t.Icon=Hi,t.icon=Wi,t.DivIcon=On,t.divIcon=In,t.Marker=Ki,t.marker=$i,t.TileLayer=Ln,t.tileLayer=Rn,t.GridLayer=Dn,t.gridLayer=zn,t.SVG=Zn,t.svg=Hn,t.Renderer=jn,t.Canvas=Nn,t.canvas=Vn,t.Path=Ji,t.CircleMarker=Qi,t.circleMarker=tn,t.Circle=en,t.circle=nn,t.Polyline=rn,t.polyline=on,t.Polygon=an,t.polygon=sn,t.Rectangle=Wn,t.rectangle=Xn,t.Map=ti,t.map=ei;var ir=window.L;t.noConflict=function(){return window.L=ir,this},window.L=t}(e)},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(51);function r(t,e){var i,r=null!=(i=t.pane)?i:e.pane;return r?Object(n.a)(Object(n.a)({},t),{},{pane:r}):t}},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(55);var r=i(69);function o(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(r.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,i){"use strict";function n(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}i.d(e,"a",(function(){return o}))},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=l,e.canUseDOM=e.slidesOnLeft=e.slidesOnRight=e.siblingDirection=e.getTotalSlides=e.getPostClones=e.getPreClones=e.getTrackLeft=e.getTrackAnimateCSS=e.getTrackCSS=e.checkSpecKeys=e.getSlideCount=e.checkNavigable=e.getNavigableIndexes=e.swipeEnd=e.swipeMove=e.swipeStart=e.keyHandler=e.changeSlide=e.slideHandler=e.initializedState=e.extractObject=e.canGoNext=e.getSwipeDirection=e.getHeight=e.getWidth=e.lazySlidesOnRight=e.lazySlidesOnLeft=e.lazyEndIndex=e.lazyStartIndex=e.getRequiredLazySlides=e.getOnDemandLazySlides=e.safePreventDefault=void 0;var n,r=(n=i(2))&&n.__esModule?n:{default:n};function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t,e,i){return Math.max(e,Math.min(t,i))}var c=function(t){["onTouchStart","onTouchMove","onWheel"].includes(t._reactName)||t.preventDefault()};e.safePreventDefault=c;var u=function(t){for(var e=[],i=h(t),n=d(t),r=i;r<n;r++)t.lazyLoadedList.indexOf(r)<0&&e.push(r);return e};e.getOnDemandLazySlides=u;e.getRequiredLazySlides=function(t){for(var e=[],i=h(t),n=d(t),r=i;r<n;r++)e.push(r);return e};var h=function(t){return t.currentSlide-p(t)};e.lazyStartIndex=h;var d=function(t){return t.currentSlide+f(t)};e.lazyEndIndex=d;var p=function(t){return t.centerMode?Math.floor(t.slidesToShow/2)+(parseInt(t.centerPadding)>0?1:0):0};e.lazySlidesOnLeft=p;var f=function(t){return t.centerMode?Math.floor((t.slidesToShow-1)/2)+1+(parseInt(t.centerPadding)>0?1:0):t.slidesToShow};e.lazySlidesOnRight=f;var m=function(t){return t&&t.offsetWidth||0};e.getWidth=m;var y=function(t){return t&&t.offsetHeight||0};e.getHeight=y;var v=function(t){var e,i,n,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=t.startX-t.curX,i=t.startY-t.curY,n=Math.atan2(i,e),(r=Math.round(180*n/Math.PI))<0&&(r=360-Math.abs(r)),r<=45&&r>=0||r<=360&&r>=315?"left":r>=135&&r<=225?"right":!0===o?r>=35&&r<=135?"up":"down":"vertical"};e.getSwipeDirection=v;var g=function(t){var e=!0;return t.infinite||(t.centerMode&&t.currentSlide>=t.slideCount-1||t.slideCount<=t.slidesToShow||t.currentSlide>=t.slideCount-t.slidesToShow)&&(e=!1),e};e.canGoNext=g;e.extractObject=function(t,e){var i={};return e.forEach((function(e){return i[e]=t[e]})),i};e.initializedState=function(t){var e,i=r.default.Children.count(t.children),n=t.listRef,o=Math.ceil(m(n)),s=t.trackRef&&t.trackRef.node,l=Math.ceil(m(s));if(t.vertical)e=o;else{var c=t.centerMode&&2*parseInt(t.centerPadding);"string"===typeof t.centerPadding&&"%"===t.centerPadding.slice(-1)&&(c*=o/100),e=Math.ceil((o-c)/t.slidesToShow)}var h=n&&y(n.querySelector('[data-index="0"]')),d=h*t.slidesToShow,p=void 0===t.currentSlide?t.initialSlide:t.currentSlide;t.rtl&&void 0===t.currentSlide&&(p=i-1-t.initialSlide);var f=t.lazyLoadedList||[],v=u(a(a({},t),{},{currentSlide:p,lazyLoadedList:f})),g={slideCount:i,slideWidth:e,listWidth:o,trackWidth:l,currentSlide:p,slideHeight:h,listHeight:d,lazyLoadedList:f=f.concat(v)};return null===t.autoplaying&&t.autoplay&&(g.autoplaying="playing"),g};e.slideHandler=function(t){var e=t.waitForAnimate,i=t.animating,n=t.fade,r=t.infinite,o=t.index,s=t.slideCount,c=t.lazyLoad,h=t.currentSlide,d=t.centerMode,p=t.slidesToScroll,f=t.slidesToShow,m=t.useCSS,y=t.lazyLoadedList;if(e&&i)return{};var v,_,b,x=o,w={},P={},T=r?o:l(o,0,s-1);if(n){if(!r&&(o<0||o>=s))return{};o<0?x=o+s:o>=s&&(x=o-s),c&&y.indexOf(x)<0&&(y=y.concat(x)),w={animating:!0,currentSlide:x,lazyLoadedList:y,targetSlide:x},P={animating:!1,targetSlide:x}}else v=x,x<0?(v=x+s,r?s%p!==0&&(v=s-s%p):v=0):!g(t)&&x>h?x=v=h:d&&x>=s?(x=r?s:s-1,v=r?0:s-1):x>=s&&(v=x-s,r?s%p!==0&&(v=0):v=s-f),!r&&x+f>=s&&(v=s-f),_=k(a(a({},t),{},{slideIndex:x})),b=k(a(a({},t),{},{slideIndex:v})),r||(_===b&&(x=v),_=b),c&&(y=y.concat(u(a(a({},t),{},{currentSlide:x})))),m?(w={animating:!0,currentSlide:v,trackStyle:E(a(a({},t),{},{left:_})),lazyLoadedList:y,targetSlide:T},P={animating:!1,currentSlide:v,trackStyle:S(a(a({},t),{},{left:b})),swipeLeft:null,targetSlide:T}):w={currentSlide:v,trackStyle:S(a(a({},t),{},{left:b})),lazyLoadedList:y,targetSlide:T};return{state:w,nextState:P}};e.changeSlide=function(t,e){var i,n,r,o,s=t.slidesToScroll,l=t.slidesToShow,c=t.slideCount,u=t.currentSlide,h=t.targetSlide,d=t.lazyLoad,p=t.infinite;if(i=c%s!==0?0:(c-u)%s,"previous"===e.message)o=u-(r=0===i?s:l-i),d&&!p&&(o=-1===(n=u-r)?c-1:n),p||(o=h-s);else if("next"===e.message)o=u+(r=0===i?s:i),d&&!p&&(o=(u+s)%c+i),p||(o=h+s);else if("dots"===e.message)o=e.index*e.slidesToScroll;else if("children"===e.message){if(o=e.index,p){var f=M(a(a({},t),{},{targetSlide:o}));o>e.currentSlide&&"left"===f?o-=c:o<e.currentSlide&&"right"===f&&(o+=c)}}else"index"===e.message&&(o=Number(e.index));return o};e.keyHandler=function(t,e,i){return t.target.tagName.match("TEXTAREA|INPUT|SELECT")||!e?"":37===t.keyCode?i?"next":"previous":39===t.keyCode?i?"previous":"next":""};e.swipeStart=function(t,e,i){return"IMG"===t.target.tagName&&c(t),!e||!i&&-1!==t.type.indexOf("mouse")?"":{dragging:!0,touchObject:{startX:t.touches?t.touches[0].pageX:t.clientX,startY:t.touches?t.touches[0].pageY:t.clientY,curX:t.touches?t.touches[0].pageX:t.clientX,curY:t.touches?t.touches[0].pageY:t.clientY}}};e.swipeMove=function(t,e){var i=e.scrolling,n=e.animating,r=e.vertical,o=e.swipeToSlide,s=e.verticalSwiping,l=e.rtl,u=e.currentSlide,h=e.edgeFriction,d=e.edgeDragged,p=e.onEdge,f=e.swiped,m=e.swiping,y=e.slideCount,_=e.slidesToScroll,b=e.infinite,x=e.touchObject,w=e.swipeEvent,E=e.listHeight,P=e.listWidth;if(!i){if(n)return c(t);r&&o&&s&&c(t);var T,C={},M=k(e);x.curX=t.touches?t.touches[0].pageX:t.clientX,x.curY=t.touches?t.touches[0].pageY:t.clientY,x.swipeLength=Math.round(Math.sqrt(Math.pow(x.curX-x.startX,2)));var A=Math.round(Math.sqrt(Math.pow(x.curY-x.startY,2)));if(!s&&!m&&A>10)return{scrolling:!0};s&&(x.swipeLength=A);var O=(l?-1:1)*(x.curX>x.startX?1:-1);s&&(O=x.curY>x.startY?1:-1);var I=Math.ceil(y/_),D=v(e.touchObject,s),z=x.swipeLength;return b||(0===u&&("right"===D||"down"===D)||u+1>=I&&("left"===D||"up"===D)||!g(e)&&("left"===D||"up"===D))&&(z=x.swipeLength*h,!1===d&&p&&(p(D),C.edgeDragged=!0)),!f&&w&&(w(D),C.swiped=!0),T=r?M+z*(E/P)*O:l?M-z*O:M+z*O,s&&(T=M+z*O),C=a(a({},C),{},{touchObject:x,swipeLeft:T,trackStyle:S(a(a({},e),{},{left:T}))}),Math.abs(x.curX-x.startX)<.8*Math.abs(x.curY-x.startY)?C:(x.swipeLength>10&&(C.swiping=!0,c(t)),C)}};e.swipeEnd=function(t,e){var i=e.dragging,n=e.swipe,r=e.touchObject,o=e.listWidth,s=e.touchThreshold,l=e.verticalSwiping,u=e.listHeight,h=e.swipeToSlide,d=e.scrolling,p=e.onSwipe,f=e.targetSlide,m=e.currentSlide,y=e.infinite;if(!i)return n&&c(t),{};var g=l?u/s:o/s,_=v(r,l),w={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(d)return w;if(!r.swipeLength)return w;if(r.swipeLength>g){var S,P;c(t),p&&p(_);var T=y?m:f;switch(_){case"left":case"up":P=T+x(e),S=h?b(e,P):P,w.currentDirection=0;break;case"right":case"down":P=T-x(e),S=h?b(e,P):P,w.currentDirection=1;break;default:S=T}w.triggerSlideHandler=S}else{var C=k(e);w.trackStyle=E(a(a({},e),{},{left:C}))}return w};var _=function(t){for(var e=t.infinite?2*t.slideCount:t.slideCount,i=t.infinite?-1*t.slidesToShow:0,n=t.infinite?-1*t.slidesToShow:0,r=[];i<e;)r.push(i),i=n+t.slidesToScroll,n+=Math.min(t.slidesToScroll,t.slidesToShow);return r};e.getNavigableIndexes=_;var b=function(t,e){var i=_(t),n=0;if(e>i[i.length-1])e=i[i.length-1];else for(var r in i){if(e<i[r]){e=n;break}n=i[r]}return e};e.checkNavigable=b;var x=function(t){var e=t.centerMode?t.slideWidth*Math.floor(t.slidesToShow/2):0;if(t.swipeToSlide){var i,n=t.listRef,r=n.querySelectorAll&&n.querySelectorAll(".slick-slide")||[];if(Array.from(r).every((function(n){if(t.vertical){if(n.offsetTop+y(n)/2>-1*t.swipeLeft)return i=n,!1}else if(n.offsetLeft-e+m(n)/2>-1*t.swipeLeft)return i=n,!1;return!0})),!i)return 0;var o=!0===t.rtl?t.slideCount-t.currentSlide:t.currentSlide;return Math.abs(i.dataset.index-o)||1}return t.slidesToScroll};e.getSlideCount=x;var w=function(t,e){return e.reduce((function(e,i){return e&&t.hasOwnProperty(i)}),!0)?null:console.error("Keys Missing:",t)};e.checkSpecKeys=w;var S=function(t){var e,i;w(t,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var n=t.slideCount+2*t.slidesToShow;t.vertical?i=n*t.slideHeight:e=C(t)*t.slideWidth;var r={opacity:1,transition:"",WebkitTransition:""};if(t.useTransform){var o=t.vertical?"translate3d(0px, "+t.left+"px, 0px)":"translate3d("+t.left+"px, 0px, 0px)",s=t.vertical?"translate3d(0px, "+t.left+"px, 0px)":"translate3d("+t.left+"px, 0px, 0px)",l=t.vertical?"translateY("+t.left+"px)":"translateX("+t.left+"px)";r=a(a({},r),{},{WebkitTransform:o,transform:s,msTransform:l})}else t.vertical?r.top=t.left:r.left=t.left;return t.fade&&(r={opacity:1}),e&&(r.width=e),i&&(r.height=i),window&&!window.addEventListener&&window.attachEvent&&(t.vertical?r.marginTop=t.left+"px":r.marginLeft=t.left+"px"),r};e.getTrackCSS=S;var E=function(t){w(t,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var e=S(t);return t.useTransform?(e.WebkitTransition="-webkit-transform "+t.speed+"ms "+t.cssEase,e.transition="transform "+t.speed+"ms "+t.cssEase):t.vertical?e.transition="top "+t.speed+"ms "+t.cssEase:e.transition="left "+t.speed+"ms "+t.cssEase,e};e.getTrackAnimateCSS=E;var k=function(t){if(t.unslick)return 0;w(t,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var e,i,n=t.slideIndex,r=t.trackRef,o=t.infinite,a=t.centerMode,s=t.slideCount,l=t.slidesToShow,c=t.slidesToScroll,u=t.slideWidth,h=t.listWidth,d=t.variableWidth,p=t.slideHeight,f=t.fade,m=t.vertical;if(f||1===t.slideCount)return 0;var y=0;if(o?(y=-P(t),s%c!==0&&n+c>s&&(y=-(n>s?l-(n-s):s%c)),a&&(y+=parseInt(l/2))):(s%c!==0&&n+c>s&&(y=l-s%c),a&&(y=parseInt(l/2))),e=m?n*p*-1+y*p:n*u*-1+y*u,!0===d){var v,g=r&&r.node;if(v=n+P(t),e=(i=g&&g.childNodes[v])?-1*i.offsetLeft:0,!0===a){v=o?n+P(t):n,i=g&&g.children[v],e=0;for(var _=0;_<v;_++)e-=g&&g.children[_]&&g.children[_].offsetWidth;e-=parseInt(t.centerPadding),e+=i&&(h-i.offsetWidth)/2}}return e};e.getTrackLeft=k;var P=function(t){return t.unslick||!t.infinite?0:t.variableWidth?t.slideCount:t.slidesToShow+(t.centerMode?1:0)};e.getPreClones=P;var T=function(t){return t.unslick||!t.infinite?0:t.slideCount};e.getPostClones=T;var C=function(t){return 1===t.slideCount?1:P(t)+t.slideCount+T(t)};e.getTotalSlides=C;var M=function(t){return t.targetSlide>t.currentSlide?t.targetSlide>t.currentSlide+A(t)?"left":"right":t.targetSlide<t.currentSlide-O(t)?"right":"left"};e.siblingDirection=M;var A=function(t){var e=t.slidesToShow,i=t.centerMode,n=t.rtl,r=t.centerPadding;if(i){var o=(e-1)/2+1;return parseInt(r)>0&&(o+=1),n&&e%2===0&&(o+=1),o}return n?0:e-1};e.slidesOnRight=A;var O=function(t){var e=t.slidesToShow,i=t.centerMode,n=t.rtl,r=t.centerPadding;if(i){var o=(e-1)/2+1;return parseInt(r)>0&&(o+=1),n||e%2!==0||(o+=1),o}return n?e-1:0};e.slidesOnLeft=O;e.canUseDOM=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}},function(t,e,i){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=i(137)},function(t,e,i){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"===typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}i.d(e,"a",(function(){return r}))},function(t,e,i){var n;!function(r,o,a,s){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h=Math.round,d=Math.abs,p=Date.now;function f(t,e,i){return setTimeout(x(t,i),e)}function m(t,e,i){return!!Array.isArray(t)&&(y(t,i[e],i),!0)}function y(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==s)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function v(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,n,i),t.apply(this,arguments)}}l="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==s&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var g=v((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===s)&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),_=v((function(t,e){return g(t,e,!0)}),"merge","Use `assign`.");function b(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&l(n,i)}function x(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||s,e):t}function S(t,e){return t===s?e:t}function E(t,e,i){y(C(e),(function(e){t.addEventListener(e,i,!1)}))}function k(t,e,i){y(C(e),(function(e){t.removeEventListener(e,i,!1)}))}function P(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function C(t){return t.trim().split(/\s+/g)}function M(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function O(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];M(r,a)<0&&n.push(t[o]),r[o]=a,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function I(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((n=(i=c[o])?i+r:e)in t)return n;o++}return s}var D=1;function z(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var L="ontouchstart"in r,R=I(r,"PointerEvent")!==s,F=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",j="mouse",N=24,V=["x","y"],U=["clientX","clientY"];function G(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&i.handler(e)},this.init()}function q(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=1&e&&n-r===0,a=12&e&&n-r===0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=Z(e));r>1&&!i.firstMultiple?i.firstMultiple=Z(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,l=a?a.center:o.center,c=e.center=H(n);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=K(l,c),e.distance=Y(l,c),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=X(e.deltaX,e.deltaY);var u=W(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=d(u.x)>d(u.y)?u.x:u.y,e.scale=a?(h=a.pointers,f=n,Y(f[0],f[1],U)/Y(h[0],h[1],U)):1,e.rotation=a?function(t,e){return K(e[1],e[0],U)+K(t[1],t[0],U)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,o,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(l>25||a.velocity===s)){var c=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,h=W(l,c,u);n=h.x,r=h.y,i=d(h.x)>d(h.y)?h.x:h.y,o=X(c,u),t.lastInterval=e}else i=a.velocity,n=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}(i,e);var h,f;var m=t.element;P(e.srcEvent.target,m)&&(m=e.srcEvent.target);e.target=m}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Z(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:h(t.pointers[i].clientX),clientY:h(t.pointers[i].clientY)},i++;return{timeStamp:p(),pointers:e,center:H(e),deltaX:t.deltaX,deltaY:t.deltaY}}function H(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:h(i/e),y:h(n/e)}}function W(t,e,i){return{x:e/t||0,y:i/t||0}}function X(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function Y(t,e,i){i||(i=V);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function K(t,e,i){i||(i=V);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}G.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(z(this.element),this.evWin,this.domHandler)}};var $={mousedown:1,mousemove:2,mouseup:4},J="mousedown",Q="mousemove mouseup";function tt(){this.evEl=J,this.evWin=Q,this.pressed=!1,G.apply(this,arguments)}b(tt,G,{handler:function(t){var e=$[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},it={2:B,3:"pen",4:j,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function ot(){this.evEl=nt,this.evWin=rt,G.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),b(ot,G,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=et[n],o=it[t.pointerType]||t.pointerType,a=o==B,s=M(e,t.pointerId,"pointerId");1&r&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&r&&(i=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(s,1))}});var at={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",lt="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=st,this.evWin=lt,this.started=!1,G.apply(this,arguments)}function ut(t,e){var i=A(t.touches),n=A(t.changedTouches);return 12&e&&(i=O(i.concat(n),"identifier",!0)),[i,n]}b(ct,G,{handler:function(t){var e=at[t.type];if(1===e&&(this.started=!0),this.started){var i=ut.call(this,t,e);12&e&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:t})}}});var ht={touchstart:1,touchmove:2,touchend:4,touchcancel:8},dt="touchstart touchmove touchend touchcancel";function pt(){this.evTarget=dt,this.targetIds={},G.apply(this,arguments)}function ft(t,e){var i=A(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,a=A(t.changedTouches),s=[],l=this.target;if(o=i.filter((function(t){return P(t.target,l)})),1===e)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<a.length;)n[a[r].identifier]&&s.push(a[r]),12&e&&delete n[a[r].identifier],r++;return s.length?[O(o.concat(s),"identifier",!0),s]:void 0}b(pt,G,{handler:function(t){var e=ht[t.type],i=ft.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:t})}});function mt(){G.apply(this,arguments);var t=x(this.handler,this);this.touch=new pt(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function yt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,vt.call(this,e)):12&t&&vt.call(this,e)}function vt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function gt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),a=Math.abs(i-r.y);if(o<=25&&a<=25)return!0}return!1}b(mt,G,{handler:function(t,e,i){var n=i.pointerType==B,r=i.pointerType==j;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)yt.call(this,e,i);else if(r&&gt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var _t=I(u.style,"touchAction"),bt=_t!==s,xt="compute",wt="auto",St="manipulation",Et="none",kt="pan-x",Pt="pan-y",Tt=function(){if(!bt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||r.CSS.supports("touch-action",i)})),t}();function Ct(t,e){this.manager=t,this.set(e)}Ct.prototype={set:function(t){t==xt&&(t=this.compute()),bt&&this.manager.element.style&&Tt[t]&&(this.manager.element.style[_t]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,Et))return Et;var e=T(t,kt),i=T(t,Pt);if(e&&i)return Et;if(e||i)return e?kt:Pt;if(T(t,St))return St;return wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=T(n,Et)&&!Tt.none,o=T(n,Pt)&&!Tt["pan-y"],a=T(n,kt)&&!Tt["pan-x"];if(r){var s=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(s&&l&&c)return}if(!a||!o)return r||o&&6&i||a&&i&N?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Mt=32;function At(t){this.options=l({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ot(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function It(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Dt(t,e){var i=e.manager;return i?i.get(t):t}function zt(){At.apply(this,arguments)}function Lt(){zt.apply(this,arguments),this.pX=null,this.pY=null}function Rt(){zt.apply(this,arguments)}function Ft(){At.apply(this,arguments),this._timer=null,this._input=null}function Bt(){zt.apply(this,arguments)}function jt(){zt.apply(this,arguments)}function Nt(){At.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Vt(t,e){return(e=e||{}).recognizers=S(e.recognizers,Vt.defaults.preset),new Ut(t,e)}At.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Dt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Dt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Dt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Dt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Ot(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Ot(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Mt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=Mt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(zt,At,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:Mt}}),b(Lt,zt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Pt),t&N&&e.push(kt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===a?1:a<0?8:16,i=a!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return zt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=It(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Rt,zt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Ft,At,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Mt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),b(Bt,zt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(jt,zt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Lt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:i&N&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=It(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Nt,At,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[St]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&i){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||Y(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Mt},failTimeout:function(){return this._timer=f((function(){this.state=Mt}),this.options.interval,this),Mt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Vt.VERSION="2.0.7",Vt.defaults={domEvents:!1,touchAction:xt,enable:!0,inputTarget:null,inputClass:null,preset:[[Bt,{enable:!1}],[Rt,{enable:!1},["rotate"]],[jt,{direction:6}],[Lt,{direction:6},["swipe"]],[Nt],[Nt,{event:"doubletap",taps:2},["tap"]],[Ft]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ut(t,e){var i;this.options=l({},Vt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(R?ot:F?pt:L?mt:tt))(i,q),this.touchAction=new Ct(this,this.options.touchAction),Gt(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Gt(t,e){var i,n=t.element;n.style&&(y(t.options.cssProps,(function(r,o){i=I(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}Ut.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof At)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=M(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var i=this.handlers;return y(C(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==s){var i=this.handlers;return y(C(t),(function(t){e?i[t]&&i[t].splice(M(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&Gt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Vt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Mt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:N,DIRECTION_ALL:30,Manager:Ut,Input:G,TouchAction:Ct,TouchInput:pt,MouseInput:tt,PointerEventInput:ot,TouchMouseInput:mt,SingleTouchInput:ct,Recognizer:At,AttrRecognizer:zt,Tap:Nt,Pan:Lt,Swipe:jt,Pinch:Rt,Rotate:Bt,Press:Ft,on:E,off:k,each:y,merge:_,extend:g,assign:l,inherit:b,bindFn:x,prefixed:I}),("undefined"!==typeof r?r:"undefined"!==typeof self?self:{}).Hammer=Vt,(n=function(){return Vt}.call(e,i,e,t))===s||(t.exports=n)}(window,document)},function(t,e,i){var n=i(150),r=i(151),o=i(152),a=i(153),s=i(154);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(90);t.exports=function(t,e){for(var i=t.length;i--;)if(n(t[i][0],e))return i;return-1}},function(t,e,i){var n=i(75),r=i(161),o=i(162),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):o(t)}},function(t,e,i){var n=i(43)(Object,"create");t.exports=n},function(t,e,i){var n=i(174);t.exports=function(t,e){var i=t.__data__;return n(e)?i["string"==typeof e?"string":"hash"]:i.map}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(216),e),r(i(217),e)},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.NumberUtils=void 0;var o=i(64),a=function(){function t(){n(this,t)}return r(t,null,[{key:"clamp",value:function(t,e,i){return Math.min(Math.max(t,e),i)}},{key:"mix",value:function(t,e,i,n){return Math.floor((t*i+e*n)/(i+n))}},{key:"randomInRange",value:function(t,e){var i=Math.max(t,e),n=Math.min(t,e);return Math.random()*(i-n)+n}},{key:"getValue",value:function(e){var i=e.random,n="boolean"===typeof i?{enable:i,minimumValue:0}:i,r=n.enable,o=n.minimumValue;return r?t.randomInRange(o,e.value):e.value}},{key:"getDistances",value:function(t,e){var i=t.x-e.x,n=t.y-e.y;return{dx:i,dy:n,distance:Math.sqrt(i*i+n*n)}}},{key:"getDistance",value:function(e,i){return t.getDistances(e,i).distance}},{key:"getParticleBaseVelocity",value:function(t){var e;switch(t.direction){case o.MoveDirection.top:e={x:0,y:-1};break;case o.MoveDirection.topRight:e={x:.5,y:-.5};break;case o.MoveDirection.right:e={x:1,y:-0};break;case o.MoveDirection.bottomRight:e={x:.5,y:.5};break;case o.MoveDirection.bottom:e={x:0,y:1};break;case o.MoveDirection.bottomLeft:e={x:-.5,y:1};break;case o.MoveDirection.left:e={x:-1,y:0};break;case o.MoveDirection.topLeft:e={x:-.5,y:-.5};break;default:e={x:0,y:0}}return e}},{key:"rotateVelocity",value:function(t,e){return{horizontal:t.horizontal*Math.cos(e)-t.vertical*Math.sin(e),vertical:t.horizontal*Math.sin(e)+t.vertical*Math.cos(e)}}},{key:"collisionVelocity",value:function(t,e,i,n){return{horizontal:t.horizontal*(i-n)/(i+n)+2*e.horizontal*n/(i+n),vertical:t.vertical}}}]),t}();e.NumberUtils=a},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(356),e)},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(362),e)},function(t,e,i){"use strict";var n=i(124),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return n.isMemo(t)?a:s[t.$$typeof]||r}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,i,n){if("string"!==typeof i){if(f){var r=p(i);r&&r!==f&&t(e,r,n)}var a=u(i);h&&(a=a.concat(h(i)));for(var s=l(e),m=l(i),y=0;y<a.length;++y){var v=a[y];if(!o[v]&&(!n||!n[v])&&(!m||!m[v])&&(!s||!s[v])){var g=d(i,v);try{c(e,v,g)}catch(_){}}}}return e}},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(55);function r(t,e){if(t){if("string"===typeof t)return Object(n.a)(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(n.a)(t,e):void 0}}},function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return d}));var n=i(19),r=i(15),o=i(7),a=i(3),s=i(29),l=i(71);var c={container:a.object,gl:a.object,mapboxApiAccessToken:a.string,mapboxApiUrl:a.string,attributionControl:a.bool,preserveDrawingBuffer:a.bool,reuseMaps:a.bool,transformRequest:a.func,mapOptions:a.object,mapStyle:a.oneOfType([a.string,a.object]),preventStyleDiffing:a.bool,visible:a.bool,asyncRender:a.bool,onLoad:a.func,onError:a.func,width:a.number,height:a.number,viewState:a.object,longitude:a.number,latitude:a.number,zoom:a.number,bearing:a.number,pitch:a.number,altitude:a.number},u={container:s.a.body,mapboxApiAccessToken:function(){var e=null;if("undefined"!==typeof window&&window.location){var i=window.location.search.match(/access_token=([^&\/]*)/);e=i&&i[1]}e||"undefined"===typeof t||(e=e||Object({NODE_ENV:"production",PUBLIC_URL:"/acm-ioit-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MapboxAccessToken||Object({NODE_ENV:"production",PUBLIC_URL:"/acm-ioit-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MAPBOX_ACCESS_TOKEN);return e||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0,asyncRender:!1,onLoad:function(){},onError:function(t){t&&console.error(t.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";t.debug&&a.checkPropTypes(c,t,"prop",e)}var d=function(){function t(e){var i=this;if(Object(n.a)(this,t),Object(o.a)(this,"props",u),Object(o.a)(this,"width",0),Object(o.a)(this,"height",0),Object(o.a)(this,"_fireLoadEvent",(function(){i.props.onLoad({type:"load",target:i._map})})),Object(o.a)(this,"_handleError",(function(t){i.props.onError(t)})),!e.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=e.mapboxgl,t.initialized||(t.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(e)}return Object(r.a)(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(t){return this._update(this.props,t),this}},{key:"redraw",value:function(){var t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(e){this._map=t.savedMap;var i=this._map.getContainer(),n=e.container;for(n.classList.add("mapboxgl-map");i.childNodes.length>0;)n.appendChild(i.childNodes[0]);this._map._container=n,t.savedMap=null,e.mapStyle&&this._map.setStyle(Object(l.a)(e.mapStyle),{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(e){if(e.reuseMaps&&t.savedMap)this._reuse(e);else{if(e.gl){var i=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=i,e.gl}}var n={container:e.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:Object(l.a)(e.mapStyle),interactive:!1,trackResize:!1,attributionControl:e.attributionControl,preserveDrawingBuffer:e.preserveDrawingBuffer};e.transformRequest&&(n.transformRequest=e.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},n,e.mapOptions)),this._map.once("load",this._fireLoadEvent),this._map.on("error",this._handleError)}return this}},{key:"_destroy",value:function(){this._map&&(this.props.reuseMaps&&!t.savedMap?(t.savedMap=this._map,this._map.off("load",this._fireLoadEvent),this._map.off("error",this._handleError),this._map.off("styledata",this._fireLoadEvent)):this._map.remove(),this._map=null)}},{key:"_initialize",value:function(t){var e=this;h(t=Object.assign({},u,t),"Mapbox"),this.mapboxgl.accessToken=t.mapboxApiAccessToken||u.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=t.mapboxApiUrl,this._create(t);var i=t.container;Object.defineProperty(i,"offsetWidth",{get:function(){return e.width}}),Object.defineProperty(i,"clientWidth",{get:function(){return e.width}}),Object.defineProperty(i,"offsetHeight",{get:function(){return e.height}}),Object.defineProperty(i,"clientHeight",{get:function(){return e.height}});var n=this._map.getCanvas();n&&(n.style.outline="none"),this._updateMapViewport({},t),this._updateMapSize({},t),this.props=t}},{key:"_update",value:function(t,e){if(this._map){h(e=Object.assign({},this.props,e),"Mapbox");var i=this._updateMapViewport(t,e),n=this._updateMapSize(t,e);this._updateMapStyle(t,e),e.asyncRender||!i&&!n||this.redraw(),this.props=e}}},{key:"_updateMapStyle",value:function(t,e){t.mapStyle!==e.mapStyle&&this._map.setStyle(Object(l.a)(e.mapStyle),{diff:!e.preventStyleDiffing})}},{key:"_updateMapSize",value:function(t,e){var i=t.width!==e.width||t.height!==e.height;return i&&(this.width=e.width,this.height=e.height,this._map.resize()),i}},{key:"_updateMapViewport",value:function(t,e){var i=this._getViewState(t),n=this._getViewState(e),r=n.latitude!==i.latitude||n.longitude!==i.longitude||n.zoom!==i.zoom||n.pitch!==i.pitch||n.bearing!==i.bearing||n.altitude!==i.altitude;return r&&(this._map.jumpTo(this._viewStateToMapboxProps(n)),n.altitude!==i.altitude&&(this._map.transform.altitude=n.altitude)),r}},{key:"_getViewState",value:function(t){var e=t.viewState||t,i=e.longitude,n=e.latitude,r=e.zoom,o=e.pitch,a=void 0===o?0:o,s=e.bearing,l=void 0===s?0:s,c=e.altitude;return{longitude:i,latitude:n,zoom:r,pitch:a,bearing:l,altitude:void 0===c?1.5:c}}},{key:"_checkStyleSheet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if("undefined"!==typeof s.a)try{var e=s.a.createElement("div");e.className="mapboxgl-map",e.style.display="none",s.a.body.appendChild(e);var i="static"!==window.getComputedStyle(e).position;if(!i){var n=s.a.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(t,"/mapbox-gl.css")),s.a.head.appendChild(n)}}catch(r){}}},{key:"_viewStateToMapboxProps",value:function(t){return{center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}}}]),t}();Object(o.a)(d,"initialized",!1),Object(o.a)(d,"propTypes",c),Object(o.a)(d,"defaultProps",u),Object(o.a)(d,"savedMap",null)}).call(this,i(421))},function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i(7);function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(n.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function c(t){if(!t)return null;if("string"===typeof t)return t;t.toJS&&(t=t.toJS());var e,i={},n=a(t.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;i[r.id]=r}}catch(c){n.e(c)}finally{n.f()}var s=t.layers.map((function(t){var e=i[t.ref],n=null;if("interactive"in t&&delete(n=o({},t)).interactive,e){delete(n=n||o({},t)).ref;var r,s=a(l);try{for(s.s();!(r=s.n()).done;){var u=r.value;u in e&&(n[u]=e[u])}}catch(c){s.e(c)}finally{s.f()}}return n||t}));return o(o({},t),{},{layers:s})}},,function(t,e,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var i,s,l=a(t),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))r.call(i,u)&&(l[u]=i[u]);if(n){s=n(i);for(var h=0;h<s.length;h++)o.call(i,s[h])&&(l[s[h]]=i[s[h]])}}return l}},function(t,e,i){var n=i(43)(i(34),"Map");t.exports=n},function(t,e,i){var n=i(34).Symbol;t.exports=n},function(t,e){var i=Array.isArray;t.exports=i},function(t,e,i){"use strict";var n=i(4);Object.defineProperty(e,"__esModule",{value:!0}),e.Constants=void 0;var r=function t(){n(this,t)};e.Constants=r,r.canvasClass="tsparticles-canvas-el",r.randomColorValue="random",r.midColorValue="mid",r.touchEndEvent="touchend",r.mouseDownEvent="mousedown",r.mouseUpEvent="mouseup",r.mouseMoveEvent="mousemove",r.touchStartEvent="touchstart",r.touchMoveEvent="touchmove",r.mouseLeaveEvent="mouseleave",r.mouseOutEvent="mouseout",r.touchCancelEvent="touchcancel",r.resizeEvent="resize",r.visibilityChangeEvent="visibilitychange",r.noPolygonDataLoaded="No polygon data loaded.",r.noPolygonFound="No polygon found, you need to specify SVG url in config."},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(16),a=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var s=function(t){o(i,t);var e=a(i);function i(t,r,o){var a;return n(this,i),(a=e.call(this,t,r)).radius=o,a}return r(i,[{key:"contains",value:function(t){return Math.pow(t.x-this.position.x,2)+Math.pow(t.y-this.position.y,2)<=this.radius*this.radius}},{key:"intersects",value:function(t){var e=t,i=t,n=this.position,r=t.position,o=Math.abs(r.x-n.x),a=Math.abs(r.y-n.y),s=this.radius;if(void 0!==i.radius)return s+i.radius>Math.sqrt(o*o+a+a);if(void 0!==e.size){var l=e.size.width,c=e.size.height,u=Math.pow(o-l,2)+Math.pow(a-c,2);return!(o>s+l||a>s+c)&&(o<=l||a<=c||u<=s*s)}return!1}}]),i}(i(79).Range);e.Circle=s},function(t,e,i){"use strict";var n=i(4);Object.defineProperty(e,"__esModule",{value:!0}),e.Range=void 0;e.Range=function t(e,i){n(this,t),this.position={x:e,y:i}}},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(16),a=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var s=function(t){o(i,t);var e=a(i);function i(t,r,o,a){var s;return n(this,i),(s=e.call(this,t,r)).size={height:a,width:o},s}return r(i,[{key:"contains",value:function(t){var e=this.size.width,i=this.size.height,n=this.position;return t.x>=n.x&&t.x<=n.x+e&&t.y>=n.y&&t.y<=n.y+i}},{key:"intersects",value:function(t){var e=t,i=t,n=this.size.width,r=this.size.height,o=this.position,a=t.position;if(void 0!==i.radius)return i.intersects(this);if(void 0!==e.size){var s=e.size,l=s.width,c=s.height;return a.x<o.x+n&&a.x+l>o.x&&a.y<o.y+r&&a.y+c>o.y}return!1}}]),i}(i(79).Range);e.Rectangle=s},function(t,e,i){"use strict";var n=i(40),r=i(41),o=i(10),a=i(4),s=i(5),l=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{l(n.next(t))}catch(e){o(e)}}function s(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var c=i(308),u=i(309),h=i(328),d=i(329),p=i(101),f=i(8),m=function(){function t(e,i){var n=this;a(this,t),this.id=e,this.sourceOptions=i,this.firstStart=!0,this.started=!1,this.destroyed=!1,this.paused=!0,this.lastFrameTime=0,this.pageHidden=!1,this.retina=new h.Retina(this),this.canvas=new c.Canvas(this),this.particles=new u.Particles(this),this.drawer=new d.FrameManager(this),this.noise={generate:function(){return{angle:Math.random()*Math.PI*2,length:Math.random()}},init:function(){},update:function(){}},this.interactivity={mouse:{clicking:!1,inside:!1}},this.bubble={},this.repulse={particles:[]},this.attract={particles:[]},this.plugins=new Map,this.drawers=new Map,this.density=1,this.options=new p.Options;for(var r=arguments.length,s=new Array(r>2?r-2:0),l=2;l<r;l++)s[l-2]=arguments[l];for(var m=0,y=s;m<y.length;m++){var v=y[m];this.options.load(f.Plugins.getPreset(v))}var g,_=f.Plugins.getSupportedShapes(),b=o(_);try{for(b.s();!(g=b.n()).done;){var x=g.value,w=f.Plugins.getShapeDrawer(x);w&&this.drawers.set(x,w)}}catch(S){b.e(S)}finally{b.f()}this.sourceOptions&&this.options.load(this.sourceOptions),this.fpsLimit=this.options.fpsLimit>0?this.options.fpsLimit:60,this.options.setTheme(void 0),this.eventListeners=new f.EventListeners(this),"undefined"!==typeof IntersectionObserver&&IntersectionObserver&&(this.intersectionObserver=new IntersectionObserver((function(t){return n.intersectionManager(t)})))}return s(t,[{key:"play",value:function(t){var e=this.paused||t;if(!this.firstStart||this.options.autoPlay){if(this.paused&&(this.paused=!1),e){var i,n=o(this.plugins);try{for(n.s();!(i=n.n()).done;){var a=r(i.value,2)[1];a.play&&a.play()}}catch(s){n.e(s)}finally{n.f()}this.lastFrameTime=performance.now()}this.draw()}else this.firstStart=!1}},{key:"pause",value:function(){if(void 0!==this.drawAnimationFrame&&(f.Utils.cancelAnimation(this.drawAnimationFrame),delete this.drawAnimationFrame),!this.paused){var t,e=o(this.plugins);try{for(e.s();!(t=e.n()).done;){var i=r(t.value,2)[1];i.pause&&i.pause()}}catch(n){e.e(n)}finally{e.f()}this.pageHidden||(this.paused=!0)}}},{key:"draw",value:function(){var t=this;this.drawAnimationFrame=f.Utils.animate((function(e){return t.drawer.nextFrame(e)}))}},{key:"getAnimationStatus",value:function(){return!this.paused}},{key:"setNoise",value:function(t,e,i){t&&("function"===typeof t?(this.noise.generate=t,e&&(this.noise.init=e),i&&(this.noise.update=i)):(t.generate&&(this.noise.generate=t.generate),t.init&&(this.noise.init=t.init),t.update&&(this.noise.update=t.update)))}},{key:"destroy",value:function(){this.stop(),this.canvas.destroy();var t,e=o(this.drawers);try{for(e.s();!(t=e.n()).done;){var i=r(t.value,2)[1];i.destroy&&i.destroy(this)}}catch(l){e.e(l)}finally{e.f()}var n,a=o(this.drawers.keys());try{for(a.s();!(n=a.n()).done;){var s=n.value;this.drawers.delete(s)}}catch(l){a.e(l)}finally{a.f()}this.destroyed=!0}},{key:"exportImg",value:function(t){this.exportImage(t)}},{key:"exportImage",value:function(t,e,i){var n;return null===(n=this.canvas.element)||void 0===n?void 0:n.toBlob(t,null!==e&&void 0!==e?e:"image/png",i)}},{key:"exportConfiguration",value:function(){return JSON.stringify(this.options,void 0,2)}},{key:"refresh",value:function(){return l(this,void 0,void 0,n.mark((function t(){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stop(),t.next=3,this.start();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"stop",value:function(){if(this.started){this.firstStart=!0,this.started=!1,this.eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.clear(),this.interactivity.element instanceof HTMLElement&&this.intersectionObserver&&this.intersectionObserver.observe(this.interactivity.element);var t,e=o(this.plugins);try{for(e.s();!(t=e.n()).done;){var i=r(t.value,2)[1];i.stop&&i.stop()}}catch(l){e.e(l)}finally{e.f()}var n,a=o(this.plugins.keys());try{for(a.s();!(n=a.n()).done;){var s=n.value;this.plugins.delete(s)}}catch(l){a.e(l)}finally{a.f()}this.particles.linksColors=new Map,delete this.particles.grabLineColor,delete this.particles.linksColor}}},{key:"loadTheme",value:function(t){return l(this,void 0,void 0,n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options.setTheme(t),e.next=3,this.refresh();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"start",value:function(){return l(this,void 0,void 0,n.mark((function t(){var e,i,a,s;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.started){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.init();case 4:this.started=!0,this.eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this.intersectionObserver&&this.intersectionObserver.observe(this.interactivity.element),e=o(this.plugins),t.prev=8,e.s();case 10:if((i=e.n()).done){t.next=20;break}if(a=r(i.value,2),void 0===(s=a[1]).startAsync){t.next=17;break}return t.next=15,s.startAsync();case 15:t.next=18;break;case 17:void 0!==s.start&&s.start();case 18:t.next=10;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(8),e.e(t.t0);case 25:return t.prev=25,e.f(),t.finish(25);case 28:this.play();case 29:case"end":return t.stop()}}),t,this,[[8,22,25,28]])})))}},{key:"init",value:function(){return l(this,void 0,void 0,n.mark((function t(){var e,i,a,s,l,c,u,h,d,p,m,y,v,g;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.retina.init(),this.canvas.init(),this.fpsLimit=this.options.fpsLimit>0?this.options.fpsLimit:60,e=f.Plugins.getAvailablePlugins(this),i=o(e);try{for(i.s();!(a=i.n()).done;)s=r(a.value,2),l=s[0],c=s[1],this.plugins.set(l,c)}catch(n){i.e(n)}finally{i.f()}u=o(this.drawers),t.prev=7,u.s();case 9:if((h=u.n()).done){t.next=16;break}if(d=r(h.value,2),!(p=d[1]).init){t.next=14;break}return t.next=14,p.init(this);case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),u.e(t.t0);case 21:return t.prev=21,u.f(),t.finish(21);case 24:m=o(this.plugins),t.prev=25,m.s();case 27:if((y=m.n()).done){t.next=38;break}if(v=r(y.value,2),!(g=v[1]).init){t.next=33;break}g.init(this.options),t.next=36;break;case 33:if(void 0===g.initAsync){t.next=36;break}return t.next=36,g.initAsync(this.options);case 36:t.next=27;break;case 38:t.next=43;break;case 40:t.prev=40,t.t1=t.catch(25),m.e(t.t1);case 43:return t.prev=43,m.f(),t.finish(43);case 46:this.canvas.initSize(),this.particles.init(),this.particles.setDensity();case 49:case"end":return t.stop()}}),t,this,[[7,18,21,24],[25,40,43,46]])})))}},{key:"intersectionManager",value:function(t){if(this.options.pauseOnOutsideViewport){var e,i=o(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.target===this.interactivity.element&&(n.isIntersecting?this.play():this.pause())}}catch(r){i.e(r)}finally{i.f()}}}}]),t}();e.Container=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canUseDOM=e.SafeNodeList=e.SafeHTMLCollection=void 0;var n,r=i(405);var o=((n=r)&&n.__esModule?n:{default:n}).default,a=o.canUseDOM?window.HTMLElement:{};e.SafeHTMLCollection=o.canUseDOM?window.HTMLCollection:{},e.SafeNodeList=o.canUseDOM?window.NodeList:{},e.canUseDOM=o.canUseDOM;e.default=a},function(t,e,i){"use strict";i.r(e),function(t){var i=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var r=n[i];t.call(e,r[1],r[0])}},e}()}(),n="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,r="undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!==typeof MutationObserver,l=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,r=0;function a(){i&&(i=!1,t()),n&&l()}function s(){o(a)}function l(){var t=Date.now();if(i){if(t-r<2)return;n=!0}else i=!0,n=!1,setTimeout(s,e);r=t}return l}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;a.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),c=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},u=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||r},h=v(0,0,0,0);function d(t){return parseFloat(t)||0}function p(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+d(t["border-"+i+"-width"])}),0)}function f(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return h;var n=u(t).getComputedStyle(t),r=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var r=n[i],o=t["padding-"+r];e[r]=d(o)}return e}(n),o=r.left+r.right,a=r.top+r.bottom,s=d(n.width),l=d(n.height);if("border-box"===n.boxSizing&&(Math.round(s+o)!==e&&(s-=p(n,"left","right")+o),Math.round(l+a)!==i&&(l-=p(n,"top","bottom")+a)),!function(t){return t===u(t).document.documentElement}(t)){var c=Math.round(s+o)-e,f=Math.round(l+a)-i;1!==Math.abs(c)&&(s-=c),1!==Math.abs(f)&&(l-=f)}return v(r.left,r.top,s,l)}var m="undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof u(t).SVGGraphicsElement}:function(t){return t instanceof u(t).SVGElement&&"function"===typeof t.getBBox};function y(t){return n?m(t)?function(t){var e=t.getBBox();return v(0,0,e.width,e.height)}(t):f(t):h}function v(t,e,i,n){return{x:t,y:e,width:i,height:n}}var g=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=y(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),_=function(t,e){var i=function(t){var e=t.x,i=t.y,n=t.width,r=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return c(a,{x:e,y:i,width:n,height:r,top:i,right:e+n,bottom:r+i,left:e}),a}(e);c(this,{target:t,contentRect:i})},b=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new i,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof u(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new g(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof u(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new _(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),x="undefined"!==typeof WeakMap?new WeakMap:new i,w=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=l.getInstance(),n=new b(e,i,this);x.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){w.prototype[t]=function(){var e;return(e=x.get(this))[t].apply(e,arguments)}}));var S="undefined"!==typeof r.ResizeObserver?r.ResizeObserver:w;e.default=S}.call(this,i(44))},function(t,e,i){"use strict";(function(t){var n=i(2),r=i.n(n),o=i(20),a=i(3),s=i.n(a),l=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{};function u(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(i,n){t=i,e.forEach((function(e){return e(t,n)}))}}}var h=r.a.createContext||function(t,e){var i,r,a="__create-react-context-"+function(){var t="__global_unique_id__";return c[t]=(c[t]||0)+1}()+"__",h=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).emitter=u(e.props.value),e}Object(o.a)(i,t);var n=i.prototype;return n.getChildContext=function(){var t;return(t={})[a]=this.emitter,t},n.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var i,n=this.props.value,r=t.value;((o=n)===(a=r)?0!==o||1/o===1/a:o!==o&&a!==a)?i=0:(i="function"===typeof e?e(n,r):l,0!==(i|=0)&&this.emitter.set(t.value,i))}var o,a},n.render=function(){return this.props.children},i}(n.Component);h.childContextTypes=((i={})[a]=s.a.object.isRequired,i);var d=function(e){function i(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,i){0!==((0|t.observedBits)&i)&&t.setState({value:t.getValue()})},t}Object(o.a)(i,e);var n=i.prototype;return n.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?l:e},n.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?l:t},n.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},n.getValue=function(){return this.context[a]?this.context[a].get():t},n.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},i}(n.Component);return d.contextTypes=((r={})[a]=s.a.object,r),{Provider:h,Consumer:d}};e.a=h}).call(this,i(44))},function(t,e,i){var n=i(397);t.exports=p,t.exports.parse=o,t.exports.compile=function(t,e){return s(o(t,e),e)},t.exports.tokensToFunction=s,t.exports.tokensToRegExp=d;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){for(var i,n=[],o=0,a=0,s="",u=e&&e.delimiter||"/";null!=(i=r.exec(t));){var h=i[0],d=i[1],p=i.index;if(s+=t.slice(a,p),a=p+h.length,d)s+=d[1];else{var f=t[a],m=i[2],y=i[3],v=i[4],g=i[5],_=i[6],b=i[7];s&&(n.push(s),s="");var x=null!=m&&null!=f&&f!==m,w="+"===_||"*"===_,S="?"===_||"*"===_,E=i[2]||u,k=v||g;n.push({name:y||o++,prefix:m||"",delimiter:E,optional:S,repeat:w,partial:x,asterisk:!!b,pattern:k?c(k):b?".*":"[^"+l(E)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&n.push(s),n}function a(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function s(t,e){for(var i=new Array(t.length),r=0;r<t.length;r++)"object"===typeof t[r]&&(i[r]=new RegExp("^(?:"+t[r].pattern+")$",h(e)));return function(e,r){for(var o="",s=e||{},l=(r||{}).pretty?a:encodeURIComponent,c=0;c<t.length;c++){var u=t[c];if("string"!==typeof u){var h,d=s[u.name];if(null==d){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(n(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(h=l(d[p]),!i[c].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===p?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):l(d),!i[c].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');o+=u.prefix+h}}else o+=u}return o}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function u(t,e){return t.keys=e,t}function h(t){return t&&t.sensitive?"":"i"}function d(t,e,i){n(e)||(i=e||i,e=[]);for(var r=(i=i||{}).strict,o=!1!==i.end,a="",s=0;s<t.length;s++){var c=t[s];if("string"===typeof c)a+=l(c);else{var d=l(c.prefix),p="(?:"+c.pattern+")";e.push(c),c.repeat&&(p+="(?:"+d+p+")*"),a+=p=c.optional?c.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var f=l(i.delimiter||"/"),m=a.slice(-f.length)===f;return r||(a=(m?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":r&&m?"":"(?="+f+"|$)",u(new RegExp("^"+a,h(i)),e)}function p(t,e,i){return n(e)||(i=e||i,e=[]),i=i||{},t instanceof RegExp?function(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(t,e)}(t,e):n(t)?function(t,e,i){for(var n=[],r=0;r<t.length;r++)n.push(p(t[r],e,i).source);return u(new RegExp("(?:"+n.join("|")+")",h(i)),e)}(t,e,i):function(t,e,i){return d(o(t,i),e,i)}(t,e,i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(400),o=(n=r)&&n.__esModule?n:{default:n};e.default=o.default,t.exports=e.default},function(t,e,i){"use strict";i.d(e,"b",(function(){return ui})),i.d(e,"a",(function(){return Zi}));var n=i(6),r=i(49),o=i(7),a=i(2),s=i(3),l=i(9),c=1e-6,u="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});!function(){var t=function(){var t=new u(4);return u!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();function h(t,e){const i=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*a,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*a,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*a,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*a,t}([],e,t);var n,r,o;return n=i,r=i,o=1/i[3],n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[3]=r[3]*o,i}function d(t,e){const i=t%e;return i<0?e+i:i}const p=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function f(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],y=e[13],v=e[14],g=e[15],_=i[0],b=i[1],x=i[2],w=i[3];return t[0]=_*n+b*s+x*h+w*m,t[1]=_*r+b*l+x*d+w*y,t[2]=_*o+b*c+x*p+w*v,t[3]=_*a+b*u+x*f+w*g,_=i[4],b=i[5],x=i[6],w=i[7],t[4]=_*n+b*s+x*h+w*m,t[5]=_*r+b*l+x*d+w*y,t[6]=_*o+b*c+x*p+w*v,t[7]=_*a+b*u+x*f+w*g,_=i[8],b=i[9],x=i[10],w=i[11],t[8]=_*n+b*s+x*h+w*m,t[9]=_*r+b*l+x*d+w*y,t[10]=_*o+b*c+x*p+w*v,t[11]=_*a+b*u+x*f+w*g,_=i[12],b=i[13],x=i[14],w=i[15],t[12]=_*n+b*s+x*h+w*m,t[13]=_*r+b*l+x*d+w*y,t[14]=_*o+b*c+x*p+w*v,t[15]=_*a+b*u+x*f+w*g,t}function m(t,e,i){var n,r,o,a,s,l,c,u,h,d,p,f,m=i[0],y=i[1],v=i[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*v+e[12],t[13]=e[1]*m+e[5]*y+e[9]*v+e[13],t[14]=e[2]*m+e[6]*y+e[10]*v+e[14],t[15]=e[3]*m+e[7]*y+e[11]*v+e[15]):(n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=n*m+s*y+h*v+e[12],t[13]=r*m+l*y+d*v+e[13],t[14]=o*m+c*y+p*v+e[14],t[15]=a*m+u*y+f*v+e[15]),t}function y(t,e,i){var n=i[0],r=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function v(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],y=t[13],v=t[14],g=t[15],_=e[0],b=e[1],x=e[2],w=e[3],S=e[4],E=e[5],k=e[6],P=e[7],T=e[8],C=e[9],M=e[10],A=e[11],O=e[12],I=e[13],D=e[14],z=e[15];return Math.abs(i-_)<=c*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(n-b)<=c*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-x)<=c*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(o-w)<=c*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-S)<=c*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(s-E)<=c*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-k)<=c*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(u-P)<=c*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(h-T)<=c*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-C)<=c*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-M)<=c*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(f-A)<=c*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(m-O)<=c*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(y-I)<=c*Math.max(1,Math.abs(y),Math.abs(I))&&Math.abs(v-D)<=c*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(g-z)<=c*Math.max(1,Math.abs(g),Math.abs(z))}function g(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function _(t){var e=t[0],i=t[1];return Math.hypot(e,i)}function b(t,e,i,n){var r=e[0],o=e[1];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t}var x=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t};!function(){var t=function(){var t=new u(2);return u!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var w=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t};!function(){var t=function(){var t=new u(3);return u!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();function S(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const E=Math.PI,k=E/4,P=E/180,T=180/E,C=512;function M(t){return Math.pow(2,t)}function A(t){return p(t)}function O([t,e]){S(Number.isFinite(t)),S(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude");const i=e*P;return[C*(t*P+E)/(2*E),C*(E+Math.log(Math.tan(k+.5*i)))/(2*E)]}function I([t,e]){const i=t/C*(2*E)-E,n=2*(Math.atan(Math.exp(e/C*(2*E)-E))-k);return[i*T,n*T]}function D({latitude:t,longitude:e,highPrecision:i=!1}){S(Number.isFinite(t)&&Number.isFinite(e));const n={},r=Math.cos(t*P),o=512/360,a=o/r,s=12790407194604047e-21/r;if(n.unitsPerMeter=[s,s,s],n.metersPerUnit=[1/s,1/s,1/s],n.unitsPerDegree=[o,a,s],n.degreesPerUnit=[.703125,1/a,1/s],i){const e=P*Math.tan(t*P)/r,i=o*e/2,l=12790407194604047e-21*e,c=l/a*s;n.unitsPerDegree2=[0,i,l],n.unitsPerMeter2=[c,0,c]}return n}function z({height:t,pitch:e,bearing:i,altitude:n,scale:r,center:o=null}){const a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var s,l;return m(a,a,[0,0,-n]),function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*n,t[5]=a*r+u*n,t[6]=s*r+h*n,t[7]=l*r+d*n,t[8]=c*r-o*n,t[9]=u*r-a*n,t[10]=h*r-s*n,t[11]=d*r-l*n}(a,a,-e*P),function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*n,t[1]=a*r+u*n,t[2]=s*r+h*n,t[3]=l*r+d*n,t[4]=c*r-o*n,t[5]=u*r-a*n,t[6]=h*r-s*n,t[7]=d*r-l*n}(a,a,i*P),y(a,a,[r/=t,r,r]),o&&m(a,a,((s=[])[0]=-(l=o)[0],s[1]=-l[1],s[2]=-l[2],s)),a}function L({width:t,height:e,pitch:i,altitude:n,fovy:r,nearZMultiplier:o,farZMultiplier:a}){const{fov:s,aspect:l,near:c,far:u}=function({width:t,height:e,fovy:i=R(1.5),altitude:n,pitch:r=0,nearZMultiplier:o=1,farZMultiplier:a=1}){void 0!==n&&(i=R(n));const s=.5*i*P,l=F(i),c=r*P,u=Math.sin(s)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-s,.01),Math.PI-.01));return{fov:2*s,aspect:t/e,focalDistance:l,near:o,far:(Math.sin(c)*u+l)*a}}({width:t,height:e,altitude:n,fovy:r,pitch:i,nearZMultiplier:o,farZMultiplier:a});return function(t,e,i,n,r){var o,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(n-r),t[10]=(r+n)*o,t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t}([],s,l,c,u)}function R(t){return 2*Math.atan(.5/t)*T}function F(t){return.5/Math.tan(.5*t*P)}function B(t,e,i=0){const[n,r,o]=t;if(S(Number.isFinite(n)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o)){return h(e,[n,r,o,1])}const a=h(e,[n,r,0,1]),s=h(e,[n,r,1,1]),l=a[2],c=s[2];return b([],a,s,l===c?0:((i||0)-l)/(c-l))}const j=Math.PI/180;function N(t,e,i){const{pixelUnprojectionMatrix:n}=t,r=h(n,[e,0,1,1]),o=h(n,[e,t.height,1,1]),a=I(b([],r,o,(i*t.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return a[2]=i,a}class V{constructor({width:t,height:e,latitude:i=0,longitude:n=0,zoom:r=0,pitch:o=0,bearing:a=0,altitude:s=null,fovy:l=null,position:c=null,nearZMultiplier:u=.02,farZMultiplier:h=1.01}={width:1,height:1}){t=t||1,e=e||1,null===l&&null===s?l=R(s=1.5):null===l?l=R(s):null===s&&(s=F(l));const d=M(r);s=Math.max(.75,s);const p=D({longitude:n,latitude:i}),f=O([n,i]);var m,y,v;f[2]=0,c&&(m=f,y=f,v=w([],c,p.unitsPerMeter),m[0]=y[0]+v[0],m[1]=y[1]+v[1],m[2]=y[2]+v[2]),this.projectionMatrix=L({width:t,height:e,pitch:o,fovy:l,nearZMultiplier:u,farZMultiplier:h}),this.viewMatrix=z({height:e,scale:d,center:f,pitch:o,bearing:a,altitude:s}),this.width=t,this.height=e,this.scale=d,this.latitude=i,this.longitude=n,this.zoom=r,this.pitch=o,this.bearing=a,this.altitude=s,this.fovy=l,this.center=f,this.meterOffset=c||[0,0,0],this.distanceScales=p,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){const{width:t,height:e,projectionMatrix:i,viewMatrix:n}=this,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];f(r,r,i),f(r,r,n),this.viewProjectionMatrix=r;const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];y(o,o,[t/2,-e/2,1]),m(o,o,[1,-1,0]),f(o,o,r);const a=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],y=e[14],v=e[15],g=i*s-n*a,_=i*l-r*a,b=i*c-o*a,x=n*l-r*s,w=n*c-o*s,S=r*c-o*l,E=u*m-h*f,k=u*y-d*f,P=u*v-p*f,T=h*y-d*m,C=h*v-p*m,M=d*v-p*y,A=g*M-_*C+b*T+x*P-w*k+S*E;return A?(A=1/A,t[0]=(s*M-l*C+c*T)*A,t[1]=(r*C-n*M-o*T)*A,t[2]=(m*S-y*w+v*x)*A,t[3]=(d*w-h*S-p*x)*A,t[4]=(l*P-a*M-c*k)*A,t[5]=(i*M-r*P+o*k)*A,t[6]=(y*b-f*S-v*_)*A,t[7]=(u*S-d*b+p*_)*A,t[8]=(a*C-s*P+c*E)*A,t[9]=(n*P-i*C-o*E)*A,t[10]=(f*w-m*b+v*g)*A,t[11]=(h*b-u*w-p*g)*A,t[12]=(s*k-a*T-l*E)*A,t[13]=(i*T-n*k+r*E)*A,t[14]=(m*_-f*x-y*g)*A,t[15]=(u*x-h*_+d*g)*A,t):null}([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}equals(t){return t instanceof V&&(t.width===this.width&&t.height===this.height&&v(t.projectionMatrix,this.projectionMatrix)&&v(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:e=!0}={}){const i=function(t,e){const[i,n,r=0]=t;return S(Number.isFinite(i)&&Number.isFinite(n)&&Number.isFinite(r)),h(e,[i,n,r,1])}(this.projectPosition(t),this.pixelProjectionMatrix),[n,r]=i,o=e?r:this.height-r;return 2===t.length?[n,o]:[n,o,i[2]]}unproject(t,{topLeft:e=!0,targetZ:i}={}){const[n,r,o]=t,a=e?r:this.height-r,s=i&&i*this.distanceScales.unitsPerMeter[2],l=B([n,a,o],this.pixelUnprojectionMatrix,s),[c,u,h]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,h]:Number.isFinite(i)?[c,u,i]:[c,u]}projectPosition(t){const[e,i]=O(t);return[e,i,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,i]=I(t);return[e,i,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return O(t)}unprojectFlat(t){return I(t)}getMapCenterByLngLatPosition({lngLat:t,pos:e}){const i=B(e,this.pixelUnprojectionMatrix),n=g([],O(t),((r=[])[0]=-(o=i)[0],r[1]=-o[1],r));var r,o;return I(g([],this.center,n))}getLocationAtPoint({lngLat:t,pos:e}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:e})}fitBounds(t,e={}){const{width:i,height:n}=this,{longitude:r,latitude:o,zoom:a}=function({width:t,height:e,bounds:i,minExtent:n=0,maxZoom:r=24,padding:o=0,offset:a=[0,0]}){const[[s,l],[c,u]]=i;Number.isFinite(o)?o={top:o,bottom:o,left:o,right:o}:S(Number.isFinite(o.top)&&Number.isFinite(o.bottom)&&Number.isFinite(o.left)&&Number.isFinite(o.right));const h=new V({width:t,height:e,longitude:0,latitude:0,zoom:0}),d=h.project([s,u]),f=h.project([c,l]),m=[Math.max(Math.abs(f[0]-d[0]),n),Math.max(Math.abs(f[1]-d[1]),n)],y=[t-o.left-o.right-2*Math.abs(a[0]),e-o.top-o.bottom-2*Math.abs(a[1])];S(y[0]>0&&y[1]>0);const v=y[0]/m[0],g=y[1]/m[1],_=(o.right-o.left)/2/v,b=(o.bottom-o.top)/2/g,x=[(f[0]+d[0])/2+_,(f[1]+d[1])/2+b],w=h.unproject(x),E=Math.min(r,h.zoom+p(Math.abs(Math.min(v,g))));return S(Number.isFinite(E)),{longitude:w[0],latitude:w[1],zoom:E}}(Object.assign({width:i,height:n,bounds:t},e));return new V({width:i,height:n,longitude:r,latitude:o,zoom:a})}getBounds(t){const e=this.getBoundingRegion(t),i=Math.min(...e.map((t=>t[0]))),n=Math.max(...e.map((t=>t[0])));return[[i,Math.min(...e.map((t=>t[1])))],[n,Math.max(...e.map((t=>t[1])))]]}getBoundingRegion(t={}){return function(t,e=0){const{width:i,height:n,unproject:r}=t,o={targetZ:e},a=r([0,n],o),s=r([i,n],o);let l,c;return(t.fovy?.5*t.fovy*j:Math.atan(.5/t.altitude))>(90-t.pitch)*j-.01?(l=N(t,0,e),c=N(t,i,e)):(l=r([0,0],o),c=r([i,0],o)),[a,s,c,l]}(this,t.z||0)}}const U=["longitude","latitude","zoom"],G={curve:1.414,speed:1.2};function q(t,e,i){const n=(i=Object.assign({},G,i)).curve,r=t.zoom,o=[t.longitude,t.latitude],a=M(r),s=e.zoom,l=[e.longitude,e.latitude],c=M(s-r),u=O(o),h=O(l),d=x([],h,u),p=Math.max(t.width,t.height),f=p/c,m=_(d)*a,y=Math.max(m,.01),v=n*n,g=(f*f-p*p+v*v*y*y)/(2*p*v*y),b=(f*f-p*p-v*v*y*y)/(2*f*v*y),w=Math.log(Math.sqrt(g*g+1)-g),S=Math.log(Math.sqrt(b*b+1)-b);return{startZoom:r,startCenterXY:u,uDelta:d,w0:p,u1:m,S:(S-w)/n,rho:n,rho2:v,r0:w,r1:S}}var Z=i(83),H=i(70),W=i(129),X=i.n(W),Y=i(19),K=i(15);function $(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function J(t,e){if(t===e)return!0;if($(t)&&$(e)){if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!J(t[i],e[i]))return!1;return!0}return Math.abs(t-e)<=1e-7}function Q(t,e,i){return Math.max(e,Math.min(i,t))}function tt(t,e,i){return $(t)?t.map((function(t,n){return tt(t,e[n],i)})):i*e+(1-i)*t}function et(t,e){if(!t)throw new Error(e||"react-map-gl: assertion failed.")}function it(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function nt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?it(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var rt={minZoom:0,maxZoom:24,minPitch:0,maxPitch:85},ot=0,at=0,st=1.5,lt=function(){function t(e){var i=e.width,n=e.height,r=e.latitude,o=e.longitude,a=e.zoom,s=e.bearing,l=void 0===s?at:s,c=e.pitch,u=void 0===c?ot:c,h=e.altitude,d=void 0===h?st:h,p=e.maxZoom,f=void 0===p?rt.maxZoom:p,m=e.minZoom,y=void 0===m?rt.minZoom:m,v=e.maxPitch,g=void 0===v?rt.maxPitch:v,_=e.minPitch,b=void 0===_?rt.minPitch:_,x=e.transitionDuration,w=e.transitionEasing,S=e.transitionInterpolator,E=e.transitionInterruption,k=e.startPanLngLat,P=e.startZoomLngLat,T=e.startRotatePos,C=e.startBearing,M=e.startPitch,A=e.startZoom;Object(Y.a)(this,t),et(Number.isFinite(i),"`width` must be supplied"),et(Number.isFinite(n),"`height` must be supplied"),et(Number.isFinite(o),"`longitude` must be supplied"),et(Number.isFinite(r),"`latitude` must be supplied"),et(Number.isFinite(a),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:i,height:n,latitude:r,longitude:o,zoom:a,bearing:l,pitch:u,altitude:d,maxZoom:f,minZoom:y,maxPitch:g,minPitch:b,transitionDuration:x,transitionEasing:w,transitionInterpolator:S,transitionInterruption:E}),this._state={startPanLngLat:k,startZoomLngLat:P,startRotatePos:T,startBearing:C,startPitch:M,startZoom:A}}return Object(K.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,i=t.startPos,n=this._state.startPanLngLat||this._unproject(i);if(!n)return this;var r=this._calculateNewLngLat({startPanLngLat:n,pos:e}),o=Object(l.a)(r,2),a=o[0],s=o[1];return this._getUpdatedMapState({longitude:a,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e,i=t.pos,n=t.deltaAngleX,r=void 0===n?0:n,o=t.deltaAngleY,a=void 0===o?0:o,s=this._state,l=s.startRotatePos,c=s.startBearing,u=s.startPitch;return Number.isFinite(c)&&Number.isFinite(u)?(e=i?this._calculateNewPitchAndBearing(nt(nt({},this._getRotationParams(i,l)),{},{startBearing:c,startPitch:u})):{bearing:c+r,pitch:u+a},this._getUpdatedMapState(e)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,i=t.startPos,n=t.scale;et(n>0,"`scale` must be a positive number");var r=this._state,o=r.startZoom,a=r.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(i)||this._unproject(e)),et(a,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:n,startZoom:o||0}),c=new V(Object.assign({},this._viewportProps,{zoom:s})).getMapCenterByLngLatPosition({lngLat:a,pos:e}),u=Object(l.a)(c,2),h=u[0],d=u[1];return this._getUpdatedMapState({zoom:s,longitude:h,latitude:d})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(e){return new t(Object.assign({},this._viewportProps,this._state,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,i=t.minZoom,n=t.zoom;t.zoom=Q(n,i,e);var r=t.maxPitch,o=t.minPitch,a=t.pitch;return t.pitch=Q(a,o,r),Object.assign(t,function({width:t,height:e,longitude:i,latitude:n,zoom:r,pitch:o=0,bearing:a=0}){(i<-180||i>180)&&(i=d(i+180,360)-180),(a<-180||a>180)&&(a=d(a+180,360)-180);const s=p(e/512);if(r<=s)r=s,n=0;else{const t=e/2/Math.pow(2,r),i=I([0,t])[1];if(n<i)n=i;else{const e=I([0,512-t])[1];n>e&&(n=e)}}return{width:t,height:e,longitude:i,latitude:n,zoom:r,pitch:o,bearing:a}}(t)),t}},{key:"_unproject",value:function(t){var e=new V(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,i=t.pos;return new V(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:i})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,i=t.startZoom,n=this._viewportProps,r=n.maxZoom,o=n.minZoom;return Q(i+Math.log2(e),o,r)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,i=t.deltaScaleY,n=t.startBearing,r=t.startPitch;i=Q(i,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,l=r;return i>0?l=r+i*(s-r):i<0&&(l=r-i*(a-r)),{pitch:l,bearing:n+180*e}}},{key:"_getRotationParams",value:function(t,e){var i=t[0]-e[0],n=t[1]-e[1],r=t[1],o=e[1],a=this._viewportProps,s=a.width,l=a.height,c=i/s,u=0;return n>0?Math.abs(l-o)>5&&(u=n/(o-l)*1.2):n<0&&o>5&&(u=1-r/o),{deltaScaleX:c,deltaScaleY:u=Math.min(1,Math.max(-1,u))}}}]),t}();function ct(t){return t[0].toLowerCase()+t.slice(1)}function ut(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ht(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ut(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var dt=Object(a.createContext)({viewport:null,map:null,container:null,onViewportChange:null,onViewStateChange:null,eventManager:null}),pt=dt.Provider;dt.Provider=function(t){var e=t.value,i=t.children,n=Object(a.useState)(null),r=Object(l.a)(n,2),o=r[0],s=r[1],c=Object(a.useContext)(dt);return e=ht(ht({setMap:s},c),{},{map:c&&c.map||o},e),a.createElement(pt,{value:e},i)};var ft=dt,mt="undefined"!==typeof window?a.useLayoutEffect:a.useEffect;function yt(t,e){var i=e.longitude,n=e.latitude;return t&&t.queryTerrainElevation&&t.queryTerrainElevation([i,n])||0}function vt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function gt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var _t="A valid API access token is required to use Mapbox data";function bt(t){var e=t.map,i=t.props,n=t.width,r=t.height,o=gt(gt(gt({},i),i.viewState),{},{width:n,height:r});return o.position=[0,0,yt(e,o)],new V(o)}var xt={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},wt=Object.assign({},H.a.propTypes,{width:s.oneOfType([s.number,s.string]),height:s.oneOfType([s.number,s.string]),onResize:s.func,disableTokenWarning:s.bool,visible:s.bool,className:s.string,style:s.object,visibilityConstraints:s.object}),St=Object.assign({},H.a.defaultProps,{disableTokenWarning:!1,visible:!0,onResize:function(){},className:"",style:null,visibilityConstraints:rt});function Et(){return a.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},a.createElement("h3",{key:"header"},_t),a.createElement("div",{key:"text"},"For information on setting up your basemap, read"),a.createElement("a",{key:"link",href:"https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens"},"Note on Map Tokens"))}var kt=Object(a.forwardRef)((function(t,e){var i=Object(a.useState)(!0),n=Object(l.a)(i,2),r=n[0],o=n[1],s=Object(a.useState)({width:0,height:0}),c=Object(l.a)(s,2),u=c[0],h=c[1],d=Object(a.useRef)(null),p=Object(a.useRef)(null),f=Object(a.useRef)(null),m=Object(a.useRef)(null),y=Object(a.useContext)(ft);mt((function(){if(kt.supported()){var e=new H.a(gt(gt(gt({},t),u),{},{mapboxgl:X.a,container:p.current,onError:function(e){401===(e.error&&e.error.status||e.status)&&r&&(console.error(_t),o(!1)),t.onError(e)}}));d.current=e,y&&y.setMap&&y.setMap(e.getMap());var i=new Z.default((function(e){if(e[0].contentRect){var i=e[0].contentRect,n=i.width,r=i.height;h({width:n,height:r}),t.onResize({width:n,height:r})}}));return i.observe(f.current),function(){e.finalize(),d.current=null,i.disconnect()}}}),[]),mt((function(){d.current&&d.current.setProps(gt(gt({},t),u))}));var v=d.current&&d.current.getMap();Object(a.useImperativeHandle)(e,(function(){return function(t){return{getMap:function(){return t.current&&t.current.getMap()},queryRenderedFeatures:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.current&&t.current.getMap();return n&&n.queryRenderedFeatures(e,i)}}}(d)}),[]);var g=Object(a.useCallback)((function(t){var e=t.target;e===m.current&&e.scrollTo(0,0)}),[]),_=v&&a.createElement(pt,{value:gt(gt({},y),{},{viewport:y.viewport||bt(gt({map:v,props:t},u)),map:v,container:y.container||f.current})},a.createElement("div",{key:"map-overlays",className:"overlays",ref:m,style:xt,onScroll:g},t.children)),b=t.className,x=t.width,w=t.height,S=t.style,E=t.visibilityConstraints,k=Object.assign({position:"relative"},S,{width:x,height:w}),P=t.visible&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt;for(var i in e){var n=i.slice(0,3),r=ct(i.slice(3));if("min"===n&&t[r]<e[i])return!1;if("max"===n&&t[r]>e[i])return!1}return!0}(t.viewState||t,E),T=Object.assign({},xt,{visibility:P?"inherit":"hidden"});return a.createElement("div",{key:"map-container",ref:f,style:k},a.createElement("div",{key:"map-mapbox",ref:p,style:T,className:b}),_,!r&&!t.disableTokenWarning&&a.createElement(Et,null))}));kt.supported=function(){return X.a&&X.a.supported()},kt.propTypes=wt,kt.defaultProps=St;var Pt=kt;function Tt(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"===typeof t)return Ct(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ct(t,e)}(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Mt=function(){function t(){Object(Y.a)(this,t),Object(o.a)(this,"propNames",[])}return Object(K.a)(t,[{key:"arePropsEqual",value:function(t,e){var i,n=Tt(this.propNames||[]);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(!J(t[r],e[r]))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}},{key:"initializeProps",value:function(t,e){return{start:t,end:e}}},{key:"interpolateProps",value:function(t,e,i){et(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(t,e){return e.transitionDuration}}]),t}(),At=i(21);function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function It(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}var Dt=i(33);function zt(t,e){return!e||"object"!==Object(Dt.a)(e)&&"function"!==typeof e?Object(At.a)(t):e}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rt={longitude:1,bearing:1};function Ft(t){return Number.isFinite(t)||Array.isArray(t)}function Bt(t,e,i){return function(t){return t in Rt}(t)&&Math.abs(i-e)>180&&(i=i<0?i+360:i-360),i}function jt(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"===typeof t)return Nt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Nt(t,e)}(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Vt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Lt(t);if(e){var r=Lt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return zt(this,i)}}var Ut=["longitude","latitude","zoom","bearing","pitch"],Gt=["latitude","longitude","zoom","width","height"],qt=["bearing","pitch"],Zt={speed:1.2,curve:1.414};!function(t){It(i,t);var e=Vt(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Y.a)(this,i),t=e.call(this),Object(o.a)(Object(At.a)(t),"propNames",Ut),t.props=Object.assign({},Zt,n),t}Object(K.a)(i,[{key:"initializeProps",value:function(t,e){var i,n={},r={},o=jt(Gt);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=t[a],l=e[a];et(Ft(s)&&Ft(l),"".concat(a," must be supplied for transition")),n[a]=s,r[a]=Bt(a,s,l)}}catch(f){o.e(f)}finally{o.f()}var c,u=jt(qt);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=t[h]||0,p=e[h]||0;n[h]=d,r[h]=Bt(h,d,p)}}catch(f){u.e(f)}finally{u.f()}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,i){var n,r=function(t,e,i,n={}){const r={},{startZoom:o,startCenterXY:a,uDelta:s,w0:l,u1:c,S:u,rho:h,rho2:d,r0:p}=q(t,e,n);if(c<.01){for(const n of U){const o=t[n],a=e[n];r[n]=(f=i)*a+(1-f)*o}return r}var f;const m=i*u,y=Math.cosh(p)/Math.cosh(p+h*m),v=l*((Math.cosh(p)*Math.tanh(p+h*m)-Math.sinh(p))/d)/c,_=o+A(1/y),b=(S=v,(x=[])[0]=(w=s)[0]*S,x[1]=w[1]*S,x);var x,w,S;g(b,b,a);const E=I(b);return r.longitude=E[0],r.latitude=E[1],r.zoom=_,r}(t,e,i,this.props),o=jt(qt);try{for(o.s();!(n=o.n()).done;){var a=n.value;r[a]=tt(t[a],e[a],i)}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"getDuration",value:function(t,e){var i=e.transitionDuration;return"auto"===i&&(i=function(t,e,i={}){i=Object.assign({},G,i);const{screenSpeed:n,speed:r,maxDuration:o}=i,{S:a,rho:s}=q(t,e,i),l=1e3*a;let c;return c=Number.isFinite(n)?l/(n/s):l/r,Number.isFinite(o)&&c>o?0:c}(t,e,this.props)),i}}])}(Mt);function Ht(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"===typeof t)return Wt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wt(t,e)}(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Xt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Lt(t);if(e){var r=Lt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return zt(this,i)}}var Yt=["longitude","latitude","zoom","bearing","pitch"],Kt=function(t){It(i,t);var e=Xt(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Y.a)(this,i),t=e.call(this),Array.isArray(n)&&(n={transitionProps:n}),t.propNames=n.transitionProps||Yt,n.around&&(t.around=n.around),t}return Object(K.a)(i,[{key:"initializeProps",value:function(t,e){var i={},n={};if(this.around){i.around=this.around;var r=new V(t).unproject(this.around);Object.assign(n,e,{around:new V(e).project(r),aroundLngLat:r})}var o,a=Ht(this.propNames);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=t[s],c=e[s];et(Ft(l)&&Ft(c),"".concat(s," must be supplied for transition")),i[s]=l,n[s]=Bt(s,l,c)}}catch(u){a.e(u)}finally{a.f()}return{start:i,end:n}}},{key:"interpolateProps",value:function(t,e,i){var n,r={},o=Ht(this.propNames);try{for(o.s();!(n=o.n()).done;){var a=n.value;r[a]=tt(t[a],e[a],i)}}catch(d){o.e(d)}finally{o.f()}if(e.around){var s=new V(Object.assign({},e,r)).getMapCenterByLngLatPosition({lngLat:e.aroundLngLat,pos:tt(t.around,e.around,i)}),c=Object(l.a)(s,2),u=c[0],h=c[1];r.longitude=u,r.latitude=h}return r}}]),i}(Mt),$t=function(){};var Jt=1,Qt=2,te=3,ee=4,ie={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new Kt,transitionInterruption:Jt,onTransitionStart:$t,onTransitionInterrupt:$t,onTransitionEnd:$t},ne=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Y.a)(this,t),Object(o.a)(this,"_animationFrame",null),Object(o.a)(this,"_onTransitionFrame",(function(){e._animationFrame=requestAnimationFrame(e._onTransitionFrame),e._updateViewport()})),this.props=null,this.onViewportChange=i.onViewportChange||$t,this.onStateChange=i.onStateChange||$t,this.time=i.getTime||Date.now}return Object(K.a)(t,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(t){var e=this.props;if(this.props=t,!e||this._shouldIgnoreViewportChange(e,t))return!1;if(this._isTransitionEnabled(t)){var i=Object.assign({},e),n=Object.assign({},t);if(this._isTransitionInProgress()&&(e.onTransitionInterrupt(),this.state.interruption===Qt?Object.assign(i,this.state.endProps):Object.assign(i,this.state.propsInTransition),this.state.interruption===ee)){var r=this.time(),o=(r-this.state.startTime)/this.state.duration;n.transitionDuration=this.state.duration-(r-this.state.startTime),n.transitionEasing=function(t,e){var i=t(e);return function(n){return 1/(1-i)*(t(n*(1-e)+e)-i)}}(this.state.easing,o),n.transitionInterpolator=i.transitionInterpolator}return n.onTransitionStart(),this._triggerTransition(i,n),!0}return this._isTransitionInProgress()&&(e.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function(t){var e=t.transitionDuration,i=t.transitionInterpolator;return(e>0||"auto"===e)&&Boolean(i)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return!t||(this._isTransitionInProgress()?this.state.interruption===te||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e))}},{key:"_triggerTransition",value:function(t,e){et(this._isTransitionEnabled(e)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var i=e.transitionInterpolator,n=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0!==n){var r=e.transitionInterpolator.initializeProps(t,e),o={inTransition:!0,isZooming:t.zoom!==e.zoom,isPanning:t.longitude!==e.longitude||t.latitude!==e.latitude,isRotating:t.bearing!==e.bearing||t.pitch!==e.pitch};this.state={duration:n,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startTime:this.time(),startProps:r.start,endProps:r.end,animation:null,propsInTransition:{}},this._onTransitionFrame(),this.onStateChange(o)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var t=this.time(),e=this.state,i=e.startTime,n=e.duration,r=e.easing,o=e.interpolator,a=e.startProps,s=e.endProps,l=!1,c=(t-i)/n;c>=1&&(c=1,l=!0),c=r(c);var u=o.interpolateProps(a,s,c),h=new lt(Object.assign({},this.props,u));this.state.propsInTransition=h.getViewportProps(),this.onViewportChange(this.state.propsInTransition,this.props),l&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();Object(o.a)(ne,"defaultProps",ie);var re=i(57),oe=i.n(re);const ae={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const i=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return!0;return!1}(i,(e=>e.pointerId===t.pointerId))||i.push(t)),e.call(this,t)}}(oe.a.PointerEventInput),oe.a.MouseInput.prototype.handler=function(t){let e=ae[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const se=oe.a.Manager;var le=oe.a;const ce=le?[[le.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[le.Rotate,{enable:!1}],[le.Pinch,{enable:!1}],[le.Swipe,{enable:!1}],[le.Pan,{threshold:0,enable:!1}],[le.Press,{enable:!1}],[le.Tap,{event:"doubletap",taps:2,enable:!1}],[le.Tap,{event:"anytap",enable:!1}],[le.Tap,{enable:!1}]]:null,ue={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},he={doubletap:["tap"]},de={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},pe={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},fe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},me={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};var ye=i(42);const ve=-1!==ye.b.indexOf("firefox"),{WHEEL_EVENTS:ge}=pe,_e="wheel",be=4.000244140625;class xe{constructor(t,e,i={}){this.element=t,this.callback=e,this.options=Object.assign({enable:!0},i),this.events=ge.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!ye.a&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===_e&&(this.options.enable=e)}handleEvent(t){if(!this.options.enable)return;let e=t.deltaY;ye.c.WheelEvent&&(ve&&t.deltaMode===ye.c.WheelEvent.DOM_DELTA_PIXEL&&(e/=ye.c.devicePixelRatio),t.deltaMode===ye.c.WheelEvent.DOM_DELTA_LINE&&(e*=40));const i={x:t.clientX,y:t.clientY};0!==e&&e%be===0&&(e=Math.floor(e/be)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,i)}_onWheel(t,e,i){this.callback({type:_e,center:i,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}const{MOUSE_EVENTS:we}=pe,Se="pointermove",Ee="pointerover",ke="pointerout",Pe="pointerleave";class Te{constructor(t,e,i={}){this.element=t,this.callback=e,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=we.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===Se&&(this.enableMoveEvent=e),t===Ee&&(this.enableOverEvent=e),t===ke&&(this.enableOutEvent=e),t===Pe&&(this.enableLeaveEvent=e)}handleEvent(t){this.handleOverEvent(t),this.handleOutEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this.callback({type:Ee,srcEvent:t,pointerType:"mouse",target:t.target})}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this.callback({type:ke,srcEvent:t,pointerType:"mouse",target:t.target})}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:Pe,srcEvent:t,pointerType:"mouse",target:t.target})}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:Se,srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:Ce}=pe,Me="keydown",Ae="keyup";class Oe{constructor(t,e,i={}){this.element=t,this.callback=e,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=Ce.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=i.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===Me&&(this.enableDownEvent=e),t===Ae&&(this.enableUpEvent=e)}handleEvent(t){const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:Me,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:Ae,srcEvent:t,key:t.key,target:t.target}))}}const Ie="contextmenu";class De{constructor(t,e,i={}){this.element=t,this.callback=e,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===Ie&&(this.options.enable=e)}handleEvent(t){this.options.enable&&this.callback({type:Ie,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const ze={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};const Le={srcElement:"root",priority:0};class Re{constructor(t){this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(t,e,i,n=!1,r=!1){const{handlers:o,handlersByElement:a}=this;i&&("object"!==typeof i||i.addEventListener)&&(i={srcElement:i}),i=i?Object.assign({},Le,i):Le;let s=a.get(i.srcElement);s||(s=[],a.set(i.srcElement,s));const l={type:t,handler:e,srcElement:i.srcElement,priority:i.priority};n&&(l.once=!0),r&&(l.passive=!0),o.push(l),this._active=this._active||!l.passive;let c=s.length-1;for(;c>=0&&!(s[c].priority>=l.priority);)c--;s.splice(c+1,0,l)}remove(t,e){const{handlers:i,handlersByElement:n}=this;for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.type===t&&o.handler===e){i.splice(r,1);const t=n.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&n.delete(o.srcElement)}}this._active=i.some((t=>!t.passive))}handleEvent(t){if(this.isEmpty())return;const e=this._normalizeEvent(t);let i=t.srcEvent.target;for(;i&&i!==e.rootElement;){if(this._emit(e,i),e.handled)return;i=i.parentNode}this._emit(e,"root")}_emit(t,e){const i=this.handlersByElement.get(e);if(i){let e=!1;const n=()=>{t.handled=!0},r=()=>{t.handled=!0,e=!0},o=[];for(let a=0;a<i.length;a++){const{type:s,handler:l,once:c}=i[a];if(l(Object.assign({},t,{type:s,stopPropagation:n,stopImmediatePropagation:r})),c&&o.push(i[a]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:i}=o[t];this.remove(e,i)}}}_normalizeEvent(t){const e=this.eventManager.element;return Object.assign({},t,function(t){const e=ze[t.srcEvent.type];if(!e)return null;const{buttons:i,button:n,which:r}=t.srcEvent;let o=!1,a=!1,s=!1;return 4===e||2===e&&!Number.isFinite(i)?(o=1===r,a=2===r,s=3===r):2===e?(o=Boolean(1&i),a=Boolean(4&i),s=Boolean(2&i)):1===e&&(o=0===n,a=1===n,s=2===n),{leftButton:o,middleButton:a,rightButton:s}}(t),function(t,e){const{srcEvent:i}=t;if(!t.center&&!Number.isFinite(i.clientX))return null;const n=t.center||{x:i.clientX,y:i.clientY},r=e.getBoundingClientRect(),o=r.width/e.offsetWidth||1,a=r.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-e.clientLeft)/o,y:(n.y-r.top-e.clientTop)/a}}}(t,e),{handled:!1,rootElement:e})}}const Fe={events:null,recognizers:null,recognizerOptions:{},Manager:se,touchAction:"none",tabIndex:0};class Be{constructor(t=null,e={}){this.options=Object.assign({},Fe,e),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);const{events:i}=e;i&&this.on(i)}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,i=e.Manager;this.manager=new i(t,{touchAction:e.touchAction,recognizers:e.recognizers||ce}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(ue).forEach((t=>{const e=this.manager.get(t);e&&ue[t].forEach((t=>{e.recognizeWith(t)}))}));for(const n in e.recognizerOptions){const t=this.manager.get(n);if(t){const i=e.recognizerOptions[n];delete i.enable,t.set(i)}}this.wheelInput=new xe(t,this._onOtherEvent,{enable:!1}),this.moveInput=new Te(t,this._onOtherEvent,{enable:!1}),this.keyInput=new Oe(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new De(t,this._onOtherEvent,{enable:!1});for(const[n,r]of this.events)r.isEmpty()||(this._toggleRecognizer(r.recognizerName,!0),this.manager.on(n,r.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,i){this._addEventHandler(t,e,i,!1)}once(t,e,i){this._addEventHandler(t,e,i,!0)}watch(t,e,i){this._addEventHandler(t,e,i,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:i}=this;if(!i)return;const n=i.get(t);if(n&&n.options.enable!==e){n.set({enable:e});const r=he[t];r&&!this.options.recognizers&&r.forEach((r=>{const o=i.get(r);e?(o.requireFailure(t),n.dropRequireFailure(r)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,i,n,r){if("string"!==typeof t){i=e;for(const e in t)this._addEventHandler(e,t[e],i,n,r);return}const{manager:o,events:a}=this,s=me[t]||t;let l=a.get(s);l||(l=new Re(this),a.set(s,l),l.recognizerName=fe[s]||s,o&&o.on(s,l.handleEvent)),l.add(t,e,i,n,r),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!==typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:i}=this,n=me[t]||t,r=i.get(n);if(r&&(r.remove(t,e),r.isEmpty())){const{recognizerName:t}=r;let e=!1;for(const n of i.values())if(n.recognizerName===t&&!n.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}_onBasicInput(t){const{srcEvent:e}=t,i=de[e.type];i&&this.manager.emit(i,t)}_onOtherEvent(t){this.manager.emit(t.type,t)}}function je(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Ne(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?je(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):je(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Ve={transitionDuration:0},Ue={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new Kt,transitionInterruption:Jt},Ge=300,qe=function(t){return 1-(1-t)*(1-t)},Ze=["wheel"],He=["panstart","panmove","panend"],We=["pinchstart","pinchmove","pinchend"],Xe=["tripanstart","tripanmove","tripanend"],Ye=["doubletap"],Ke=["keydown"],$e=function(){function t(){var e=this;Object(Y.a)(this,t),Object(o.a)(this,"events",[]),Object(o.a)(this,"scrollZoom",!0),Object(o.a)(this,"dragPan",!0),Object(o.a)(this,"dragRotate",!0),Object(o.a)(this,"doubleClickZoom",!0),Object(o.a)(this,"touchZoom",!0),Object(o.a)(this,"touchRotate",!1),Object(o.a)(this,"keyboard",!0),Object(o.a)(this,"_interactionState",{isDragging:!1}),Object(o.a)(this,"_events",{}),Object(o.a)(this,"_setInteractionState",(function(t){Object.assign(e._interactionState,t),e.onStateChange&&e.onStateChange(e._interactionState)})),Object(o.a)(this,"_onTransition",(function(t,i){e.onViewportChange(t,e._interactionState,i)})),this.handleEvent=this.handleEvent.bind(this),this._transitionManager=new ne({onViewportChange:this._onTransition,onStateChange:this._setInteractionState})}return Object(K.a)(t,[{key:"handleEvent",value:function(t){this.mapState=this.getMapState();var e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"blockEvents",value:function(t){var e=this,i=setTimeout((function(){e._eventStartBlocked===i&&(e._eventStartBlocked=null)}),t);this._eventStartBlocked=i}},{key:"updateViewport",value:function(t,e,i){var n=this.mapState instanceof lt?this.mapState.getViewportProps():this.mapState,r=Ne(Ne({},t.getViewportProps()),e),o=Object.keys(r).some((function(t){return n[t]!==r[t]}));this._state=t.getState(),this._setInteractionState(i),o&&this.onViewportChange(r,this._interactionState,n)}},{key:"getMapState",value:function(t){return new lt(Ne(Ne(Ne({},this.mapStateProps),this._state),t))}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"setOptions",value:function(t){var e=t.onViewportChange,i=t.onStateChange,n=t.eventManager,r=void 0===n?this.eventManager:n,o=t.isInteractive,a=void 0===o||o,s=t.scrollZoom,l=void 0===s?this.scrollZoom:s,c=t.dragPan,u=void 0===c?this.dragPan:c,h=t.dragRotate,d=void 0===h?this.dragRotate:h,p=t.doubleClickZoom,f=void 0===p?this.doubleClickZoom:p,m=t.touchZoom,y=void 0===m?this.touchZoom:m,v=t.touchRotate,g=void 0===v?this.touchRotate:v,_=t.keyboard,b=void 0===_?this.keyboard:_;this.onViewportChange=e,this.onStateChange=i;var x=this.mapStateProps||{},w=x.height!==t.height||x.width!==t.width;this.mapStateProps=t,w&&(this.mapState=x,this.updateViewport(new lt(t))),this._transitionManager.processViewportChange(t),this.eventManager!==r&&(this.eventManager=r,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(Ze,a&&Boolean(l)),this.toggleEvents(He,a&&Boolean(u||d)),this.toggleEvents(We,a&&Boolean(y||g)),this.toggleEvents(Xe,a&&Boolean(g)),this.toggleEvents(Ye,a&&Boolean(f)),this.toggleEvents(Ke,a&&Boolean(b)),this.scrollZoom=l,this.dragPan=u,this.dragRotate=d,this.doubleClickZoom=f,this.touchZoom=y,this.touchRotate=g,this.keyboard=b}},{key:"toggleEvents",value:function(t,e){var i=this;this.eventManager&&t.forEach((function(t){i._events[t]!==e&&(i._events[t]=e,e?i.eventManager.on(t,i.handleEvent):i.eventManager.off(t,i.handleEvent))}))}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);this._panRotate=this.isFunctionKeyPressed(t)||t.rightButton;var i=this._panRotate?this.mapState.rotateStart({pos:e}):this.mapState.panStart({pos:e});return this.updateViewport(i,Ve,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){return!!this.isDragging()&&(this._panRotate?this._onPanRotate(t):this._onPanMove(t))}},{key:"_onPanEnd",value:function(t){return!!this.isDragging()&&(this._panRotate?this._onPanRotateEnd(t):this._onPanMoveEnd(t))}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),i=this.mapState.pan({pos:e});return this.updateViewport(i,Ve,{isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(t){if(this.dragPan){var e=this.dragPan.inertia,i=void 0===e?Ge:e;if(i&&t.velocity){var n=this.getCenter(t),r=[n[0]+t.velocityX*i/2,n[1]+t.velocityY*i/2],o=this.mapState.pan({pos:r}).panEnd();return this.updateViewport(o,Ne(Ne({},Ue),{},{transitionDuration:i,transitionEasing:qe}),{isDragging:!1,isPanning:!0}),!0}}var a=this.mapState.panEnd();return this.updateViewport(a,null,{isDragging:!1,isPanning:!1}),!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=this.getCenter(t),i=this.mapState.rotate({pos:e});return this.updateViewport(i,Ve,{isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(t){if(this.dragRotate){var e=this.dragRotate.inertia,i=void 0===e?Ge:e;if(i&&t.velocity){var n=this.getCenter(t),r=[n[0]+t.velocityX*i/2,n[1]+t.velocityY*i/2],o=this.mapState.rotate({pos:r}).rotateEnd();return this.updateViewport(o,Ne(Ne({},Ue),{},{transitionDuration:i,transitionEasing:qe}),{isDragging:!1,isRotating:!0}),!0}}var a=this.mapState.panEnd();return this.updateViewport(a,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;var e=this.scrollZoom,i=e.speed,n=void 0===i?.01:i,r=e.smooth,o=void 0!==r&&r;t.preventDefault();var a=this.getCenter(t),s=t.delta,l=2/(1+Math.exp(-Math.abs(s*n)));s<0&&0!==l&&(l=1/l);var c=this.mapState.zoom({pos:a,scale:l});return c.getViewportProps().zoom!==this.mapStateProps.zoom&&(this.updateViewport(c,Ne(Ne({},Ue),{},{transitionInterpolator:new Kt({around:a}),transitionDuration:o?250:1}),{isPanning:!0,isZooming:!0}),!0)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),i=this.mapState.zoomStart({pos:e}).rotateStart({pos:e});return this._startPinchRotation=t.rotation,this._lastPinchEvent=t,this.updateViewport(i,Ve,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.isDragging())return!1;if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.mapState;if(this.touchZoom){var i=t.scale,n=this.getCenter(t);e=e.zoom({pos:n,scale:i})}if(this.touchRotate){var r=t.rotation;e=e.rotate({deltaAngleX:this._startPinchRotation-r})}return this.updateViewport(e,Ve,{isDragging:!0,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:Boolean(this.touchRotate)}),this._lastPinchEvent=t,!0}},{key:"_onPinchEnd",value:function(t){if(!this.isDragging())return!1;if(this.touchZoom){var e=this.touchZoom.inertia,i=void 0===e?Ge:e,n=this._lastPinchEvent;if(i&&n&&t.scale!==n.scale){var r=this.getCenter(t),o=this.mapState.rotateEnd(),a=Math.log2(t.scale),s=(a-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,a+s*i/2);return o=o.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(o,Ne(Ne({},Ue),{},{transitionInterpolator:new Kt({around:r}),transitionDuration:i,transitionEasing:qe}),{isDragging:!1,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:!1}),this.blockEvents(i),!0}}var c=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(c,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onTriplePanStart",value:function(t){var e=this.getCenter(t),i=this.mapState.rotateStart({pos:e});return this.updateViewport(i,Ve,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(t){if(!this.isDragging())return!1;if(!this.touchRotate)return!1;var e=this.getCenter(t);e[0]-=t.deltaX;var i=this.mapState.rotate({pos:e});return this.updateViewport(i,Ve,{isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(t){if(!this.isDragging())return!1;if(this.touchRotate){var e=this.touchRotate.inertia,i=void 0===e?Ge:e;if(i&&t.velocityY){var n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*i/2],o=this.mapState.rotate({pos:r});return this.updateViewport(o,Ne(Ne({},Ue),{},{transitionDuration:i,transitionEasing:qe}),{isDragging:!1,isRotating:!0}),this.blockEvents(i),!1}}var a=this.mapState.rotateEnd();return this.updateViewport(a,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),i=this.isFunctionKeyPressed(t),n=this.mapState.zoom({pos:e,scale:i?.5:2});return this.updateViewport(n,Object.assign({},Ue,{transitionInterpolator:new Kt({around:e})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,i=this.isFunctionKeyPressed(t),n=this.keyboard,r=n.zoomSpeed,o=void 0===r?2:r,a=n.moveSpeed,s=void 0===a?100:a,l=n.rotateSpeedX,c=void 0===l?15:l,u=n.rotateSpeedY,h=void 0===u?10:u,d=this.mapStateProps;switch(t.srcEvent.keyCode){case 189:e=i?this.getMapState({zoom:d.zoom-Math.log2(o)-1}):this.getMapState({zoom:d.zoom-Math.log2(o)});break;case 187:e=i?this.getMapState({zoom:d.zoom+Math.log2(o)+1}):this.getMapState({zoom:d.zoom+Math.log2(o)});break;case 37:e=i?this.getMapState({bearing:d.bearing-c}):this.mapState.pan({pos:[s,0],startPos:[0,0]});break;case 39:e=i?this.getMapState({bearing:d.bearing+c}):this.mapState.pan({pos:[-s,0],startPos:[0,0]});break;case 38:e=i?this.getMapState({pitch:d.pitch+h}):this.mapState.pan({pos:[0,s],startPos:[0,0]});break;case 40:e=i?this.getMapState({pitch:d.pitch-h}):this.mapState.pan({pos:[0,-s],startPos:[0,0]});break;default:return!1}return this.updateViewport(e,Ue)}}]),t}();function Je(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Qe(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Je(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ti=Object.assign({},Pt.propTypes,{maxZoom:s.number,minZoom:s.number,maxPitch:s.number,minPitch:s.number,onViewStateChange:s.func,onViewportChange:s.func,onInteractionStateChange:s.func,transitionDuration:s.oneOfType([s.number,s.string]),transitionInterpolator:s.object,transitionInterruption:s.number,transitionEasing:s.func,onTransitionStart:s.func,onTransitionInterrupt:s.func,onTransitionEnd:s.func,scrollZoom:s.oneOfType([s.bool,s.object]),dragPan:s.oneOfType([s.bool,s.object]),dragRotate:s.oneOfType([s.bool,s.object]),doubleClickZoom:s.bool,touchZoom:s.oneOfType([s.bool,s.object]),touchRotate:s.oneOfType([s.bool,s.object]),keyboard:s.oneOfType([s.bool,s.object]),onHover:s.func,onClick:s.func,onDblClick:s.func,onContextMenu:s.func,onMouseDown:s.func,onMouseMove:s.func,onMouseUp:s.func,onTouchStart:s.func,onTouchMove:s.func,onTouchEnd:s.func,onMouseEnter:s.func,onMouseLeave:s.func,onMouseOut:s.func,onWheel:s.func,touchAction:s.string,eventRecognizerOptions:s.object,clickRadius:s.number,interactiveLayerIds:s.array,getCursor:s.func,controller:s.instanceOf($e)}),ei=Object.assign({},Pt.defaultProps,rt,ne.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(t){return t.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",eventRecognizerOptions:{},clickRadius:0,getCursor:function(t){var e=t.isDragging,i=t.isHovering;return e?"grabbing":i?"pointer":"grab"}});function ii(t){if(t.lngLat||!t.offsetCenter)return t;var e=t.offsetCenter,i=e.x,n=e.y;if(!Number.isFinite(i)||!Number.isFinite(n))return t;var r=[i,n];t.point=r;var o=this.viewport,a=o.unproject(r,{targetZ:o.meterOffset[2]});return t.lngLat=[a[0],a[1]],t}function ni(t){var e=this.map;if(!e||!t)return null;var i={},n=this.props.clickRadius;this.props.interactiveLayerIds&&(i.layers=this.props.interactiveLayerIds);try{return e.queryRenderedFeatures(n?[[t[0]-n,t[1]+n],[t[0]+n,t[1]-n]]:t,i)}catch(r){return null}}function ri(t,e){var i=this.props[t];i&&i(ii.call(this,e))}function oi(t){ri.call(this,"touch"===t.pointerType?"onTouchStart":"onMouseDown",t)}function ai(t){ri.call(this,"touch"===t.pointerType?"onTouchEnd":"onMouseUp",t)}function si(t){if(ri.call(this,"touch"===t.pointerType?"onTouchMove":"onMouseMove",t),!this.state.isDragging){var e,i=this.props,n=i.onHover,r=i.interactiveLayerIds;t=ii.call(this,t),(r||n)&&(e=ni.call(this,t.point));var o=Boolean(r&&e&&e.length>0),a=o&&!this.state.isHovering,s=!o&&this.state.isHovering;(n||a)&&(t.features=e,n&&n(t)),a&&ri.call(this,"onMouseEnter",t),s&&ri.call(this,"onMouseLeave",t),(a||s)&&this.setState({isHovering:o})}}function li(t){var e=this.props,i=e.onClick,n=e.onNativeClick,r=e.onDblClick,o=e.doubleClickZoom,a=[],s=r||o;switch(t.type){case"anyclick":a.push(n),s||a.push(i);break;case"click":s&&a.push(i)}(a=a.filter(Boolean)).length&&((t=ii.call(this,t)).features=ni.call(this,t.point),a.forEach((function(e){return e(t)})))}var ci=Object(a.forwardRef)((function(t,e){var i=Object(a.useContext)(ft),o=Object(a.useMemo)((function(){return t.controller||new $e}),[]),s=Object(a.useMemo)((function(){return new Be(null,{touchAction:t.touchAction,recognizerOptions:t.eventRecognizerOptions})}),[]),l=Object(a.useRef)(null),c=Object(a.useRef)(null),u=Object(a.useRef)({width:0,height:0,state:{isHovering:!1,isDragging:!1}}).current;u.props=t,u.map=c.current&&c.current.getMap(),u.setState=function(e){u.state=Qe(Qe({},u.state),e),l.current.style.cursor=t.getCursor(u.state)};var h,d,p=!0,f=function(t,e,i){if(p)h=[t,e,i];else{var n=u.props,r=n.onViewStateChange,o=n.onViewportChange;Object.defineProperty(t,"position",{get:function(){return[0,0,yt(u.map,t)]}}),r&&r({viewState:t,interactionState:e,oldViewState:i}),o&&o(t,e,i)}};Object(a.useImperativeHandle)(e,(function(){return function(t){return{getMap:t.current&&t.current.getMap,queryRenderedFeatures:t.current&&t.current.queryRenderedFeatures}}(c)}),[]);var m=Object(a.useMemo)((function(){return Qe(Qe({},i),{},{eventManager:s,container:i.container||l.current})}),[i,l.current]);m.onViewportChange=f,m.viewport=i.viewport||bt(u),u.viewport=m.viewport;var y=function(t){var e=t.isDragging,i=void 0!==e&&e;if(i!==u.state.isDragging&&u.setState({isDragging:i}),p)d=t;else{var n=u.props.onInteractionStateChange;n&&n(t)}},v=function(){u.width&&u.height&&o.setOptions(Qe(Qe(Qe({},u.props),u.props.viewState),{},{isInteractive:Boolean(u.props.onViewStateChange||u.props.onViewportChange),onViewportChange:f,onStateChange:y,eventManager:s,width:u.width,height:u.height}))};Object(a.useEffect)((function(){return s.setElement(l.current),s.on({pointerdown:oi.bind(u),pointermove:si.bind(u),pointerup:ai.bind(u),pointerleave:ri.bind(u,"onMouseOut"),click:li.bind(u),anyclick:li.bind(u),dblclick:ri.bind(u,"onDblClick"),wheel:ri.bind(u,"onWheel"),contextmenu:ri.bind(u,"onContextMenu")}),function(){s.destroy()}}),[]),mt((function(){h&&f.apply(void 0,Object(r.a)(h)),d&&y(d)})),v();var g=t.width,_=t.height,b=t.style,x=t.getCursor,w=Object(a.useMemo)((function(){return Qe(Qe({position:"relative"},b),{},{width:g,height:_,cursor:x(u.state)})}),[b,g,_,x,u.state]);return h&&u._child||(u._child=a.createElement(pt,{value:m},a.createElement("div",{key:"event-canvas",ref:l,style:w},a.createElement(Pt,Object(n.a)({},t,{width:"100%",height:"100%",style:null,onResize:function(t){var e=t.width,i=t.height;u.width=e,u.height=i,v(),u.props.onResize({width:e,height:i})},ref:c}))))),p=!1,u._child}));ci.supported=Pt.supported,ci.propTypes=ti,ci.defaultProps=ei;var ui=ci;function hi(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!hi(t[i],e[i]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===Object(Dt.a)(t)&&"object"===Object(Dt.a)(e)){var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var o=0,a=n;o<a.length;o++){var s=a[o];if(!e.hasOwnProperty(s))return!1;if(!hi(t[s],e[s]))return!1}return!0}return!1}function di(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var pi={type:s.string.isRequired,id:s.string},fi=0;function mi(t,e,i){if(t.style&&t.style._loaded){var n=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?di(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):di(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},i);return delete n.id,delete n.children,t.addSource(e,n),t.getSource(e)}return null}function yi(t){var e=Object(a.useContext)(ft),i=Object(a.useRef)({id:t.id,type:t.type}),n=Object(a.useState)(0),r=Object(l.a)(n,2)[1],o=Object(a.useMemo)((function(){return t.id||"jsx-source-".concat(fi++)}),[]),s=e.map;Object(a.useEffect)((function(){if(s){var t=function(){return r((function(t){return t+1}))};return s.on("styledata",t),function(){s.off("styledata",t),requestAnimationFrame((function(){s.style&&s.style._loaded&&s.getSource(o)&&s.removeSource(o)}))}}}),[s,o]);var c=s&&s.style&&s.getSource(o);return c?function(t,e,i){et(e.id===i.id,"source id changed"),et(e.type===i.type,"source type changed");var n="",r=0;for(var o in e)"children"===o||"id"===o||hi(i[o],e[o])||(n=o,r++);if(r){var a=e.type;if("geojson"===a)t.setData(e.data);else if("image"===a)t.updateImage({url:e.url,coordinates:e.coordinates});else if("canvas"!==a&&"video"!==a||1!==r||"coordinates"!==n)if("vector"===a&&t.setUrl)switch(n){case"url":t.setUrl(e.url);break;case"tiles":t.setTiles(e.tiles)}else console.warn("Unable to update <Source> prop: ".concat(n));else t.setCoordinates(e.coordinates)}}(c,t,i.current):c=mi(s,o,t),i.current=t,c&&a.Children.map(t.children,(function(t){return t&&Object(a.cloneElement)(t,{source:o})}))||null}yi.propTypes=pi;var vi=i(13);function gi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?gi(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):gi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var bi={type:s.oneOf(["fill","line","symbol","circle","fill-extrusion","raster","background","heatmap","hillshade","sky"]).isRequired,id:s.string,source:s.string,beforeId:s.string};function xi(t,e,i,n){et(i.id===n.id,"layer id changed"),et(i.type===n.type,"layer type changed");try{!function(t,e,i,n){var r=i.layout,o=void 0===r?{}:r,a=i.paint,s=void 0===a?{}:a,l=i.filter,c=i.minzoom,u=i.maxzoom,h=i.beforeId,d=Object(vi.a)(i,["layout","paint","filter","minzoom","maxzoom","beforeId"]);if(h!==n.beforeId&&t.moveLayer(e,h),o!==n.layout){var p=n.layout||{};for(var f in o)hi(o[f],p[f])||t.setLayoutProperty(e,f,o[f]);for(var m in p)o.hasOwnProperty(m)||t.setLayoutProperty(e,m,void 0)}if(s!==n.paint){var y=n.paint||{};for(var v in s)hi(s[v],y[v])||t.setPaintProperty(e,v,s[v]);for(var g in y)s.hasOwnProperty(g)||t.setPaintProperty(e,g,void 0)}for(var _ in hi(l,n.filter)||t.setFilter(e,l),c===n.minzoom&&u===n.maxzoom||t.setLayerZoomRange(e,c,u),d)hi(d[_],n[_])||t.setLayerProperty(e,_,d[_])}(t,e,i,n)}catch(r){console.warn(r)}}var wi=0;function Si(t){var e=Object(a.useContext)(ft),i=Object(a.useRef)({id:t.id,type:t.type}),n=Object(a.useState)(0),r=Object(l.a)(n,2)[1],o=Object(a.useMemo)((function(){return t.id||"jsx-layer-".concat(wi++)}),[]),s=e.map;return Object(a.useEffect)((function(){if(s){var t=function(){return r((function(t){return t+1}))};return s.on("styledata",t),function(){s.off("styledata",t),s.style&&s.style._loaded&&s.removeLayer(o)}}}),[s]),s&&s.style&&s.getLayer(o)?xi(s,o,t,i.current):function(t,e,i){if(t.style&&t.style._loaded){var n=_i(_i({},i),{},{id:e});delete n.beforeId,t.addLayer(n,i.beforeId)}}(s,o,t),i.current=t,null}Si.propTypes=bi;var Ei={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0,capturePointerMove:!1},ki={captureScroll:s.bool,captureDrag:s.bool,captureClick:s.bool,captureDoubleClick:s.bool,capturePointerMove:s.bool};function Pi(t){var e=t.containerRef.current,i=t.context.eventManager;if(e&&i){var n={wheel:function(e){var i=t.props;i.captureScroll&&e.stopPropagation(),i.onScroll&&i.onScroll(e,t)},panstart:function(e){var i=t.props;i.captureDrag&&e.stopPropagation(),i.onDragStart&&i.onDragStart(e,t)},anyclick:function(e){var i=t.props;i.captureClick&&e.stopPropagation(),i.onNativeClick&&i.onNativeClick(e,t)},click:function(e){var i=t.props;i.captureClick&&e.stopPropagation(),i.onClick&&i.onClick(e,t)},dblclick:function(e){var i=t.props;i.captureDoubleClick&&e.stopPropagation(),i.onDoubleClick&&i.onDoubleClick(e,t)},pointermove:function(e){var i=t.props;i.capturePointerMove&&e.stopPropagation(),i.onPointerMove&&i.onPointerMove(e,t)}};return i.watch(n,e),function(){i.off(n)}}}function Ti(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(a.useContext)(ft),i=Object(a.useRef)(null),n=Object(a.useRef)({props:t,state:{},context:e,containerRef:i}),r=n.current;return r.props=t,r.context=e,Object(a.useEffect)((function(){return Pi(r)}),[e.eventManager]),r}function Ci(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Lt(t);if(e){var r=Lt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return zt(this,i)}}function Mi(t){var e=t.instance,i=Ti(t),n=i.context,r=i.containerRef;return e._context=n,e._containerRef=r,e._render()}var Ai=function(t){It(i,t);var e=Ci(i);function i(){var t;Object(Y.a)(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r)),Object(o.a)(Object(At.a)(t),"_context",{}),Object(o.a)(Object(At.a)(t),"_containerRef",Object(a.createRef)()),Object(o.a)(Object(At.a)(t),"_onScroll",(function(t){})),Object(o.a)(Object(At.a)(t),"_onDragStart",(function(t){})),Object(o.a)(Object(At.a)(t),"_onDblClick",(function(t){})),Object(o.a)(Object(At.a)(t),"_onClick",(function(t){})),Object(o.a)(Object(At.a)(t),"_onPointerMove",(function(t){})),t}return Object(K.a)(i,[{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){return a.createElement(Mi,Object(n.a)({instance:this},this.props,{onScroll:this._onScroll,onDragStart:this._onDragStart,onDblClick:this._onDblClick,onClick:this._onClick,onPointerMove:this._onPointerMove}))}}]),i}(a.PureComponent);function Oi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Ii(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Oi(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Oi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}Object(o.a)(Ai,"propTypes",ki),Object(o.a)(Ai,"defaultProps",Ei);var Di=Object.assign({},ki,{draggable:s.bool,onDrag:s.func,onDragEnd:s.func,onDragStart:s.func,offsetLeft:s.number,offsetTop:s.number}),zi=Object.assign({},Ei,{draggable:!1,offsetLeft:0,offsetTop:0});function Li(t){var e=t.offsetCenter;return[e.x,e.y]}function Ri(t,e,i,n){var r=t[0]+e[0]-i.offsetLeft,o=t[1]+e[1]-i.offsetTop;return n.viewport.unproject([r,o])}function Fi(t,e){var i=e.props,n=e.callbacks,r=e.state,o=e.context,a=e.containerRef;if(i.draggable){t.stopPropagation();var s=Li(t),l=function(t,e){var i=t.center,n=i.x,r=i.y;if(e){var o=e.getBoundingClientRect();return[o.left-n,o.top-r]}return null}(t,a.current);if(r.setDragPos(s),r.setDragOffset(l),n.onDragStart&&l){var c=Object.assign({},t);c.lngLat=Ri(s,l,i,o),n.onDragStart(c)}}}function Bi(t){var e=t.context.eventManager;if(e&&t.state.dragPos){var i={panmove:function(e){return function(t,e){var i=e.props,n=e.callbacks,r=e.state,o=e.context;t.stopPropagation();var a=Li(t);r.setDragPos(a);var s=r.dragOffset;if(n.onDrag&&s){var l=Object.assign({},t);l.lngLat=Ri(a,s,i,o),n.onDrag(l)}}(e,t)},panend:function(e){return function(t,e){var i=e.props,n=e.callbacks,r=e.state,o=e.context;t.stopPropagation();var a=r.dragPos,s=r.dragOffset;if(r.setDragPos(null),r.setDragOffset(null),n.onDragEnd&&a&&s){var l=Object.assign({},t);l.lngLat=Ri(a,s,i,o),n.onDragEnd(l)}}(e,t)},pancancel:function(e){return function(t,e){var i=e.state;t.stopPropagation(),i.setDragPos(null),i.setDragOffset(null)}(e,t)}};return e.watch(i),function(){e.off(i)}}}var ji="undefined"!==typeof window&&window.devicePixelRatio||1,Ni=function(t){return Math.round(t*ji)/ji},Vi=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";if(null===t)return e;var n="x"===i?t.offsetWidth:t.offsetHeight;return Ni(e/100*n)/n*100},Ui=Object.assign({},Di,{className:s.string,longitude:s.number.isRequired,latitude:s.number.isRequired}),Gi=Object.assign({},zi,{className:""});function qi(t){var e=function(t){var e=Object(a.useState)(null),i=Object(l.a)(e,2),n=i[0],r=i[1],o=Object(a.useState)(null),s=Object(l.a)(o,2),c=s[0],u=s[1],h=Ti(Ii(Ii({},t),{},{onDragStart:Fi}));return h.callbacks=t,h.state.dragPos=n,h.state.setDragPos=r,h.state.dragOffset=c,h.state.setDragOffset=u,Object(a.useEffect)((function(){return Bi(h)}),[h.context.eventManager,Boolean(n)]),h}(t),i=e.state,n=e.containerRef,r=t.children,o=t.className,s=t.draggable,c=i.dragPos,u=function(t){var e=t.props,i=t.state,n=t.context,r=e.longitude,o=e.latitude,a=e.offsetLeft,s=e.offsetTop,c=i.dragPos,u=i.dragOffset,h=n.viewport,d=n.map;if(c&&u)return[c[0]+u[0],c[1]+u[1]];var p=yt(d,{longitude:r,latitude:o}),f=h.project([r,o,p]),m=Object(l.a)(f,2),y=m[0],v=m[1];return[y+=a,v+=s]}(e),h=Object(l.a)(u,2),d=h[0],p=h[1],f="translate(".concat(Ni(d),"px, ").concat(Ni(p),"px)"),m=s?c?"grabbing":"grab":"auto",y=Object(a.useMemo)((function(){var t={position:"absolute",left:0,top:0,transform:f,cursor:m};return a.createElement("div",{className:"mapboxgl-marker ".concat(o),ref:e.containerRef,style:t},r)}),[r,o]),v=n.current;return v&&(v.style.transform=f,v.style.cursor=m),y}qi.defaultProps=Gi,qi.propTypes=Ui;var Zi=a.memo(qi),Hi={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},Wi=Object.keys(Hi);var Xi=Object.assign({},ki,{className:s.string,longitude:s.number.isRequired,latitude:s.number.isRequired,altitude:s.number,offsetLeft:s.number,offsetTop:s.number,tipSize:s.number,closeButton:s.bool,closeOnClick:s.bool,anchor:s.oneOf(Object.keys(Hi)),dynamicPosition:s.bool,sortByDepth:s.bool,onClose:s.func}),Yi=Object.assign({},Ei,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});function Ki(t,e,i,n){var r=Object(l.a)(n,2),o=r[0],a=r[1],s=t.anchor,c=t.dynamicPosition,u=t.tipSize;return i&&c?function(t){var e=t.x,i=t.y,n=t.width,r=t.height,o=t.selfWidth,a=t.selfHeight,s=t.anchor,l=t.padding,c=void 0===l?0:l,u=Hi[s],h=u.x,d=u.y,p=i-d*a,f=p+a,m=Math.max(0,c-p)+Math.max(0,f-r+c);if(m>0){var y=d,v=m;for(d=0;d<=1;d+=.5)f=(p=i-d*a)+a,(m=Math.max(0,c-p)+Math.max(0,f-r+c))<v&&(v=m,y=d);d=y}var g=.5;.5===d&&(h=Math.floor(h),g=1);var _=e-h*o,b=_+o,x=Math.max(0,c-_)+Math.max(0,b-n+c);if(x>0){var w=h,S=x;for(h=0;h<=1;h+=g)b=(_=e-h*o)+o,(x=Math.max(0,c-_)+Math.max(0,b-n+c))<S&&(S=x,w=h);h=w}return Wi.find((function(t){var e=Hi[t];return e.x===h&&e.y===d}))||s}({x:o,y:a,anchor:s,padding:u,width:e.width,height:e.height,selfWidth:i.clientWidth,selfHeight:i.clientHeight}):s}function $i(t){var e=Object(a.useRef)(null),i=Ti(t),n=i.context,r=i.containerRef,o=Object(a.useState)(!1),s=Object(l.a)(o,2)[1];Object(a.useEffect)((function(){s(!0)}),[e.current]),Object(a.useEffect)((function(){if(n.eventManager&&t.closeOnClick){var e=function(){return i.props.onClose()};return n.eventManager.on("anyclick",e),function(){n.eventManager.off("anyclick",e)}}}),[n.eventManager,t.closeOnClick]);var c=n.viewport,u=n.map,h=t.className,d=t.longitude,p=t.latitude,f=t.tipSize,m=t.closeButton,y=t.children,v=t.altitude;void 0===v&&(v=yt(u,{longitude:d,latitude:p}));var g=c.project([d,p,v]),_=Ki(t,c,e.current,g),b=function(t,e,i,n,r){var o=Object(l.a)(n,3),a=o[0],s=o[1],c=o[2],u=t.offsetLeft,h=t.offsetTop,d=t.sortByDepth,p=Hi[r],f=a+u,m=s+h,y=Vi(i,100*-p.x),v=Vi(i,100*-p.y,"y"),g={position:"absolute",transform:"\n      translate(".concat(y,"%, ").concat(v,"%)\n      translate(").concat(Ni(f),"px, ").concat(Ni(m),"px)\n    "),display:void 0,zIndex:void 0};return d?(c>1||c<-1||a<0||a>e.width||s<0||s>e.height?g.display="none":g.zIndex=Math.floor((1-c)/2*1e5),g):g}(t,c,r.current,g,_),x=Object(a.useCallback)((function(t){i.props.onClose();var e=i.context.eventManager;e&&e.once("click",(function(t){return t.stopPropagation()}),t.target)}),[]);return a.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(_," ").concat(h),style:b,ref:r},a.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:f}}),a.createElement("div",{key:"content",ref:e,className:"mapboxgl-popup-content"},m&&a.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:x},"\xd7"),y))}$i.propTypes=Xi,$i.defaultProps=Yi;a.memo($i);function Ji(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var Qi=Object.assign({},ki,{toggleLabel:s.string,className:s.string,style:s.object,compact:s.bool,customAttribution:s.oneOfType([s.string,s.arrayOf(s.string)])}),tn=Object.assign({},Ei,{className:"",toggleLabel:"Toggle Attribution"});function en(t){var e=Ti(t),i=e.context,n=e.containerRef,r=Object(a.useRef)(null),s=Object(a.useState)(!1),c=Object(l.a)(s,2),u=c[0],h=c[1];Object(a.useEffect)((function(){var e;return i.map&&(e=function(t,e,i,n){var r=new X.a.AttributionControl(t);return r._map=e,r._container=i,r._innerContainer=n,r._updateAttributions(),r._updateEditLink(),e.on("styledata",r._updateData),e.on("sourcedata",r._updateData),r}({customAttribution:t.customAttribution},i.map,n.current,r.current)),function(){return e&&function(t){t._map.off("styledata",t._updateData),t._map.off("sourcedata",t._updateData)}(e)}}),[i.map]);var d=void 0===t.compact?i.viewport.width<=640:t.compact;Object(a.useEffect)((function(){!d&&u&&h(!1)}),[d]);var p=Object(a.useCallback)((function(){return h((function(t){return!t}))}),[]),f=Object(a.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ji(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ji(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);return a.createElement("div",{style:f,className:t.className},a.createElement("div",{ref:n,"aria-pressed":u,className:"mapboxgl-ctrl mapboxgl-ctrl-attrib ".concat(d?"mapboxgl-compact":""," ").concat(u?"mapboxgl-compact-show":"")},a.createElement("button",{type:"button",className:"mapboxgl-ctrl-attrib-button",title:t.toggleLabel,onClick:p}),a.createElement("div",{ref:r,className:"mapboxgl-ctrl-attrib-inner",role:"list"})))}en.propTypes=Qi,en.defaultProps=tn;a.memo(en);var nn=i(29);function rn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var on=Object.assign({},ki,{className:s.string,style:s.object,container:s.object,label:s.string}),an=Object.assign({},Ei,{className:"",container:null,label:"Toggle fullscreen"});function sn(t){var e=Ti(t),i=e.context,n=e.containerRef,r=Object(a.useState)(!1),s=Object(l.a)(r,2),c=s[0],u=s[1],h=Object(a.useState)(!1),d=Object(l.a)(h,2),p=d[0],f=d[1],m=Object(a.useState)(null),y=Object(l.a)(m,2),v=y[0],g=y[1];Object(a.useEffect)((function(){var t=new X.a.FullscreenControl;g(t),f(t._checkFullscreenSupport());var e=function(){var e=!t._fullscreen;t._fullscreen=e,u(e)};return nn.a.addEventListener(t._fullscreenchange,e),function(){nn.a.removeEventListener(t._fullscreenchange,e)}}),[]);var _=Object(a.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rn(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);if(!p)return null;var b=t.className,x=t.label,w=c?"shrink":"fullscreen";return a.createElement("div",{style:_,className:b},a.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:n},a.createElement("button",{key:w,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(w),type:"button",title:x,onClick:function(){v&&(v._container=t.container||i.container,v._onClickFullscreen())}},a.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}sn.propTypes=on,sn.defaultProps=an;var ln;a.memo(sn);function cn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var un=function(){},hn=Object.assign({},ki,{className:s.string,style:s.object,label:s.string,disabledLabel:s.string,auto:s.bool,positionOptions:s.object,fitBoundsOptions:s.object,trackUserLocation:s.bool,showUserLocation:s.bool,showAccuracyCircle:s.bool,onViewStateChange:s.func,onViewportChange:s.func,onGeolocate:s.func}),dn=Object.assign({},Ei,{className:"",label:"Find My Location",disabledLabel:"Location Not Available",auto:!1,positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0,showAccuracyCircle:!0,onGeolocate:function(){}});function pn(t,e){var i=e.context,n=e.props,r=function(t){var e=new X.a.LngLat(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,n=e.toBounds(i);return[[n._ne.lng,n._ne.lat],[n._sw.lng,n._sw.lat]]}(t),o=i.viewport.fitBounds(r,n.fitBoundsOptions),a=o.longitude,s=o.latitude,l=o.zoom,c=Object.assign({},i.viewport,{longitude:a,latitude:s,zoom:l}),u=new lt(c),h=Object.assign({},u.getViewportProps(),Ue),d=n.onViewportChange||i.onViewportChange||un;(n.onViewStateChange||i.onViewStateChange||un)({viewState:h}),d(h)}function fn(t){var e=Ti(t),i=e.context,n=e.containerRef,r=Object(a.useRef)(null),s=Object(a.useState)(null),c=Object(l.a)(s,2),u=c[0],h=c[1],d=Object(a.useState)(!1),p=Object(l.a)(d,2),f=p[0],m=p[1];Object(a.useEffect)((function(){var n;return i.map&&(void 0!==ln?Promise.resolve(ln):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(t){return ln="denied"!==t.state})):(ln=Boolean(window.navigator.geolocation),Promise.resolve(ln))).then((function(o){m(o),r.current&&((n=function(t,e,i){var n=new X.a.GeolocateControl(e);n._container=nn.a.createElement("div"),n._map={on:function(){},_getUIString:function(){return""}},n._setupUI(!0),n._map=t.map,n._geolocateButton=i;var r=t.eventManager;return n.options.trackUserLocation&&r&&r.on("panstart",(function(){"ACTIVE_LOCK"===n._watchState&&(n._watchState="BACKGROUND",i.classList.add("mapboxgl-ctrl-geolocate-background"),i.classList.remove("mapboxgl-ctrl-geolocate-active"))})),n.on("geolocate",e.onGeolocate),n}(i,t,r.current))._updateCamera=function(t){return pn(t,e)},h(n))})),function(){n&&n._clearWatch()}}),[i.map]);var y=Object(a.useCallback)((function(){u&&(u.options=e.props,u.trigger())}),[u]);Object(a.useEffect)((function(){t.auto&&y()}),[u,t.auto]),Object(a.useEffect)((function(){u&&u._onZoom()}),[i.viewport.zoom]);var v=t.className,g=t.label,_=t.disabledLabel,b=t.trackUserLocation,x=Object(a.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?cn(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):cn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);return a.createElement("div",{style:x,className:v},a.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:n},a.createElement("button",{key:"geolocate",className:"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",ref:r,disabled:!f,"aria-pressed":!b,type:"button",title:f?g:_,"aria-label":f?g:_,onClick:y},a.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}fn.propTypes=hn,fn.defaultProps=dn;a.memo(fn);function mn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var yn=function(){},vn=Object.assign({},ki,{className:s.string,style:s.object,onViewStateChange:s.func,onViewportChange:s.func,showCompass:s.bool,showZoom:s.bool,zoomInLabel:s.string,zoomOutLabel:s.string,compassLabel:s.string}),gn=Object.assign({},Ei,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"});function _n(t){return function(t,e){for(var i=(t||"").split(".").map(Number),n=(e||"").split(".").map(Number),r=0;r<3;r++){var o=i[r]||0,a=n[r]||0;if(o<a)return-1;if(o>a)return 1}return 0}(t,"1.6.0")>=0?2:1}function bn(t,e,i){var n=t.viewport,r=new lt(Object.assign({},n,i)),o=Object.assign({},r.getViewportProps(),Ue),a=e.onViewportChange||t.onViewportChange||yn;(e.onViewStateChange||t.onViewStateChange||yn)({viewState:o}),a(o)}function xn(t,e,i,n){return a.createElement("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(t),type:"button",title:e,onClick:i},n||a.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}function wn(t){var e=Ti(t),i=e.context,n=e.containerRef,r=t.className,s=t.showCompass,l=t.showZoom,c=t.zoomInLabel,u=t.zoomOutLabel,h=t.compassLabel,d=Object(a.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?mn(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):mn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);return a.createElement("div",{style:d,className:r},a.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:n},l&&xn("zoom-in",c,(function(){bn(i,t,{zoom:i.viewport.zoom+1})})),l&&xn("zoom-out",u,(function(){bn(i,t,{zoom:i.viewport.zoom-1})})),s&&xn("compass",h,(function(){bn(i,t,{bearing:0,pitch:0})}),function(t){var e=Object(a.useMemo)((function(){return t.map?_n(t.map.version):2}),[t.map]),i=t.viewport.bearing,n={transform:"rotate(".concat(-i,"deg)")};return 2===e?a.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:n}):a.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:n})}(i))))}wn.propTypes=vn,wn.defaultProps=gn;a.memo(wn);function Sn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var En=Object.assign({},ki,{className:s.string,style:s.object,maxWidth:s.number,unit:s.oneOf(["imperial","metric","nautical"])}),kn=Object.assign({},Ei,{className:"",maxWidth:100,unit:"metric"});function Pn(t){var e=Ti(t),i=e.context,n=e.containerRef,r=Object(a.useState)(null),s=Object(l.a)(r,2),c=s[0],u=s[1];Object(a.useEffect)((function(){if(i.map){var t=new X.a.ScaleControl;t._map=i.map,t._container=n.current,u(t)}}),[i.map]),c&&(c.options=t,c._onMove());var h=Object(a.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Sn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);return a.createElement("div",{style:h,className:t.className},a.createElement("div",{ref:n,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}))}Pn.propTypes=En,Pn.defaultProps=kn;a.memo(Pn);var Tn="undefined"!==typeof window&&window.devicePixelRatio||1,Cn=Object.assign({},ki,{redraw:s.func.isRequired});function Mn(t){var e=Ti(t),i=e.context,n=e.containerRef,r=Object(a.useState)(null),o=Object(l.a)(r,2),s=o[0],c=o[1];Object(a.useEffect)((function(){c(n.current.getContext("2d"))}),[]);var u=i.viewport,h=i.isDragging;return s&&(s.save(),s.scale(Tn,Tn),t.redraw({width:u.width,height:u.height,ctx:s,isDragging:h,project:u.project,unproject:u.unproject}),s.restore()),a.createElement("canvas",{ref:n,width:u.width*Tn,height:u.height*Tn,style:{width:"".concat(u.width,"px"),height:"".concat(u.height,"px"),position:"absolute",left:0,top:0}})}Mn.propTypes=Cn,Mn.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};function An(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var On=Object.assign({},ki,{redraw:s.func.isRequired,style:s.object});function In(t){var e=Ti(t),i=e.context,n=e.containerRef,r=i.viewport,s=i.isDragging,l=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?An(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):An(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute",left:0,top:0,width:r.width,height:r.height},t.style);return a.createElement("div",{ref:n,style:l},t.redraw({width:r.width,height:r.height,isDragging:s,project:r.project,unproject:r.unproject}))}In.propTypes=On,In.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};function Dn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var zn=Object.assign({},ki,{redraw:s.func.isRequired,style:s.object});function Ln(t){var e=Ti(t),i=e.context,n=e.containerRef,r=i.viewport,s=i.isDragging,l=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Dn(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Dn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute",left:0,top:0},t.style);return a.createElement("svg",{width:r.width,height:r.height,ref:n,style:l},t.redraw({width:r.width,height:r.height,isDragging:s,project:r.project,unproject:r.unproject}))}Ln.propTypes=zn,Ln.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};X.a&&X.a.setRTLTextPlugin},,,function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,i){var n=i(60),r=i(93);t.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(this,i(44))},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var i=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return i.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,i){var n=i(166),r=i(173),o=i(175),a=i(176),s=i(177);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(178),r=i(181),o=i(182);t.exports=function(t,e,i,a,s,l){var c=1&i,u=t.length,h=e.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(t),p=l.get(e);if(d&&p)return d==e&&p==t;var f=-1,m=!0,y=2&i?new n:void 0;for(l.set(t,e),l.set(e,t);++f<u;){var v=t[f],g=e[f];if(a)var _=c?a(g,v,f,e,t,l):a(v,g,f,t,e,l);if(void 0!==_){if(_)continue;m=!1;break}if(y){if(!r(e,(function(t,e){if(!o(y,e)&&(v===t||s(v,t,i,a,l)))return y.push(e)}))){m=!1;break}}else if(v!==g&&!s(v,g,i,a,l)){m=!1;break}}return l.delete(t),l.delete(e),m}},function(t,e,i){(function(t){var n=i(34),r=i(199),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?n.Buffer:void 0,l=(s?s.isBuffer:void 0)||r;t.exports=l}).call(this,i(98)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var n=i(201),r=i(202),o=i(203),a=o&&o.isTypedArray,s=a?r(a):n;t.exports=s},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Options=void 0;var a=i(215),s=i(113),l=i(297),c=i(299),u=i(300),h=i(8),d=i(302),p=i(26),f=i(304),m=i(305),y=i(307),v=function(){function t(){r(this,t),this.autoPlay=!0,this.background=new c.Background,this.backgroundMask=new l.BackgroundMask,this.backgroundMode=new f.BackgroundMode,this.detectRetina=!0,this.fpsLimit=30,this.infection=new u.Infection,this.interactivity=new a.Interactivity,this.manualParticles=[],this.motion=new m.Motion,this.particles=new s.Particles,this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!1,this.themes=[]}return o(t,[{key:"load",value:function(t){var e,i;if(void 0!==t){if(void 0!==t.preset)if(t.preset instanceof Array){var r,o=n(t.preset);try{for(o.s();!(r=o.n()).done;){var a=r.value;this.importPreset(a)}}catch(m){o.e(m)}finally{o.f()}}else this.importPreset(t.preset);void 0!==t.autoPlay&&(this.autoPlay=t.autoPlay);var s=null!==(e=t.detectRetina)&&void 0!==e?e:t.retina_detect;void 0!==s&&(this.detectRetina=s);var l=null!==(i=t.fpsLimit)&&void 0!==i?i:t.fps_limit;if(void 0!==l&&(this.fpsLimit=l),void 0!==t.pauseOnBlur&&(this.pauseOnBlur=t.pauseOnBlur),void 0!==t.pauseOnOutsideViewport&&(this.pauseOnOutsideViewport=t.pauseOnOutsideViewport),this.background.load(t.background),this.backgroundMode.load(t.backgroundMode),this.backgroundMask.load(t.backgroundMask),this.infection.load(t.infection),this.interactivity.load(t.interactivity),void 0!==t.manualParticles&&(this.manualParticles=t.manualParticles.map((function(t){var e=new y.ManualParticle;return e.load(t),e}))),this.motion.load(t.motion),this.particles.load(t.particles),h.Plugins.loadOptions(this,t),void 0!==t.themes){var c,u=n(t.themes);try{for(u.s();!(c=u.n()).done;){var p=c.value,f=new d.Theme;f.load(p),this.themes.push(f)}}catch(m){u.e(m)}finally{u.f()}}}}},{key:"setTheme",value:function(t){if(t){var e=this.themes.find((function(e){return e.name===t}));e&&this.load(e.options)}else{var i="undefined"!==typeof matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches,n=this.themes.find((function(t){return t.default.value&&(t.default.mode===p.ThemeMode.dark&&i||t.default.mode===p.ThemeMode.light&&!i)}));n||(n=this.themes.find((function(t){return t.default.value&&t.default.mode===p.ThemeMode.any}))),n&&this.load(n.options)}}},{key:"importPreset",value:function(t){this.load(h.Plugins.getPreset(t))}},{key:"fps_limit",get:function(){return this.fpsLimit},set:function(t){this.fpsLimit=t}},{key:"retina_detect",get:function(){return this.detectRetina},set:function(t){this.detectRetina=t}}]),t}();e.Options=v},function(t,e,i){var n=i(214);t.exports=function(t,e){if(t){if("string"===typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClickMode=void 0,function(t){t.attract="attract",t.bubble="bubble",t.push="push",t.remove="remove",t.repulse="repulse",t.pause="pause",t.trail="trail"}(e.ClickMode||(e.ClickMode={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DivMode=void 0,function(t){t.bounce="bounce",t.bubble="bubble",t.repulse="repulse"}(e.DivMode||(e.DivMode={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HoverMode=void 0,function(t){t.attract="attract",t.bounce="bounce",t.bubble="bubble",t.connect="connect",t.grab="grab",t.light="light",t.repulse="repulse",t.slow="slow",t.trail="trail"}(e.HoverMode||(e.HoverMode={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InteractivityDetect=void 0,function(t){t.canvas="canvas",t.parent="parent",t.window="window"}(e.InteractivityDetect||(e.InteractivityDetect={}))},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.BubbleBase=void 0;var o=i(18),a=function(){function t(){n(this,t),this.distance=200,this.duration=.4}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.distance&&(this.distance=t.distance),void 0!==t.duration&&(this.duration=t.duration),void 0!==t.opacity&&(this.opacity=t.opacity),void 0!==t.color&&(t.color instanceof Array?this.color=t.color.map((function(t){return o.OptionsColor.create(void 0,t)})):(this.color instanceof Array&&(this.color=new o.OptionsColor),this.color=o.OptionsColor.create(this.color,t.color))),void 0!==t.size&&(this.size=t.size))}}]),t}();e.BubbleBase=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.RepulseBase=void 0;var o=function(){function t(){n(this,t),this.distance=200,this.duration=.4,this.speed=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.distance&&(this.distance=t.distance),void 0!==t.duration&&(this.duration=t.duration),void 0!==t.speed&&(this.speed=t.speed))}}]),t}();e.RepulseBase=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.ColorUtils=void 0;var o=i(110),a=i(77),s=i(65);function l(t,e,i){var n=i;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function c(t){if(t.startsWith("rgb")){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.]+)\s*)?\)/i.exec(t);return e?{a:e.length>4?parseFloat(e[5]):1,b:parseInt(e[3],10),g:parseInt(e[2],10),r:parseInt(e[1],10)}:void 0}if(t.startsWith("hsl")){var i=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.]+)\s*)?\)/i.exec(t);return i?u.hslaToRgba({a:i.length>4?parseFloat(i[5]):1,h:parseInt(i[1],10),l:parseInt(i[3],10),s:parseInt(i[2],10)}):void 0}if(t.startsWith("hsv")){var n=/hsva?\(\s*(\d+)\xb0\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.]+)\s*)?\)/i.exec(t);return n?u.hsvaToRgba({a:n.length>4?parseFloat(n[5]):1,h:parseInt(n[1],10),s:parseInt(n[2],10),v:parseInt(n[3],10)}):void 0}var r=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,(function(t,e,i,n,r){return e+e+i+i+n+n+(void 0!==r?r+r:"")})),o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(r);return o?{a:void 0!==o[4]?parseInt(o[4],16)/255:1,b:parseInt(o[3],16),g:parseInt(o[2],16),r:parseInt(o[1],16)}:void 0}var u=function(){function t(){n(this,t)}return r(t,null,[{key:"colorToRgb",value:function(e,i){var n,r,s,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e){var c,u="string"===typeof e?{value:e}:e;if("string"===typeof u.value)c=u.value===a.Constants.randomColorValue?t.getRandomRgbColor():t.stringToRgb(u.value);else if(u.value instanceof Array){var h=o.Utils.itemFromArray(u.value,i,l);c=t.colorToRgb({value:h})}else{var d=u.value,p=null!==(n=d.rgb)&&void 0!==n?n:u.value;if(void 0!==p.r)c=p;else{var f=null!==(r=d.hsl)&&void 0!==r?r:u.value;if(void 0!==f.h&&void 0!==f.l)c=t.hslToRgb(f);else{var m=null!==(s=d.hsv)&&void 0!==s?s:u.value;void 0!==m.h&&void 0!==m.v&&(c=t.hsvToRgb(m))}}}return c}}},{key:"colorToHsl",value:function(e,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.colorToRgb(e,i,n);return void 0!==r?t.rgbToHsl(r):void 0}},{key:"rgbToHsl",value:function(t){var e=t.r/255,i=t.g/255,n=t.b/255,r=Math.max(e,i,n),o=Math.min(e,i,n),a={h:0,l:(r+o)/2,s:0};return r!=o&&(a.s=a.l<.5?(r-o)/(r+o):(r-o)/(2-r-o),a.h=e===r?(i-n)/(r-o):a.h=i===r?2+(n-e)/(r-o):4+(e-i)/(r-o)),a.l*=100,a.s*=100,a.h*=60,a.h<0&&(a.h+=360),a}},{key:"stringToAlpha",value:function(t){var e;return null===(e=c(t))||void 0===e?void 0:e.a}},{key:"stringToRgb",value:function(t){return c(t)}},{key:"hslToRgb",value:function(t){var e={b:0,g:0,r:0},i={h:t.h/360,l:t.l/100,s:t.s/100};if(0===i.s)e.b=i.l,e.g=i.l,e.r=i.l;else{var n=i.l<.5?i.l*(1+i.s):i.l+i.s-i.l*i.s,r=2*i.l-n;e.r=l(r,n,i.h+1/3),e.g=l(r,n,i.h),e.b=l(r,n,i.h-1/3)}return e.r=Math.floor(255*e.r),e.g=Math.floor(255*e.g),e.b=Math.floor(255*e.b),e}},{key:"hslaToRgba",value:function(e){var i=t.hslToRgb(e);return{a:e.a,b:i.b,g:i.g,r:i.r}}},{key:"hslToHsv",value:function(t){var e=t.l/100,i=e+t.s/100*Math.min(e,1-e),n=i?2*(1-e/i):0;return{h:t.h,s:100*n,v:100*i}}},{key:"hslaToHsva",value:function(e){var i=t.hslToHsv(e);return{a:e.a,h:i.h,s:i.s,v:i.v}}},{key:"hsvToHsl",value:function(t){var e=t.v/100,i=e*(1-t.s/100/2),n=0===i||1===i?0:(e-i)/Math.min(i,1-i);return{h:t.h,l:100*i,s:100*n}}},{key:"hsvaToHsla",value:function(e){var i=t.hsvToHsl(e);return{a:e.a,h:i.h,l:i.l,s:i.s}}},{key:"hsvToRgb",value:function(t){var e,i={b:0,g:0,r:0},n=t.h/60,r=t.s/100,o=t.v/100,a=o*r,s=a*(1-Math.abs(n%2-1));if(n>=0&&n<=1?e={r:a,g:s,b:0}:n>1&&n<=2?e={r:s,g:a,b:0}:n>2&&n<=3?e={r:0,g:a,b:s}:n>3&&n<=4?e={r:0,g:s,b:a}:n>4&&n<=5?e={r:s,g:0,b:a}:n>5&&n<=6&&(e={r:a,g:0,b:s}),e){var l=o-a;i.r=Math.floor(255*(e.r+l)),i.g=Math.floor(255*(e.g+l)),i.b=Math.floor(255*(e.b+l))}return i}},{key:"hsvaToRgba",value:function(e){var i=t.hsvToRgb(e);return{a:e.a,b:i.b,g:i.g,r:i.r}}},{key:"rgbToHsv",value:function(t){var e={r:t.r/255,g:t.g/255,b:t.b/255},i=Math.max(e.r,e.g,e.b),n=i-Math.min(e.r,e.g,e.b),r=0;return i===e.r?r=(e.g-e.b)/n*60:i===e.g?r=60*(2+(e.b-e.r)/n):i===e.b&&(r=60*(4+(e.r-e.g)/n)),{h:r,s:100*(i?n/i:0),v:100*i}}},{key:"rgbaToHsva",value:function(e){var i=t.rgbToHsv(e);return{a:e.a,h:i.h,s:i.s,v:i.v}}},{key:"getRandomRgbColor",value:function(t){var e=null!==t&&void 0!==t?t:0;return{b:Math.floor(s.NumberUtils.randomInRange(e,256)),g:Math.floor(s.NumberUtils.randomInRange(e,256)),r:Math.floor(s.NumberUtils.randomInRange(e,256))}}},{key:"getStyleFromRgb",value:function(t,e){return"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(null!==e&&void 0!==e?e:1,")")}},{key:"getStyleFromHsl",value:function(t,e){return"hsla(".concat(t.h,", ").concat(t.s,"%, ").concat(t.l,"%, ").concat(null!==e&&void 0!==e?e:1,")")}},{key:"getStyleFromHsv",value:function(e,i){return t.getStyleFromHsl(t.hsvToHsl(e),i)}},{key:"mix",value:function(e,i,n,r){var o=e,a=i;return void 0===o.r&&(o=t.hslToRgb(e)),void 0===a.r&&(a=t.hslToRgb(i)),{b:s.NumberUtils.mix(o.b,a.b,n,r),g:s.NumberUtils.mix(o.g,a.g,n,r),r:s.NumberUtils.mix(o.r,a.r,n,r)}}},{key:"replaceColorSvg",value:function(e,i,n){if(!e.svgData)return"";return e.svgData.replace(/#([0-9A-F]{3,6})/gi,(function(){return t.getStyleFromHsl(i,n)}))}},{key:"getLinkColor",value:function(e,i,n){var r,o;if(n===a.Constants.randomColorValue)return t.getRandomRgbColor();if("mid"!==n)return n;var s=null!==(r=e.getFillColor())&&void 0!==r?r:e.getStrokeColor(),l=null!==(o=null===i||void 0===i?void 0:i.getFillColor())&&void 0!==o?o:null===i||void 0===i?void 0:i.getStrokeColor();if(s&&l&&i)return t.mix(s,l,e.getRadius(),i.getRadius());var c=null!==s&&void 0!==s?s:l;return c?t.hslToRgb(c):void 0}},{key:"getLinkRandomColor",value:function(e,i,n){var r="string"===typeof e?e:e.value;return r===a.Constants.randomColorValue?n?t.colorToRgb({value:r}):i?a.Constants.randomColorValue:a.Constants.midColorValue:t.colorToRgb({value:r})}}]),t}();e.ColorUtils=u},function(t,e,i){"use strict";var n=i(40),r=i(4),o=i(5),a=i(10),s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{l(n.next(t))}catch(e){o(e)}}function s(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0;var l=i(111),c=i(65);function u(t,e,i,n,r,o){var a={bounced:!1};return e.min>=n.min&&e.min<=n.max&&e.max>=n.min&&e.max<=n.max&&(t.max>=i.min&&t.max<=(i.max+i.min)/2&&r>0||t.min<=i.max&&t.min>(i.max+i.min)/2&&r<0)&&(a.velocity=r*-o,a.bounced=!0),a}function h(t,e){if(e instanceof Array){var i,n=a(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(t.matches(r))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}return t.matches(e)}var d=function(){function t(){r(this,t)}return o(t,null,[{key:"isSsr",value:function(){return"undefined"===typeof window||!window}},{key:"isInArray",value:function(t,e){return t===e||e instanceof Array&&e.indexOf(t)>-1}},{key:"loadFont",value:function(t){return s(this,void 0,void 0,n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,document.fonts.load("".concat(t.weight," 36px '").concat(t.font,"'"));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))}},{key:"arrayRandomIndex",value:function(t){return Math.floor(Math.random()*t.length)}},{key:"itemFromArray",value:function(e,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=void 0!==i&&n?i%e.length:t.arrayRandomIndex(e);return e[r]}},{key:"isPointInside",value:function(e,i,n,r){return t.areBoundsInside(t.calculateBounds(e,null!==n&&void 0!==n?n:0),i,r)}},{key:"areBoundsInside",value:function(t,e,i){var n=!0;return i&&i!==l.OutModeDirection.bottom||(n=t.top<e.height),!n||i&&i!==l.OutModeDirection.left||(n=t.right>0),!n||i&&i!==l.OutModeDirection.right||(n=t.left<e.width),!n||i&&i!==l.OutModeDirection.top||(n=t.bottom>0),n}},{key:"calculateBounds",value:function(t,e){return{bottom:t.y+e,left:t.x-e,right:t.x+e,top:t.y-e}}},{key:"loadImage",value:function(t){return new Promise((function(e,i){if(t){var n={source:t,type:t.substr(t.length-3)},r=new Image;r.addEventListener("load",(function(){n.element=r,e(n)})),r.addEventListener("error",(function(){i("Error tsParticles - loading image: ".concat(t))})),r.src=t}else i("Error tsParticles - No image.src")}))}},{key:"downloadSvgImage",value:function(e){return s(this,void 0,void 0,n.mark((function i(){var r,o;return n.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}throw new Error("Error tsParticles - No image.src");case 2:if("svg"===(r={source:e,type:e.substr(e.length-3)}).type){i.next=5;break}return i.abrupt("return",t.loadImage(e));case 5:return i.next=7,fetch(r.source);case 7:if((o=i.sent).ok){i.next=10;break}throw new Error("Error tsParticles - Image not found");case 10:return i.next=12,o.text();case 12:return r.svgData=i.sent,i.abrupt("return",r);case 14:case"end":return i.stop()}}),i)})))}},{key:"deepExtend",value:function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var o=0,a=n;o<a.length;o++){var s=a[o];if(void 0!==s&&null!==s)if("object"===typeof s){var l=Array.isArray(s);!l||"object"===typeof e&&e&&Array.isArray(e)?l||"object"===typeof e&&e&&!Array.isArray(e)||(e={}):e=[];var c=function(i){if("__proto__"===i)return"continue";var n=s[i],r="object"===typeof n,o=e;o[i]=r&&Array.isArray(n)?n.map((function(e){return t.deepExtend(o[i],e)})):t.deepExtend(o[i],n)};for(var u in s)c(u)}else e=s}return e}},{key:"isDivModeEnabled",value:function(e,i){return i instanceof Array?!!i.find((function(i){return i.enable&&t.isInArray(e,i.mode)})):t.isInArray(e,i.mode)}},{key:"divModeExecute",value:function(e,i,n){if(i instanceof Array){var r,o=a(i);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=s.mode;s.enable&&t.isInArray(e,l)&&t.singleDivModeExecute(s,n)}}catch(u){o.e(u)}finally{o.f()}}else{var c=i.mode;i.enable&&t.isInArray(e,c)&&t.singleDivModeExecute(i,n)}}},{key:"singleDivModeExecute",value:function(t,e){var i=t.selectors;if(i instanceof Array){var n,r=a(i);try{for(r.s();!(n=r.n()).done;){e(n.value,t)}}catch(o){r.e(o)}finally{r.f()}}else e(i,t)}},{key:"divMode",value:function(t,e){if(e&&t)return t instanceof Array?t.find((function(t){return h(e,t.selectors)})):h(e,t.selectors)?t:void 0}},{key:"circleBounceDataFromParticle",value:function(t){return{position:t.getPosition(),radius:t.getRadius(),velocity:t.velocity,factor:{horizontal:c.NumberUtils.getValue(t.particlesOptions.bounce.horizontal),vertical:c.NumberUtils.getValue(t.particlesOptions.bounce.vertical)}}}},{key:"circleBounce",value:function(t,e){var i=t.velocity.horizontal,n=t.velocity.vertical,r=t.position,o=e.position;if(i*(o.x-r.x)+n*(o.y-r.y)>=0){var a=-Math.atan2(o.y-r.y,o.x-r.x),s=t.radius,l=e.radius,u=c.NumberUtils.rotateVelocity(t.velocity,a),h=c.NumberUtils.rotateVelocity(e.velocity,a),d=c.NumberUtils.collisionVelocity(u,h,s,l),p=c.NumberUtils.collisionVelocity(h,u,s,l),f=c.NumberUtils.rotateVelocity(d,-a),m=c.NumberUtils.rotateVelocity(p,-a);t.velocity.horizontal=f.horizontal*t.factor.horizontal,t.velocity.vertical=f.vertical*t.factor.vertical,e.velocity.horizontal=m.horizontal*e.factor.horizontal,e.velocity.vertical=m.vertical*e.factor.vertical}}},{key:"rectBounce",value:function(e,i){var n=e.getPosition(),r=e.getRadius(),o=t.calculateBounds(n,r),a=u({min:o.left,max:o.right},{min:o.top,max:o.bottom},{min:i.left,max:i.right},{min:i.top,max:i.bottom},e.velocity.horizontal,c.NumberUtils.getValue(e.particlesOptions.bounce.horizontal));a.bounced&&(void 0!==a.velocity&&(e.velocity.horizontal=a.velocity),void 0!==a.position&&(e.position.x=a.position));var s=u({min:o.top,max:o.bottom},{min:o.left,max:o.right},{min:i.top,max:i.bottom},{min:i.left,max:i.right},e.velocity.vertical,c.NumberUtils.getValue(e.particlesOptions.bounce.vertical));s.bounced&&(void 0!==s.velocity&&(e.velocity.vertical=s.velocity),void 0!==s.position&&(e.position.y=s.position))}},{key:"animate",get:function(){return t.isSsr()?function(t){return setTimeout(t)}:function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout)(t)}}},{key:"cancelAnimation",get:function(){return t.isSsr()?function(t){return clearTimeout(t)}:function(t){return(window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.clearTimeout)(t)}}}]),t}();e.Utils=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OutModeDirection=void 0,function(t){t.bottom="bottom",t.left="left",t.right="right",t.top="top"}(e.OutModeDirection||(e.OutModeDirection={}))},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.CircleWarp=void 0;var c=i(80),u=i(78),h=function(t){s(i,t);var e=l(i);function i(t,r,o,a){var s;return n(this,i),(s=e.call(this,t,r,o)).canvasSize=a,s.canvasSize={height:a.height,width:a.width},s}return r(i,[{key:"contains",value:function(t){if(o(a(i.prototype),"contains",this).call(this,t))return!0;var e={x:t.x-this.canvasSize.width,y:t.y};if(o(a(i.prototype),"contains",this).call(this,e))return!0;var n={x:t.x-this.canvasSize.width,y:t.y-this.canvasSize.height};if(o(a(i.prototype),"contains",this).call(this,n))return!0;var r={x:t.x,y:t.y-this.canvasSize.height};return o(a(i.prototype),"contains",this).call(this,r)}},{key:"intersects",value:function(t){if(o(a(i.prototype),"intersects",this).call(this,t))return!0;var e=t,n=t,r={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(void 0!==n.radius){var s=new u.Circle(r.x,r.y,2*n.radius);return o(a(i.prototype),"intersects",this).call(this,s)}if(void 0!==e.size){var l=new c.Rectangle(r.x,r.y,2*e.size.width,2*e.size.height);return o(a(i.prototype),"intersects",this).call(this,l)}return!1}}]),i}(u.Circle);e.CircleWarp=h},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Particles=void 0;var o=i(267),a=i(270),s=i(279),l=i(281),c=i(114),u=i(283),h=i(285),d=i(287),p=i(288),f=i(290),m=i(292),y=i(115),v=i(294),g=i(116),_=function(){function t(){n(this,t),this.bounce=new g.Bounce,this.collisions=new f.Collisions,this.color=new y.AnimatableColor,this.life=new v.Life,this.links=new o.Links,this.move=new a.Move,this.number=new s.ParticlesNumber,this.opacity=new l.Opacity,this.reduceDuplicates=!1,this.rotate=new h.Rotate,this.shadow=new d.Shadow,this.shape=new c.Shape,this.size=new u.Size,this.stroke=new p.Stroke,this.twinkle=new m.Twinkle}return r(t,[{key:"load",value:function(t){var e,i,n,r,o,a,s;if(void 0!==t){this.bounce.load(t.bounce),this.color=y.AnimatableColor.create(this.color,t.color),this.life.load(t.life);var l=null!==(i=null!==(e=t.links)&&void 0!==e?e:t.lineLinked)&&void 0!==i?i:t.line_linked;void 0!==l&&this.links.load(l),this.move.load(t.move),this.number.load(t.number),this.opacity.load(t.opacity),void 0!==t.reduceDuplicates&&(this.reduceDuplicates=t.reduceDuplicates),this.rotate.load(t.rotate),this.shape.load(t.shape),this.size.load(t.size),this.shadow.load(t.shadow),this.twinkle.load(t.twinkle);var c=null!==(r=null===(n=t.move)||void 0===n?void 0:n.collisions)&&void 0!==r?r:null===(o=t.move)||void 0===o?void 0:o.bounce;void 0!==c&&(this.collisions.enable=c),this.collisions.load(t.collisions);var u=null!==(a=t.stroke)&&void 0!==a?a:null===(s=t.shape)||void 0===s?void 0:s.stroke;void 0!==u&&(u instanceof Array?this.stroke=u.map((function(t){var e=new p.Stroke;return e.load(t),e})):(this.stroke instanceof Array&&(this.stroke=new p.Stroke),this.stroke.load(u)))}}},{key:"line_linked",get:function(){return this.links},set:function(t){this.links=t}},{key:"lineLinked",get:function(){return this.links},set:function(t){this.links=t}}]),t}();e.Particles=_},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;var o=i(11),a=i(8),s=function(){function t(){n(this,t),this.options={},this.type=o.ShapeType.circle}return r(t,[{key:"load",value:function(t){var e,i,n;if(void 0!==t){var r=null!==(e=t.options)&&void 0!==e?e:t.custom;if(void 0!==r)for(var s in r){var l=r[s];void 0!==l&&(this.options[s]=a.Utils.deepExtend(null!==(i=this.options[s])&&void 0!==i?i:{},l))}this.loadShape(t.character,o.ShapeType.character,o.ShapeType.char,!0),this.loadShape(t.polygon,o.ShapeType.polygon,o.ShapeType.star,!1),this.loadShape(null!==(n=t.image)&&void 0!==n?n:t.images,o.ShapeType.image,o.ShapeType.images,!0),void 0!==t.type&&(this.type=t.type)}}},{key:"loadShape",value:function(t,e,i,n){var r,o,s,l;void 0!==t&&(t instanceof Array?(this.options[e]instanceof Array||(this.options[e]=[],this.options[i]&&!n||(this.options[i]=[])),this.options[e]=a.Utils.deepExtend(null!==(r=this.options[e])&&void 0!==r?r:[],t),this.options[i]&&!n||(this.options[i]=a.Utils.deepExtend(null!==(o=this.options[i])&&void 0!==o?o:[],t))):(this.options[e]instanceof Array&&(this.options[e]={},this.options[i]&&!n||(this.options[i]={})),this.options[e]=a.Utils.deepExtend(null!==(s=this.options[e])&&void 0!==s?s:{},t),this.options[i]&&!n||(this.options[i]=a.Utils.deepExtend(null!==(l=this.options[i])&&void 0!==l?l:{},t))))}},{key:"image",get:function(){var t;return null!==(t=this.options[o.ShapeType.image])&&void 0!==t?t:this.options[o.ShapeType.images]},set:function(t){this.options[o.ShapeType.image]=t,this.options[o.ShapeType.images]=t}},{key:"custom",get:function(){return this.options},set:function(t){this.options=t}},{key:"images",get:function(){return this.image instanceof Array?this.image:[this.image]},set:function(t){this.image=t}},{key:"stroke",get:function(){return[]},set:function(t){}},{key:"character",get:function(){var t;return null!==(t=this.options[o.ShapeType.character])&&void 0!==t?t:this.options[o.ShapeType.char]},set:function(t){this.options[o.ShapeType.character]=t,this.options[o.ShapeType.char]=t}},{key:"polygon",get:function(){var t;return null!==(t=this.options[o.ShapeType.polygon])&&void 0!==t?t:this.options[o.ShapeType.star]},set:function(t){this.options[o.ShapeType.polygon]=t,this.options[o.ShapeType.star]=t}}]),t}();e.Shape=s},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.AnimatableColor=void 0;var c=i(18),u=i(289),h=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).animation=new u.ColorAnimation,t}return r(i,[{key:"load",value:function(t){o(a(i.prototype),"load",this).call(this,t),this.animation.load(null===t||void 0===t?void 0:t.animation)}}],[{key:"create",value:function(t,e){var n=null!==t&&void 0!==t?t:new i;return void 0!==e&&n.load("string"===typeof e?{value:e}:e),n}}]),i}(c.OptionsColor);e.AnimatableColor=h},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Bounce=void 0;var o=i(291),a=function(){function t(){n(this,t),this.horizontal=new o.BounceFactor,this.vertical=new o.BounceFactor}return r(t,[{key:"load",value:function(t){t&&(this.horizontal.load(t.horizontal),this.vertical.load(t.vertical))}}]),t}();e.Bounce=a},function(t,e,i){"use strict";var n=i(4),r=i(5),o=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),a=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||o(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonMaskPlugin=void 0;var s=i(330),l=i(118),c=i(32),u=new(function(){function t(){n(this,t),this.id="polygonMask"}return r(t,[{key:"getPlugin",value:function(t){return new s.PolygonMaskInstance(t)}},{key:"needsPlugin",value:function(t){var e,i,n;return null!==(i=null===(e=null===t||void 0===t?void 0:t.polygon)||void 0===e?void 0:e.enable)&&void 0!==i?i:void 0!==(null===(n=null===t||void 0===t?void 0:t.polygon)||void 0===n?void 0:n.type)&&t.polygon.type!==c.Type.none}},{key:"loadOptions",value:function(t,e){if(this.needsPlugin(e)){var i=t,n=i.polygon;void 0===(null===n||void 0===n?void 0:n.load)&&(i.polygon=n=new l.PolygonMask),n.load(null===e||void 0===e?void 0:e.polygon)}}}]),t}());e.PolygonMaskPlugin=u,a(i(32),e)},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonMask=void 0;var o=i(32),a=i(334),s=i(336),l=i(337),c=i(338),u=function(){function t(){n(this,t),this.draw=new a.Draw,this.enable=!1,this.inline=new l.Inline,this.move=new s.Move,this.scale=1,this.type=o.Type.none}return r(t,[{key:"load",value:function(t){var e;if(void 0!==t){this.draw.load(t.draw);var i=null!==(e=t.inline)&&void 0!==e?e:{arrangement:t.inlineArrangement};void 0!==i&&this.inline.load(i),this.move.load(t.move),void 0!==t.scale&&(this.scale=t.scale),void 0!==t.type&&(this.type=t.type),void 0!==t.enable?this.enable=t.enable:this.enable=this.type!==o.Type.none,void 0!==t.url&&(this.url=t.url),void 0!==t.data&&("string"===typeof t.data?this.data=t.data:(this.data=new c.LocalSvg,this.data.load(t.data))),void 0!==t.position&&(this.position={x:t.position.x,y:t.position.y})}}},{key:"inlineArrangement",get:function(){return this.inline.arrangement},set:function(t){this.inline.arrangement=t}}]),t}();e.PolygonMask=u},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonDrawerBase=void 0;var o=function(){function t(){n(this,t)}return r(t,[{key:"getSidesCount",value:function(t){var e,i,n=t.shapeData;return null!==(i=null!==(e=null===n||void 0===n?void 0:n.sides)&&void 0!==e?e:null===n||void 0===n?void 0:n.nb_sides)&&void 0!==i?i:5}},{key:"draw",value:function(t,e,i){var n=this.getCenter(e,i),r=this.getSidesData(e,i),o=r.count.numerator*r.count.denominator,a=r.count.numerator/r.count.denominator,s=180*(a-2)/a,l=Math.PI-Math.PI*s/180;if(t){t.beginPath(),t.translate(n.x,n.y),t.moveTo(0,0);for(var c=0;c<o;c++)t.lineTo(r.length,0),t.translate(r.length,0),t.rotate(l)}}}]),t}();e.PolygonDrawerBase=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Absorber=void 0;var o=i(355),a=i(18),s=function(){function t(){n(this,t),this.color=new a.OptionsColor,this.color.value="#000000",this.draggable=!1,this.opacity=1,this.destroy=!0,this.orbits=!1,this.size=new o.AbsorberSize}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.color&&(this.color=a.OptionsColor.create(this.color,t.color)),void 0!==t.draggable&&(this.draggable=t.draggable),void 0!==t.opacity&&(this.opacity=t.opacity),void 0!==t.position&&(this.position={x:t.position.x,y:t.position.y}),void 0!==t.size&&this.size.load(t.size),void 0!==t.destroy&&(this.destroy=t.destroy),void 0!==t.orbits&&(this.orbits=t.orbits))}}]),t}();e.Absorber=s},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.EmitterSize=void 0;var o=i(11),a=function(){function t(){n(this,t),this.mode=o.SizeMode.percent,this.height=0,this.width=0}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.mode&&(this.mode=t.mode),void 0!==t.height&&(this.height=t.height),void 0!==t.width&&(this.width=t.width))}}]),t}();e.EmitterSize=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=void 0;var o=i(11),a=i(360),s=i(361),l=i(8),c=i(121),u=function(){function t(){n(this,t),this.direction=o.MoveDirection.none,this.life=new s.EmitterLife,this.rate=new a.EmitterRate}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.size&&(void 0===this.size&&(this.size=new c.EmitterSize),this.size.load(t.size)),void 0!==t.direction&&(this.direction=t.direction),this.life.load(t.life),void 0!==t.particles&&(this.particles=l.Utils.deepExtend({},t.particles)),this.rate.load(t.rate),void 0!==t.position&&(this.position={x:t.position.x,y:t.position.y}))}}]),t}();e.Emitter=u},function(t,e){t.exports={isFunction:function(t){return"function"===typeof t},isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},each:function(t,e){for(var i=0,n=t.length;i<n&&!1!==e(t[i],i);i++);}}},function(t,e,i){"use strict";t.exports=i(398)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return[].slice.call(t.querySelectorAll("*"),0).filter(a)};var n=/input|select|textarea|button|object/;function r(t){var e=t.offsetWidth<=0&&t.offsetHeight<=0;if(e&&!t.innerHTML)return!0;try{var i=window.getComputedStyle(t);return e?"visible"!==i.getPropertyValue("overflow")||t.scrollWidth<=0&&t.scrollHeight<=0:"none"==i.getPropertyValue("display")}catch(n){return console.warn("Failed to inspect element style"),!1}}function o(t,e){var i=t.nodeName.toLowerCase();return(n.test(i)&&!t.disabled||"a"===i&&t.href||e)&&function(t){for(var e=t;e&&e!==document.body;){if(r(e))return!1;e=e.parentNode}return!0}(t)}function a(t){var e=t.getAttribute("tabindex");null===e&&(e=void 0);var i=isNaN(e);return(i||e>=0)&&o(t,!i)}t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetState=function(){s&&(s.removeAttribute?s.removeAttribute("aria-hidden"):null!=s.length?s.forEach((function(t){return t.removeAttribute("aria-hidden")})):document.querySelectorAll(s).forEach((function(t){return t.removeAttribute("aria-hidden")})));s=null},e.log=function(){return void 0;var t=s||{};console.log("ariaAppHider ----------"),console.log(t.nodeName,t.className,t.id),console.log("end ariaAppHider ----------")},e.assertNodeList=l,e.setElement=function(t){var e=t;if("string"===typeof e&&a.canUseDOM){var i=document.querySelectorAll(e);l(i,e),e=i}return s=e||s},e.validateElement=c,e.hide=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=c(t)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.setAttribute("aria-hidden","true")}}catch(a){i=!0,n=a}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}},e.show=function(t){var e=!0,i=!1,n=void 0;try{for(var r,o=c(t)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.removeAttribute("aria-hidden")}}catch(a){i=!0,n=a}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}},e.documentNotReadyOrSSRTesting=function(){s=null};var n,r=i(404),o=(n=r)&&n.__esModule?n:{default:n},a=i(82);var s=null;function l(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function c(t){var e=t||s;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,o.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=function(){console.log("portalOpenInstances ----------"),console.log(r.openInstances.length),r.openInstances.forEach((function(t){return console.log(t)})),console.log("end portalOpenInstances ----------")},e.resetState=function(){r=new n};var n=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.register=function(t){-1===e.openInstances.indexOf(t)&&(e.openInstances.push(t),e.emit("register"))},this.deregister=function(t){var i=e.openInstances.indexOf(t);-1!==i&&(e.openInstances.splice(i,1),e.emit("deregister"))},this.subscribe=function(t){e.subscribers.push(t)},this.emit=function(t){e.subscribers.forEach((function(i){return i(t,e.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},r=new n;e.default=r},function(t,e,i){"use strict";function n(t){try{return f.insertRule(t,f.cssRules.length)}catch(t){console.warn("react-reveal - animation failed")}}function r(){u||(e.globalHide=u=!0,window.removeEventListener("scroll",r,!0),n("."+o+" { opacity: 0; }"),window.removeEventListener("orientationchange",r,!0),window.document.removeEventListener("visibilitychange",r))}Object.defineProperty(e,"__esModule",{value:!0}),e.insertRule=n,e.cascade=function(t,e,i,n,r){var o=Math.log(n),a=(Math.log(r)-o)/(i-e);return Math.exp(o+a*(t-e))},e.animation=function(t){if(!f)return"";var e="@keyframes "+(m+d)+"{"+t+"}",i=p[t];return i?""+m+i:(f.insertRule(e,f.cssRules.length),p[t]=d,""+m+d++)},e.hideAll=r,e.default=function(t){var i=t.ssrFadeout;e.fadeOutEnabled=i};var o=e.namespace="react-reveal",a=(e.defaults={duration:1e3,delay:0,count:1},e.ssr=!0),s=e.observerMode=!1,l=e.raf=function(t){return window.setTimeout(t,66)},c=e.disableSsr=function(){return e.ssr=a=!1},u=(e.fadeOutEnabled=!1,e.ssrFadeout=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.fadeOutEnabled=t},e.globalHide=!1),h=(e.ie10=!1,e.collapseend=void 0),d=1,p={},f=!1,m=o+"-"+Math.floor(1e15*Math.random())+"-";if("undefined"!=typeof window&&"nodejs"!==window.name&&window.document&&"undefined"!=typeof navigator){e.observerMode=s="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&/\{\s*\[native code\]\s*\}/.test(""+IntersectionObserver),e.raf=l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||l,e.ssr=a=window.document.querySelectorAll("div[data-reactroot]").length>0,-1!==navigator.appVersion.indexOf("MSIE 10")&&(e.ie10=!0),a&&"performance"in window&&"timing"in window.performance&&"domContentLoadedEventEnd"in window.performance.timing&&window.performance.timing.domLoading&&Date.now()-window.performance.timing.domLoading<300&&(e.ssr=a=!1),a&&window.setTimeout(c,1500),s||(e.collapseend=h=document.createEvent("Event"),h.initEvent("collapseend",!0,!0));var y=document.createElement("style");document.head.appendChild(y),y.sheet&&y.sheet.cssRules&&y.sheet.insertRule&&(f=y.sheet,window.addEventListener("scroll",r,!0),window.addEventListener("orientationchange",r,!0),window.document.addEventListener("visibilitychange",r))}},function(t,e,i){t.exports=function(){"use strict";var t,e,i;function n(n,r){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",a={};t(a),i=r(a),"undefined"!==typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=r;else t=r}return n(["exports"],(function(t){var e="2.5.1",i=n;function n(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var i,n,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?i=r:n=r,r=.5*(n-i)+i}return r},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),r=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-n*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{};const s=Math.pow(2,53)-1,l=Math.PI/180,c=180/Math.PI;function u(t){return t*l}const h=[[0,0],[1,0],[1,1],[0,1]];function d(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}function p(t,e,n,r){const o=new i(t,e,n,r);return function(t){return o.solve(t)}}const f=p(.25,.1,.25,1);function m(t,e,i){return Math.min(i,Math.max(e,t))}function y(t,e,i){const n=i-e,r=((t-e)%n+n)%n+e;return r===e?i:r}function v(t,e,i){if(!t.length)return i(null,[]);let n=t.length;const r=new Array(t.length);let o=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(o=t),r[a]=e,0==--n&&i(o,r)}))}))}function g(t){const e=[];for(const i in t)e.push(t[i]);return e}function _(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}let b=1;function x(){return b++}function w(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function S(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function E(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function k(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function P(t,e){return-1!==t.indexOf(e,t.length-e.length)}function T(t,e,i){const n={};for(const r in t)n[r]=e.call(i||this,t[r],r,t);return n}function C(t,e,i){const n={};for(const r in t)e.call(i||this,t[r],r,t)&&(n[r]=t[r]);return n}function M(t){return Array.isArray(t)?t.map(M):"object"==typeof t&&t?T(t,M):t}const A={};function O(t){A[t]||("undefined"!=typeof console&&console.warn(t),A[t]=!0)}function I(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function D(t){let e=0;for(let i,n,r=0,o=t.length,a=o-1;r<o;a=r++)i=t[r],n=t[a],e+=(n.x-i.x)*(i.y+n.y);return e}function z(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function L(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,i,n,r)=>{const o=n||r;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let R,F,B,j=null;function N(t){if(null==j){const e=t.navigator?t.navigator.userAgent:null;j=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return j}function V(t){try{const e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}const U={now:()=>void 0!==B?B:a.performance.now(),setNow(t){B=t},restoreNow(){B=void 0},frame(t){const e=a.requestAnimationFrame(t);return{cancel:()=>a.cancelAnimationFrame(e)}},getImageData(t,e=0){const i=a.document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(R||(R=a.document.createElement("a")),R.href=t,R.href),get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==F&&(F=a.matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}};let G;const q={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==G){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{G=null!=Object({NODE_ENV:"production",PUBLIC_URL:"/acm-ioit-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL_REGEX?new RegExp(Object({NODE_ENV:"production",PUBLIC_URL:"/acm-ioit-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL_REGEX):t}catch(e){G=t}}return G},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Z={supported:!1,testSupport:function(t){!X&&W&&(Y?K(t):H=t)}};let H,W,X=!1,Y=!1;function K(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,W),t.isContextLost())return;Z.supported=!0}catch(t){}t.deleteTexture(e),X=!0}a.document&&(W=a.document.createElement("img"),W.onload=function(){H&&K(H),H=null,Y=!0},W.onerror=function(){X=!0,H=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const $="01",J="NO_ACCESS_TOKEN";function Q(t){return 0===t.indexOf("mapbox:")}function tt(t){return q.API_URL_REGEX.test(t)}const et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function it(t){const e=t.match(et);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function nt(t){const e=t.params.length?"?".concat(t.params.join("&")):"";return"".concat(t.protocol,"://").concat(t.authority).concat(t.path).concat(e)}function rt(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class ot{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const e=rt(q.ACCESS_TOKEN);let i="";return i=e&&e.u?a.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):q.ACCESS_TOKEN||"",t?"mapbox.eventData.".concat(t,":").concat(i):"mapbox.eventData:".concat(i)}fetchEventData(){const t=V("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{const t=a.localStorage.getItem(e);t&&(this.eventData=JSON.parse(t));const n=a.localStorage.getItem(i);n&&(this.anonId=n)}catch(t){O("Unable to read from LocalStorage")}}saveEventData(){const t=V("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){O("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,i,n,r){if(!q.EVENTS_URL)return;const o=it(q.EVENTS_URL);o.params.push("access_token=".concat(r||q.ACCESS_TOKEN||""));const a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:e,skuId:$,userId:this.anonId},s=i?_(a,i):a,l={url:nt(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Pt(l,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(r)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const at=new class extends ot{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){q.EVENTS_URL&&q.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>Q(t)||tt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=rt(q.ACCESS_TOKEN),i=e?e.u:q.ACCESS_TOKEN;let n=i!==this.eventData.tokenU;E(this.anonId)||(this.anonId=w(),n=!0);const r=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(r),i=(r-this.eventData.lastSuccess)/864e5;n=n||i>=1||i<-1||t.getDate()!==e.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(r,{"enabled.telemetry":!1},(t=>{t||(this.eventData.lastSuccess=r,this.eventData.tokenU=i)}),t)}},st=at.postTurnstileEvent.bind(at),lt=new class extends ot{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,i,n){this.skuToken=e,this.errorCb=n,q.EVENTS_URL&&(i||q.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},i):this.errorCb(new Error(J)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),E(this.anonId)||(this.anonId=w()),this.postEvent(i,{skuToken:this.skuToken},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},ct=lt.postMapLoadEvent.bind(lt),ut=new class extends ot{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,i,n){if(!q.API_URL||!q.SESSION_PATH)return;const r=it(q.API_URL+q.SESSION_PATH);r.params.push("sku=".concat(e||"")),r.params.push("access_token=".concat(n||q.ACCESS_TOKEN||""));const o={url:nt(r),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Tt(o,(t=>{this.pendingRequest=null,i(t),this.saveEventData(),this.processRequests(n)}))}getSessionAPI(t,e,i,n){this.skuToken=e,this.errorCb=n,q.SESSION_PATH&&q.API_URL&&(i||q.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},i):this.errorCb(new Error(J)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||this.getSession(i,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},ht=ut.getSessionAPI.bind(ut),dt=new Set,pt="mapbox-tiles";let ft,mt,yt=500,vt=50;function gt(){a.caches&&!ft&&(ft=a.caches.open(pt))}function _t(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}let bt=1/0;const xt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xt);class wt extends Error{constructor(t,e,i){401===e&&tt(i)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=i}toString(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}const St=z()?()=>self.worker&&self.worker.referrer:()=>("blob:"===a.location.protocol?a.parent:a).location.href,Et=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(St())&&!/^\w+:/.test(i))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){const i=new a.AbortController,n=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:St(),signal:i.signal});let r=!1,o=!1;const s=(l=n.url).indexOf("sku=")>0&&tt(l);var l;"json"===t.type&&n.headers.set("Accept","application/json");const c=(i,r,l)=>{if(o)return;if(i&&"SecurityError"!==i.message&&O(i),r&&l)return u(r);const c=Date.now();a.fetch(n).then((i=>{if(i.ok){const t=s?i.clone():null;return u(i,t,c)}return e(new wt(i.statusText,i.status,t.url))})).catch((t=>{20!==t.code&&e(new Error(t.message))}))},u=(i,s,l)=>{("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((t=>{o||(s&&l&&function(t,e,i){if(gt(),!ft)return;const n={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach(((t,e)=>n.headers.set(e,t)));const r=L(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&n.headers.set("Expires",new Date(i+1e3*r["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===mt)try{new Response(new ReadableStream),mt=!0}catch(t){mt=!1}mt?e(t.body):t.blob().then(e)}(e,(e=>{const i=new a.Response(e,n);gt(),ft&&ft.then((e=>e.put(_t(t.url),i))).catch((t=>O(t.message)))})))}(n,s,l),r=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((t=>{o||e(new Error(t.message))}))};return s?function(t,e){if(gt(),!ft)return e(null);const i=_t(t.url);ft.then((t=>{t.match(i).then((n=>{const r=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),i=L(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(n);t.delete(i),r&&t.put(i,n.clone()),e(null,n,r)})).catch(e)})).catch(e)}(n,c):c(null,null),{cancel:()=>{o=!0,r||i.abort()}}}(t,e);if(z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){const i=new a.XMLHttpRequest;i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer");for(const n in t.headers)i.setRequestHeader(n,t.headers[n]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=()=>{e(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let n=i.response;if("json"===t.type)try{n=JSON.parse(i.response)}catch(t){return e(t)}e(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new wt(i.statusText,i.status,t.url))},i.send(t.body),{cancel:()=>i.abort()}}(t,e)},kt=function(t,e){return Et(_(t,{type:"arrayBuffer"}),e)},Pt=function(t,e){return Et(_(t,{method:"POST"}),e)},Tt=function(t,e){return Et(_(t,{method:"GET"}),e)};function Ct(t){const e=a.document.createElement("a");return e.href=t,e.protocol===a.document.location.protocol&&e.host===a.document.location.host}const Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let At,Ot;At=[],Ot=0;const It=function(t,e){if(Z.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ot>=q.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return At.push(i),i}Ot++;let i=!1;const n=()=>{if(!i)for(i=!0,Ot--;At.length&&Ot<q.MAX_PARALLEL_IMAGE_REQUESTS;){const t=At.shift(),{requestParameters:e,callback:i,cancelled:n}=t;n||(t.cancel=It(e,i).cancel)}},r=kt(t,((t,i,r,o)=>{n(),t?e(t):i&&(a.createImageBitmap?function(t,e){const i=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(i).then((t=>{e(null,t)})).catch((t=>{e(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(i,((t,i)=>e(t,i,r,o))):function(t,e){const i=new a.Image,n=a.URL;i.onload=()=>{e(null,i),n.revokeObjectURL(i.src),i.onload=null,a.requestAnimationFrame((()=>{i.src=Mt}))},i.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new a.Blob([new Uint8Array(t)],{type:"image/png"});i.src=t.byteLength?n.createObjectURL(r):Mt}(i,((t,i)=>e(t,i,r,o))))}));return{cancel:()=>{r.cancel(),n()}}};function Dt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function zt(t,e,i){if(i&&i[t]){const n=i[t].indexOf(e);-1!==n&&i[t].splice(n,1)}}class Lt{constructor(t,e={}){_(this,e),this.type=t}}class Rt extends Lt{constructor(t,e={}){super("error",_({error:t},e))}}class Ft{on(t,e){return this._listeners=this._listeners||{},Dt(t,e,this._listeners),this}off(t,e){return zt(t,e,this._listeners),zt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Dt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Lt(t,e||{}));const i=t.type;if(this.listens(i)){t.target=this;const e=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of e)i.call(this,t);const n=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const o of n)zt(i,o,this._oneTimeListeners),o.call(this,t);const r=this._eventedParent;r&&(_(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof Rt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Bt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class jt{constructor(t,e,i,n){this.message=(t?"".concat(t,": "):"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)}}function Nt(t){const e=t.value;return e?[new jt(t.key,e,"constants have been deprecated as of v8")]:[]}function Vt(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}function Ut(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Gt(t){if(Array.isArray(t))return t.map(Gt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=Gt(t[i]);return e}return Ut(t)}class qt extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class Zt{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[i,n]of e)this.bindings[i]=n}concat(t){return new Zt(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Ht={kind:"null"},Wt={kind:"number"},Xt={kind:"string"},Yt={kind:"boolean"},Kt={kind:"color"},$t={kind:"object"},Jt={kind:"value"},Qt={kind:"collator"},te={kind:"formatted"},ee={kind:"resolvedImage"};function ie(t,e){return{kind:"array",itemType:t,N:e}}function ne(t){if("array"===t.kind){const e=ne(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}const re=[Ht,Wt,Xt,Yt,Kt,te,$t,ie(Jt),ee];function oe(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!oe(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of re)if(!oe(t,e))return null}return"Expected ".concat(ne(t)," but found ").concat(ne(e)," instead.")}function ae(t,e){return e.some((e=>e.kind===t.kind))}function se(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}function le(t){var e={exports:{}};return t(e,e.exports),e.exports}var ce=le((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),h=s.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=o(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),d];case"hsla":if(4!==h.length)return null;d=o(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),m=o(h[2]),y=m<=.5?m*(f+1):m+f-m*f,v=2*m-y;return[n(255*a(v,y,p+1/3)),n(255*a(v,y,p)),n(255*a(v,y,p-1/3)),d];default:return null}}return null}}catch(t){}}));class ue{constructor(t,e,i,n=1){this.r=t,this.g=e,this.b=i,this.a=n}static parse(t){if(!t)return;if(t instanceof ue)return t;if("string"!=typeof t)return;const e=ce.parseCSSColor(t);return e?new ue(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,n]=this.toArray();return"rgba(".concat(Math.round(t),",").concat(Math.round(e),",").concat(Math.round(i),",").concat(n,")")}toArray(){const{r:t,g:e,b:i,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*i/n,n]}}ue.black=new ue(0,0,0,1),ue.white=new ue(1,1,1,1),ue.transparent=new ue(0,0,0,0),ue.red=new ue(1,0,0,1),ue.blue=new ue(0,0,1,1);class he{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class de{constructor(t,e,i,n,r){this.text=t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=r}}class pe{constructor(t){this.sections=t}static fromString(t){return new pe([new de(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof pe?t:pe.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const i={};e.fontStack&&(i["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(i["font-scale"]=e.scale),e.textColor&&(i["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(i)}return t}}class fe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new fe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function me(t,e,i,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value [".concat([t,e,i,n].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function ye(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof ue)return!0;if(t instanceof he)return!0;if(t instanceof pe)return!0;if(t instanceof fe)return!0;if(Array.isArray(t)){for(const e of t)if(!ye(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!ye(t[e]))return!1;return!0}return!1}function ve(t){if(null===t)return Ht;if("string"==typeof t)return Xt;if("boolean"==typeof t)return Yt;if("number"==typeof t)return Wt;if(t instanceof ue)return Kt;if(t instanceof he)return Qt;if(t instanceof pe)return te;if(t instanceof fe)return ee;if(Array.isArray(t)){const e=t.length;let i;for(const n of t){const t=ve(n);if(i){if(i===t)continue;i=Jt;break}i=t}return ie(i||Jt,e)}return $t}function ge(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof ue||t instanceof pe||t instanceof fe?t.toString():JSON.stringify(t)}class _e{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!ye(t[1]))return e.error("invalid value");const i=t[1];let n=ve(i);const r=e.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new _e(n,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ue?["rgba"].concat(this.value.toArray()):this.value instanceof pe?this.value.serialize():this.value}}class be{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const xe={string:Xt,number:Wt,boolean:Yt,object:$t};class we{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,n=1;const r=t[0];if("array"===r){let r,o;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in xe)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=xe[i],n++}else r=Jt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}i=ie(r,o)}else i=xe[r];const o=[];for(;n<t.length;n++){const i=e.parse(t[n],n,Jt);if(!i)return null;o.push(i)}return new we(i,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!oe(this.type,ve(i)))return i;if(e===this.args.length-1)throw new be("Expected value to be of type ".concat(ne(this.type),", but found ").concat(ne(ve(i))," instead."))}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((t=>t.serialize())))}}class Se{constructor(t){this.type=te,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const n=[];let r=!1;for(let o=1;o<=t.length-1;++o){const i=t[o];if(r&&"object"==typeof i&&!Array.isArray(i)){r=!1;let t=null;if(i["font-scale"]&&(t=e.parse(i["font-scale"],1,Wt),!t))return null;let o=null;if(i["text-font"]&&(o=e.parse(i["text-font"],1,ie(Xt)),!o))return null;let a=null;if(i["text-color"]&&(a=e.parse(i["text-color"],1,Kt),!a))return null;const s=n[n.length-1];s.scale=t,s.font=o,s.textColor=a}else{const i=e.parse(t[o],1,Jt);if(!i)return null;const a=i.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,n.push({content:i,scale:null,font:null,textColor:null})}}return new Se(n)}evaluate(t){return new pe(this.sections.map((e=>{const i=e.content.evaluate(t);return ve(i)===ee?new de("",i,null,null,null):new de(ge(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const i={};e.scale&&(i["font-scale"]=e.scale.serialize()),e.font&&(i["text-font"]=e.font.serialize()),e.textColor&&(i["text-color"]=e.textColor.serialize()),t.push(i)}return t}}class Ee{constructor(t){this.type=ee,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,Xt);return i?new Ee(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=fe.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const ke={"to-boolean":Yt,"to-color":Kt,"to-number":Wt,"to-string":Xt};class Pe{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const n=ke[i],r=[];for(let o=1;o<t.length;o++){const i=e.parse(t[o],o,Jt);if(!i)return null;r.push(i)}return new Pe(n,r)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,i;for(const n of this.args){if(e=n.evaluate(t),i=null,e instanceof ue)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):me(e[0],e[1],e[2],e[3]),!i))return new ue(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new be(i||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new be("Could not convert ".concat(JSON.stringify(e)," to number."))}return"formatted"===this.type.kind?pe.fromString(ge(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?fe.fromString(ge(this.args[0].evaluate(t))):ge(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Se([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ee(this.args[0]).serialize();const t=["to-".concat(this.type.kind)];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Te=["Unknown","Point","LineString","Polygon"];class Ce{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Te[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=ue.parse(t)),e}}class Me{constructor(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const i=t[0],n=Me.definitions[i];if(!n)return e.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);const r=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[l,c]of a){s=new Je(e.registry,e.path,null,e.scope);const n=[];let o=!1;for(let e=1;e<t.length;e++){const i=t[e],r=Array.isArray(l)?l[e-1]:l.type,a=s.parse(i,1+n.length,r);if(!a){o=!0;break}n.push(a)}if(!o)if(Array.isArray(l)&&l.length!==n.length)s.error("Expected ".concat(l.length," arguments, but found ").concat(n.length," instead."));else{for(let t=0;t<n.length;t++){const e=Array.isArray(l)?l[t]:l.type,i=n[t];s.concat(t+1).checkSubtype(e,i.type)}if(0===s.errors.length)return new Me(i,r,c,n)}}if(1===a.length)e.errors.push(...s.errors);else{const i=(a.length?a:o).map((([t])=>{return e=t,Array.isArray(e)?"(".concat(e.map(ne).join(", "),")"):"(".concat(ne(e.type),"...)");var e})).join(" | "),n=[];for(let r=1;r<t.length;r++){const i=e.parse(t[r],1+n.length);if(!i)return null;n.push(ne(i.type))}e.error("Expected arguments of type ".concat(i,", but found (").concat(n.join(", "),") instead."))}return null}static register(t,e){Me.definitions=e;for(const i in e)t[i]=Me}}class Ae{constructor(t,e,i){this.type=Qt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Yt);if(!n)return null;const r=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Yt);if(!r)return null;let o=null;return i.locale&&(o=e.parse(i.locale,1,Xt),!o)?null:new Ae(n,r,o)}evaluate(t){return new he(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Oe=8192;function Ie(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function De(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ze(t,e){const i=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(i*r*Oe),Math.round(n*r*Oe)]}function Le(t,e,i){const n=t[0]-e[0],r=t[1]-e[1],o=t[0]-i[0],a=t[1]-i[1];return n*a-o*r==0&&n*o<=0&&r*a<=0}function Re(t,e){let i=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(Le(t,s[e],s[e+1]))return!1;(r=s[e])[1]>(n=t)[1]!=(o=s[e+1])[1]>n[1]&&n[0]<(o[0]-r[0])*(n[1]-r[1])/(o[1]-r[1])+r[0]&&(i=!i)}}var n,r,o;return i}function Fe(t,e){for(let i=0;i<e.length;i++)if(Re(t,e[i]))return!0;return!1}function Be(t,e,i,n){const r=n[0]-i[0],o=n[1]-i[1],a=(t[0]-i[0])*o-r*(t[1]-i[1]),s=(e[0]-i[0])*o-r*(e[1]-i[1]);return a>0&&s<0||a<0&&s>0}function je(t,e,i){for(const c of i)for(let i=0;i<c.length-1;++i)if(0!=(s=[(a=c[i+1])[0]-(o=c[i])[0],a[1]-o[1]])[0]*(l=[(r=e)[0]-(n=t)[0],r[1]-n[1]])[1]-s[1]*l[0]&&Be(n,r,o,a)&&Be(o,a,n,r))return!0;var n,r,o,a,s,l;return!1}function Ne(t,e){for(let i=0;i<t.length;++i)if(!Re(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(je(t[i],t[i+1],e))return!1;return!0}function Ve(t,e){for(let i=0;i<e.length;i++)if(Ne(t,e[i]))return!0;return!1}function Ue(t,e,i){const n=[];for(let r=0;r<t.length;r++){const o=[];for(let n=0;n<t[r].length;n++){const a=ze(t[r][n],i);Ie(e,a),o.push(a)}n.push(o)}return n}function Ge(t,e,i){const n=[];for(let r=0;r<t.length;r++){const o=Ue(t[r],e,i);n.push(o)}return n}function qe(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){const e=.5*n;let r=t[0]-i[0]>e?-n:i[0]-t[0]>e?n:0;0===r&&(r=t[0]-i[2]>e?-n:i[2]-t[0]>e?n:0),t[0]+=r}Ie(e,t)}function Ze(t,e,i,n){const r=Math.pow(2,n.z)*Oe,o=[n.x*Oe,n.y*Oe],a=[];for(const s of t)for(const t of s){const n=[t.x+o[0],t.y+o[1]];qe(n,e,i,r),a.push(n)}return a}function He(t,e,i,n){const r=Math.pow(2,n.z)*Oe,o=[n.x*Oe,n.y*Oe],a=[];for(const l of t){const t=[];for(const i of l){const n=[i.x+o[0],i.y+o[1]];Ie(e,n),t.push(n)}a.push(t)}if(e[2]-e[0]<=r/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const n of t)qe(n,e,i,r)}var s;return a}class We{constructor(t,e){this.type=Yt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(ye(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const i=e.features[t].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new We(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new We(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new We(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=Ue(e.coordinates,n,r),a=Ze(t.geometry(),i,n,r);if(!De(i,n))return!1;for(const t of a)if(!Re(t,o))return!1}if("MultiPolygon"===e.type){const o=Ge(e.coordinates,n,r),a=Ze(t.geometry(),i,n,r);if(!De(i,n))return!1;for(const t of a)if(!Fe(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=Ue(e.coordinates,n,r),a=He(t.geometry(),i,n,r);if(!De(i,n))return!1;for(const t of a)if(!Ne(t,o))return!1}if("MultiPolygon"===e.type){const o=Ge(e.coordinates,n,r),a=He(t.geometry(),i,n,r);if(!De(i,n))return!1;for(const t of a)if(!Ve(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Xe(t){if(t instanceof Me){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof We)return!1;let e=!0;return t.eachChild((t=>{e&&!Xe(t)&&(e=!1)})),e}function Ye(t){if(t instanceof Me&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!Ye(t)&&(e=!1)})),e}function Ke(t,e){if(t instanceof Me&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild((t=>{i&&!Ke(t,e)&&(i=!1)})),i}class $e{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new $e(i,e.scope.get(i)):e.error('Unknown variable "'.concat(i,'". Make sure "').concat(i,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Je{constructor(t,e=[],i,n=new Zt,r=[]){this.registry=t,this.path=e,this.key=e.map((t=>"[".concat(t,"]"))).join(""),this.scope=n,this.errors=r,this.expectedType=i}parse(t,e,i,n,r={}){return e?this.concat(e,i,n)._parse(t,r):this._parse(t,r)}_parse(t,e){function i(t,e,i){return"assert"===i?new we(e,[t]):"coerce"===i?new Pe(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found ".concat(typeof n,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const r=this.registry[n];if(r){let n=r.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,r=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(t,r))return null}else n=i(n,t,e.typeAnnotation||"coerce");else n=i(n,t,e.typeAnnotation||"assert")}if(!(n instanceof _e)&&"resolvedImage"!==n.type.kind&&Qe(n)){const e=new Ce;try{n=new _e(n.type,n.evaluate(e))}catch(t){return this.error(t.message),null}}return n}return this.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof t," instead."))}concat(t,e,i){const n="number"==typeof t?this.path.concat(t):this.path,r=i?this.scope.concat(i):this.scope;return new Je(this.registry,n,e||null,r,this.errors)}error(t,...e){const i="".concat(this.key).concat(e.map((t=>"[".concat(t,"]"))).join(""));this.errors.push(new qt(i,t))}checkSubtype(t,e){const i=oe(t,e);return i&&this.error(i),i}}function Qe(t){if(t instanceof $e)return Qe(t.boundExpression);if(t instanceof Me&&"error"===t.name)return!1;if(t instanceof Ae)return!1;if(t instanceof We)return!1;const e=t instanceof Pe||t instanceof we;let i=!0;return t.eachChild((t=>{i=e?i&&Qe(t):i&&t instanceof _e})),!!i&&Xe(t)&&Ke(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function ti(t,e){const i=t.length-1;let n,r,o=0,a=i,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),n=t[s],r=t[s+1],n<=e){if(s===i||e<r)return s;o=s+1}else{if(!(n>e))throw new be("Input is not a number.");a=s-1}return 0}class ei{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[n,r]of i)this.labels.push(n),this.outputs.push(r)}static parse(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,Wt);if(!i)return null;const n=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let o=1;o<t.length;o+=2){const i=1===o?-1/0:t[o],a=t[o+1],s=o,l=o+1;if("number"!=typeof i)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=i)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(a,l,r);if(!c)return null;r=r||c.type,n.push([i,c])}return new ei(r,i,n)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const r=e.length;return n>=e[r-1]?i[r-1].evaluate(t):i[ti(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function ii(t,e,i){return t*(1-i)+e*i}var ni=Object.freeze({__proto__:null,number:ii,color:function(t,e,i){return new ue(ii(t.r,e.r,i),ii(t.g,e.g,i),ii(t.b,e.b,i),ii(t.a,e.a,i))},array:function(t,e,i){return t.map(((t,n)=>ii(t,e[n],i)))}});const ri=.95047,oi=1.08883,ai=4/29,si=6/29,li=3*si*si,ci=Math.PI/180,ui=180/Math.PI;function hi(t){return t>.008856451679035631?Math.pow(t,1/3):t/li+ai}function di(t){return t>si?t*t*t:li*(t-ai)}function pi(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function fi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function mi(t){const e=fi(t.r),i=fi(t.g),n=fi(t.b),r=hi((.4124564*e+.3575761*i+.1804375*n)/ri),o=hi((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-hi((.0193339*e+.119192*i+.9503041*n)/oi)),alpha:t.a}}function yi(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*di(e),i=ri*di(i),n=oi*di(n),new ue(pi(3.2404542*i-1.5371385*e-.4985314*n),pi(-.969266*i+1.8760108*e+.041556*n),pi(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function vi(t,e,i){const n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}const gi={forward:mi,reverse:yi,interpolate:function(t,e,i){return{l:ii(t.l,e.l,i),a:ii(t.a,e.a,i),b:ii(t.b,e.b,i),alpha:ii(t.alpha,e.alpha,i)}}},_i={forward:function(t){const{l:e,a:i,b:n}=mi(t),r=Math.atan2(n,i)*ui;return{h:r<0?r+360:r,c:Math.sqrt(i*i+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*ci,i=t.c;return yi({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:vi(t.h,e.h,i),c:ii(t.c,e.c,i),l:ii(t.l,e.l,i),alpha:ii(t.alpha,e.alpha,i)}}};var bi=Object.freeze({__proto__:null,lab:gi,hcl:_i});class xi{constructor(t,e,i,n,r){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(const[o,a]of r)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,e,n,r){let o=0;if("exponential"===t.name)o=wi(e,t.base,n,r);else if("linear"===t.name)o=wi(e,1,n,r);else if("cubic-bezier"===t.name){const a=t.controlPoints;o=new i(a[0],a[1],a[2],a[3]).solve(wi(e,1,n,r))}return o}static parse(t,e){let[i,n,r,...o]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type ".concat(String(n[0])),1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,Wt),!r)return null;const a=[];let s=null;"interpolate-hcl"===i||"interpolate-lab"===i?s=Kt:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let l=0;l<o.length;l+=2){const t=o[l],i=o[l+1],n=l+3,r=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(a.length&&a[a.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const c=e.parse(i,r,s);if(!c)return null;s=s||c.type,a.push([t,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new xi(s,i,n,r,a):e.error("Type ".concat(ne(s)," is not interpolatable."))}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const r=e.length;if(n>=e[r-1])return i[r-1].evaluate(t);const o=ti(e,n),a=xi.interpolationFactor(this.interpolation,n,e[o],e[o+1]),s=i[o].evaluate(t),l=i[o+1].evaluate(t);return"interpolate"===this.operator?ni[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?_i.reverse(_i.interpolate(_i.forward(s),_i.forward(l),a)):gi.reverse(gi.interpolate(gi.forward(s),gi.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e}}function wi(t,e,i,n){const r=n-i,o=t-i;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class Si{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const n=e.expectedType;n&&"value"!==n.kind&&(i=n);const r=[];for(const a of t.slice(1)){const t=e.parse(a,1+r.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,r.push(t)}const o=n&&r.some((t=>oe(n,t.type)));return new Si(o?Jt:i,r)}evaluate(t){let e,i=null,n=0;for(const r of this.args)if(n++,i=r.evaluate(t),i&&i instanceof fe&&!i.available&&(e||(e=i.name),i=null,n===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Ei{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));const i=[];for(let r=1;r<t.length-1;r+=2){const n=t[r];if("string"!=typeof n)return e.error("Expected string, but found ".concat(typeof n," instead."),r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=e.parse(t[r+1],r+1);if(!o)return null;i.push([n,o])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return n?new Ei(i,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,i]of this.bindings)t.push(e,i.serialize());return t.push(this.result.serialize()),t}}class ki{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1,Wt),n=e.parse(t[2],2,ie(e.expectedType||Jt));return i&&n?new ki(n.type.itemType,i,n):null}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new be("Array index out of bounds: ".concat(e," < 0."));if(e>=i.length)throw new be("Array index out of bounds: ".concat(e," > ").concat(i.length-1,"."));if(e!==Math.floor(e))throw new be("Array index must be an integer, but found ".concat(e," instead."));return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Pi{constructor(t,e){this.type=Yt,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1,Jt),n=e.parse(t[2],2,Jt);return i&&n?ae(i.type,[Yt,Xt,Wt,Ht,Jt])?new Pi(i,n):e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(ne(i.type)," instead")):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!se(e,["boolean","string","number","null"]))throw new be("Expected first argument to be of type boolean, string, number or null, but found ".concat(ne(ve(e))," instead."));if(!se(i,["string","array"]))throw new be("Expected second argument to be of type array or string, but found ".concat(ne(ve(i))," instead."));return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ti{constructor(t,e,i){this.type=Wt,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1,Jt),n=e.parse(t[2],2,Jt);if(!i||!n)return null;if(!ae(i.type,[Yt,Xt,Wt,Ht,Jt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(ne(i.type)," instead"));if(4===t.length){const r=e.parse(t[3],3,Wt);return r?new Ti(i,n,r):null}return new Ti(i,n)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!se(e,["boolean","string","number","null"]))throw new be("Expected first argument to be of type boolean, string, number or null, but found ".concat(ne(ve(e))," instead."));if(!se(i,["string","array"]))throw new be("Expected second argument to be of type array or string, but found ".concat(ne(ve(i))," instead."));if(this.fromIndex){const n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ci{constructor(t,e,i,n,r,o){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=r,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r={},o=[];for(let l=2;l<t.length-1;l+=2){let a=t[l];const s=t[l+1];Array.isArray(a)||(a=[a]);const c=e.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,ve(t)))return null}else i=ve(t);if(void 0!==r[String(t)])return c.error("Branch labels must be unique.");r[String(t)]=o.length}const u=e.parse(s,l,n);if(!u)return null;n=n||u.type,o.push(u)}const a=e.parse(t[1],1,Jt);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,n);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(i,a.type)?null:new Ci(i,n,a,r,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(ve(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),i=[],n={};for(const o of e){const t=n[this.cases[o]];void 0===t?(n[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[t][1].push(o)}const r=t=>"number"===this.inputType.kind?Number(t):t;for(const[o,a]of i)t.push(1===a.length?r(a[0]):a.map(r)),t.push(this.outputs[o].serialize());return t.push(this.otherwise.serialize()),t}}class Mi{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const n=[];for(let o=1;o<t.length-1;o+=2){const r=e.parse(t[o],o,Yt);if(!r)return null;const a=e.parse(t[o+1],o+1,i);if(!a)return null;n.push([r,a]),i=i||a.type}const r=e.parse(t[t.length-1],t.length-1,i);return r?new Mi(i,n,r):null}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Ai{constructor(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1,Jt),n=e.parse(t[2],2,Wt);if(!i||!n)return null;if(!ae(i.type,[ie(Jt),Xt,Jt]))return e.error("Expected first argument to be of type array or string, but found ".concat(ne(i.type)," instead"));if(4===t.length){const r=e.parse(t[3],3,Wt);return r?new Ai(i.type,i,n,r):null}return new Ai(i.type,i,n)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!se(e,["string","array"]))throw new be("Expected first argument to be of type array or string, but found ".concat(ne(ve(e))," instead."));if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Oi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Ii(t,e,i,n){return 0===n.compare(e,i)}function Di(t,e,i){const n="=="!==t&&"!="!==t;return class r{constructor(t,e,i){this.type=Yt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let o=e.parse(t[1],1,Jt);if(!o)return null;if(!Oi(i,o.type))return e.concat(1).error('"'.concat(i,"\" comparisons are not supported for type '").concat(ne(o.type),"'."));let a=e.parse(t[2],2,Jt);if(!a)return null;if(!Oi(i,a.type))return e.concat(2).error('"'.concat(i,"\" comparisons are not supported for type '").concat(ne(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(ne(o.type),"' and '").concat(ne(a.type),"'."));n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new we(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new we(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,Qt),!s)return null}return new r(o,a,s)}evaluate(r){const o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){const e=ve(o),i=ve(a);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new be('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(e.kind,", ").concat(i.kind,") instead."))}if(this.collator&&!n&&this.hasUntypedArgument){const t=ve(o),i=ve(a);if("string"!==t.kind||"string"!==i.kind)return e(r,o,a)}return this.collator?i(r,o,a,this.collator.evaluate(r)):e(r,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const zi=Di("==",(function(t,e,i){return e===i}),Ii),Li=Di("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!Ii(0,e,i,n)})),Ri=Di("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),Fi=Di(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),Bi=Di("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0})),ji=Di(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0}));class Ni{constructor(t,e,i,n,r){this.type=Xt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=r}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,Wt);if(!i)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let r=null;if(n.locale&&(r=e.parse(n.locale,1,Xt),!r))return null;let o=null;if(n.currency&&(o=e.parse(n.currency,1,Xt),!o))return null;let a=null;if(n["min-fraction-digits"]&&(a=e.parse(n["min-fraction-digits"],1,Wt),!a))return null;let s=null;return n["max-fraction-digits"]&&(s=e.parse(n["max-fraction-digits"],1,Wt),!s)?null:new Ni(i,r,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Vi{constructor(t){this.type=Wt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found ".concat(t.length-1," instead."));const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found ".concat(ne(i.type)," instead.")):new Vi(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new be("Expected value to be of type string or array, but found ".concat(ne(ve(e))," instead."))}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Ui={"==":zi,"!=":Li,">":Fi,"<":Ri,">=":ji,"<=":Bi,array:we,at:ki,boolean:we,case:Mi,coalesce:Si,collator:Ae,format:Se,image:Ee,in:Pi,"index-of":Ti,interpolate:xi,"interpolate-hcl":xi,"interpolate-lab":xi,length:Vi,let:Ei,literal:_e,match:Ci,number:we,"number-format":Ni,object:we,slice:Ai,step:ei,string:we,"to-boolean":Pe,"to-color":Pe,"to-number":Pe,"to-string":Pe,var:$e,within:We};function Gi(t,[e,i,n,r]){e=e.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);const o=r?r.evaluate(t):1,a=me(e,i,n,o);if(a)throw new be(a);return new ue(e/255*o,i/255*o,n/255*o,o)}function qi(t,e){return t in e}function Zi(t,e){const i=e[t];return void 0===i?null:i}function Hi(t){return{type:t}}function Wi(t){return{result:"success",value:t}}function Xi(t){return{result:"error",value:t}}function Yi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ki(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function $i(t){return!!t.expression&&t.expression.interpolated}function Ji(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Qi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function tn(t){return t}function en(t,e){const i="color"===e.type,n=t.stops&&"object"==typeof t.stops[0][0],r=n||!(n||void 0!==t.property),o=t.type||($i(e)?"exponential":"interval");if(i&&((t=Vt({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],ue.parse(t[1])]))),t.default=ue.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!bi[t.colorSpace])throw new Error("Unknown color space: ".concat(t.colorSpace));let a,s,l;if("exponential"===o)a=an;else if("interval"===o)a=on;else if("categorical"===o){a=rn,s=Object.create(null);for(const e of t.stops)s[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error('Unknown function type "'.concat(o,'"'));a=sn}if(n){const i={},n=[];for(let e=0;e<t.stops.length;e++){const r=t.stops[e],o=r[0].zoom;void 0===i[o]&&(i[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},n.push(o)),i[o].stops.push([r[0].value,r[1]])}const r=[];for(const t of n)r.push([i[t].zoom,en(i[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:xi.interpolationFactor.bind(void 0,o),zoomStops:r.map((t=>t[0])),evaluate:({zoom:i},n)=>an({stops:r,base:t.base},e,i).evaluate(i,n)}}if(r){const i="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:i,interpolationFactor:xi.interpolationFactor.bind(void 0,i),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:i})=>a(t,e,i,s,l)}}return{kind:"source",evaluate(i,n){const r=n&&n.properties?n.properties[t.property]:void 0;return void 0===r?nn(t.default,e.default):a(t,e,r,s,l)}}}function nn(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function rn(t,e,i,n,r){return nn(typeof i===r?n[i]:void 0,t.default,e.default)}function on(t,e,i){if("number"!==Ji(i))return nn(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];const r=ti(t.stops.map((t=>t[0])),i);return t.stops[r][1]}function an(t,e,i){const n=void 0!==t.base?t.base:1;if("number"!==Ji(i))return nn(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];const o=ti(t.stops.map((t=>t[0])),i),a=function(t,e,i,n){const r=n-i,o=t-i;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(i,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let c=ni[e.type]||tn;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=bi[t.colorSpace];c=(t,i)=>e.reverse(e.interpolate(e.forward(t),e.forward(i),a))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==i)return c(e,i,a)}}:c(s,l,a)}function sn(t,e,i){return"color"===e.type?i=ue.parse(i):"formatted"===e.type?i=pe.fromString(i.toString()):"resolvedImage"===e.type?i=fe.fromString(i.toString()):Ji(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),nn(i,t.default,e.default)}Me.register(Ui,{error:[{kind:"error"},[Xt],(t,[e])=>{throw new be(e.evaluate(t))}],typeof:[Xt,[Jt],(t,[e])=>ne(ve(e.evaluate(t)))],"to-rgba":[ie(Wt,4),[Kt],(t,[e])=>e.evaluate(t).toArray()],rgb:[Kt,[Wt,Wt,Wt],Gi],rgba:[Kt,[Wt,Wt,Wt,Wt],Gi],has:{type:Yt,overloads:[[[Xt],(t,[e])=>qi(e.evaluate(t),t.properties())],[[Xt,$t],(t,[e,i])=>qi(e.evaluate(t),i.evaluate(t))]]},get:{type:Jt,overloads:[[[Xt],(t,[e])=>Zi(e.evaluate(t),t.properties())],[[Xt,$t],(t,[e,i])=>Zi(e.evaluate(t),i.evaluate(t))]]},"feature-state":[Jt,[Xt],(t,[e])=>Zi(e.evaluate(t),t.featureState||{})],properties:[$t,[],t=>t.properties()],"geometry-type":[Xt,[],t=>t.geometryType()],id:[Jt,[],t=>t.id()],zoom:[Wt,[],t=>t.globals.zoom],"heatmap-density":[Wt,[],t=>t.globals.heatmapDensity||0],"line-progress":[Wt,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Wt,[],t=>t.globals.skyRadialProgress||0],accumulated:[Jt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[Wt,Hi(Wt),(t,e)=>{let i=0;for(const n of e)i+=n.evaluate(t);return i}],"*":[Wt,Hi(Wt),(t,e)=>{let i=1;for(const n of e)i*=n.evaluate(t);return i}],"-":{type:Wt,overloads:[[[Wt,Wt],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[Wt],(t,[e])=>-e.evaluate(t)]]},"/":[Wt,[Wt,Wt],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[Wt,[Wt,Wt],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[Wt,[],()=>Math.LN2],pi:[Wt,[],()=>Math.PI],e:[Wt,[],()=>Math.E],"^":[Wt,[Wt,Wt],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[Wt,[Wt],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Wt,[Wt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Wt,[Wt],(t,[e])=>Math.log(e.evaluate(t))],log2:[Wt,[Wt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Wt,[Wt],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Wt,[Wt],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Wt,[Wt],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Wt,[Wt],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Wt,[Wt],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Wt,[Wt],(t,[e])=>Math.atan(e.evaluate(t))],min:[Wt,Hi(Wt),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[Wt,Hi(Wt),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[Wt,[Wt],(t,[e])=>Math.abs(e.evaluate(t))],round:[Wt,[Wt],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Wt,[Wt],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Wt,[Wt],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Yt,[Xt,Jt],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[Yt,[Jt],(t,[e])=>t.id()===e.value],"filter-type-==":[Yt,[Xt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Yt,[Xt,Jt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<r}],"filter-id-<":[Yt,[Jt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<n}],"filter->":[Yt,[Xt,Jt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>r}],"filter-id->":[Yt,[Jt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>n}],"filter-<=":[Yt,[Xt,Jt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<=r}],"filter-id-<=":[Yt,[Jt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<=n}],"filter->=":[Yt,[Xt,Jt],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>=r}],"filter-id->=":[Yt,[Jt],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>=n}],"filter-has":[Yt,[Jt],(t,[e])=>e.value in t.properties()],"filter-has-id":[Yt,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Yt,[ie(Xt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Yt,[ie(Jt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Yt,[Xt,ie(Jt)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Yt,[Xt,ie(Jt)],(t,[e,i])=>function(t,e,i,n){for(;i<=n;){const r=i+n>>1;if(e[r]===t)return!0;e[r]>t?n=r-1:i=r+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:Yt,overloads:[[[Yt,Yt],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[Hi(Yt),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:Yt,overloads:[[[Yt,Yt],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[Hi(Yt),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[Yt,[Yt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Yt,[Xt],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[Xt,[Xt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Xt,[Xt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Xt,Hi(Jt),(t,e)=>e.map((e=>ge(e.evaluate(t)))).join("")],"resolved-locale":[Xt,[Qt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class ln{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Ce,this._defaultValue=e?function(t){return"color"===t.type&&Qi(t.default)?new ue(0,0,0,0):"color"===t.type?ue.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,n,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,n,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new be("Expected value to be one of ".concat(Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", "),", but found ").concat(JSON.stringify(t)," instead."));return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function cn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Ui}function un(t,e){const i=new Je(Ui,[],e?function(t){const e={color:Kt,string:Xt,number:Wt,enum:Xt,boolean:Yt,formatted:te,resolvedImage:ee};return"array"===t.type?ie(e[t.value]||Jt,t.length):e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Wi(new ln(n,e)):Xi(i.errors)}class hn{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Ye(e.expression)}evaluateWithoutErrorHandling(t,e,i,n,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,o)}evaluate(t,e,i,n,r,o){return this._styleExpression.evaluate(t,e,i,n,r,o)}}class dn{constructor(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Ye(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,i,n,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,o)}evaluate(t,e,i,n,r,o){return this._styleExpression.evaluate(t,e,i,n,r,o)}interpolationFactor(t,e,i){return this.interpolationType?xi.interpolationFactor(this.interpolationType,t,e,i):0}}function pn(t,e){if("error"===(t=un(t,e)).result)return t;const i=t.value.expression,n=Xe(i);if(!n&&!Yi(e))return Xi([new qt("","data expressions not supported")]);const r=Ke(i,["zoom"]);if(!r&&!Ki(e))return Xi([new qt("","zoom expressions not supported")]);const o=mn(i);return o||r?o instanceof qt?Xi([o]):o instanceof xi&&!$i(e)?Xi([new qt("",'"interpolate" expressions cannot be used with this property')]):Wi(o?new dn(n?"camera":"composite",t.value,o.labels,o instanceof xi?o.interpolation:void 0):new hn(n?"constant":"source",t.value)):Xi([new qt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fn{constructor(t,e){this._parameters=t,this._specification=e,Vt(this,en(this._parameters,this._specification))}static deserialize(t){return new fn(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function mn(t){let e=null;if(t instanceof Ei)e=mn(t.result);else if(t instanceof Si){for(const i of t.args)if(e=mn(i),e)break}else(t instanceof ei||t instanceof xi)&&t.input instanceof Me&&"zoom"===t.input.name&&(e=t);return e instanceof qt||t.eachChild((t=>{const i=mn(t);i instanceof qt?e=i:!e&&i?e=new qt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new qt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function yn(t){const e=t.key,i=t.value,n=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=Ji(i);if("object"!==l)return[new jt(e,i,"object expected, ".concat(l," found"))];for(const c in i){const t=c.split(".")[0],l=n[t]||n["*"];let u;if(r[t])u=r[t];else if(n[t])u=Zn;else if(r["*"])u=r["*"];else{if(!n["*"]){s.push(new jt(e,i[c],'unknown property "'.concat(c,'"')));continue}u=Zn}s=s.concat(u({key:(e?"".concat(e,"."):e)+c,value:i[c],valueSpec:l,style:o,styleSpec:a,object:i,objectKey:c},i))}for(const c in n)r[c]||n[c].required&&void 0===n[c].default&&void 0===i[c]&&s.push(new jt(e,i,'missing required property "'.concat(c,'"')));return s}function vn(t){const e=t.value,i=t.valueSpec,n=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||Zn;if("array"!==Ji(e))return[new jt(o,e,"array expected, ".concat(Ji(e)," found"))];if(i.length&&e.length!==i.length)return[new jt(o,e,"array length ".concat(i.length," expected, length ").concat(e.length," found"))];if(i["min-length"]&&e.length<i["min-length"])return[new jt(o,e,"array length at least ".concat(i["min-length"]," expected, length ").concat(e.length," found"))];let s={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum};r.$version<7&&(s.function=i.function),"object"===Ji(i.value)&&(s=i.value);let l=[];for(let c=0;c<e.length;c++)l=l.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:n,styleSpec:r,key:"".concat(o,"[").concat(c,"]")}));return l}function gn(t){const e=t.key,i=t.value,n=t.valueSpec;let r=Ji(i);if("number"===r&&i!=i&&(r="NaN"),"number"!==r)return[new jt(e,i,"number expected, ".concat(r," found"))];if("minimum"in n){let r=n.minimum;if("array"===Ji(n.minimum)&&(r=n.minimum[t.arrayIndex]),i<r)return[new jt(e,i,"".concat(i," is less than the minimum value ").concat(r))]}if("maximum"in n){let r=n.maximum;if("array"===Ji(n.maximum)&&(r=n.maximum[t.arrayIndex]),i>r)return[new jt(e,i,"".concat(i," is greater than the maximum value ").concat(r))]}return[]}function _n(t){const e=t.valueSpec,i=Ut(t.value.type);let n,r,o,a={};const s="categorical"!==i&&void 0===t.value.property,l=!s,c="array"===Ji(t.value.stops)&&"array"===Ji(t.value.stops[0])&&"object"===Ji(t.value.stops[0][0]),u=yn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new jt(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;return e=e.concat(vn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Ji(n)&&0===n.length&&e.push(new jt(t.key,n,"array must have at least one stop")),e},default:function(t){return Zn({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&s&&u.push(new jt(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new jt(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!$i(t.valueSpec)&&u.push(new jt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Yi(t.valueSpec)?u.push(new jt(t.key,t.value,"property functions not supported")):s&&!Ki(t.valueSpec)&&u.push(new jt(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==t.value.property||u.push(new jt(t.key,t.value,'"property" property is required')),u;function h(t){let i=[];const n=t.value,s=t.key;if("array"!==Ji(n))return[new jt(s,n,"array expected, ".concat(Ji(n)," found"))];if(2!==n.length)return[new jt(s,n,"array length 2 expected, length ".concat(n.length," found"))];if(c){if("object"!==Ji(n[0]))return[new jt(s,n,"object expected, ".concat(Ji(n[0])," found"))];if(void 0===n[0].zoom)return[new jt(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new jt(s,n,"object stop key must have value")];if(o&&o>Ut(n[0].zoom))return[new jt(s,n[0].zoom,"stop zoom values must appear in ascending order")];Ut(n[0].zoom)!==o&&(o=Ut(n[0].zoom),r=void 0,a={}),i=i.concat(yn({key:"".concat(s,"[0]"),value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:gn,value:d}}))}else i=i.concat(d({key:"".concat(s,"[0]"),value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return cn(Gt(n[1]))?i.concat([new jt("".concat(s,"[1]"),n[1],"expressions are not allowed in function stops.")]):i.concat(Zn({key:"".concat(s,"[1]"),value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,o){const s=Ji(t.value),l=Ut(t.value),c=null!==t.value?t.value:o;if(n){if(s!==n)return[new jt(t.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(n))]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new jt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){let n="number expected, ".concat(s," found");return Yi(e)&&void 0===i&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new jt(t.key,c,n)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==r&&l<r?[new jt(t.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===i&&l in a?[new jt(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new jt(t.key,c,"integer expected, found ".concat(l))]}}function bn(t){const e=("property"===t.expressionContext?pn:un)(Gt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new jt("".concat(t.key).concat(e.key),t.value,e.message)));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new jt(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Ye(i))return[new jt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Ye(i))return[new jt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Ke(i,["zoom","feature-state"]))return[new jt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Xe(i))return[new jt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xn(t){const e=t.key,i=t.value,n=t.valueSpec,r=[];return Array.isArray(n.values)?-1===n.values.indexOf(Ut(i))&&r.push(new jt(e,i,"expected one of [".concat(n.values.join(", "),"], ").concat(JSON.stringify(i)," found"))):-1===Object.keys(n.values).indexOf(Ut(i))&&r.push(new jt(e,i,"expected one of [".concat(Object.keys(n.values).join(", "),"], ").concat(JSON.stringify(i)," found"))),r}function wn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!wn(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Sn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function En(t){if(null==t)return{filter:()=>!0,needGeometry:!1};wn(t)||(t=Tn(t));const e=un(t,Sn);if("error"===e.result)throw new Error(e.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));return{filter:(t,i,n)=>e.value.evaluate(t,i,{},n),needGeometry:Pn(t)}}function kn(t,e){return t<e?-1:t>e?1:0}function Pn(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Pn(t[e]))return!0;return!1}function Tn(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Cn(t[1],t[2],"=="):"!="===e?On(Cn(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Cn(t[1],t[2],e):"any"===e?(i=t.slice(1),["any"].concat(i.map(Tn))):"all"===e?["all"].concat(t.slice(1).map(Tn)):"none"===e?["all"].concat(t.slice(1).map(Tn).map(On)):"in"===e?Mn(t[1],t.slice(2)):"!in"===e?On(Mn(t[1],t.slice(2))):"has"===e?An(t[1]):"!has"===e?On(An(t[1])):"within"!==e||t;var i}function Cn(t,e,i){switch(t){case"$type":return["filter-type-".concat(i),e];case"$id":return["filter-id-".concat(i),e];default:return["filter-".concat(i),t,e]}}function Mn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(kn)]]:["filter-in-small",t,["literal",e]]}}function An(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function On(t){return["!",t]}function In(t){return wn(Gt(t.value))?bn(Vt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Dn(t)}function Dn(t){const e=t.value,i=t.key;if("array"!==Ji(e))return[new jt(i,e,"array expected, ".concat(Ji(e)," found"))];const n=t.styleSpec;let r,o=[];if(e.length<1)return[new jt(i,e,"filter array must have at least 1 element")];switch(o=o.concat(xn({key:"".concat(i,"[0]"),value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),Ut(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Ut(e[1])&&o.push(new jt(i,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&o.push(new jt(i,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&(r=Ji(e[1]),"string"!==r&&o.push(new jt("".concat(i,"[1]"),e[1],"string expected, ".concat(r," found"))));for(let a=2;a<e.length;a++)r=Ji(e[a]),"$type"===Ut(e[1])?o=o.concat(xn({key:"".concat(i,"[").concat(a,"]"),value:e[a],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new jt("".concat(i,"[").concat(a,"]"),e[a],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(let n=1;n<e.length;n++)o=o.concat(Dn({key:"".concat(i,"[").concat(n,"]"),value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=Ji(e[1]),2!==e.length?o.push(new jt(i,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==r&&o.push(new jt("".concat(i,"[1]"),e[1],"string expected, ".concat(r," found")));break;case"within":r=Ji(e[1]),2!==e.length?o.push(new jt(i,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==r&&o.push(new jt("".concat(i,"[1]"),e[1],"object expected, ".concat(r," found")))}return o}function zn(t,e){const i=t.key,n=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r["".concat(e,"_").concat(t.layerType)];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Zn({key:i,value:o,valueSpec:r.transition,style:n,styleSpec:r});const c=t.valueSpec||s[a];if(!c)return[new jt(i,o,'unknown property "'.concat(a,'"'))];let u;if("string"===Ji(o)&&Yi(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new jt(i,o,'"'.concat(a,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(u[1])," }`."))];const h=[];return"symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&h.push(new jt(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Qi(Gt(o))&&"identity"===Ut(o.type)&&h.push(new jt(i,o,'"text-font" does not support identity functions'))),h.concat(Zn({key:t.key,value:o,valueSpec:c,style:n,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function Ln(t){return zn(t,"paint")}function Rn(t){return zn(t,"layout")}function Fn(t){let e=[];const i=t.value,n=t.key,r=t.style,o=t.styleSpec;i.type||i.ref||e.push(new jt(n,i,'either "type" or "ref" is required'));let a=Ut(i.type);const s=Ut(i.ref);if(i.id){const o=Ut(i.id);for(let a=0;a<t.arrayIndex;a++){const t=r.layers[a];Ut(t.id)===o&&e.push(new jt(n,i.id,'duplicate layer id "'.concat(i.id,'", previously used at line ').concat(t.id.__line__)))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in i&&e.push(new jt(n,i[t],'"'.concat(t,'" is prohibited for ref layers')))})),r.layers.forEach((e=>{Ut(e.id)===s&&(t=e)})),t?t.ref?e.push(new jt(n,i.ref,"ref cannot reference another ref layer")):a=Ut(t.type):e.push(new jt(n,i.ref,'ref layer "'.concat(s,'" not found')))}else if("background"!==a&&"sky"!==a)if(i.source){const t=r.sources&&r.sources[i.source],o=t&&Ut(t.type);t?"vector"===o&&"raster"===a?e.push(new jt(n,i.source,'layer "'.concat(i.id,'" requires a raster source'))):"raster"===o&&"raster"!==a?e.push(new jt(n,i.source,'layer "'.concat(i.id,'" requires a vector source'))):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new jt(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!i.paint||!i.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new jt(n,i,'layer "'.concat(i.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new jt(n,i,'layer "'.concat(i.id,'" must specify a "source-layer"'))):e.push(new jt(n,i.source,'source "'.concat(i.source,'" not found')))}else e.push(new jt(n,i,'missing required property "source"'));return e=e.concat(yn({key:n,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Zn({key:"".concat(n,".type"),value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"}),filter:In,layout:t=>yn({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Rn(Vt({layerType:a},t))}}),paint:t=>yn({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ln(Vt({layerType:a},t))}})}})),e}function Bn(t){const e=t.value,i=t.key,n=Ji(e);return"string"!==n?[new jt(i,e,"string expected, ".concat(n," found"))]:[]}const jn={promoteId:function({key:t,value:e}){if("string"===Ji(e))return Bn({key:t,value:e});{const i=[];for(const n in e)i.push(...Bn({key:"".concat(t,".").concat(n),value:e[n]}));return i}}};function Nn(t){const e=t.value,i=t.key,n=t.styleSpec,r=t.style;if(!e.type)return[new jt(i,e,'"type" is required')];const o=Ut(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=yn({key:i,value:e,valueSpec:n["source_".concat(o.replace("-","_"))],style:t.style,styleSpec:n,objectElementValidators:jn}),a;case"geojson":if(a=yn({key:i,value:e,valueSpec:n.source_geojson,style:r,styleSpec:n,objectElementValidators:jn}),e.cluster)for(const t in e.clusterProperties){const[n,r]=e.clusterProperties[t],o="string"==typeof n?[n,["accumulated"],["get",t]]:n;a.push(...bn({key:"".concat(i,".").concat(t,".map"),value:r,expressionContext:"cluster-map"})),a.push(...bn({key:"".concat(i,".").concat(t,".reduce"),value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return yn({key:i,value:e,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return yn({key:i,value:e,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new jt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xn({key:"".concat(i,".type"),value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function Vn(t){const e=t.value,i=t.styleSpec,n=i.light,r=t.style;let o=[];const a=Ji(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new jt("light",e,"object expected, ".concat(a," found"))]),o;for(const s in e){const t=s.match(/^(.*)-transition$/);o=o.concat(t&&n[t[1]]&&n[t[1]].transition?Zn({key:s,value:e[s],valueSpec:i.transition,style:r,styleSpec:i}):n[s]?Zn({key:s,value:e[s],valueSpec:n[s],style:r,styleSpec:i}):[new jt(s,e[s],'unknown property "'.concat(s,'"'))])}return o}function Un(t){const e=t.value,i=t.key,n=t.style,r=t.styleSpec,o=r.terrain;let a=[];const s=Ji(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new jt("terrain",e,"object expected, ".concat(s," found"))]),a;for(const l in e){const t=l.match(/^(.*)-transition$/);a=a.concat(t&&o[t[1]]&&o[t[1]].transition?Zn({key:l,value:e[l],valueSpec:r.transition,style:n,styleSpec:r}):o[l]?Zn({key:l,value:e[l],valueSpec:o[l],style:n,styleSpec:r}):[new jt(l,e[l],'unknown property "'.concat(l,'"'))])}if(e.source){const t=n.sources&&n.sources[e.source],r=t&&Ut(t.type);t?"raster-dem"!==r&&a.push(new jt(i,e.source,"terrain cannot be used with a source of type ".concat(r,', it only be used with a "raster-dem" source type'))):a.push(new jt(i,e.source,'source "'.concat(e.source,'" not found')))}else a.push(new jt(i,e,'terrain is missing required property "source"'));return a}function Gn(t){const e=t.value,i=t.style,n=t.styleSpec,r=n.fog;let o=[];const a=Ji(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new jt("fog",e,"object expected, ".concat(a," found"))]),o;for(const s in e){const t=s.match(/^(.*)-transition$/);o=o.concat(t&&r[t[1]]&&r[t[1]].transition?Zn({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Zn({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new jt(s,e[s],'unknown property "'.concat(s,'"'))])}return o}const qn={"*":()=>[],array:vn,boolean:function(t){const e=t.value,i=t.key,n=Ji(e);return"boolean"!==n?[new jt(i,e,"boolean expected, ".concat(n," found"))]:[]},number:gn,color:function(t){const e=t.key,i=t.value,n=Ji(i);return"string"!==n?[new jt(e,i,"color expected, ".concat(n," found"))]:null===ce.parseCSSColor(i)?[new jt(e,i,'color expected, "'.concat(i,'" found'))]:[]},constants:Nt,enum:xn,filter:In,function:_n,layer:Fn,object:yn,source:Nn,light:Vn,terrain:Un,fog:Gn,string:Bn,formatted:function(t){return 0===Bn(t).length?[]:bn(t)},resolvedImage:function(t){return 0===Bn(t).length?[]:bn(t)}};function Zn(t){const e=t.value,i=t.valueSpec,n=t.styleSpec;return i.expression&&Qi(Ut(e))?_n(t):i.expression&&cn(Gt(e))?bn(t):i.type&&qn[i.type]?qn[i.type](t):yn(Vt({},t,{valueSpec:i.type?n[i.type]:i}))}function Hn(t){const e=t.value,i=t.key,n=Bn(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new jt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new jt(i,e,'"glyphs" url must include a "{range}" token'))),n}function Wn(t,e=Bt){let i=[];return i=i.concat(Zn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Hn,"*":()=>[]}})),t.constants&&(i=i.concat(Nt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Xn(i)}function Xn(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function Yn(t){return function(...e){return Xn(t.apply(this,e))}}Wn.source=Yn(Nn),Wn.light=Yn(Vn),Wn.terrain=Yn(Un),Wn.fog=Yn(Gn),Wn.layer=Yn(Fn),Wn.filter=Yn(In),Wn.paintProperty=Yn(Ln),Wn.layoutProperty=Yn(Rn);const Kn=Wn,$n=Kn.light,Jn=Kn.fog,Qn=Kn.paintProperty,tr=Kn.layoutProperty;function er(t,e){let i=!1;if(e&&e.length)for(const n of e)t.fire(new Rt(new Error(n.message))),i=!0;return i}var ir=nr;function nr(t,e,i){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(i=r[2]);for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];n.push(a===s?null:r.subarray(a,s))}var l=r[3+n.length+1];this.keys=r.subarray(r[3+n.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var u=i/e*t;this.min=-u,this.max=t+u}nr.prototype.insert=function(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)},nr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},nr.prototype._insertCell=function(t,e,i,n,r,o){this.cells[r].push(o)},nr.prototype.query=function(t,e,i,n,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=n&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,n,this._queryCell,s,{},r),s},nr.prototype._queryCell=function(t,e,i,n,r,o,a,s){var l=this.cells[r];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):t<=u[p+2]&&e<=u[p+3]&&i>=u[p+0]&&n>=u[p+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},nr.prototype._forEachCell=function(t,e,i,n,r,o,a,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(i),h=this._convertToCellCoord(n),d=l;d<=u;d++)for(var p=c;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&r.call(this,t,e,i,n,f,o,a,s))return}},nr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},nr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},nr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,n=0;n<this.cells.length;n++)i+=this.cells[n].length;var r=new Int32Array(e+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),r[3+t.length+1]=o+=this.keys.length,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};const{ImageData:rr,ImageBitmap:or}=a,ar={};function sr(t,e,i={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),ar[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}sr("Object",Object),ir.serialize=function(t,e){const i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},ir.deserialize=function(t){return new ir(t.buffer)},sr("Grid",ir),sr("Color",ue),sr("Error",Error),sr("ResolvedImage",fe),sr("StylePropertyFunction",fn),sr("StyleExpression",ln,{omit:["_evaluator"]}),sr("ZoomDependentExpression",dn),sr("ZoomConstantExpression",hn),sr("CompoundExpression",Me,{omit:["_evaluate"]});for(const Od in Ui)Ui[Od]._classRegistryKey||sr("Expression_".concat(Od),Ui[Od]);function lr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function cr(t){return or&&t instanceof or}function ur(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(lr(t)||cr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const i=t;return e&&e.push(i.buffer),i}if(t instanceof rr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const i=[];for(const n of t)i.push(ur(n,e));return i}if("object"==typeof t){const i=t.constructor,n=i._classRegistryKey;if(!n)throw new Error("can't serialize object of unregistered class");const r=i.serialize?i.serialize(t,e):{};if(!i.serialize){for(const i in t){if(!t.hasOwnProperty(i))continue;if(ar[n].omit.indexOf(i)>=0)continue;const o=t[i];r[i]=ar[n].shallow.indexOf(i)>=0?o:ur(o,e)}t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(r.$name=n),r}throw new Error("can't serialize object of type "+typeof t)}function hr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||lr(t)||cr(t)||ArrayBuffer.isView(t)||t instanceof rr)return t;if(Array.isArray(t))return t.map(hr);if("object"==typeof t){const e=t.$name||"Object",{klass:i}=ar[e];if(!i)throw new Error("can't deserialize unregistered class ".concat(e));if(i.deserialize)return i.deserialize(t);const n=Object.create(i.prototype);for(const r of Object.keys(t)){if("$name"===r)continue;const i=t[r];n[r]=ar[e].shallow.indexOf(r)>=0?i:hr(i)}return n}throw new Error("can't deserialize object of type "+typeof t)}class dr{constructor(){this.first=!0}update(t,e){const i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))}}const pr=t=>t>=1536&&t<=1791,fr=t=>t>=1872&&t<=1919,mr=t=>t>=2208&&t<=2303,yr=t=>t>=11904&&t<=12031,vr=t=>t>=12032&&t<=12255,gr=t=>t>=12272&&t<=12287,_r=t=>t>=12288&&t<=12351,br=t=>t>=12352&&t<=12447,xr=t=>t>=12448&&t<=12543,wr=t=>t>=12544&&t<=12591,Sr=t=>t>=12704&&t<=12735,Er=t=>t>=12736&&t<=12783,kr=t=>t>=12784&&t<=12799,Pr=t=>t>=12800&&t<=13055,Tr=t=>t>=13056&&t<=13311,Cr=t=>t>=13312&&t<=19903,Mr=t=>t>=19968&&t<=40959,Ar=t=>t>=40960&&t<=42127,Or=t=>t>=42128&&t<=42191,Ir=t=>t>=44032&&t<=55215,Dr=t=>t>=63744&&t<=64255,zr=t=>t>=64336&&t<=65023,Lr=t=>t>=65040&&t<=65055,Rr=t=>t>=65072&&t<=65103,Fr=t=>t>=65104&&t<=65135,Br=t=>t>=65136&&t<=65279,jr=t=>t>=65280&&t<=65519;function Nr(t){for(const e of t)if(Gr(e.charCodeAt(0)))return!0;return!1}function Vr(t){for(const e of t)if(!Ur(e.charCodeAt(0)))return!1;return!0}function Ur(t){return!(pr(t)||fr(t)||mr(t)||zr(t)||Br(t))}function Gr(t){return!(746!==t&&747!==t&&(t<4352||!(Sr(t)||wr(t)||Rr(t)&&!(t>=65097&&t<=65103)||Dr(t)||Tr(t)||yr(t)||Er(t)||!(!_r(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Cr(t)||Mr(t)||Pr(t)||(t=>t>=12592&&t<=12687)(t)||(t=>t>=43360&&t<=43391)(t)||(t=>t>=55216&&t<=55295)(t)||(t=>t>=4352&&t<=4607)(t)||Ir(t)||br(t)||gr(t)||(t=>t>=12688&&t<=12703)(t)||vr(t)||kr(t)||xr(t)&&12540!==t||!(!jr(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Fr(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(t=>t>=5120&&t<=5759)(t)||(t=>t>=6320&&t<=6399)(t)||Lr(t)||(t=>t>=19904&&t<=19967)(t)||Ar(t)||Or(t))))}function qr(t){return!(Gr(t)||function(t){return!!((t=>t>=128&&t<=255)(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||(t=>t>=8192&&t<=8303)(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||(t=>t>=8448&&t<=8527)(t)||(t=>t>=8528&&t<=8591)(t)||(t=>t>=8960&&t<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||(t=>t>=9216&&t<=9279)(t)&&9251!==t||(t=>t>=9280&&t<=9311)(t)||(t=>t>=9312&&t<=9471)(t)||(t=>t>=9632&&t<=9727)(t)||(t=>t>=9728&&t<=9983)(t)&&!(t>=9754&&t<=9759)||(t=>t>=11008&&t<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||_r(t)||xr(t)||(t=>t>=57344&&t<=63743)(t)||Rr(t)||Fr(t)||jr(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Zr(t){return t>=1424&&t<=2303||zr(t)||Br(t)}function Hr(t,e){return!(!e&&Zr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||(t=>t>=6016&&t<=6143)(t))}function Wr(t){for(const e of t)if(Zr(e.charCodeAt(0)))return!0;return!1}const Xr="deferred",Yr="loading",Kr="loaded";let $r=null,Jr="unavailable",Qr=null;const to=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Jr="error"),$r&&$r(t)};function eo(){io.fire(new Lt("pluginStateChange",{pluginStatus:Jr,pluginURL:Qr}))}const io=new Ft,no=function(){return Jr},ro=function(){if(Jr!==Xr||!Qr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Jr=Yr,eo(),Qr&&kt({url:Qr},(t=>{t?to(t):(Jr=Kr,eo())}))},oo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Jr===Kr||null!=oo.applyArabicShaping,isLoading:()=>Jr===Yr,setState(t){Jr=t.pluginStatus,Qr=t.pluginURL},isParsed:()=>null!=oo.applyArabicShaping&&null!=oo.processBidirectionalText&&null!=oo.processStyledBidirectionalText,getPluginURL:()=>Qr};class ao{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new dr,this.transition={})}isSupportedScript(t){return function(t,e){for(const i of t)if(!Hr(i.charCodeAt(0),e))return!1;return!0}(t,oo.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}}}class so{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Qi(t))return new fn(t,e);if(cn(t)){const i=pn(t,e);if("error"===i.result)throw new Error(i.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));return i.value}{let i=t;return"string"==typeof t&&"color"===e.type&&(i=ue.parse(t)),{kind:"constant",evaluate:()=>i}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)}}class lo{constructor(t){this.property=t,this.value=new so(t,void 0)}transitioned(t,e){return new uo(this.property,this.value,e,_({},t.transition,this.transition),t.now)}untransitioned(){return new uo(this.property,this.value,null,{},0)}}class co{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return M(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new lo(this._values[t].property)),this._values[t].value=new so(this._values[t].property,null===e?void 0:M(e))}getTransition(t){return M(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new lo(this._values[t].property)),this._values[t].transition=M(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i);const n=this.getTransition(e);void 0!==n&&(t["".concat(e,"-transition")]=n)}return t}transitioned(t,e){const i=new ho(this._properties);for(const n of Object.keys(this._values))i._values[n]=this._values[n].transitioned(t,e._values[n]);return i}untransitioned(){const t=new ho(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class uo{constructor(t,e,i,n,r){const o=n.delay||0,a=n.duration||0;r=r||0,this.property=t,this.value=e,this.begin=r+o,this.end=this.begin+a,t.specification.transition&&(n.delay||n.duration)&&(this.prior=i)}possiblyEvaluate(t,e,i){const n=t.now||0,r=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(n>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(n<this.begin)return o.possiblyEvaluate(t,e,i);{const a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),r,d(a))}}return r}}class ho{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,i){const n=new mo(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].possiblyEvaluate(t,e,i);return n}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class po{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return M(this._values[t].value)}setValue(t,e){this._values[t]=new so(this._values[t].property,null===e?void 0:M(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(t,e,i){const n=new mo(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].possiblyEvaluate(t,e,i);return n}}class fo{constructor(t,e,i){this.property=t,this.value=e,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,i,n){return this.property.evaluate(this.value,this.parameters,t,e,i,n)}}class mo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class yo{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,i){const n=ni[this.specification.type];return n?n(t,e,i):t}}class vo{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,i,n){return new fo(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,n)}:t.expression,e)}interpolate(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new fo(this,{kind:"constant",value:void 0},t.parameters);const n=ni[this.specification.type];return n?new fo(this,{kind:"constant",value:n(t.value.value,e.value.value,i)},t.parameters):t}evaluate(t,e,i,n,r,o){return"constant"===t.kind?t.value:t.evaluate(e,i,n,r,o)}}class go extends vo{possiblyEvaluate(t,e,i,n){if(void 0===t.value)return new fo(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},i,n),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,e);return new fo(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new fo(this,{kind:"constant",value:i},e)}return new fo(this,t.expression,e)}evaluate(t,e,i,n,r,o){if("source"===t.kind){const a=t.evaluate(e,i,n,r,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,n),t.evaluate({zoom:Math.floor(e.zoom)},i,n),t.evaluate({zoom:Math.floor(e.zoom)+1},i,n),e):t.value}_calculate(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e,other:i}:{from:i,to:e,other:t}}interpolate(t){return t}}class _o{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,n){if(void 0!==t.value){if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},i,n);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new ao(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ao(Math.floor(e.zoom),e)),t.expression.evaluate(new ao(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class bo{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,n){return!!t.expression.evaluate(e,null,{},i,n)}interpolate(){return!1}}class xo{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const i=t[e];i.specification.overridable&&this.overridableProperties.push(e);const n=this.defaultPropertyValues[e]=new so(i,void 0),r=this.defaultTransitionablePropertyValues[e]=new lo(i);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}}}function wo(t,e){return 256*(t=m(Math.floor(t),0,255))+m(Math.floor(e),0,255)}sr("DataDrivenProperty",vo),sr("DataConstantProperty",yo),sr("CrossFadedDataDrivenProperty",go),sr("CrossFadedProperty",_o),sr("ColorRampProperty",bo);const So={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Eo{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ko{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Po(t,e=1){let i=0,n=0;return{members:t.map((t=>{const r=So[t.type].BYTES_PER_ELEMENT,o=i=To(i,Math.max(e,r)),a=t.components||1;return n=Math.max(n,r),i+=r*a,{name:t.name,type:t.type,components:a,offset:o}})),size:To(i,Math.max(n,e)),alignment:e}}function To(t,e){return Math.ceil(t/e)*e}class Co extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.int16[n+0]=e,this.int16[n+1]=i,t}}Co.prototype.bytesPerElement=4,sr("StructArrayLayout2i4",Co);class Mo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=n,this.int16[o+3]=r,t}}Mo.prototype.bytesPerElement=8,sr("StructArrayLayout4i8",Mo);class Ao extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,n,r,o,a)}emplace(t,e,i,n,r,o,a,s){const l=6*t,c=12*t,u=3*t;return this.int16[l+0]=e,this.int16[l+1]=i,this.uint8[c+4]=n,this.uint8[c+5]=r,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,t}}Ao.prototype.bytesPerElement=12,sr("StructArrayLayout2i4ub1f12",Ao);class Oo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=i,this.float32[r+2]=n,t}}Oo.prototype.bytesPerElement=12,sr("StructArrayLayout3f12",Oo);class Io extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,n,r,o,a,s,l,c)}emplace(t,e,i,n,r,o,a,s,l,c,u){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=i,this.uint16[h+2]=n,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,t}}Io.prototype.bytesPerElement=20,sr("StructArrayLayout10ui20",Io);class Do extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,i,n,r,o,a,s)}emplace(t,e,i,n,r,o,a,s,l){const c=8*t;return this.uint16[c+0]=e,this.uint16[c+1]=i,this.uint16[c+2]=n,this.uint16[c+3]=r,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,t}}Do.prototype.bytesPerElement=16,sr("StructArrayLayout8ui16",Do);class zo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m){const y=this.length;return this.resize(y+1),this.emplace(y,t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m)}emplace(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y){const v=16*t;return this.int16[v+0]=e,this.int16[v+1]=i,this.int16[v+2]=n,this.int16[v+3]=r,this.uint16[v+4]=o,this.uint16[v+5]=a,this.uint16[v+6]=s,this.uint16[v+7]=l,this.int16[v+8]=c,this.int16[v+9]=u,this.int16[v+10]=h,this.int16[v+11]=d,this.int16[v+12]=p,this.int16[v+13]=f,this.int16[v+14]=m,this.int16[v+15]=y,t}}zo.prototype.bytesPerElement=32,sr("StructArrayLayout4i4ui4i4i32",zo);class Lo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Lo.prototype.bytesPerElement=4,sr("StructArrayLayout1ul4",Lo);class Ro extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,o,a,s,l,c,u,h,d){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,i,n,r,o,a,s,l,c,u,h,d)}emplace(t,e,i,n,r,o,a,s,l,c,u,h,d,p){const f=20*t,m=10*t;return this.int16[f+0]=e,this.int16[f+1]=i,this.int16[f+2]=n,this.int16[f+3]=r,this.int16[f+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=h,this.uint16[f+18]=d,this.uint16[f+19]=p,t}}Ro.prototype.bytesPerElement=40,sr("StructArrayLayout5i4f1i1ul2ui40",Ro);class Fo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,n,r,o,a)}emplace(t,e,i,n,r,o,a,s){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=i,this.int16[l+2]=n,this.int16[l+4]=r,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,t}}Fo.prototype.bytesPerElement=16,sr("StructArrayLayout3i2i2i16",Fo);class Bo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,n,r)}emplace(t,e,i,n,r,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=n,this.int16[s+6]=r,this.int16[s+7]=o,t}}Bo.prototype.bytesPerElement=16,sr("StructArrayLayout2f1f2i16",Bo);class jo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[a+1]=n,this.float32[a+2]=r,t}}jo.prototype.bytesPerElement=12,sr("StructArrayLayout2ub2f12",jo);class No extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,this.uint16[r+2]=n,t}}No.prototype.bytesPerElement=6,sr("StructArrayLayout3ui6",No);class Vo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v,g,_,b){const x=this.length;return this.resize(x+1),this.emplace(x,t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v,g,_,b)}emplace(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v,g,_,b,x){const w=30*t,S=15*t,E=60*t;return this.int16[w+0]=e,this.int16[w+1]=i,this.int16[w+2]=n,this.float32[S+2]=r,this.float32[S+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[S+5]=l,this.uint32[S+6]=c,this.uint32[S+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=p,this.float32[S+10]=f,this.float32[S+11]=m,this.uint8[E+48]=y,this.uint8[E+49]=v,this.uint8[E+50]=g,this.uint32[S+13]=_,this.int16[w+28]=b,this.uint8[E+58]=x,t}}Vo.prototype.bytesPerElement=60,sr("StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60",Vo);class Uo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v,g,_,b,x,w,S,E,k,P,T,C,M){const A=this.length;return this.resize(A+1),this.emplace(A,t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v,g,_,b,x,w,S,E,k,P,T,C,M)}emplace(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v,g,_,b,x,w,S,E,k,P,T,C,M,A){const O=38*t,I=19*t;return this.int16[O+0]=e,this.int16[O+1]=i,this.int16[O+2]=n,this.float32[I+2]=r,this.float32[I+3]=o,this.int16[O+8]=a,this.int16[O+9]=s,this.int16[O+10]=l,this.int16[O+11]=c,this.int16[O+12]=u,this.int16[O+13]=h,this.uint16[O+14]=d,this.uint16[O+15]=p,this.uint16[O+16]=f,this.uint16[O+17]=m,this.uint16[O+18]=y,this.uint16[O+19]=v,this.uint16[O+20]=g,this.uint16[O+21]=_,this.uint16[O+22]=b,this.uint16[O+23]=x,this.uint16[O+24]=w,this.uint16[O+25]=S,this.uint16[O+26]=E,this.uint16[O+27]=k,this.uint16[O+28]=P,this.uint32[I+15]=T,this.float32[I+16]=C,this.float32[I+17]=M,this.float32[I+18]=A,t}}Uo.prototype.bytesPerElement=76,sr("StructArrayLayout3i2f6i15ui1ul3f76",Uo);class Go extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Go.prototype.bytesPerElement=4,sr("StructArrayLayout1f4",Go);class qo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=i,this.int16[r+2]=n,t}}qo.prototype.bytesPerElement=6,sr("StructArrayLayout3i6",qo);class Zo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const o=6*t;return this.uint32[3*t+0]=e,this.uint16[o+2]=i,this.uint16[o+3]=n,this.uint16[o+4]=r,t}}Zo.prototype.bytesPerElement=12,sr("StructArrayLayout1ul3ui12",Zo);class Ho extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,t}}Ho.prototype.bytesPerElement=4,sr("StructArrayLayout2ui4",Ho);class Wo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Wo.prototype.bytesPerElement=2,sr("StructArrayLayout1ui2",Wo);class Xo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,n,r)}emplace(t,e,i,n,r,o){const a=5*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=n,this.float32[a+3]=r,this.float32[a+4]=o,t}}Xo.prototype.bytesPerElement=20,sr("StructArrayLayout5f20",Xo);class Yo extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.float32[n+0]=e,this.float32[n+1]=i,t}}Yo.prototype.bytesPerElement=8,sr("StructArrayLayout2f8",Yo);class Ko extends ko{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)}emplace(t,e,i,n,r){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=n,this.float32[o+3]=r,t}}Ko.prototype.bytesPerElement=16,sr("StructArrayLayout4f16",Ko);class $o extends Eo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}$o.prototype.size=40;class Jo extends Ro{get(t){return new $o(this,t)}}sr("CollisionBoxArray",Jo);class Qo extends Eo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}Qo.prototype.size=60;class ta extends Vo{get(t){return new Qo(this,t)}}sr("PlacedSymbolArray",ta);class ea extends Eo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ea.prototype.size=76;class ia extends Uo{get(t){return new ea(this,t)}}sr("SymbolInstanceArray",ia);class na extends Go{getoffsetX(t){return this.float32[1*t+0]}}sr("GlyphOffsetArray",na);class ra extends qo{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}sr("SymbolLineVertexArray",ra);class oa extends Eo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}oa.prototype.size=12;class aa extends Zo{get(t){return new oa(this,t)}}sr("FeatureIndexArray",aa);class sa extends Eo{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}sa.prototype.size=4;class la extends Ho{get(t){return new sa(this,t)}}sr("FillExtrusionCentroidArray",la);const ca=Po([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),ua=Po([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var ha=le((function(t){t.exports=function(t,e){var i,n,r,o,a,s,l,c;for(n=t.length-(i=3&t.length),r=e,a=3432918353,s=461845907,c=0;c<n;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),da=le((function(t){t.exports=function(t,e){for(var i,n=t.length,r=e^n,o=0;n>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),pa=ha,fa=da;pa.murmur3=ha,pa.murmur2=fa;class ma{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,i,n){this.ids.push(ya(t)),this.positions.push(e,i,n)}getPositions(t){const e=ya(t);let i=0,n=this.ids.length-1;for(;i<n;){const t=i+n>>1;this.ids[t]>=e?n=t:i=t+1}const r=[];for(;this.ids[i]===e;)r.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return r}static serialize(t,e){const i=new Float64Array(t.ids),n=new Uint32Array(t.positions);return va(i,n,0,i.length-1),e&&e.push(i.buffer,n.buffer),{ids:i,positions:n}}static deserialize(t){const e=new ma;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function ya(t){const e=+t;return!isNaN(e)&&e<=s?e:pa(String(t))}function va(t,e,i,n){for(;i<n;){const r=t[i+n>>1];let o=i-1,a=n+1;for(;;){do{o++}while(t[o]<r);do{a--}while(t[a]>r);if(o>=a)break;ga(t,o,a),ga(e,3*o,3*a),ga(e,3*o+1,3*a+1),ga(e,3*o+2,3*a+2)}a-i<n-a?(va(t,e,i,a),i=a+1):(va(t,e,a+1,n),n=a)}}function ga(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}sr("FeaturePositionMap",ma);class _a{constructor(t,e){this.gl=t.gl,this.location=e}}class ba extends _a{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class xa extends _a{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class wa extends _a{constructor(t,e){super(t,e),this.current=ue.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Sa=new Float32Array(16),Ea=new Float32Array(9);function ka(t){return[wo(255*t.r,255*t.g),wo(255*t.b,255*t.a)]}class Pa{constructor(t,e,i){this.value=t,this.uniformNames=e.map((t=>"u_".concat(t))),this.type=i}setUniform(t,e,i){t.set(i.constantOr(this.value))}getBinding(t,e,i){return"color"===this.type?new wa(t,e):new ba(t,e)}}class Ta{constructor(t,e){this.uniformNames=e.map((t=>"u_".concat(t))),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tl.concat(e.br),this.patternTo=t.tl.concat(t.br)}setUniform(t,e,i,n){const r="u_pattern_to"===n||"u_dash_to"===n?this.patternTo:"u_pattern_from"===n||"u_dash_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;r&&t.set(r)}getBinding(t,e,i){return"u_pattern_from"===i||"u_pattern_to"===i||"u_dash_from"===i||"u_dash_to"===i?new xa(t,e):new ba(t,e)}}class Ca{constructor(t,e,i,n){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===i?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(t,e,i,n,r){const o=this.paintVertexArray.length,a=this.expression.evaluate(new ao(0),e,{},n,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,i,n){const r=this.expression.evaluate({zoom:0},i,n);this._setPaintValue(t,e,r)}_setPaintValue(t,e,i){if("color"===this.type){const n=ka(i);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ma{constructor(t,e,i,n,r,o){this.expression=t,this.uniformNames=e.map((t=>"u_".concat(t,"_t"))),this.type=i,this.useIntegerZoom=n,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===i?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,i,n,r){const o=this.expression.evaluate(new ao(this.zoom),e,{},n,[],r),a=this.expression.evaluate(new ao(this.zoom+1),e,{},n,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}updatePaintArray(t,e,i,n){const r=this.expression.evaluate({zoom:this.zoom},i,n),o=this.expression.evaluate({zoom:this.zoom+1},i,n);this._setPaintValue(t,e,r,o)}_setPaintValue(t,e,i,n){if("color"===this.type){const r=ka(i),o=ka(n);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1],o[0],o[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i,n);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=m(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(n)}getBinding(t,e,i){return new ba(t,e)}}class Aa{constructor(t,e,i,n,r,o,a){this.expression=t,this.type=i,this.useIntegerZoom=n,this.zoom=r,this.layerId=a,this.paintVertexAttributes=("array"===i?ua:ca).members;for(let s=0;s<e.length;++s);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(t,e,i){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],i)}updatePaintArray(t,e,i,n,r){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],r)}_setPaintValues(t,e,i,n){if(!n||!i)return;const{min:r,mid:o,max:a}=i,s=n[r],l=n[o],c=n[a];if(s&&l&&c)for(let u=t;u<e;u++)this._setPaintValue(this.zoomInPaintVertexArray,u,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,u,l,c)}_setPaintValue(t,e,i,n){t.emplace(e,i.tl[0],i.tl[1],i.br[0],i.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],i.pixelRatio,n.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Oa{constructor(t,e,i=(()=>!0)){this.binders={},this._buffers=[];const n=[];for(const r in t.paint._values){if(!i(r))continue;const o=t.paint.get(r);if(!(o instanceof fo&&Yi(o.property.specification)))continue;const a=za(r,t.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u,d="line-dasharray"===String(r)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||h){const i=Fa(r,l,"source");this.binders[r]=h?new Aa(s,a,l,c,e,i,t.id):new Ca(s,a,l,i),n.push("/a_".concat(r))}else{const t=Fa(r,l,"composite");this.binders[r]=new Ma(s,a,l,c,e,t),n.push("/z_".concat(r))}else this.binders[r]=h?new Ta(s.value,a):new Pa(s.value,a,l),n.push("/u_".concat(r))}this.cacheKey=n.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Ca||e instanceof Ma?e.maxValue:0}populatePaintArrays(t,e,i,n,r){for(const o in this.binders){const a=this.binders[o];(a instanceof Ca||a instanceof Ma||a instanceof Aa)&&a.populatePaintArray(t,e,i,n,r)}}setConstantPatternPositions(t,e){for(const i in this.binders){const n=this.binders[i];n instanceof Ta&&n.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,i,n,r){let o=!1;for(const a in t){const s=e.getPositions(a);for(const e of s){const s=i.feature(e.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof Ca||l instanceof Ma||l instanceof Aa)&&!0===l.expression.isStateDependent){const c=n.paint.get(i);l.expression=c.value,l.updatePaintArray(e.start,e.end,s,t[a],r),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const i=this.binders[e];(i instanceof Pa||i instanceof Ta)&&t.push(...i.uniformNames.map((t=>"#define HAS_UNIFORM_".concat(t))))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Ca||i instanceof Ma||i instanceof Aa)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Pa||i instanceof Ta||i instanceof Ma)for(const e of i.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const i=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof Pa||r instanceof Ta||r instanceof Ma)for(const o of r.uniformNames)if(e[o]){const a=r.getBinding(t,e[o],o);i.push({name:o,property:n,binding:a})}}return i}setUniforms(t,e,i,n){for(const{name:r,property:o,binding:a}of e)this.binders[o].setUniform(a,n,i.get(o),r)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const i=this.binders[e];if(t&&i instanceof Aa){const e=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(i instanceof Ca||i instanceof Ma)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(const e in this.binders){const i=this.binders[e];(i instanceof Ca||i instanceof Ma||i instanceof Aa)&&i.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Ca||e instanceof Ma||e instanceof Aa)&&e.destroy()}}}class Ia{constructor(t,e,i=(()=>!0)){this.programConfigurations={};for(const n of t)this.programConfigurations[n.id]=new Oa(n,e,i);this.needsUpload=!1,this._featureMap=new ma,this._bufferOffset=0}populatePaintArrays(t,e,i,n,r,o){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,n,r,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,i,n){for(const r of i)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,e,r,n)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const Da={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function za(t,e){return Da[t]||[t.replace("".concat(e,"-"),"").replace(/-/g,"_")]}const La={"line-pattern":{source:Io,composite:Io},"fill-pattern":{source:Io,composite:Io},"fill-extrusion-pattern":{source:Io,composite:Io},"line-dasharray":{source:Do,composite:Do}},Ra={color:{source:Yo,composite:Ko},number:{source:Go,composite:Yo}};function Fa(t,e,i){const n=La[t];return n&&n[i]||Ra[e][i]}sr("ConstantBinder",Pa),sr("CrossFadedConstantBinder",Ta),sr("SourceExpressionBinder",Ca),sr("CrossFadedCompositeBinder",Aa),sr("CompositeExpressionBinder",Ma),sr("ProgramConfiguration",Oa,{omit:["_buffers"]}),sr("ProgramConfigurationSet",Ia);const Ba="-transition";class ja extends Ft{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new po(e.layout)),e.paint)){this._transitionablePaint=new co(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mo(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,i={}){null!=e&&this._validate(tr,"layers.".concat(this.id,".layout.").concat(t),t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return P(t,Ba)?this._transitionablePaint.getTransition(t.slice(0,-Ba.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,i={}){if(null!=e&&this._validate(Qn,"layers.".concat(this.id,".paint.").concat(t),t,e,i))return!1;if(P(t,Ba))return this._transitionablePaint.setTransition(t.slice(0,-Ba.length),e||void 0),!1;{const i=this._transitionablePaint._values[t],n="cross-faded-data-driven"===i.property.specification["property-type"],r=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||r||n||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,i){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),C(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,i,n,r={}){return(!r||!1!==r.validate)&&er(this,t.call(Kn,{key:e,layerType:this.type,objectKey:i,value:n,styleSpec:Bt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof fo&&Yi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const Na=Po([{name:"a_pos",components:2,type:"Int16"}],4),{members:Va}=Na;class Ua{constructor(t=[]){this.segments=t}prepareSegment(t,e,i,n){let r=this.segments[this.segments.length-1];return t>Ua.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is ".concat(Ua.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!r||r.vertexLength+t>Ua.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==n)&&(r={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==n&&(r.sortKey=n),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,i,n){return new Ua([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:n,vaos:{},sortKey:0}])}}Ua.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sr("SegmentVector",Ua);var Ga=8192;const qa=Math.pow(2,14)-1,Za=-qa-1;function Ha(t){const e=Ga/t.extent,i=t.loadGeometry();for(let n=0;n<i.length;n++){const t=i[n];for(let i=0;i<t.length;i++){const n=t[i],r=Math.round(n.x*e),o=Math.round(n.y*e);n.x=m(r,Za,qa),n.y=m(o,Za,qa),(r<n.x||r>n.x+1||o<n.y||o>n.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Wa(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Ha(t):[]}}function Xa(t,e,i,n,r){t.emplaceBack(2*e+(n+1)/2,2*i+(r+1)/2)}class Ya{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Co,this.indexArray=new No,this.segments=new Ua,this.programConfigurations=new Ia(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){const n=this.layers[0],r=[];let o=null;"circle"===n.type&&(o=n.layout.get("circle-sort-key"));for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Wa(a,t);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),e,i))continue;const n=o?o.evaluate(e,{},i):void 0,u={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:t?e.geometry:Ha(a),patterns:{},sortKey:n};r.push(u)}o&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of r){const{geometry:n,index:r,sourceLayerIndex:o}=a,s=t[r].feature;this.addFeature(a,n,r,i),e.featureIndex.insert(s,n,r,o,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Va),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,n){for(const r of e)for(const e of r){const i=e.x,n=e.y;if(i<0||i>=Ga||n<0||n>=Ga)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=r.vertexLength;Xa(this.layoutVertexArray,i,n,-1,-1),Xa(this.layoutVertexArray,i,n,1,-1),Xa(this.layoutVertexArray,i,n,1,1),Xa(this.layoutVertexArray,i,n,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},n)}}function Ka(t,e){for(let i=0;i<t.length;i++)if(os(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(os(t,e[i]))return!0;return!!ts(t,e)}function $a(t,e,i){return!!os(t,e)||!!is(e,t,i)}function Ja(t,e){if(1===t.length)return rs(e,t[0]);for(let i=0;i<e.length;i++){const n=e[i];for(let e=0;e<n.length;e++)if(os(t,n[e]))return!0}for(let i=0;i<t.length;i++)if(rs(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(ts(t,e[i]))return!0;return!1}function Qa(t,e,i){if(t.length>1){if(ts(t,e))return!0;for(let n=0;n<e.length;n++)if(is(e[n],t,i))return!0}for(let n=0;n<t.length;n++)if(is(t[n],e,i))return!0;return!1}function ts(t,e){if(0===t.length||0===e.length)return!1;for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1];for(let t=0;t<e.length-1;t++)if(es(n,r,e[t],e[t+1]))return!0}return!1}function es(t,e,i,n){return I(t,i,n)!==I(e,i,n)&&I(t,e,i)!==I(t,e,n)}function is(t,e,i){const n=i*i;if(1===e.length)return t.distSqr(e[0])<n;for(let r=1;r<e.length;r++)if(ns(t,e[r-1],e[r])<n)return!0;return!1}function ns(t,e,i){const n=e.distSqr(i);if(0===n)return t.distSqr(e);const r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return t.distSqr(r<0?e:r>1?i:i.sub(e)._mult(r)._add(e))}function rs(t,e){let i,n,r,o=!1;for(let a=0;a<t.length;a++){i=t[a];for(let t=0,a=i.length-1;t<i.length;a=t++)n=i[t],r=i[a],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(o=!o)}return o}function os(t,e){let i=!1;for(let n=0,r=t.length-1;n<t.length;r=n++){const o=t[n],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function as(t,e,i,n,o){for(const r of t)if(e<=r.x&&i<=r.y&&n>=r.x&&o>=r.y)return!0;const a=[new r(e,i),new r(e,o),new r(n,o),new r(n,i)];if(t.length>2)for(const r of a)if(os(t,r))return!0;for(let r=0;r<t.length-1;r++)if(ss(t[r],t[r+1],a))return!0;return!1}function ss(t,e,i){const n=i[0],r=i[2];if(t.x<n.x&&e.x<n.x||t.x>r.x&&e.x>r.x||t.y<n.y&&e.y<n.y||t.y>r.y&&e.y>r.y)return!1;const o=I(t,e,i[0]);return o!==I(t,e,i[1])||o!==I(t,e,i[2])||o!==I(t,e,i[3])}function ls(t,e,i){const n=e.paint.get(t).value;return"constant"===n.kind?n.value:i.programConfigurations.get(e.id).getMaxValue(t)}function cs(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function us(t,e,i,n,o){if(!e[0]&&!e[1])return t;const a=r.convert(e)._mult(o);"viewport"===i&&a._rotate(-n);const s=[];for(let r=0;r<t.length;r++)s.push(t[r].sub(a));return s}function hs(t,e,i,n){const o=r.convert(t)._mult(n);return"viewport"===e&&o._rotate(-i),o}sr("CircleBucket",Ya,{omit:["layers"]});const ds=new xo({"circle-sort-key":new vo(Bt.layout_circle["circle-sort-key"])});var ps={paint:new xo({"circle-radius":new vo(Bt.paint_circle["circle-radius"]),"circle-color":new vo(Bt.paint_circle["circle-color"]),"circle-blur":new vo(Bt.paint_circle["circle-blur"]),"circle-opacity":new vo(Bt.paint_circle["circle-opacity"]),"circle-translate":new yo(Bt.paint_circle["circle-translate"]),"circle-translate-anchor":new yo(Bt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yo(Bt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yo(Bt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vo(Bt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vo(Bt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vo(Bt.paint_circle["circle-stroke-opacity"])}),layout:ds},fs="undefined"!=typeof Float32Array?Float32Array:Array;function ms(){var t=new fs(9);return fs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ys(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vs(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],y=e[13],v=e[14],g=e[15],_=i[0],b=i[1],x=i[2],w=i[3];return t[0]=_*n+b*s+x*h+w*m,t[1]=_*r+b*l+x*d+w*y,t[2]=_*o+b*c+x*p+w*v,t[3]=_*a+b*u+x*f+w*g,t[4]=(_=i[4])*n+(b=i[5])*s+(x=i[6])*h+(w=i[7])*m,t[5]=_*r+b*l+x*d+w*y,t[6]=_*o+b*c+x*p+w*v,t[7]=_*a+b*u+x*f+w*g,t[8]=(_=i[8])*n+(b=i[9])*s+(x=i[10])*h+(w=i[11])*m,t[9]=_*r+b*l+x*d+w*y,t[10]=_*o+b*c+x*p+w*v,t[11]=_*a+b*u+x*f+w*g,t[12]=(_=i[12])*n+(b=i[13])*s+(x=i[14])*h+(w=i[15])*m,t[13]=_*r+b*l+x*d+w*y,t[14]=_*o+b*c+x*p+w*v,t[15]=_*a+b*u+x*f+w*g,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var gs=vs;function _s(){var t=new fs(3);return fs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function bs(t){return Math.hypot(t[0],t[1],t[2])}function xs(t,e,i){var n=new fs(3);return n[0]=t,n[1]=e,n[2]=i,n}function ws(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Ss(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Es(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function ks(t,e){var i=e[0],n=e[1],r=e[2],o=i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Ps(t,e,i){var n=i[0],r=i[1],o=i[2],a=e[0],s=e[1],l=e[2],c=r*l-o*s,u=o*a-n*l,h=n*s-r*a,d=r*h-o*u,p=o*c-n*h,f=n*u-r*c,m=2*i[3];return u*=m,h*=m,p*=2,f*=2,t[0]=a+(c*=m)+(d*=2),t[1]=s+u+p,t[2]=l+h+f,t}var Ts,Cs=ws,Ms=Ss,As=bs;function Os(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*a,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*a,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*a,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*a,t}function Is(){var t=new fs(4);return fs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ds(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function zs(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);return t[0]=n*l+a*s,t[1]=r*l+o*s,t[2]=o*l-r*s,t[3]=a*l-n*s,t}function Ls(t,e,i,n,r,o,a,s,l){if(o&&t.queryGeometry.isAboveHorizon)return!1;o&&(l*=t.pixelToTileUnitsFactor);for(const c of e)for(const e of c){const c=e.add(s),u=r&&i.elevation?i.elevation.exaggeration()*r.getElevationAt(c.x,c.y,!0):0,h=o?c:Rs(c,u,n),d=o?t.tilespaceRays.map((t=>js(t,u))):t.queryGeometry.screenGeometry,p=Os([],[e.x,e.y,u,1],n);if(!a&&o?l*=p[3]/i.cameraToCenterDistance:a&&!o&&(l*=i.cameraToCenterDistance/p[3]),$a(d,h,l))return!0}return!1}function Rs(t,e,i){const n=Os([],[t.x,t.y,e,1],i);return new r(n[0]/n[3],n[1]/n[3])}_s(),Ts=new fs(4),fs!=Float32Array&&(Ts[0]=0,Ts[1]=0,Ts[2]=0,Ts[3]=0),_s(),xs(1,0,0),xs(0,1,0),Is(),Is(),ms();const Fs=xs(0,0,0),Bs=xs(0,0,1);function js(t,e){const i=_s();return Fs[2]=e,t.intersectsPlane(Fs,Bs,i),new r(i[0],i[1])}class Ns extends Ya{}function Vs(t,{width:e,height:i},n,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==e*i*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(e*i*n);return t.width=e,t.height=i,t.data=r,t}function Us(t,{width:e,height:i},n){if(e===t.width&&i===t.height)return;const r=Vs({},{width:e,height:i},n);Gs(t,r,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,i)},n),t.width=e,t.height=i,t.data=r.data}function Gs(t,e,i,n,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;for(let l=0;l<r.height;l++){const c=((i.y+l)*t.width+i.x)*o,u=((n.y+l)*e.width+n.x)*o;for(let t=0;t<r.width*o;t++)s[u+t]=a[c+t]}return e}sr("HeatmapBucket",Ns,{omit:["layers"]});class qs{constructor(t,e){Vs(this,t,1,e)}resize(t){Us(this,t,1)}clone(){return new qs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,n,r){Gs(t,e,i,n,r,1)}}class Zs{constructor(t,e){Vs(this,t,4,e)}resize(t){Us(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Zs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,n,r){Gs(t,e,i,n,r,4)}}sr("AlphaImage",qs),sr("RGBAImage",Zs);var Hs={paint:new xo({"heatmap-radius":new vo(Bt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vo(Bt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yo(Bt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bo(Bt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yo(Bt.paint_heatmap["heatmap-opacity"])})};function Ws(t){const e={},i=t.resolution||256,n=t.clips?t.clips.length:1,r=t.image||new Zs({width:i,height:n}),o=(i,n,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);r.data[i+n+0]=Math.floor(255*a.r/a.a),r.data[i+n+1]=Math.floor(255*a.g/a.a),r.data[i+n+2]=Math.floor(255*a.b/a.a),r.data[i+n+3]=Math.floor(255*a.a)};if(t.clips)for(let a=0,s=0;a<n;++a,s+=4*i)for(let e=0,n=0;e<i;e++,n+=4){const r=e/(i-1),{start:l,end:c}=t.clips[a];o(s,n,l*(1-r)+c*r)}else for(let a=0,s=0;a<i;a++,s+=4)o(0,s,a/(i-1));return r}var Xs={paint:new xo({"hillshade-illumination-direction":new yo(Bt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yo(Bt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yo(Bt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yo(Bt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yo(Bt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yo(Bt.paint_hillshade["hillshade-accent-color"])})};const Ys=Po([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ks}=Ys;var $s=Qs,Js=Qs;function Qs(t,e,i){i=i||2;var n,r,o,a,s,l,c,u=e&&e.length,h=u?e[0]*i:t.length,d=tl(t,0,h,i,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,i,n){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=tl(t,e[r]*n,r<o-1?e[r+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),s.push(hl(a));for(s.sort(sl),r=0;r<s.length;r++)ll(s[r],i),i=el(i,i.next);return i}(t,e,d,i)),t.length>80*i){n=o=t[0],r=a=t[1];for(var f=i;f<h;f+=i)(s=t[f])<n&&(n=s),(l=t[f+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-n,a-r))?1/c:0}return il(d,p,i,n,r,c),p}function tl(t,e,i,n,r){var o,a;if(r===El(t,e,i,n)>0)for(o=e;o<i;o+=n)a=xl(o,t[o],t[o+1],a);else for(o=i-n;o>=e;o-=n)a=xl(o,t[o],t[o+1],a);return a&&ml(a,a.next)&&(wl(a),a=a.next),a}function el(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!ml(n,n.next)&&0!==fl(n.prev,n,n.next))n=n.next;else{if(wl(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function il(t,e,i,n,r,o,a){if(t){!a&&o&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=ul(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,a,s,l,c=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,n=i,s=0,e=0;e<c&&(s++,n=n.nextZ);e++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(a>1)}(r)}(t,n,r,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?rl(t,n,r,o):nl(t))e.push(s.i/i),e.push(t.i/i),e.push(l.i/i),wl(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?il(t=ol(el(t),e,i),e,i,n,r,o,2):2===a&&al(t,e,i,n,r,o):il(el(t),e,i,n,r,o,1);break}}}function nl(t){var e=t.prev,i=t,n=t.next;if(fl(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(dl(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&fl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function rl(t,e,i,n){var r=t.prev,o=t,a=t.next;if(fl(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,l=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,c=ul(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,i,n),u=ul(s,l,e,i,n),h=t.prevZ,d=t.nextZ;h&&h.z>=c&&d&&d.z<=u;){if(h!==t.prev&&h!==t.next&&dl(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&fl(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&dl(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&fl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=c;){if(h!==t.prev&&h!==t.next&&dl(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&fl(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=u;){if(d!==t.prev&&d!==t.next&&dl(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&fl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function ol(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!ml(r,o)&&yl(r,n,n.next,o)&&_l(r,o)&&_l(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),wl(n),wl(n.next),n=t=o),n=n.next}while(n!==t);return el(n)}function al(t,e,i,n,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&pl(a,s)){var l=bl(a,s);return a=el(a,a.next),l=el(l,l.next),il(a,e,i,n,r,o),void il(l,e,i,n,r,o)}s=s.next}a=a.next}while(a!==t)}function sl(t,e){return t.x-e.x}function ll(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i;var l,c=i,u=i.x,h=i.y,d=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&dl(o<h?r:a,o,u,h,o<h?a:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),_l(n,t)&&(l<d||l===d&&(n.x>i.x||n.x===i.x&&cl(i,n)))&&(i=n,d=l)),n=n.next}while(n!==c);return i}(t,e)){var i=bl(e,t);el(e,e.next),el(i,i.next)}}function cl(t,e){return fl(t.prev,t,e.prev)<0&&fl(e.next,t,t.next)<0}function ul(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function hl(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function dl(t,e,i,n,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function pl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&yl(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(_l(t,e)&&_l(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(fl(t.prev,t,e.prev)||fl(t,e.prev,e))||ml(t,e)&&fl(t.prev,t,t.next)>0&&fl(e.prev,e,e.next)>0)}function fl(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function ml(t,e){return t.x===e.x&&t.y===e.y}function yl(t,e,i,n){var r=gl(fl(t,e,i)),o=gl(fl(t,e,n)),a=gl(fl(i,n,t)),s=gl(fl(i,n,e));return r!==o&&a!==s||!(0!==r||!vl(t,i,e))||!(0!==o||!vl(t,n,e))||!(0!==a||!vl(i,t,n))||!(0!==s||!vl(i,e,n))}function vl(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function gl(t){return t>0?1:t<0?-1:0}function _l(t,e){return fl(t.prev,t,t.next)<0?fl(t,e,t.next)>=0&&fl(t,t.prev,e)>=0:fl(t,e,t.prev)<0||fl(t,t.next,e)<0}function bl(t,e){var i=new Sl(t.i,t.x,t.y),n=new Sl(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function xl(t,e,i,n){var r=new Sl(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function wl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Sl(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function El(t,e,i,n){for(var r=0,o=e,a=i-n;o<i;o+=n)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function kl(t,e,i,n,r){Pl(t,e,i||0,n||t.length-1,r||Cl)}function Pl(t,e,i,n,r){for(;n>i;){if(n-i>600){var o=n-i+1,a=e-i+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);Pl(t,e,Math.max(i,Math.floor(e-a*l/o+c)),Math.min(n,Math.floor(e+(o-a)*l/o+c)),r)}var u=t[e],h=i,d=n;for(Tl(t,i,e),r(t[n],u)>0&&Tl(t,i,n);h<d;){for(Tl(t,h,d),h++,d--;r(t[h],u)<0;)h++;for(;r(t[d],u)>0;)d--}0===r(t[i],u)?Tl(t,i,d):Tl(t,++d,n),d<=e&&(i=d+1),e<=d&&(n=d-1)}}function Tl(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function Cl(t,e){return t<e?-1:t>e?1:0}function Ml(t,e){const i=t.length;if(i<=1)return[t];const n=[];let r,o;for(let a=0;a<i;a++){const e=D(t[a]);0!==e&&(t[a].area=Math.abs(e),void 0===o&&(o=e<0),o===e<0?(r&&n.push(r),r=[t[a]]):r.push(t[a]))}if(r&&n.push(r),e>1)for(let a=0;a<n.length;a++)n[a].length<=e||(kl(n[a],e,1,n[a].length-1,Al),n[a]=n[a].slice(0,e));return n}function Al(t,e){return e.area-t.area}function Ol(t,e,i){const n=i.patternDependencies;let r=!1;for(const o of e){const e=o.paint.get("".concat(t,"-pattern"));e.isConstant()||(r=!0);const i=e.constantOr(null);i&&(r=!0,n[i.to]=!0,n[i.from]=!0)}return r}function Il(t,e,i,n,r){const o=r.patternDependencies;for(const a of e){const e=a.paint.get("".concat(t,"-pattern")).value;if("constant"!==e.kind){let t=e.evaluate({zoom:n-1},i,{},r.availableImages),s=e.evaluate({zoom:n},i,{},r.availableImages),l=e.evaluate({zoom:n+1},i,{},r.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,i.patterns[a.id]={min:t,mid:s,max:l}}}return i}Qs.deviation=function(t,e,i,n){var r=e&&e.length,o=Math.abs(El(t,0,r?e[0]*i:t.length,i));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(El(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i));var l=0;for(a=0;a<n.length;a+=3){var c=n[a]*i,u=n[a+1]*i,h=n[a+2]*i;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Qs.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[r][o][a]);r>0&&i.holes.push(n+=t[r-1].length)}return i},$s.default=Js;class Dl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Co,this.indexArray=new No,this.indexArray2=new Ho,this.programConfigurations=new Ia(t.layers,t.zoom),this.segments=new Ua,this.segments2=new Ua,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=Ol("fill",this.layers,e);const n=this.layers[0].layout.get("fill-sort-key"),r=[];for(const{feature:o,id:a,index:s,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Wa(o,t);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),c,i))continue;const u=n?n.evaluate(c,{},i,e.availableImages):void 0,h={id:a,properties:o.properties,type:o.type,sourceLayerIndex:l,index:s,geometry:t?c.geometry:Ha(o),patterns:{},sortKey:u};r.push(h)}n&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const o of r){const{geometry:n,index:r,sourceLayerIndex:a}=o;if(this.hasPattern){const t=Il("fill",this.layers,o,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(o,n,r,i,{});e.featureIndex.insert(t[r].feature,n,r,a,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const n of this.patternFeatures)this.addFeature(n,n.geometry,n.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ks),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,i,n,r){for(const o of Ml(e,500)){let t=0;for(const s of o)t+=s.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),i=e.vertexLength,n=[],r=[];for(const s of o){if(0===s.length)continue;s!==o[0]&&r.push(n.length/2);const t=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(e+s.length-1,e),n.push(s[0].x),n.push(s[0].y);for(let i=1;i<s.length;i++)this.layoutVertexArray.emplaceBack(s[i].x,s[i].y),this.indexArray2.emplaceBack(e+i-1,e+i),n.push(s[i].x),n.push(s[i].y);t.vertexLength+=s.length,t.primitiveLength+=s.length}const a=$s(n,r);for(let o=0;o<a.length;o+=3)this.indexArray.emplaceBack(i+a[o],i+a[o+1],i+a[o+2]);e.vertexLength+=t,e.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}}sr("FillBucket",Dl,{omit:["layers","patternFeatures"]});const zl=new xo({"fill-sort-key":new vo(Bt.layout_fill["fill-sort-key"])});var Ll={paint:new xo({"fill-antialias":new yo(Bt.paint_fill["fill-antialias"]),"fill-opacity":new vo(Bt.paint_fill["fill-opacity"]),"fill-color":new vo(Bt.paint_fill["fill-color"]),"fill-outline-color":new vo(Bt.paint_fill["fill-outline-color"]),"fill-translate":new yo(Bt.paint_fill["fill-translate"]),"fill-translate-anchor":new yo(Bt.paint_fill["fill-translate-anchor"]),"fill-pattern":new go(Bt.paint_fill["fill-pattern"])}),layout:zl};const Rl=Po([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Fl=Po([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Bl}=Rl;var jl=Nl;function Nl(t,e,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(Vl,this,e)}function Vl(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function Ul(t){for(var e,i,n=0,r=0,o=t.length,a=o-1;r<o;a=r++)n+=((i=t[a]).x-(e=t[r]).x)*(e.y+i.y);return n}Nl.types=["Unknown","Point","LineString","Polygon"],Nl.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,o=0,a=0,s=0,l=[];t.pos<i;){if(o<=0){var c=t.readVarint();n=7&c,o=c>>3}if(o--,1===n||2===n)a+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new r(a,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},Nl.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(n<=0){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,c]},Nl.prototype.toGeoJSON=function(t,e,i){var n,r,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=Nl.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];u(l=h);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,r=[],o=0;o<e;o++){var a=Ul(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(i&&r.push(i),i=[t[o]]):i.push(t[o]))}return i&&r.push(i),r}(l),n=0;n<l.length;n++)for(r=0;r<l[n].length;r++)u(l[n][r])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Gl=ql;function ql(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Zl,this,e),this.length=this._features.length}function Zl(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(i))}function Hl(t,e,i){if(3===t){var n=new Gl(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}ql.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new jl(this._pbf,e,this.extent,this._keys,this._values)};var Wl={VectorTile:function(t,e){this.layers=t.readFields(Hl,{},e)},VectorTileFeature:jl,VectorTileLayer:Gl};const Xl=Wl.VectorTileFeature.types,Yl=Math.pow(2,13);function Kl(t,e,i,n,r,o,a,s){t.emplaceBack((e<<1)+a,(i<<1)+o,(Math.floor(n*Yl)<<1)+r,Math.round(s))}class $l{constructor(){this.acc=new r(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new r(t.x,t.y),this.max=new r(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);let i=!!this.borders;const n=this.min,r=this.max;t.x<n.x?(n.x=t.x,i=!0):t.x>r.x&&(r.x=t.x,i=!0),t.y<n.y?(n.y=t.y,i=!0):t.y>r.y&&(r.y=t.y,i=!0),((0===t.x||t.x===Ga)&&t.x===e.x)!=((0===t.y||t.y===Ga)&&t.y===e.y)&&this.processBorderOverlap(t,e),i&&this.checkBorderIntersection(t,e)}checkBorderIntersection(t,e){e.x<0!=t.x<0&&this.addBorderIntersection(0,ii(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>Ga!=t.x>Ga&&this.addBorderIntersection(1,ii(e.y,t.y,(Ga-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,ii(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>Ga!=t.y>Ga&&this.addBorderIntersection(3,ii(e.x,t.x,(Ga-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const i=this.borders[t];e<i[0]&&(i[0]=e),e>i[1]&&(i[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const i=0===t.x?0:1;this.addBorderIntersection(i,e.y),this.addBorderIntersection(i,t.y)}else{const i=0===t.y?2:3;this.addBorderIntersection(i,e.x),this.addBorderIntersection(i,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new r(0,0)}span(){return new r(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class Jl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Mo,this.centroidVertexArray=new la,this.indexArray=new No,this.programConfigurations=new Ia(t.layers,t.zoom),this.segments=new Ua,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,i){this.features=[],this.hasPattern=Ol("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/Ga/(1<<t.z)}(i);for(const{feature:n,id:r,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,s=Wa(n,t);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),s,i))continue;const l={id:r,sourceLayerIndex:a,index:o,geometry:t?s.geometry:Ha(n),properties:n.properties,type:n.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(Il("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,i,{}),e.featureIndex.insert(n,l.geometry,o,a,this.index,c)}this.sortBorders()}addFeatures(t,e,i){for(const n of this.features){const{geometry:t}=n;this.addFeature(n,t,n.index,e,i)}this.sortBorders()}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bl),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Fl.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,n,r){const o=this.enableTerrain?new $l:null;for(const s of Ml(e,500)){let e=0,i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===s.length||(a=s[0]).every((t=>t.x<=0))||a.every((t=>t.x>=Ga))||a.every((t=>t.y<=0))||a.every((t=>t.y>=Ga)))continue;for(let t=0;t<s.length;t++){const n=s[t];if(0===n.length)continue;e+=n.length;let r=0;o&&o.startRing(n[0]);for(let t=0;t<n.length;t++){const e=n[t];if(t>=1){const a=n[t-1];if(!Ql(e,a)){o&&o.append(e,a),i.vertexLength+4>Ua.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=e.sub(a)._perp(),n=t.x/(Math.abs(t.x)+Math.abs(t.y)),s=t.y>0?1:0,l=a.dist(e);r+l>32768&&(r=0),Kl(this.layoutVertexArray,e.x,e.y,n,s,0,0,r),Kl(this.layoutVertexArray,e.x,e.y,n,s,0,1,r),r+=l,Kl(this.layoutVertexArray,a.x,a.y,n,s,0,0,r),Kl(this.layoutVertexArray,a.x,a.y,n,s,0,1,r);const c=i.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+e>Ua.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Xl[t.type])continue;const n=[],r=[],l=i.vertexLength;for(let t=0;t<s.length;t++){const e=s[t];if(0!==e.length){e!==s[0]&&r.push(n.length/2);for(let t=0;t<e.length;t++){const i=e[t];Kl(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),n.push(i.x),n.push(i.y),o&&o.currentPolyCount.top++}}}const c=$s(n,r);for(let t=0;t<c.length;t+=3)this.indexArray.emplaceBack(l+c[t],l+c[t+2],l+c[t+1]);i.primitiveLength+=c.length/3,i.vertexLength+=e}var a;if(o&&o.polyCount.length>0){if(o.borders){o.vertexArrayOffset=this.centroidVertexArray.length;const t=o.borders,e=this.featuresOnBorder.push(o)-1;for(let i=0;i<4;i++)t[i][0]!==Number.MAX_VALUE&&this.borders[i].push(e)}this.encodeCentroid(o.borders?void 0:o.centroid(),o)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,i)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[i].borders[t][0]))}encodeCentroid(t,e,i=!0){let n,r;if(t)if(0!==t.y){const i=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(i.x/10)),r=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else n=Math.ceil(7*(t.x+450)),r=0;else n=0,r=+i;let o=i?this.centroidVertexArray.length:e.vertexArrayOffset;for(const a of e.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*a.edges+a.top);for(let t=0;t<2*a.edges;t++)this.centroidVertexArray.emplace(o++,0,r),this.centroidVertexArray.emplace(o++,n,r);for(let t=0;t<a.top;t++)this.centroidVertexArray.emplace(o++,n,r)}}}function Ql(t,e){return t.x===e.x&&(t.x<0||t.x>Ga)||t.y===e.y&&(t.y<0||t.y>Ga)}sr("FillExtrusionBucket",Jl,{omit:["layers","features"]}),sr("PartMetadata",$l);var tc={paint:new xo({"fill-extrusion-opacity":new yo(Bt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vo(Bt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yo(Bt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yo(Bt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new go(Bt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vo(Bt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vo(Bt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yo(Bt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ec(t,e){return t.x*e.x+t.y*e.y}function ic(t,e){if(1===t.length){let i=0;const n=e[i++];let r;for(;!r||n.equals(r);)if(r=e[i++],!r)return 1/0;for(;i<e.length;i++){const o=e[i],a=t[0],s=r.sub(n),l=o.sub(n),c=a.sub(n),u=ec(s,s),h=ec(s,l),d=ec(l,l),p=ec(c,s),f=ec(c,l),m=u*d-h*h,y=(d*p-h*f)/m,v=(u*f-h*p)/m,g=n.z*(1-y-v)+r.z*y+o.z*v;if(isFinite(g))return g}return 1/0}{let t=1/0;for(const i of e)t=Math.min(t,i.z);return t}}function nc(t){const e=new r(t[0],t[1]);return e.z=t[2],e}function rc(t,e,i,n,r,o,a,s){const l=a*r.getElevationAt(t,e,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(t,e,i){const n=Math.floor(e[0]/8),r=Math.floor(e[1]/8),o=10*(e[0]-8*n),a=10*(e[1]-8*r),s=t.getElevationAt(n,r,!0,!0),l=t.getMeterToDEM(i),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(n,r),d=2*c+1,p=2*u+1,f=function(t,e,i,n,r){return[t.getElevationAtPixel(e,i,!0),t.getElevationAtPixel(e+r,i,!0),t.getElevationAtPixel(e,i+r,!0),t.getElevationAtPixel(e+n,i+r,!0)]}(t,h.x-c,h.y-u,d,p),m=Math.abs(f[0]-f[1]),y=Math.abs(f[2]-f[3]),v=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),g=Math.min(.25,.5*l*(m+y)/d),_=Math.min(.25,.5*l*v/p);return s+Math.max(g*o,_*a)}(r,o,s):l;return{base:l+(0===i)?-1:i,top:c?Math.max(u+n,l+i+2):l+n}}const oc=Po([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:ac}=oc,sc=Po([{name:"a_packed",components:3,type:"Float32"}]),{members:lc}=sc,cc=Wl.VectorTileFeature.types,uc=Math.cos(Math.PI/180*37.5);class hc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Ao,this.layoutVertexArray2=new Oo,this.indexArray=new No,this.programConfigurations=new Ia(t.layers,t.zoom),this.segments=new Ua,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=Ol("line",this.layers,e);const n=this.layers[0].layout.get("line-sort-key"),r=[];for(const{feature:l,id:c,index:u,sourceLayerIndex:h}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Wa(l,t);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),e,i))continue;const o=n?n.evaluate(e,{},i):void 0,a={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:u,geometry:t?e.geometry:Ha(l),patterns:{},sortKey:o};r.push(a)}n&&r.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:o,featureIndex:a}=e,s=this.addConstantDashes(o);for(const l of r){const{geometry:n,index:r,sourceLayerIndex:c}=l;if(s&&this.addFeatureDashes(l,o),this.hasPattern){const t=Il("line",this.layers,l,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(l,n,r,i,o.positions);a.insert(t[r].feature,n,r,c,this.index)}}addConstantDashes(t){let e=!1;for(const i of this.layers){const n=i.paint.get("line-dasharray").value,r=i.layout.get("line-cap").value;if("constant"!==n.kind||"constant"!==r.kind)e=!0;else{const e=r.value,i=n.value;if(!i)continue;t.addDash(i.from,e),t.addDash(i.to,e),i.other&&t.addDash(i.other,e)}}return e}addFeatureDashes(t,e){const i=this.zoom;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,o=n.layout.get("line-cap").value;if("constant"===r.kind&&"constant"===o.kind)continue;let a,s,l,c,u,h;if("constant"===r.kind){const t=r.value;if(!t)continue;a=t.other||t.to,s=t.to,l=t.from}else a=r.evaluate({zoom:i-1},t),s=r.evaluate({zoom:i},t),l=r.evaluate({zoom:i+1},t);"constant"===o.kind?c=u=h=o.value:(c=o.evaluate({zoom:i-1},t),u=o.evaluate({zoom:i},t),h=o.evaluate({zoom:i+1},t)),e.addDash(a,c),e.addDash(s,u),e.addDash(l,h);const d=e.getKey(a,c),p=e.getKey(s,u),f=e.getKey(l,h);t.patterns[n.id]={min:d,mid:p,max:f}}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const n of this.patternFeatures)this.addFeature(n,n.geometry,n.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,lc)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ac),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,i,n,r){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap").evaluate(t,{}),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const u of e)this.addLine(u,t,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)}addLine(t,e,i,n,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===cc[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===i&&(r=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let y=l;y<s;y++){if(p=y===s-1?a?t[l+1]:void 0:t[y+1],p&&t[y].equals(p))continue;m&&(f=m),h&&(d=h),h=t[y],m=p?p.sub(h)._unit()._perp():f,f=f||m;let e=f.add(m);0===e.x&&0===e.y||e._unit();const v=f.x*m.x+f.y*m.y,g=e.x*m.x+e.y*m.y,_=0!==g?1/g:1/0,b=2*Math.sqrt(2-2*g),x=g<uc&&d&&p,w=f.x*m.y-f.y*m.x>0;if(x&&y>l){const t=h.dist(d);if(t>2*c){const e=h.sub(h.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,f,0,0,u),d=e}}const S=d&&p;let E=S?i:a?"butt":n;if(S&&"round"===E&&(_<o?E="miter":_<=2&&(E="fakeround")),"miter"===E&&_>r&&(E="bevel"),"bevel"===E&&(_>2&&(E="flipbevel"),_<r&&(E="miter")),d&&this.updateDistance(d,h),"miter"===E)e._mult(_),this.addCurrentVertex(h,e,0,0,u);else if("flipbevel"===E){if(_>100)e=m.mult(-1);else{const t=_*f.add(m).mag()/f.sub(m).mag();e._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,e,0,0,u),this.addCurrentVertex(h,e.mult(-1),0,0,u)}else if("bevel"===E||"fakeround"===E){const t=-Math.sqrt(_*_-1),e=w?t:0,i=w?0:t;if(d&&this.addCurrentVertex(h,f,e,i,u),"fakeround"===E){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let i=e/t;if(.5!==i){const t=i-.5;i+=i*t*(i-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*t*t+(.848013+v*(.215638*v-1.06021)))}const n=m.sub(f)._mult(i)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,n.x,n.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-e,-i,u)}else if("butt"===E)this.addCurrentVertex(h,e,0,0,u);else if("square"===E){const t=d?1:-1;d||this.addCurrentVertex(h,e,t,t,u),this.addCurrentVertex(h,e,0,0,u),d&&this.addCurrentVertex(h,e,t,t,u)}else"round"===E&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&y<s-1){const t=h.dist(p);if(t>2*c){const e=h.add(p.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}}}addCurrentVertex(t,e,i,n,r,o=!1){const a=e.y*n-e.x,s=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,r),this.addHalfVertex(t,a,s,o,!0,-n,r)}addHalfVertex({x:t,y:e},i,n,r,o,a,s){this.layoutVertexArray.emplaceBack((t<<1)+(r?1:0),(e<<1)+(o?1:0),Math.round(63*i)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}sr("LineBucket",hc,{omit:["layers","patternFeatures"]});const dc=new xo({"line-cap":new vo(Bt.layout_line["line-cap"]),"line-join":new vo(Bt.layout_line["line-join"]),"line-miter-limit":new yo(Bt.layout_line["line-miter-limit"]),"line-round-limit":new yo(Bt.layout_line["line-round-limit"]),"line-sort-key":new vo(Bt.layout_line["line-sort-key"])});var pc={paint:new xo({"line-opacity":new vo(Bt.paint_line["line-opacity"]),"line-color":new vo(Bt.paint_line["line-color"]),"line-translate":new yo(Bt.paint_line["line-translate"]),"line-translate-anchor":new yo(Bt.paint_line["line-translate-anchor"]),"line-width":new vo(Bt.paint_line["line-width"]),"line-gap-width":new vo(Bt.paint_line["line-gap-width"]),"line-offset":new vo(Bt.paint_line["line-offset"]),"line-blur":new vo(Bt.paint_line["line-blur"]),"line-dasharray":new go(Bt.paint_line["line-dasharray"]),"line-pattern":new go(Bt.paint_line["line-pattern"]),"line-gradient":new bo(Bt.paint_line["line-gradient"])}),layout:dc};const fc=new class extends vo{possiblyEvaluate(t,e){return e=new ao(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,i,n){return e=_({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,i,n)}}(pc.paint.properties["line-width"].specification);function mc(t,e){return e>0?e+2*t:t}fc.useIntegerZoom=!0;const yc=Po([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),vc=Po([{name:"a_projected_pos",components:3,type:"Float32"}],4);Po([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const gc=Po([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),_c=Po([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Po([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bc=Po([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xc=Po([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Po([{name:"triangle",components:3,type:"Uint16"}]),Po([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Po([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Po([{type:"Float32",name:"offsetX"}]),Po([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var wc=24;const Sc=128;function Ec(t,e){const{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new ao(t+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:n}=i;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let o=r;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[r],s=e[o];return"composite"===i.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:n}:{kind:"camera",minZoom:a,maxZoom:s,minSize:i.evaluate(new ao(a)),maxSize:i.evaluate(new ao(s)),interpolationType:n}}}function kc(t,{uSize:e,uSizeT:i},{lowerSize:n,upperSize:r}){return"source"===t.kind?n/Sc:"composite"===t.kind?ii(n/Sc,r/Sc,i):e}function Pc(t,e){let i=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:o,maxZoom:a}=t,s=r?m(xi.interpolationFactor(r,e,o,a),0,1):0;"camera"===t.kind?n=ii(t.minSize,t.maxSize,s):i=s}return{uSizeT:i,uSize:n}}var Tc=Object.freeze({__proto__:null,getSizeData:Ec,evaluateSizeForFeature:kc,evaluateSizeForZoom:Pc,SIZE_PACK_FACTOR:Sc});function Cc(t,e,i){return t.sections.forEach((t=>{t.text=function(t,e,i){const n=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),oo.applyArabicShaping&&(t=oo.applyArabicShaping(t)),t}(t.text,e,i)})),t}const Mc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Ac(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function Oc(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}var Ic=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,c=l>>1,u=-7,h=i?r-1:0,d=i?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},Dc=function(t,e,i,n,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[i+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[i+p]=255&a,p+=f,a/=256,c-=8);t[i+p-f]|=128*m},zc=Lc;function Lc(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Lc.Varint=0,Lc.Fixed64=1,Lc.Bytes=2,Lc.Fixed32=5;var Rc=4294967296,Fc=1/Rc,Bc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function jc(t){return t.type===Lc.Bytes?t.readVarint()+t.pos:t.pos+1}function Nc(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Vc(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function Uc(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Gc(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function qc(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Zc(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Hc(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Wc(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Xc(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Yc(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Kc(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function $c(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Jc(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Qc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function tu(t,e,i){e.glyphs=[],1===t&&i.readMessage(eu,e)}function eu(t,e,i){if(3===t){const{id:t,bitmap:n,width:r,height:o,left:a,top:s,advance:l}=i.readMessage(iu,{});e.glyphs.push({id:t,bitmap:new qs({width:r+6,height:o+6},n),metrics:{width:r,height:o,left:a,top:s,advance:l}})}else 4===t?e.ascender=i.readSVarint():5===t&&(e.descender=i.readSVarint())}function iu(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function nu(t){let e=0,i=0;for(const a of t)e+=a.w*a.h,i=Math.max(i,a.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let r=0,o=0;for(const a of t)for(let t=n.length-1;t>=0;t--){const e=n[t];if(!(a.w>e.w||a.h>e.h)){if(a.x=e.x,a.y=e.y,o=Math.max(o,a.y+a.h),r=Math.max(r,a.x+a.w),a.w===e.w&&a.h===e.h){const e=n.pop();t<n.length&&(n[t]=e)}else a.h===e.h?(e.x+=a.w,e.w-=a.w):a.w===e.w?(e.y+=a.h,e.h-=a.h):(n.push({x:e.x+a.w,y:e.y,w:e.w-a.w,h:a.h}),e.y+=a.h,e.h-=a.h);break}}return{w:r,h:o,fill:e/(r*o)||0}}Lc.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=$c(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Qc(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=$c(this.buf,this.pos)+$c(this.buf,this.pos+4)*Rc;return this.pos+=8,t},readSFixed64:function(){var t=$c(this.buf,this.pos)+Qc(this.buf,this.pos+4)*Rc;return this.pos+=8,t},readFloat:function(){var t=Ic(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ic(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,o=i.buf;if(n=(112&(r=o[i.pos++]))>>4,r<128)return Nc(t,n,e);if(n|=(127&(r=o[i.pos++]))<<3,r<128)return Nc(t,n,e);if(n|=(127&(r=o[i.pos++]))<<10,r<128)return Nc(t,n,e);if(n|=(127&(r=o[i.pos++]))<<17,r<128)return Nc(t,n,e);if(n|=(127&(r=o[i.pos++]))<<24,r<128)return Nc(t,n,e);if(n|=(1&(r=o[i.pos++]))<<31,r<128)return Nc(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Bc?function(t,e,i){return Bc.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",r=e;r<i;){var o,a,s,l=t[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[r+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),r+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Lc.Bytes)return t.push(this.readVarint(e));var i=jc(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Lc.Bytes)return t.push(this.readSVarint());var e=jc(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Lc.Bytes)return t.push(this.readBoolean());var e=jc(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Lc.Bytes)return t.push(this.readFloat());var e=jc(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Lc.Bytes)return t.push(this.readDouble());var e=jc(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Lc.Bytes)return t.push(this.readFixed32());var e=jc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Lc.Bytes)return t.push(this.readSFixed32());var e=jc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Lc.Bytes)return t.push(this.readFixed64());var e=jc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Lc.Bytes)return t.push(this.readSFixed64());var e=jc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Lc.Varint)for(;this.buf[this.pos++]>127;);else if(e===Lc.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Lc.Fixed32)this.pos+=4;else{if(e!==Lc.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Jc(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Jc(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Jc(this.buf,-1&t,this.pos),Jc(this.buf,Math.floor(t*Fc),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Jc(this.buf,-1&t,this.pos),Jc(this.buf,Math.floor(t*Fc),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&Vc(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Dc(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Dc(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&Vc(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,Lc.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Uc,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Gc,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Hc,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,qc,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Zc,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Wc,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Xc,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Yc,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Kc,e)},writeBytesField:function(t,e){this.writeTag(t,Lc.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Lc.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Lc.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Lc.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Lc.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Lc.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Lc.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Lc.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Lc.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Lc.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class ru{constructor(t,{pixelRatio:e,version:i,stretchX:n,stretchY:r,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=n,this.stretchY=r,this.content=o,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ou{constructor(t,e){const i={},n={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,i,r),this.addImages(e,n,r);const{w:o,h:a}=nu(r),s=new Zs({width:o||1,height:a||1});for(const l in t){const e=t[l],n=i[l].paddedRect;Zs.copy(e.data,s,{x:0,y:0},{x:n.x+1,y:n.y+1},e.data)}for(const l in e){const t=e[l],i=n[l].paddedRect,r=i.x+1,o=i.y+1,a=t.data.width,c=t.data.height;Zs.copy(t.data,s,{x:0,y:0},{x:r,y:o},t.data),Zs.copy(t.data,s,{x:0,y:c-1},{x:r,y:o-1},{width:a,height:1}),Zs.copy(t.data,s,{x:0,y:0},{x:r,y:o+c},{width:a,height:1}),Zs.copy(t.data,s,{x:a-1,y:0},{x:r-1,y:o},{width:1,height:c}),Zs.copy(t.data,s,{x:0,y:0},{x:r+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=i,this.patternPositions=n}addImages(t,e,i){for(const n in t){const r=t[n],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};i.push(o),e[n]=new ru(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)}patchUpdatedImage(t,e,i){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[n,r]=t.tl;i.update(e.data,void 0,{x:n,y:r})}}sr("ImagePosition",ru),sr("ImageAtlas",ou);const au={horizontal:1,vertical:2,horizontalOnly:3};class su{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const i=new su;return i.scale=t||1,i.fontStack=e,i}static forImage(t){const e=new su;return e.imageName=t,e}}class lu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const i=new lu;for(let n=0;n<t.sections.length;n++){const r=t.sections[n];r.image?i.addImageSection(r):i.addTextSection(r,e)}return i}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let i="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n+1)||null,o=t.charCodeAt(n-1)||null;i+=!e&&(r&&qr(r)&&!Mc[t[n+1]]||o&&qr(o)&&!Mc[t[n-1]])||!Mc[t[n]]?t[n]:Mc[t[n]]}return i}(this.text,t)}trim(){let t=0;for(let i=0;i<this.text.length&&uu[this.text.charCodeAt(i)];i++)t++;let e=this.text.length;for(let i=this.text.length-1;i>=0&&i>=t&&uu[this.text.charCodeAt(i)];i--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const i=new lu;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(su.forText(t.scale,t.fontStack||e));const i=this.sections.length-1;for(let n=0;n<t.text.length;++n)this.sectionIndex.push(i)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void O("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(su.forImage(e)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function cu(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m){const y=lu.fromFeature(t,r);let v;h===au.vertical&&y.verticalizePunctuation(d);const{processBidirectionalText:g,processStyledBidirectionalText:_}=oo;if(g&&1===y.sections.length){v=[];const t=g(y.toString(),vu(y,c,o,e,n,p,f));for(const e of t){const t=new lu;t.text=e,t.sections=y.sections;for(let i=0;i<e.length;i++)t.sectionIndex.push(0);v.push(t)}}else if(_){v=[];const t=_(y.text,y.sectionIndex,vu(y,c,o,e,n,p,f));for(const e of t){const t=new lu;t.text=e[0],t.sectionIndex=e[1],t.sections=y.sections,v.push(t)}}else v=function(t,e){const i=[],n=t.text;let r=0;for(const o of e)i.push(t.substring(r,o)),r=o;return r<n.length&&i.push(t.substring(r,n.length)),i}(y,vu(y,c,o,e,n,p,f));const b=[],x={positionedLines:b,text:y.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,i,n,r,o,a,s,l,c,u,h){let d=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let y=!1;for(const w of r){const t=w.getSections();for(const i of t){if(i.imageName)continue;const t=e[i.fontStack];if(t&&(y=void 0!==t.ascender&&void 0!==t.descender,!y))break}if(!y)break}let v=0;for(const w of r){w.trim();const r=w.getMaxScale(),a=(r-1)*wc,s={positionedGlyphs:[],lineOffset:0};t.positionedLines[v]=s;const _=s.positionedGlyphs;let b=0;if(!w.length()){p+=o,++v;continue}let x=0,S=0;for(let o=0;o<w.length();o++){const a=w.getSection(o),s=w.getSectionIndex(o),f=w.getCharCode(o);let m=a.scale,v=null,E=null,k=null,P=wc,T=0;const C=!(l===au.horizontal||!u&&!Gr(f)||u&&(uu[f]||(g=f,pr(g)||fr(g)||mr(g)||zr(g)||Br(g))));if(a.imageName){const e=n[a.imageName];if(!e)continue;k=a.imageName,t.iconsInText=t.iconsInText||!0,E=e.paddedRect;const i=e.displaySize;m=m*wc/h,v={width:i[0],height:i[1],left:1,top:-3,advance:C?i[1]:i[0],localGlyph:!1},T=y?-v.height*m:r*wc-17-i[1]*m,P=v.advance;const o=(C?i[0]:i[1])*m-wc*r;o>0&&o>b&&(b=o)}else{const t=i[a.fontStack];if(!t)continue;t[f]&&(E=t[f]);const n=e[a.fontStack];if(!n)continue;const o=n.glyphs[f];if(!o)continue;if(v=o.metrics,P=8203!==f?wc:0,y){const t=void 0!==n.ascender?Math.abs(n.ascender):0,e=void 0!==n.descender?Math.abs(n.descender):0,i=(t+e)*m;x<i&&(x=i,S=(t-e)/2*m),T=-t*m}else T=(r-m)*wc-17}C?(t.verticalizable=!0,_.push({glyph:f,imageName:k,x:d,y:p+T,vertical:C,scale:m,localGlyph:v.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:v,rect:E}),d+=P*m+c):(_.push({glyph:f,imageName:k,x:d,y:p+T,vertical:C,scale:m,localGlyph:v.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:v,rect:E}),d+=v.advance*m+c)}0!==_.length&&(f=Math.max(d-c,f),y?_u(_,m,b,S,o*r/2):_u(_,m,b,0,o/2)),d=0;const E=o*r+b;s.lineOffset=Math.max(b,a),p+=E,++v}var g;const _=p,{horizontalAlign:b,verticalAlign:x}=gu(a);(function(t,e,i,n,r,o){const a=(e-i)*r,s=-o*n;for(const l of t)for(const t of l.positionedGlyphs)t.x+=a,t.y+=s})(t.positionedLines,m,b,x,f,_),t.top+=-x*_,t.bottom=t.top+_,t.left+=-b*f,t.right=t.left+f,t.hasBaseline=y}(x,e,i,n,v,a,s,l,h,c,d,m),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&x}const uu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},hu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function du(t,e,i,n,r,o){if(e.imageName){const t=n[e.imageName];return t?t.displaySize[0]*e.scale*wc/o+r:0}{const n=i[e.fontStack],o=n&&n.glyphs[t];return o?o.metrics.advance*e.scale+r:0}}function pu(t,e,i,n){const r=Math.pow(t-e,2);return n?t<e?r/2:2*r:r+Math.abs(i)*i}function fu(t,e,i){let n=0;return 10===t&&(n-=1e4),i&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function mu(t,e,i,n,r,o){let a=null,s=pu(e,i,r,o);for(const l of n){const t=pu(e-l.x,i,r,o)+l.badness;t<=s&&(a=l,s=t)}return{index:t,x:e,priorBreak:a,badness:s}}function yu(t){return t?yu(t.priorBreak).concat(t.index):[]}function vu(t,e,i,n,r,o,a){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,i,n,r,o){let a=0;for(let s=0;s<t.length();s++){const i=t.getSection(s);a+=du(t.getCharCode(s),i,n,r,e,o)}return a/Math.max(1,Math.ceil(a/i))}(t,e,i,n,r,a),c=t.text.indexOf("\u200b")>=0;let u=0;for(let d=0;d<t.length();d++){const i=t.getSection(d),o=t.getCharCode(d);if(uu[o]||(u+=du(o,i,n,r,e,a)),d<t.length()-1){const e=!((h=o)<11904||!(Sr(h)||wr(h)||Rr(h)||Dr(h)||Tr(h)||yr(h)||Er(h)||_r(h)||Cr(h)||Mr(h)||Pr(h)||jr(h)||br(h)||gr(h)||vr(h)||kr(h)||xr(h)||Lr(h)||Or(h)||Ar(h)));(hu[o]||e||i.imageName)&&s.push(mu(d+1,u,l,s,fu(o,t.getCharCode(d+1),e&&c),!1))}}var h;return yu(mu(t.length(),u,l,s,0,!0))}function gu(t){let e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function _u(t,e,i,n,r){if(!(e||i||n||r))return;const o=t.length-1,a=t[o],s=(a.x+a.metrics.advance*a.scale)*e;for(let l=0;l<=o;l++)t[l].x-=s,t[l].y+=i+n+r}function bu(t,e,i){const{horizontalAlign:n,verticalAlign:r}=gu(i),o=e[0]-t.displaySize[0]*n,a=e[1]-t.displaySize[1]*r;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function xu(t,e,i,n,r,o){const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,h,d,p;"width"===i||"both"===i?(p=r[0]+l-n[3],h=r[0]+c+n[1]):(p=r[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=e.top*o,m=e.bottom*o;return"height"===i||"both"===i?(u=r[1]+f-n[0],d=r[1]+m+n[2]):(u=r[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}class wu extends r{constructor(t,e,i,n,r){super(t,e),this.angle=n,this.z=i,void 0!==r&&(this.segment=r)}clone(){return new wu(this.x,this.y,this.z,this.angle,this.segment)}}function Su(t,e,i,n,r){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-i/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let c=0;for(;s<i/2;){const e=t[a],i=t[a+1];if(!i)return!1;let o=t[a-1].angleTo(e)-e.angleTo(i);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>r)return!1;a++,s+=e.dist(i)}return!0}function Eu(t){let e=0;for(let i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function ku(t,e,i){return t?.6*e*i:0}function Pu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Tu(t,e,i,n,r,o){const a=ku(i,r,o),s=Pu(i,n)*o;let l=0;const c=Eu(t)/2;for(let u=0;u<t.length-1;u++){const i=t[u],n=t[u+1],r=i.dist(n);if(l+r>c){const o=(c-l)/r,h=ii(i.x,n.x,o),d=ii(i.y,n.y,o),p=new wu(h,d,0,n.angleTo(i),u);return!a||Su(t,p,s,a,e)?p:void 0}l+=r}}function Cu(t,e,i,n,r,o,a,s,l){const c=ku(n,o,a),u=Pu(n,r),h=u*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),Mu(t,d?e/2*s%e:(u/2+2*o)*a*s%e,e,c,i,h,d,!1,l)}function Mu(t,e,i,n,r,o,a,s,l){const c=o/2,u=Eu(t);let h=0,d=e-i,p=[];for(let f=0;f<t.length-1;f++){const e=t[f],a=t[f+1],s=e.dist(a),m=a.angleTo(e);for(;d+i<h+s;){d+=i;const y=(d-h)/s,v=ii(e.x,a.x,y),g=ii(e.y,a.y,y);if(v>=0&&v<l&&g>=0&&g<l&&d-c>=0&&d+c<=u){const e=new wu(v,g,0,m,f);e._round(),n&&!Su(t,e,o,n,r)||p.push(e)}}h+=s}return s||p.length||a||(p=Mu(t,h/2,i,n,r,o,a,!0,l)),p}function Au(t,e,i,n,o){const a=[];for(let s=0;s<t.length;s++){const l=t[s];let c;for(let t=0;t<l.length-1;t++){let s=l[t],u=l[t+1];s.x<e&&u.x<e||(s.x<e?s=new r(e,s.y+(e-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<e&&(u=new r(e,s.y+(e-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<i&&u.y<i||(s.y<i?s=new r(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round():u.y<i&&(u=new r(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round()),s.x>=n&&u.x>=n||(s.x>=n?s=new r(n,s.y+(n-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=n&&(u=new r(n,s.y+(n-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=o&&u.y>=o||(s.y>=o?s=new r(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round():u.y>=o&&(u=new r(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}sr("Anchor",wu);const Ou=1e20;function Iu(t,e,i,n,r,o,a,s,l){for(let c=e;c<e+n;c++)Du(t,i*o+c,o,r,a,s,l);for(let c=i;c<i+r;c++)Du(t,c*o+e,1,n,a,s,l)}function Du(t,e,i,n,r,o,a){o[0]=0,a[0]=-Ou,a[1]=Ou,r[0]=t[e];for(let s=1,l=0,c=0;s<n;s++){r[s]=t[e+s*i];const n=s*s;do{const t=o[l];c=(r[s]-r[t]+n-t*t)/(s-t)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=Ou}for(let s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;const n=o[l],c=s-n;t[e+s*i]=r[n]+c*c}}const zu={none:0,ideographs:1,all:2};class Lu{constructor(t,e,i){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=i,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const i=[];for(const n in t)for(const e of t[n])i.push({stack:n,id:e});v(i,(({stack:t,id:e},i)=>{let n=this.entries[t];n||(n=this.entries[t]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let r=n.glyphs[e];if(void 0!==r)return void i(null,{stack:t,id:e,glyph:r});if(r=this._tinySDF(n,t,e),r)return n.glyphs[e]=r,void i(null,{stack:t,id:e,glyph:r});const o=Math.floor(e/256);if(256*o>65535)return void i(new Error("glyphs > 65535 not supported"));if(n.ranges[o])return void i(null,{stack:t,id:e,glyph:r});let a=n.requests[o];a||(a=n.requests[o]=[],Lu.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){n.ascender=e.ascender,n.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(n.glyphs[+t]=e.glyphs[+t]);n.ranges[o]=!0}for(const i of a)i(t,e);delete n.requests[o]}))),a.push(((n,r)=>{n?i(n):r&&i(null,{stack:t,id:e,glyph:r.glyphs[e]||null})}))}),((t,i)=>{if(t)e(t);else if(i){const t={};for(const{stack:e,id:n,glyph:r}of i)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[n]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==zu.none&&(this.localGlyphMode===zu.all?!!this.localFontFamily:!!this.localFontFamily&&(Mr(t)||Ir(t)||br(t)||xr(t))||_r(t))}_tinySDF(t,e,i){const n=this.localFontFamily;if(!n||!this._doesCharSupportLocalGlyph(i))return;let r=t.tinySDF;if(!r){let i="400";/bold/i.test(e)?i="900":/medium/i.test(e)?i="500":/light/i.test(e)&&(i="200"),r=t.tinySDF=new Lu.TinySDF({fontFamily:n,fontWeight:i,fontSize:48,buffer:6,radius:16}),r.fontWeight=i}if(this.localGlyphs[r.fontWeight][i])return this.localGlyphs[r.fontWeight][i];const o=String.fromCharCode(i),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:d,glyphAdvance:p}=r.draw(o);return this.localGlyphs[r.fontWeight][i]={id:i,bitmap:new qs({width:s,height:l},a),metrics:{width:c/2,height:u/2,left:h/2,top:d/2-27,advance:p/2,localGlyph:!0}}}}function Ru(t,e,i,n){const o=[],a=t.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2,u=t.right-t.left,h=t.bottom-t.top,d=a.stretchX||[[0,l]],p=a.stretchY||[[0,c]],f=(t,e)=>t+e[1]-e[0],m=d.reduce(f,0),y=p.reduce(f,0),v=l-m,g=c-y;let _=0,b=m,x=0,w=y,S=0,E=v,k=0,P=g;if(a.content&&n){const t=a.content;_=Fu(d,0,t[0]),x=Fu(p,0,t[1]),b=Fu(d,t[0],t[2]),w=Fu(p,t[1],t[3]),S=t[0]-_,k=t[1]-x,E=t[2]-t[0]-b,P=t[3]-t[1]-w}const T=(n,o,l,c)=>{const d=ju(n.stretch-_,b,u,t.left),p=Nu(n.fixed-S,E,n.stretch,m),f=ju(o.stretch-x,w,h,t.top),v=Nu(o.fixed-k,P,o.stretch,y),g=ju(l.stretch-_,b,u,t.left),T=Nu(l.fixed-S,E,l.stretch,m),C=ju(c.stretch-x,w,h,t.top),M=Nu(c.fixed-k,P,c.stretch,y),A=new r(d,f),O=new r(g,f),I=new r(g,C),D=new r(d,C),z=new r(p/s,v/s),L=new r(T/s,M/s),R=e*Math.PI/180;if(R){const t=Math.sin(R),e=Math.cos(R),i=[e,-t,t,e];A._matMult(i),O._matMult(i),D._matMult(i),I._matMult(i)}const F=n.stretch+n.fixed,B=o.stretch+o.fixed;return{tl:A,tr:O,bl:D,br:I,tex:{x:a.paddedRect.x+1+F,y:a.paddedRect.y+1+B,w:l.stretch+l.fixed-F,h:c.stretch+c.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:L,minFontScaleX:E/s/u,minFontScaleY:P/s/h,isSDF:i}};if(n&&(a.stretchX||a.stretchY)){const t=Bu(d,v,m),e=Bu(p,g,y);for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1];for(let t=0;t<e.length-1;t++)o.push(T(n,e[t],r,e[t+1]))}}else o.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function Fu(t,e,i){let n=0;for(const r of t)n+=Math.max(e,Math.min(i,r[1]))-Math.max(e,Math.min(i,r[0]));return n}function Bu(t,e,i){const n=[{fixed:-1,stretch:0}];for(const[r,o]of t){const t=n[n.length-1];n.push({fixed:r-t.stretch,stretch:t.stretch}),n.push({fixed:r-t.stretch,stretch:t.stretch+(o-r)})}return n.push({fixed:e+1,stretch:i}),n}function ju(t,e,i,n){return t/e*i+n}function Nu(t,e,i,n){return t-e*i/n}function Vu(t,e,i,n){const r=e+t.positionedLines[n].lineOffset;return 0===n?i+r/2:i+(r+(e+t.positionedLines[n-1].lineOffset))/2}Lu.loadGlyphRange=function(t,e,i,n,r){const o=256*e,a=o+255,s=n.transformRequest(n.normalizeGlyphsURL(i).replace("{fontstack}",t).replace("{range}","".concat(o,"-").concat(a)),xt.Glyphs);kt(s,((t,e)=>{if(t)r(t);else if(e){const t={},i=function(t){return new zc(t).readFields(tu,{})}(e);for(const e of i.glyphs)t[e.id]=e;r(null,{glyphs:t,ascender:i.ascender,descender:i.descender})}}))},Lu.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:i=8,cutoff:n=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}){this.buffer=e,this.cutoff=n,this.radius=i;const s=this.size=t+4*e,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(a," ").concat(o," ").concat(t,"px ").concat(r),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:n,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.floor(i),s=Math.min(this.size-this.buffer,Math.ceil(o-r)),l=Math.min(this.size-this.buffer,Math.ceil(i)+Math.ceil(n)),c=s+2*this.buffer,u=l+2*this.buffer,h=c*u,d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:y,gridOuter:v}=this;f.clearRect(m,m,s,l),f.fillText(t,m,m+a+1);const g=f.getImageData(m,m,s,l);v.fill(Ou,0,h),y.fill(0,0,h);for(let _=0;_<l;_++)for(let t=0;t<s;t++){const e=g.data[4*(_*s+t)+3]/255;if(0===e)continue;const i=(_+m)*c+t+m;if(1===e)v[i]=0,y[i]=Ou;else{const t=.5-e;v[i]=t>0?t*t:0,y[i]=t<0?t*t:0}}Iu(v,0,0,c,u,c,this.f,this.v,this.z),Iu(y,m,m,s,l,c,this.f,this.v,this.z);for(let _=0;_<h;_++){const t=Math.sqrt(v[_])-Math.sqrt(y[_]);d[_]=Math.round(255-255*(t/this.radius+this.cutoff))}return p}};class Uu{constructor(t=[],e=Gu){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,n=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(i(n,o)>=0)break;e[t]=o,t=r}e[t]=n}_down(t){const{data:e,compare:i}=this,n=this.length>>1,r=e[t];for(;t<n;){let n=1+(t<<1),o=e[n];const a=n+1;if(a<this.length&&i(e[a],o)<0&&(n=a,o=e[a]),i(o,r)>=0)break;e[t]=o,t=n}e[t]=r}}function Gu(t,e){return t<e?-1:t>e?1:0}function qu(t,e=1,i=!1){let n=1/0,o=1/0,a=-1/0,s=-1/0;const l=t[0];for(let r=0;r<l.length;r++){const t=l[r];(!r||t.x<n)&&(n=t.x),(!r||t.y<o)&&(o=t.y),(!r||t.x>a)&&(a=t.x),(!r||t.y>s)&&(s=t.y)}const c=Math.min(a-n,s-o);let u=c/2;const h=new Uu([],Zu);if(0===c)return new r(n,o);for(let r=n;r<a;r+=c)for(let e=o;e<s;e+=c)h.push(new Hu(r+u,e+u,u,t));let d=function(t){let e=0,i=0,n=0;const r=t[0];for(let o=0,a=r.length,s=a-1;o<a;s=o++){const t=r[o],a=r[s],l=t.x*a.y-a.x*t.y;i+=(t.x+a.x)*l,n+=(t.y+a.y)*l,e+=3*l}return new Hu(i/e,n/e,0,t)}(t),p=h.length;for(;h.length;){const n=h.pop();(n.d>d.d||!d.d)&&(d=n,i&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,p)),n.max-d.d<=e||(u=n.h/2,h.push(new Hu(n.p.x-u,n.p.y-u,u,t)),h.push(new Hu(n.p.x+u,n.p.y-u,u,t)),h.push(new Hu(n.p.x-u,n.p.y+u,u,t)),h.push(new Hu(n.p.x+u,n.p.y+u,u,t)),p+=4)}return i&&(console.log("num probes: ".concat(p)),console.log("best distance: ".concat(d.d))),d.p}function Zu(t,e){return e.max-t.max}function Hu(t,e,i,n){this.p=new r(t,e),this.h=i,this.d=function(t,e){let i=!1,n=1/0;for(let r=0;r<e.length;r++){const o=e[r];for(let e=0,r=o.length,a=r-1;e<r;a=e++){const r=o[e],s=o[a];r.y>t.y!=s.y>t.y&&t.x<(s.x-r.x)*(t.y-r.y)/(s.y-r.y)+r.x&&(i=!i),n=Math.min(n,ns(t,r,s))}}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const Wu=Number.POSITIVE_INFINITY,Xu=Math.sqrt(2);function Yu(t,e){return e[1]!==Wu?function(t,e,i){let n=0,r=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":r=i-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-i}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,r]}(t,e[0],e[1]):function(t,e){let i=0,n=0;e<0&&(e=0);const r=e/Xu;switch(t){case"top-right":case"top-left":n=r-7;break;case"bottom-right":case"bottom-left":n=7-r;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":i=-r;break;case"top-left":case"bottom-left":i=r;break;case"left":i=e;break;case"right":i=-e}return[i,n]}(t,e[0])}function Ku(t,e,i,n,r,o,a,s){t.createArrays(),t.tilePixelRatio=Ga/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const l=t.layers[0].layout,c=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:i}=t.textSizeData;u.compositeTextSizes=[c["text-size"].possiblyEvaluate(new ao(e),a),c["text-size"].possiblyEvaluate(new ao(i),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:i}=t.iconSizeData;u.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new ao(e),a),c["icon-size"].possiblyEvaluate(new ao(i),a)]}u.layoutTextSize=c["text-size"].possiblyEvaluate(new ao(s+1),a),u.layoutIconSize=c["icon-size"].possiblyEvaluate(new ao(s+1),a),u.textMaxSize=c["text-size"].possiblyEvaluate(new ao(18),a);const h="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),d=l.get("text-size");for(const p of t.features){const o=l.get("text-font").evaluate(p,{},a).join(","),s=d.evaluate(p,{},a),c=u.layoutTextSize.evaluate(p,{},a),f=(u.layoutIconSize.evaluate(p,{},a),{horizontal:{},vertical:void 0}),m=p.text;let y,v=[0,0];if(m){const n=m.toString(),u=l.get("text-letter-spacing").evaluate(p,{},a)*wc,d=l.get("text-line-height").evaluate(p,{},a)*wc,y=Vr(n)?u:0,g=l.get("text-anchor").evaluate(p,{},a),_=l.get("text-variable-anchor");if(!_){const t=l.get("text-radial-offset").evaluate(p,{},a);v=t?Yu(g,[t*wc,Wu]):l.get("text-offset").evaluate(p,{},a).map((t=>t*wc))}let b=h?"center":l.get("text-justify").evaluate(p,{},a);const x=l.get("symbol-placement"),w="point"===x,S="point"===x?l.get("text-max-width").evaluate(p,{},a)*wc:0,E=a=>{t.allowVerticalPlacement&&Nr(n)&&(f.vertical=cu(m,e,i,r,o,S,d,g,a,y,v,au.vertical,!0,x,c,s))};if(!h&&_){const t="auto"===b?_.map((t=>$u(t))):[b];let n=!1;for(let a=0;a<t.length;a++){const l=t[a];if(!f.horizontal[l])if(n)f.horizontal[l]=f.horizontal[0];else{const t=cu(m,e,i,r,o,S,d,"center",l,y,v,au.horizontal,!1,x,c,s);t&&(f.horizontal[l]=t,n=1===t.positionedLines.length)}}E("left")}else{if("auto"===b&&(b=$u(g)),w||l.get("text-writing-mode").indexOf("horizontal")>=0||!Nr(n)){const t=cu(m,e,i,r,o,S,d,g,b,y,v,au.horizontal,!1,x,c,s);t&&(f.horizontal[b]=t)}E("point"===x?"left":b)}}let g=!1;if(p.icon&&p.icon.name){const e=n[p.icon.name];e&&(y=bu(r[p.icon.name],l.get("icon-offset").evaluate(p,{},a),l.get("icon-anchor").evaluate(p,{},a)),g=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const _=eh(f.horizontal)||f.vertical;t.iconsInText||(t.iconsInText=!!_&&_.iconsInText),(_||y)&&Ju(t,p,f,y,n,u,c,0,v,g,a)}o&&t.generateCollisionDebugBuffers(s,t.collisionBoxArray)}function $u(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ju(t,e,i,n,r,o,a,s,l,c,h){let d=o.textMaxSize.evaluate(e,{},h);void 0===d&&(d=a);const p=t.layers[0].layout,f=p.get("icon-offset").evaluate(e,{},h),m=eh(i.horizontal)||i.vertical,y=a/24,v=t.tilePixelRatio*d/24,g=t.tilePixelRatio*p.get("symbol-spacing"),_=p.get("text-padding")*t.tilePixelRatio,b=p.get("icon-padding")*t.tilePixelRatio,x=u(p.get("text-max-angle")),w="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),S="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),E=p.get("symbol-placement"),k=g/2,P=p.get("icon-text-fit");let T;n&&"none"!==P&&(t.allowVerticalPlacement&&i.vertical&&(T=xu(n,i.vertical,P,p.get("icon-text-fit-padding"),f,y)),m&&(n=xu(n,m,P,p.get("icon-text-fit-padding"),f,y)));const C=(a,s)=>{s.x<0||s.x>=Ga||s.y<0||s.y>=Ga||function(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v,g,_,b,x,w,S){const E=t.addToLineVertexArray(e,n);let k,P,T,C,M,A,I,D=0,z=0,L=0,R=0,F=-1,B=-1;const j={};let N=pa(""),V=0,U=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[V,U]=l.layout.get("text-offset").evaluate(b,{},S).map((t=>t*wc)):(V=l.layout.get("text-radial-offset").evaluate(b,{},S)*wc,U=Wu),t.allowVerticalPlacement&&r.vertical){const t=r.vertical;if(f)A=nh(t),s&&(I=nh(s));else{const n=l.layout.get("text-rotate").evaluate(b,{},S)+90;T=ih(c,i,e,u,h,d,t,p,n,m),s&&(C=ih(c,i,e,u,h,d,s,v,n))}}if(o){const n=l.layout.get("icon-rotate").evaluate(b,{},S),r="none"!==l.layout.get("icon-text-fit"),a=Ru(o,n,w,r),p=s?Ru(s,n,w,r):void 0;P=ih(c,i,e,u,h,d,o,v,n),D=4*a.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[Sc*l.layout.get("icon-size").evaluate(b,{},S)],m[0]>Qu&&O("".concat(t.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[Sc*x.compositeIconSizes[0].evaluate(b,{},S),Sc*x.compositeIconSizes[1].evaluate(b,{},S)],(m[0]>Qu||m[1]>Qu)&&O("".concat(t.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".'))),t.addSymbols(t.icon,a,m,_,g,b,!1,i,e,E.lineStartIndex,E.lineLength,-1,S),F=t.icon.placedSymbolArray.length-1,p&&(z=4*p.length,t.addSymbols(t.icon,p,m,_,g,b,au.vertical,i,e,E.lineStartIndex,E.lineLength,-1,S),B=t.icon.placedSymbolArray.length-1)}for(const O in r.horizontal){const n=r.horizontal[O];k||(N=pa(n.text),f?M=nh(n):k=ih(c,i,e,u,h,d,n,p,l.layout.get("text-rotate").evaluate(b,{},S),m));const o=1===n.positionedLines.length;if(L+=th(t,i,e,n,a,l,f,b,m,E,r.vertical?au.horizontal:au.horizontalOnly,o?Object.keys(r.horizontal):[O],j,F,x,S),o)break}r.vertical&&(R+=th(t,i,e,r.vertical,a,l,f,b,m,E,au.vertical,["vertical"],j,B,x,S));let G=-1;const q=(t,e)=>t?Math.max(t,e):e;G=q(M,G),G=q(A,G),G=q(I,G);const Z=G>-1?1:0;t.glyphOffsetArray.length>=dh.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(i.x,i.y,i.z,e.x,e.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical>=0?j.vertical:-1,F,B,N,void 0!==k?k:t.collisionBoxArray.length,void 0!==k?k+1:t.collisionBoxArray.length,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==P?P:t.collisionBoxArray.length,void 0!==P?P+1:t.collisionBoxArray.length,C||t.collisionBoxArray.length,C?C+1:t.collisionBoxArray.length,u,L,R,D,z,Z,0,V,U,G)}(t,s,s,a,i,n,r,T,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,_,w,l,0,b,S,f,e,o,c,h)};if("line"===E)for(const u of Au(e.geometry,0,0,Ga,Ga)){const e=Cu(u,g,x,i.vertical||m,n,24,v,t.overscaling,Ga);for(const i of e){const e=m;e&&rh(t,e.text,k,i)||C(u,i)}}else if("line-center"===E){for(const u of e.geometry)if(u.length>1){const t=Tu(u,x,i.vertical||m,n,24,v);t&&C(u,t)}}else if("Polygon"===e.type)for(const u of Ml(e.geometry,0)){const t=qu(u,16);C(u[0],new wu(t.x,t.y,0,0,void 0))}else if("LineString"===e.type)for(const u of e.geometry)C(u,new wu(u[0].x,u[0].y,0,0,void 0));else if("Point"===e.type)for(const u of e.geometry)for(const t of u)C([t],new wu(t.x,t.y,0,0,void 0))}const Qu=32640;function th(t,e,i,n,o,a,s,l,c,u,h,d,p,f,m,y){const v=function(t,e,i,n,o,a,s,l){const c=[];if(0===e.positionedLines.length)return c;const u=n.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,h=function(t){const e=t[0],i=t[1],n=e*i;return n>0?[e,-i]:n<0?[-e,i]:0===e?[i,e]:[i,-e]}(i);let d=Math.abs(e.top-e.bottom);for(const r of e.positionedLines)d-=r.lineOffset;const p=e.positionedLines.length,f=d/p;let m=e.top-i[1];for(let y=0;y<p;++y){const t=e.positionedLines[y];m=Vu(e,f,m,y);for(const n of t.positionedGlyphs){if(!n.rect)continue;const t=n.rect||{};let a=4,d=!0,p=1,f=0;if(n.imageName){const t=s[n.imageName];if(!t)continue;if(t.sdf){O("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,p=t.pixelRatio,a=1/p}const y=(o||l)&&n.vertical,v=n.metrics.advance*n.scale/2,g=n.metrics,_=n.rect;if(null===_)continue;l&&e.verticalizable&&(f=n.imageName?v-n.metrics.width*n.scale/2:0);const b=o?[n.x+v,n.y]:[0,0];let x=[0,0],w=[0,0],S=!1;o||(y?(w=[n.x+v+h[0],n.y+h[1]-f],S=!0):x=[n.x+v+i[0],n.y+i[1]-f]);const E=_.w*n.scale/(p*(n.localGlyph?2:1)),k=_.h*n.scale/(p*(n.localGlyph?2:1));let P,T,C,M;if(y){const t=n.y-m,e=new r(-v,v-t),i=-Math.PI/2,o=new r(...w);P=new r(-v+x[0],x[1]),P._rotateAround(i,e)._add(o),P.x+=-t+v,P.y-=(g.left-a)*n.scale;const s=n.imageName?g.advance*n.scale:wc*n.scale,l=String.fromCharCode(n.glyph);Ac(l)?P.x+=(1-a)*n.scale:Oc(l)?P.x+=s-g.height*n.scale+(-a-1)*n.scale:P.x+=n.imageName||g.width+2*a===_.w&&g.height+2*a===_.h?(s-k)/2:(s-(g.height+2*a)*n.scale)/2,T=new r(P.x,P.y-E),C=new r(P.x+k,P.y),M=new r(P.x+k,P.y-E)}else{const t=(g.left-a)*n.scale-v+x[0],e=(-g.top-a)*n.scale+x[1],i=t+E,o=e+k;P=new r(t,e),T=new r(i,e),C=new r(t,o),M=new r(i,o)}if(u){let t;t=o?new r(0,0):S?new r(h[0],h[1]):new r(i[0],i[1]),P._rotateAround(u,t),T._rotateAround(u,t),C._rotateAround(u,t),M._rotateAround(u,t)}const A=new r(0,0),I=new r(0,0);c.push({tl:P,tr:T,bl:C,br:M,tex:t,writingMode:e.writingMode,glyphOffset:b,sectionIndex:n.sectionIndex,isSDF:d,pixelOffsetTL:A,pixelOffsetBR:I,minFontScaleX:0,minFontScaleY:0})}}return c}(0,n,c,a,s,l,o,t.allowVerticalPlacement),g=t.textSizeData;let _=null;"source"===g.kind?(_=[Sc*a.layout.get("text-size").evaluate(l,{},y)],_[0]>Qu&&O("".concat(t.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".'))):"composite"===g.kind&&(_=[Sc*m.compositeTextSizes[0].evaluate(l,{},y),Sc*m.compositeTextSizes[1].evaluate(l,{},y)],(_[0]>Qu||_[1]>Qu)&&O("".concat(t.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".'))),t.addSymbols(t.text,v,_,c,s,l,h,e,i,u.lineStartIndex,u.lineLength,f,y);for(const r of d)p[r]=t.text.placedSymbolArray.length-1;return 4*v.length}function eh(t){for(const e in t)return t[e];return null}function ih(t,e,i,n,o,a,s,l,c,h){let d=s.top,p=s.bottom,f=s.left,m=s.right;const y=s.collisionPadding;if(y&&(f-=y[0],d-=y[1],m+=y[2],p+=y[3]),c){const t=new r(f,d),e=new r(m,d),i=new r(f,p),n=new r(m,p),o=u(c);let a=new r(0,0);h&&(a=new r(h[0],h[1])),t._rotateAround(o,a),e._rotateAround(o,a),i._rotateAround(o,a),n._rotateAround(o,a),f=Math.min(t.x,e.x,i.x,n.x),m=Math.max(t.x,e.x,i.x,n.x),d=Math.min(t.y,e.y,i.y,n.y),p=Math.max(t.y,e.y,i.y,n.y)}return t.emplaceBack(e.x,e.y,e.z,i.x,i.y,f,d,m,p,l,n,o,a),t.length-1}function nh(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function rh(t,e,i,n){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(n.dist(t[e])<i)return!0}else r[e]=[];return r[e].push(n),!1}const oh=Wl.VectorTileFeature.types,ah=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sh(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m){const y=u?Math.min(Qu,Math.round(u[0])):0,v=u?Math.min(Qu,Math.round(u[1])):0;t.emplaceBack(e,i,Math.round(32*a),Math.round(32*s),l,c,(y<<1)+(h?1:0),v,16*d,16*p,256*f,256*m,n,r,o,0)}function lh(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function ch(t){for(const e of t.sections)if(Wr(e.text))return!0;return!1}class uh{constructor(t){this.layoutVertexArray=new zo,this.indexArray=new No,this.programConfigurations=t,this.segments=new Ua,this.dynamicLayoutVertexArray=new Oo,this.opacityVertexArray=new Lo,this.placedSymbolArray=new ta}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,i,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,yc.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,vc.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ah,!0),this.opacityVertexBuffer.itemSize=1),(i||n)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}sr("SymbolBuffers",uh);class hh{constructor(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new Ua,this.collisionVertexArray=new jo,this.collisionVertexArrayExt=new Oo}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,gc.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,_c.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}sr("CollisionBuffers",hh);class dh{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ys([]),this.placementViewportMatrix=ys([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ec(this.zoom,e["text-size"]),this.iconSizeData=Ec(this.zoom,e["icon-size"]);const i=this.layers[0].layout,n=i.get("symbol-sort-key"),r=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=i.get("text-writing-mode").map((t=>au[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID}createArrays(){this.text=new uh(new Ia(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new uh(new Ia(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new na,this.lineVertexArray=new ra,this.symbolInstances=new ia}calculateGlyphDependencies(t,e,i,n,r){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,n&&r){const i=Mc[t.charAt(o)];i&&(e[i.charCodeAt(0)]=!0)}}populate(t,e,i){const n=this.layers[0],r=n.layout,o=r.get("text-font"),a=r.get("text-field"),s=r.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof pe&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,u=r.get("symbol-sort-key");if(this.features=[],!l&&!c)return;const h=e.iconDependencies,d=e.glyphDependencies,p=e.availableImages,f=new ao(this.zoom);for(const{feature:m,id:y,index:v,sourceLayerIndex:g}of t){const t=n._featureFilter.needGeometry,e=Wa(m,t);if(!n._featureFilter.filter(f,e,i))continue;let a,s;if(t||(e.geometry=Ha(m)),l){const t=n.getValueAndResolveTokens("text-field",e,i,p),r=pe.factory(t);ch(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===no()||this.hasRTLText&&oo.isParsed())&&(a=Cc(r,n,e))}if(c){const t=n.getValueAndResolveTokens("icon-image",e,i,p);s=t instanceof fe?t:fe.fromString(t)}if(!a&&!s)continue;const _=this.sortFeaturesByKey?u.evaluate(e,{},i):void 0;if(this.features.push({id:y,text:a,icon:s,index:v,sourceLayerIndex:g,geometry:e.geometry,properties:m.properties,type:oh[m.type],sortKey:_}),s&&(h[s.name]=!0),a){const t=o.evaluate(e,{},i).join(","),n="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(au.vertical)>=0;for(const e of a.sections)if(e.image)h[e.image.name]=!0;else{const i=Nr(a.toString()),r=e.fontStack||t,o=d[r]=d[r]||{};this.calculateGlyphDependencies(e.text,o,n,this.allowVerticalPlacement,i)}}}"line"===r.get("symbol-placement")&&(this.features=function(t){const e={},i={},n=[];let r=0;function o(e){n.push(t[e]),r++}function a(t,e,r){const o=i[t];return delete i[t],i[e]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(r[0]),o}function s(t,i,r){const o=e[i];return delete e[i],e[t]=o,n[o].geometry[0].shift(),n[o].geometry[0]=r[0].concat(n[o].geometry[0]),o}function l(t,e,i){const n=i?e[0][e[0].length-1]:e[0][0];return"".concat(t,":").concat(n.x,":").concat(n.y)}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in i&&f in e&&i[p]!==e[f]){const t=s(p,f,h),r=a(p,f,n[t].geometry);delete e[p],delete i[f],i[l(d,n[r].geometry,!0)]=r,n[t].geometry=null}else p in i?a(p,f,h):f in e?s(p,f,h):(o(c),e[p]=r-1,i[f]=r-1)}return n.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const i=this.lineVertexArray.length;if(void 0!==t.segment){let i=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]);const r={};for(let o=t.segment+1;o<e.length;o++)r[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:i},o<e.length-1&&(i+=e[o+1].dist(e[o]));for(let o=t.segment||0;o>=0;o--)r[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o>0&&(n+=e[o-1].dist(e[o]));for(let t=0;t<e.length;t++){const e=r[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(t,e,i,n,r,o,a,s,l,c,u,h,d){const p=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*e.length,f,p,this.canOverlap?o.sortKey:void 0),y=this.glyphOffsetArray.length,v=m.vertexLength,g=this.allowVerticalPlacement&&a===au.vertical?Math.PI/2:0,_=o.text&&o.text.sections;for(let b=0;b<e.length;b++){const{tl:n,tr:r,bl:a,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:y,minFontScaleX:v,minFontScaleY:x,glyphOffset:w,isSDF:S,sectionIndex:E}=e[b],k=m.vertexLength,P=w[1];sh(f,s.x,s.y,s.z,l.x,l.y,n.x,P+n.y,u.x,u.y,i,S,h.x,h.y,v,x),sh(f,s.x,s.y,s.z,l.x,l.y,r.x,P+r.y,u.x+u.w,u.y,i,S,y.x,h.y,v,x),sh(f,s.x,s.y,s.z,l.x,l.y,a.x,P+a.y,u.x,u.y+u.h,i,S,h.x,y.y,v,x),sh(f,s.x,s.y,s.z,l.x,l.y,c.x,P+c.y,u.x+u.w,u.y+u.h,i,S,y.x,y.y,v,x),lh(t.dynamicLayoutVertexArray,s,g),p.emplaceBack(k,k+1,k+2),p.emplaceBack(k+1,k+2,k+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(w[0]),b!==e.length-1&&E===e[b+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,o,o.index,{},d,_&&_[E])}t.placedSymbolArray.emplaceBack(s.x,s.y,s.z,l.x,l.y,y,this.glyphOffsetArray.length-y,v,c,u,l.segment,i?i[0]:0,i?i[1]:0,n[0],n[1],a,0,!1,0,h,0)}_commitLayoutVertex(t,e,i,n,r,o,a){t.emplaceBack(e,i,n,r,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(t,e,i,n,o,a,s){const l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),c=l.vertexLength,u=s.tileAnchorX,h=s.tileAnchorY;for(let r=0;r<4;r++)i.collisionVertexArray.emplaceBack(0,0,0,0);i.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),i.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),i.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),i.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(i.layoutVertexArray,n,o,a,u,h,new r(t.x1,t.y1)),this._commitLayoutVertex(i.layoutVertexArray,n,o,a,u,h,new r(t.x2,t.y1)),this._commitLayoutVertex(i.layoutVertexArray,n,o,a,u,h,new r(t.x2,t.y2)),this._commitLayoutVertex(i.layoutVertexArray,n,o,a,u,h,new r(t.x1,t.y2)),l.vertexLength+=4;const d=i.indexArray;d.emplaceBack(c,c+1),d.emplaceBack(c+1,c+2),d.emplaceBack(c+2,c+3),d.emplaceBack(c+3,c),l.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,i,n,r,o){for(let a=n;a<r;a++){const n=i.get(a),r=this.getSymbolInstanceTextSize(t,o,e,a);this._addCollisionDebugVertices(n,r,this.textCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(t,e,i,n,r,o){for(let a=n;a<r;a++){const n=i.get(a),r=this.getSymbolInstanceIconSize(t,e,a);this._addCollisionDebugVertices(n,r,this.iconCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hh(Fo,bc.members,Ho),this.iconCollisionBox=new hh(Fo,bc.members,Ho);const i=Pc(this.iconSizeData,t),n=Pc(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(n,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(n,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(i,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(i,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,i,n){const r=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:n),o=kc(this.textSizeData,t,r)/wc;return this.tilePixelRatio*o}getSymbolInstanceIconSize(t,e,i){const n=this.icon.placedSymbolArray.get(i),r=kc(this.iconSizeData,t,n);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(t,e,i){t.emplaceBack(e,-i,-i),t.emplaceBack(e,i,-i),t.emplaceBack(e,i,i),t.emplaceBack(e,-i,i)}_updateTextDebugCollisionBoxes(t,e,i,n,r,o){for(let a=n;a<r;a++){const n=i.get(a),r=this.getSymbolInstanceTextSize(t,o,e,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,r,n.padding)}}_updateIconDebugCollisionBoxes(t,e,i,n,r){for(let o=n;o<r;o++){const n=i.get(o),r=this.getSymbolInstanceIconSize(t,e,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,r,n.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const i=Pc(this.iconSizeData,t),n=Pc(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(n,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(n,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(i,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(i,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,i,n,r,o,a,s,l){const c={};for(let u=e;u<i;u++){const e=t.get(u);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},c.textFeatureIndex=e.featureIndex;break}for(let u=n;u<r;u++){const e=t.get(u);c.verticalTextBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},c.verticalTextFeatureIndex=e.featureIndex;break}for(let u=o;u<a;u++){const e=t.get(u);c.iconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},c.iconFeatureIndex=e.featureIndex;break}for(let u=s;u<l;u++){const e=t.get(u);c.verticalIconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},c.verticalIconFeatureIndex=e.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const i=t.placedSymbolArray.get(e),n=i.vertexStartIndex+4*i.numGlyphs;for(let r=i.vertexStartIndex;r<n;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),i=Math.cos(t),n=[],r=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const t=this.symbolInstances.get(a);n.push(0|Math.round(e*t.tileAnchorX+i*t.tileAnchorY)),r.push(t.featureIndex)}return o.sort(((t,e)=>n[t]-n[e]||r[e]-r[t])),o}addToSortKeyRanges(t,e){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,i)=>{t>=0&&i.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}sr("SymbolBucket",dh,{omit:["layers","collisionBoxArray","features","compareText"]}),dh.MAX_GLYPHS=65535,dh.addDynamicAttributes=lh;const ph=new xo({"symbol-placement":new yo(Bt.layout_symbol["symbol-placement"]),"symbol-spacing":new yo(Bt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yo(Bt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vo(Bt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yo(Bt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yo(Bt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yo(Bt.layout_symbol["icon-ignore-placement"]),"icon-optional":new yo(Bt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yo(Bt.layout_symbol["icon-rotation-alignment"]),"icon-size":new vo(Bt.layout_symbol["icon-size"]),"icon-text-fit":new yo(Bt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yo(Bt.layout_symbol["icon-text-fit-padding"]),"icon-image":new vo(Bt.layout_symbol["icon-image"]),"icon-rotate":new vo(Bt.layout_symbol["icon-rotate"]),"icon-padding":new yo(Bt.layout_symbol["icon-padding"]),"icon-keep-upright":new yo(Bt.layout_symbol["icon-keep-upright"]),"icon-offset":new vo(Bt.layout_symbol["icon-offset"]),"icon-anchor":new vo(Bt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yo(Bt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yo(Bt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yo(Bt.layout_symbol["text-rotation-alignment"]),"text-field":new vo(Bt.layout_symbol["text-field"]),"text-font":new vo(Bt.layout_symbol["text-font"]),"text-size":new vo(Bt.layout_symbol["text-size"]),"text-max-width":new vo(Bt.layout_symbol["text-max-width"]),"text-line-height":new vo(Bt.layout_symbol["text-line-height"]),"text-letter-spacing":new vo(Bt.layout_symbol["text-letter-spacing"]),"text-justify":new vo(Bt.layout_symbol["text-justify"]),"text-radial-offset":new vo(Bt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yo(Bt.layout_symbol["text-variable-anchor"]),"text-anchor":new vo(Bt.layout_symbol["text-anchor"]),"text-max-angle":new yo(Bt.layout_symbol["text-max-angle"]),"text-writing-mode":new yo(Bt.layout_symbol["text-writing-mode"]),"text-rotate":new vo(Bt.layout_symbol["text-rotate"]),"text-padding":new yo(Bt.layout_symbol["text-padding"]),"text-keep-upright":new yo(Bt.layout_symbol["text-keep-upright"]),"text-transform":new vo(Bt.layout_symbol["text-transform"]),"text-offset":new vo(Bt.layout_symbol["text-offset"]),"text-allow-overlap":new yo(Bt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yo(Bt.layout_symbol["text-ignore-placement"]),"text-optional":new yo(Bt.layout_symbol["text-optional"])});var fh={paint:new xo({"icon-opacity":new vo(Bt.paint_symbol["icon-opacity"]),"icon-color":new vo(Bt.paint_symbol["icon-color"]),"icon-halo-color":new vo(Bt.paint_symbol["icon-halo-color"]),"icon-halo-width":new vo(Bt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vo(Bt.paint_symbol["icon-halo-blur"]),"icon-translate":new yo(Bt.paint_symbol["icon-translate"]),"icon-translate-anchor":new yo(Bt.paint_symbol["icon-translate-anchor"]),"text-opacity":new vo(Bt.paint_symbol["text-opacity"]),"text-color":new vo(Bt.paint_symbol["text-color"],{runtimeType:Kt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new vo(Bt.paint_symbol["text-halo-color"]),"text-halo-width":new vo(Bt.paint_symbol["text-halo-width"]),"text-halo-blur":new vo(Bt.paint_symbol["text-halo-blur"]),"text-translate":new yo(Bt.paint_symbol["text-translate"]),"text-translate-anchor":new yo(Bt.paint_symbol["text-translate-anchor"])}),layout:ph};class mh{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ht,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}sr("FormatSectionOverride",mh,{omit:["defaultValue"]});class yh extends ja{constructor(t){super(t,fh)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const i=this.layout.get("text-writing-mode");if(i){const t=[];for(const e of i)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,i,n){const r=this.layout.get(t).evaluate(e,{},i,n),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||cn(o.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,i)=>i in t?String(t[i]):""))}(e.properties,r)}createBucket(t){return new dh(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of fh.paint.overridableProperties){if(!yh.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),i=new mh(e),n=new ln(i,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new hn("source",n):new dn("composite",n,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new fo(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&yh.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const i=t.get("text-field"),n=fh.paint.properties[e];let r=!1;const o=t=>{for(const e of t)if(n.overrides&&n.overrides.hasOverride(e))return void(r=!0)};if("constant"===i.value.kind&&i.value.value instanceof pe)o(i.value.value.sections);else if("source"===i.value.kind){const t=e=>{r||(e instanceof _e&&ve(e.value)===te?o(e.value.sections):e instanceof Se?o(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return r}getProgramConfiguration(t){return new Oa(this,t)}}var vh={paint:new xo({"background-color":new yo(Bt.paint_background["background-color"]),"background-pattern":new _o(Bt.paint_background["background-pattern"]),"background-opacity":new yo(Bt.paint_background["background-opacity"])})},gh={paint:new xo({"raster-opacity":new yo(Bt.paint_raster["raster-opacity"]),"raster-hue-rotate":new yo(Bt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yo(Bt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yo(Bt.paint_raster["raster-brightness-max"]),"raster-saturation":new yo(Bt.paint_raster["raster-saturation"]),"raster-contrast":new yo(Bt.paint_raster["raster-contrast"]),"raster-resampling":new yo(Bt.paint_raster["raster-resampling"]),"raster-fade-duration":new yo(Bt.paint_raster["raster-fade-duration"])})};class _h extends ja{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var bh={paint:new xo({"sky-type":new yo(Bt.paint_sky["sky-type"]),"sky-atmosphere-sun":new yo(Bt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new yo(Bt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new yo(Bt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new yo(Bt.paint_sky["sky-gradient-radius"]),"sky-gradient":new bo(Bt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new yo(Bt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new yo(Bt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new yo(Bt.paint_sky["sky-opacity"])})};function xh(t,e,i){const n=xs(0,0,1),r=Ds(Is());return function(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);t[0]=n*l-o*s,t[1]=r*l+a*s,t[2]=o*l+n*s,t[3]=a*l-r*s}(r,r,i?-u(t)+Math.PI:u(t)),zs(r,r,-u(e)),Ps(n,n,r),ks(n,n)}const wh={circle:class extends ja{constructor(t){super(t,ps)}createBucket(t){return new Ya(t)}queryRadius(t){const e=t;return ls("circle-radius",this,e)+ls("circle-stroke-width",this,e)+cs(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,i,n,r,o,a,s){const l=hs(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i);return Ls(t,n,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Oa(this,t)}},heatmap:class extends ja{createBucket(t){return new Ns(t)}constructor(t){super(t,Hs),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ws({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return ls("heatmap-radius",this,t)}queryIntersectsFeature(t,e,i,n,o,a,s,l){const c=this.paint.get("heatmap-radius").evaluate(e,i);return Ls(t,n,a,s,l,!0,!0,new r(0,0),c)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Oa(this,t)}},hillshade:class extends ja{constructor(t){super(t,Xs)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(t){return new Oa(this,t)}},fill:class extends ja{constructor(t){super(t,Ll)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),i=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(t){return new Oa(this,t)}recalculate(t,e){super.recalculate(t,e);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Dl(t)}queryRadius(){return cs(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,i,n,r,o){return!t.queryGeometry.isAboveHorizon&&Ja(us(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends ja{constructor(t){super(t,tc)}createBucket(t){return new Jl(t)}queryRadius(){return cs(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Oa(this,t)}queryIntersectsFeature(t,e,i,n,o,a,s,l,c){const u=hs(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,t.pixelToTileUnitsFactor),h=this.paint.get("fill-extrusion-height").evaluate(e,i),d=this.paint.get("fill-extrusion-base").evaluate(e,i),p=[0,0],f=l&&a.elevation,m=a.elevation?a.elevation.exaggeration():1;if(f){const e=t.tile.getBucket(this).centroidVertexArray,i=c+1;if(i<e.length){const t=e.get(i);p[0]=t.a_centroid_pos0,p[1]=t.a_centroid_pos1}}if(0===p[0]&&1===p[1])return!1;const y=function(t,e,i,n,o,a,s,l,c){return a?function(t,e,i,n,r,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of t){const t=[],p=[];for(const c of d){const u=c.x+n.x,d=c.y+n.y,f=rc(u,d,e,i,o,a,s,l);h[0]=u,h[1]=d,h[2]=f.base,h[3]=1,Os(h,h,r),h[3]=Math.max(h[3],1e-5);const m=nc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);h[0]=u,h[1]=d,h[2]=f.top,h[3]=1,Os(h,h,r),h[3]=Math.max(h[3],1e-5);const y=nc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);t.push(m),p.push(y)}c.push(t),u.push(p)}return[c,u]}(t,e,i,n,o,a,s,l,c):function(t,e,i,n,o){const a=[],s=[],l=o[8]*e,c=o[9]*e,u=o[10]*e,h=o[11]*e,d=o[8]*i,p=o[9]*i,f=o[10]*i,m=o[11]*i;for(const y of t){const t=[],e=[];for(const i of y){const a=i.x+n.x,s=i.y+n.y,y=o[0]*a+o[4]*s+o[12],v=o[1]*a+o[5]*s+o[13],g=o[2]*a+o[6]*s+o[14],_=o[3]*a+o[7]*s+o[15],b=y+l,x=v+c,w=g+u,S=Math.max(_+h,1e-5),E=y+d,k=v+p,P=g+f,T=Math.max(_+m,1e-5),C=new r(b/S,x/S);C.z=w/S,t.push(C);const M=new r(E/T,k/T);M.z=P/T,e.push(M)}a.push(t),s.push(e)}return[a,s]}(t,e,i,n,o)}(n,d,h,u,s,f?l:null,p,m,a.center.lat),v=t.queryGeometry;return function(t,e,i){let n=1/0;Ja(i,e)&&(n=ic(i,e[0]));for(let r=0;r<e.length;r++){const o=e[r],a=t[r];for(let t=0;t<o.length-1;t++){const e=o[t],r=[e,o[t+1],a[t+1],a[t],e];Ka(i,r)&&(n=Math.min(n,ic(i,r)))}}return n!==1/0&&n}(y[0],y[1],v.isPointQuery()?v.screenBounds:v.screenGeometry)}},line:class extends ja{constructor(t){super(t,pc),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof ei,this.gradientVersion=(this.gradientVersion+1)%s}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=fc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new hc(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Oa(this,t)}queryRadius(t){const e=t,i=mc(ls("line-width",this,e),ls("line-gap-width",this,e)),n=ls("line-offset",this,e);return i/2+Math.abs(n)+cs(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,i,n,o,a){if(t.queryGeometry.isAboveHorizon)return!1;const s=us(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,t.pixelToTileUnitsFactor),l=t.pixelToTileUnitsFactor/2*mc(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),c=this.paint.get("line-offset").evaluate(e,i);return c&&(n=function(t,e){const i=[],n=new r(0,0);for(let r=0;r<t.length;r++){const o=t[r],a=[];for(let t=0;t<o.length;t++){const i=o[t-1],r=o[t],s=o[t+1],l=0===t?n:r.sub(i)._unit()._perp(),c=t===o.length-1?n:s.sub(r)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),a.push(u._mult(e)._add(r))}i.push(a)}return i}(n,c*t.pixelToTileUnitsFactor)),function(t,e,i){for(let n=0;n<e.length;n++){const r=e[n];if(t.length>=3)for(let e=0;e<r.length;e++)if(os(t,r[e]))return!0;if(Qa(t,r,i))return!0}return!1}(s,n,l)}isTileClipped(){return!0}},symbol:yh,background:class extends ja{constructor(t){super(t,vh)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ja{constructor(t){super(t,gh)}getProgramIds(){return["raster"]}},sky:class extends ja{constructor(t){super(t,bh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Ws({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(t,e){const i=this.paint.get("sky-type");if("atmosphere"===i){const i=this.paint.get("sky-atmosphere-sun"),n=!i,r=t.style.light,o=r.properties.get("position");return n&&"viewport"===r.properties.get("anchor")&&O("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?xh(o.azimuthal,90-o.polar,e):xh(i[0],90-i[1],e)}if("gradient"===i){const t=this.paint.get("sky-gradient-center");return xh(t[0],90-t[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}},{HTMLImageElement:Sh,HTMLCanvasElement:Eh,HTMLVideoElement:kh,ImageData:Ph,ImageBitmap:Th}=a;class Ch{constructor(t,e,i,n){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,n)}update(t,e,i){const{width:n,height:r}=t,o=!(this.size&&this.size[0]===n&&this.size[1]===r||i),{context:a}=this,{gl:s}=a;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[n,r],t instanceof Sh||t instanceof Eh||t instanceof kh||t instanceof Ph||Th&&t instanceof Th?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{const{x:e,y:o}=i||{x:0,y:0};t instanceof Sh||t instanceof Eh||t instanceof kh||t instanceof Ph||Th&&t instanceof Th?s.texSubImage2D(s.TEXTURE_2D,0,e,o,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,e,o,n,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(t,e,i){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Mh{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Oh?new Oh(t.lng,t.lat):Oh.convert(t),this}setSouthWest(t){return this._sw=t instanceof Oh?new Oh(t.lng,t.lat):Oh.convert(t),this}extend(t){const e=this._sw,i=this._ne;let n,r;if(t instanceof Oh)n=t,r=t;else{if(!(t instanceof Mh))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Mh.convert(t)):this.extend(Oh.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return e||i?(e.lng=Math.min(n.lng,e.lng),e.lat=Math.min(n.lat,e.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new Oh(n.lng,n.lat),this._ne=new Oh(r.lng,r.lat)),this}getCenter(){return new Oh((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Oh(this.getWest(),this.getNorth())}getSouthEast(){return new Oh(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:i}=Oh.convert(t);let n=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&n}static convert(t){return!t||t instanceof Mh?t:new Mh(t)}}const Ah=6371008.8;class Oh{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(e,")"));if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Oh(y(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(t){const e=Math.PI/180,i=this.lat*e,n=t.lat*e,r=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return Ah*Math.acos(Math.min(r,1))}toBounds(t=0){const e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Mh(new Oh(this.lng-i,this.lat-e),new Oh(this.lng+i,this.lat+e))}static convert(t){if(t instanceof Oh)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Oh(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Oh(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ih=2*Math.PI*Ah;function Dh(t){return Ih*Math.cos(t*Math.PI/180)}function zh(t){return(180+t)/360}function Lh(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Rh(t,e){return t/Dh(e)}function Fh(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Bh(t,e){return t*Dh(Fh(e))}class jh{constructor(t,e,i=0){this.x=+t,this.y=+e,this.z=+i}static fromLngLat(t,e=0){const i=Oh.convert(t);return new jh(zh(i.lng),Lh(i.lat),Rh(e,i.lat))}toLngLat(){return new Oh(360*this.x-180,Fh(this.y))}toAltitude(){return Bh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ih*(t=Fh(this.y),1/Math.cos(t*Math.PI/180));var t}}class Nh{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new qs({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const i=this.getKey(t,e);return this.positions[i]}trim(){const t=this.width,e=this.height=S(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,i){const n=[];let r=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;n.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let l=1;l<t.length;l++){a=!a;const e=t[l];r=s*i,s+=e,o=s*i,n.push({left:r,right:o,isDash:a,zeroLength:0===e})}return n}addRoundDash(t,e,i){const n=e/2;for(let r=-i;r<=i;r++){const e=this.width*(this.nextRow+i+r);let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=r/i*(n+1);if(a.isDash){const t=n-Math.abs(d);h=Math.sqrt(u*u+t*t)}else h=n-Math.sqrt(u*u+d*d);this.image.data[e+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let s=t.length-1;s>=0;--s){const e=t[s],i=t[s+1];e.zeroLength?t.splice(s,1):i&&i.isDash===e.isDash&&(i.left=e.left,t.splice(s,1))}const i=t[0],n=t[t.length-1];i.isDash===n.isDash&&(i.left=n.left-this.width,n.right=i.right+this.width);const r=this.width*this.nextRow;let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const i=Math.abs(s-a.left),n=Math.abs(s-a.right),l=Math.min(i,n);this.image.data[r+s]=Math.max(0,Math.min(255,(a.isDash?l:-l)+e+128))}}addDash(t,e){const i=this.getKey(t,e);if(this.positions[i])return this.positions[i];const n="round"===e,r=n?7:0,o=2*r+1;if(this.nextRow+o>this.height)return O("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let c=0;c<t.length;c++)t[c]<0&&(O("Negative value is found in line dasharray, replacing values with 0"),t[c]=0),a+=t[c];if(0!==a){const i=this.width/a,o=this.getDashRanges(t,this.width,i);n?this.addRoundDash(o,i,r):this.addRegularDash(o,"square"===e?.5*i:0)}const s=this.nextRow+r;this.nextRow+=o;const l={tl:[s,r],br:[a,0]};return this.positions[i]=l,l}}sr("LineAtlas",Nh);class Vh{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Uh=a.performance;function Gh(t){const e=t?t.url.toString():void 0;return Uh.getEntriesByName(e)}class qh{constructor(){this.tasks={},this.taskQueue=[],k(["process"],this),this.invoker=new Vh(this.process),this.nextId=0}add(t,e){const i=this.nextId++,n=function({type:t,isSymbolTile:e,zoom:i}){return i=i||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-i:"maybePrepare"===t&&e?400-i:500:200-i:100-i}(e);if(0===n){z();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[i]={fn:t,metadata:e,priority:n,id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}}}process(){z();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let n=0;n<this.taskQueue.length;n++){const i=this.tasks[this.taskQueue[n]];i.priority<e&&(e=i.priority,t=n)}if(null===t)return null;const i=this.taskQueue[t];return this.taskQueue.splice(t,1),i}remove(){this.invoker.remove()}}function Zh(t,e,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class Hh{constructor(t,e,i){this.z=t,this.x=e,this.y=i,this.key=Yh(0,t,t,e,i)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const i=(r=this.y,o=this.z,a=Zh(256*(n=this.x),256*(r=Math.pow(2,o)-r-1),o),s=Zh(256*(n+1),256*(r+1),o),a[0]+","+a[1]+","+s[0]+","+s[1]);var n,r,o,a,s;const l=function(t,e,i){let n,r="";for(let o=t;o>0;o--)n=1<<o-1,r+=(e&n?1:0)+(i&n?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",i)}getTilePoint(t){const e=Math.pow(2,this.z);return new r((t.x*e-this.x)*Ga,(t.y*e-this.y)*Ga)}getTileVec3(t){const e=Math.pow(2,this.z);return xs((t.x*e-this.x)*Ga,(t.y*e-this.y)*Ga,Bh(t.z,t.y))}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class Wh{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Yh(t,e.z,e.z,e.x,e.y)}}class Xh{constructor(t,e,i,n,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Hh(i,+n,+r),this.key=0===e&&t===i?this.canonical.key:Yh(e,t,i,n,r)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Xh(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Xh(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return Yh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const i=this.canonical.z-t;return Yh(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Xh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,i=2*this.canonical.x,n=2*this.canonical.y;return[new Xh(e,this.wrap,e,i,n),new Xh(e,this.wrap,e,i+1,n),new Xh(e,this.wrap,e,i,n+1),new Xh(e,this.wrap,e,i+1,n+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Xh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Xh(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Wh(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}getTilePoint(t){return this.canonical.getTilePoint(new jh(t.x-this.wrap,t.y))}getTileVec3(t){return this.canonical.getTileVec3(new jh(t.x-this.wrap,t.y,t.z))}}function Yh(t,e,i,n,r){const o=1<<Math.min(i,22);let a=o*(r%o)+n%o;return t&&i<22&&(a+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-i)))),16*(32*a+i)+(e-i)}sr("CanonicalTileID",Hh),sr("OverscaledTileID",Xh,{omit:["projMatrix"]});class Kh{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class $h{constructor(t,e,i,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=n,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}var Jh=Po([{name:"a_pos",type:"Int16",components:2}]);class Qh{constructor(t,e,i){this.tileID=t,this.uid=x(),this.uses=0,this.tileSize=e,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const e=t+this.timeAdded;e<U.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const i={};if(!e)return i;for(const n of t){const t=n.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){n.layers=t,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)i[e.id]=n}}return i}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof dh){if(this.hasSymbolBuckets=!0,!i)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof dh&&e.hasRTLText){this.hasRTLText=!0,oo.isLoading()||oo.isLoaded()||"deferred"!==no()||ro();break}}this.queryPadding=0;for(const t in this.buckets){const i=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(i))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Jo}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const i in this.buckets){const e=this.buckets[i];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ch(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ch(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ch(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,i,n,r,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:a,transform:o,params:r},t,e,i):{}}querySourceFeatures(t,e){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const n=i.loadVTLayers(),r=e?e.sourceLayer:"",o=n._geojsonTileLayer||n[r];if(!o)return;const a=En(e&&e.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let h=0;h<o.length;h++){const e=o.feature(h);if(a.needGeometry){const t=Wa(e,!0);if(!a.filter(new ao(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new ao(this.tileID.overscaledZ),e))continue;const n=i.getId(e,r),d=new $h(e,s,l,c,n);d.tile=u,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=L(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let i=!1;if(this.expirationTime>t)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{const n=this.expirationTime-e;n?this.expirationTime=t+Math.max(n,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const n in this.buckets){if(!e.style.hasLayer(n))continue;const r=this.buckets[n],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=t[o];if(!a||!s||0===Object.keys(s).length)continue;r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=U.now()+t}setDependencies(t,e){const i={};for(const n of e)i[n]=!0;this.dependencies[t]=i}hasDependency(t,e){for(const i of t){const t=this.dependencies[i];if(t)for(const i of e)if(t[i])return!0}return!1}clearQueryDebugViz(){}}class td{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,i){const n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},_(this.stateChanges[t][n],i),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==n&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(const e in this.state[t][n])i[e]||(this.deletedStates[t][n][e]=null)}else for(const r in i)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][r]&&delete this.deletedStates[t][n][r]}removeFeatureState(t,e,i){if(null===this.deletedStates[t])return;const n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(i in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][i]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}getState(t,e){const i=String(e),n=_({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const i=this.deletedStates[t][e];if(null===i)return{};for(const t in i)delete n[t]}return n}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const i={};for(const n in this.stateChanges){this.state[n]=this.state[n]||{};const t={};for(const e in this.stateChanges[n])this.state[n][e]||(this.state[n][e]={}),_(this.state[n][e],this.stateChanges[n][e]),t[e]=this.state[n][e];i[n]=t}for(const n in this.deletedStates){this.state[n]=this.state[n]||{};const t={};if(null===this.deletedStates[n])for(const e in this.state[n])t[e]={},this.state[n][e]={};else for(const e in this.deletedStates[n]){if(null===this.deletedStates[n][e])this.state[n][e]={};else for(const t of Object.keys(this.deletedStates[n][e]))delete this.state[n][e][t];t[e]=this.state[n][e]}i[n]=i[n]||{},_(i[n],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const n in t)t[n].setFeatureState(i,e)}}class ed{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const i=this.toIdx(t,e);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function id(t,e,i,n){let r=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(n[a])<1e-15){if(i[a]<t[a]||i[a]>e[a])return null}else{const s=1/n[a];let l=(t[a]-i[a])*s,c=(e[a]-i[a])*s;if(l>c){const t=l;l=c,c=t}if(l>r&&(r=l),c<o&&(o=c),r>o)return null}return r}function nd(t,e,i,n,r,o,a,s,l,c,u){const h=n-t,d=r-e,p=o-i,f=a-t,m=s-e,y=l-i,v=u[1]*y-u[2]*m,g=u[2]*f-u[0]*y,_=u[0]*m-u[1]*f,b=h*v+d*g+p*_;if(Math.abs(b)<1e-15)return null;const x=1/b,w=c[0]-t,S=c[1]-e,E=c[2]-i,k=(w*v+S*g+E*_)*x;if(k<0||k>1)return null;const P=S*p-E*d,T=E*h-w*p,C=w*d-S*h,M=(u[0]*P+u[1]*T+u[2]*C)*x;return M<0||k+M>1?null:(f*P+m*T+y*C)*x}function rd(t,e,i){return(t-e)/(i-e)}function od(t,e,i,n,r,o,a,s,l){const c=1<<i,u=o-n,h=a-r,d=(t+1)/c*u+n,p=(e+0)/c*h+r,f=(e+1)/c*h+r;s[0]=(t+0)/c*u+n,s[1]=p,l[0]=d,l[1]=f}class ad{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),i=[];let n=Math.ceil(Math.pow(2,e));const r=1/n,o=(t,e,i,n,r)=>{const o=n?1:0,a=(t+1)*i-o,s=e*i,l=(e+1)*i-o;r[0]=t*i,r[1]=s,r[2]=a,r[3]=l};let a=new ed(n);const s=[];for(let l=0;l<n*n;l++){o(l%n,Math.floor(l/n),r,!1,s);const e=ld(s[0],s[1],t),i=ld(s[2],s[1],t),c=ld(s[2],s[3],t),u=ld(s[0],s[3],t);a.minimums.push(Math.min(e,i,c,u)),a.maximums.push(Math.max(e,i,c,u)),a.leaves.push(1)}for(i.push(a),n/=2;n>=1;n/=2){const t=i[i.length-1];a=new ed(n);for(let e=0;e<n*n;e++){o(e%n,Math.floor(e/n),2,!0,s);const i=t.getElevation(s[0],s[1]),r=t.getElevation(s[2],s[1]),l=t.getElevation(s[2],s[3]),c=t.getElevation(s[0],s[3]),u=t.isLeaf(s[0],s[1]),h=t.isLeaf(s[2],s[1]),d=t.isLeaf(s[2],s[3]),p=t.isLeaf(s[0],s[3]),f=Math.min(i.min,r.min,l.min,c.min),m=Math.max(i.max,r.max,l.max,c.max),y=u&&h&&d&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&y?1:0)}i.push(a)}return i}(this.dem),i=e.length-1,n=e[i];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(e,0,0,i,0)}raycastRoot(t,e,i,n,r,o,a=1){return id([t,e,-100],[i,n,this.maximums[0]*a],r,o)}raycast(t,e,i,n,r,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(t,e,i,n,r,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:y}=d.pop();if(this.leaves[s]){od(f,m,y,t,e,i,n,u,h);const s=1<<y,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,v=(m+1)/s,g=ld(l,d,this.dem)*a,_=ld(c,d,this.dem)*a,b=ld(c,v,this.dem)*a,x=ld(l,v,this.dem)*a,w=nd(u[0],u[1],g,h[0],u[1],_,h[0],h[1],b,r,o),S=nd(h[0],h[1],b,u[0],h[1],x,u[0],u[1],g,r,o),E=Math.min(null!==w?w:Number.MAX_VALUE,null!==S?S:Number.MAX_VALUE);if(E!==Number.MAX_VALUE)return E;{const t=Es([],r,o,p);if(sd(g,_,x,b,rd(t[0],u[0],h[0]),rd(t[1],u[1],h[1]))>=t[2])return p}continue}let v=0;for(let d=0;d<this._siblingOffset.length;d++){od((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],y+1,t,e,i,n,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const p=id(u,h,r,o);if(null!=p){const t=p;l[d]=t;let e=!1;for(let i=0;i<v&&!e;i++)t>=l[c[i]]&&(c.splice(i,0,d),e=!0);e||(c[v]=d),v++}}for(let t=0;t<v;t++){const e=c[t];d.push({idx:this.childOffsets[s]+e,t:l[e],nodex:(f<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:y+1})}}return null}_addNode(t,e,i){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,i,n,r){if(1===t[n].isLeaf(e,i))return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const o=n-1,a=t[o];let s,l=0;for(let c=0;c<this._siblingOffset.length;c++){const t=2*e+this._siblingOffset[c][0],n=2*i+this._siblingOffset[c][1],r=a.getElevation(t,n),o=a.isLeaf(t,n),u=this._addNode(r.min,r.max,o);o&&(l|=1<<c),s||(s=u)}for(let c=0;c<this._siblingOffset.length;c++)l&1<<c||this._construct(t,2*e+this._siblingOffset[c][0],2*i+this._siblingOffset[c][1],o,s+c)}}function sd(t,e,i,n,r,o){return ii(ii(t,i,o),ii(e,n,o),r)}function ld(t,e,i){const n=i.dim,r=m(t*n-.5,0,n-1),o=m(e*n-.5,0,n-1),a=Math.floor(r),s=Math.floor(o),l=Math.min(a+1,n-1),c=Math.min(s+1,n-1);return sd(i.get(a,s),i.get(l,s),i.get(a,c),i.get(l,c),r-a,o-s)}const cd={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class ud{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,i,n=!1,r=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return O('"'.concat(i,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=e.height;const o=this.dim=e.height-2;if(this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox",this.borderReady=n,!n){for(let t=0;t<o;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(o,t)]=this.data[this._idx(o-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,o)]=this.data[this._idx(t,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],r&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ad(this)}get(t,e,i=!1){const n=new Uint8Array(this.data.buffer);i&&(t=m(t,-1,this.dim),e=m(e,-1,this.dim));const r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])}static getUnpackVector(t){return cd[t]}get unpackVector(){return cd[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,i){return(256*t*256+256*e+i)/10-1e4}_unpackTerrarium(t,e,i){return 256*t+e+i/256-32768}static pack(t,e){const i=[0,0,0,0],n=ud.getUnpackVector(e);let r=Math.floor((t+n[3])/n[2]);return i[2]=r%256,r=Math.floor(r/256),i[1]=r%256,r=Math.floor(r/256),i[0]=r,i}getPixels(){return new Zs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let n=e*this.dim,r=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case-1:n=r-1;break;case 1:r=n+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-i*this.dim;for(let c=o;c<a;c++)for(let e=n;e<r;e++)this.data[this._idx(e,c)]=t.data[this._idx(e+s,c+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}sr("DEMData",ud),sr("DemMinMaxQuadTree",ad,{omit:["dem"]});class hd{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,i){const n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const r={value:e,timeout:void 0};if(void 0!==i&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),i)),this.data[n].push(r),this.order.push(n),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const i=t.wrapped().key,n=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][n];return this.data[i].splice(n,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const i in this.data)for(const n of this.data[i])t(n.value)||e.push(n);for(const i of e)this.remove(i.value.tileID,i)}}class dd{constructor(t,e,i){this.func=t,this.mask=e,this.range=i}}dd.ReadOnly=!1,dd.ReadWrite=!0,dd.disabled=new dd(519,dd.ReadOnly,[0,1]);const pd=7680;class fd{constructor(t,e,i,n,r,o){this.test=t,this.ref=e,this.mask=i,this.fail=n,this.depthFail=r,this.pass=o}}fd.disabled=new fd({func:519,mask:0},0,0,pd,pd,pd);class md{constructor(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i}}md.Replace=[1,0],md.disabled=new md(md.Replace,ue.transparent,[!1,!1,!1,!1]),md.unblended=new md(md.Replace,ue.transparent,[!0,!0,!0,!0]),md.alphaBlended=new md([1,771],ue.transparent,[!0,!0,!0,!0]);const yd=1029,vd=2305;class gd{constructor(t,e,i){this.enable=t,this.mode=e,this.frontFace=i}}gd.disabled=new gd(!1,yd,vd),gd.backCCW=new gd(!0,yd,vd),gd.backCW=new gd(!0,yd,2304),gd.frontCW=new gd(!0,1028,2304),gd.frontCCW=new gd(!0,1028,vd);class _d extends Ft{constructor(t,e,i){super(),this.id=t,this._onlySymbols=i,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new hd(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new td}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}}getIds(){return g(this._tiles).map((t=>t.tileID)).sort(bd).map((t=>t.key))}getRenderableIds(t){const e=[];for(const i in this._tiles)this._isIdRenderable(+i,t)&&e.push(this._tiles[i]);return t?e.sort(((t,e)=>{const i=t.tileID,n=e.tileID,o=new r(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),a=new r(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-n.overscaledZ||a.y-o.y||a.x-o.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(bd).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))}_tileLoaded(t,e,i,n){if(n)return t.state="errored",void(404!==n.status?this._source.fire(new Rt(n,{tile:t})):this.update(this.transform));t.timeAdded=U.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Lt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let n=0;n<e.length;n++){const r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);i(t,e),i(e,t)}}function i(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let i=e.tileID.canonical.x-t.tileID.canonical.x;const n=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===n||Math.abs(n)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,i,n){for(const r in this._tiles){let o=this._tiles[r];if(n[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){n[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(let i=t.overscaledZ-1;i>=e;i--){const e=t.scaledTo(i),n=this._getLoadedTile(e);if(n)return n}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const i=Math.ceil(t.width/e)+1,n=Math.ceil(t.height/e)+1,r=Math.floor(i*n*5),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(o)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const i in this._tiles){const n=this._tiles[i];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),t[n.tileID.key]=n}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(t,e,i){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!i)return;let n;this.updateCacheSize(t,e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new Xh(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(n=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(n=n.filter((t=>this._source.hasTile(t))))):n=[];const r=this._updateRetainedTiles(n);if(xd(this._source.type)&&0!==n.length){const t={},e={},i=Object.keys(r);for(const n of i){const i=r[n],o=this._tiles[n];if(!o||o.fadeEndTime&&o.fadeEndTime<=U.now())continue;const a=this.findLoadedParent(i,Math.max(i.overscaledZ-_d.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[n]=i}const o=n[n.length-1].overscaledZ;for(const n in this._tiles){const t=this._tiles[n];if(r[n]||!t.hasData())continue;let i=t.tileID;for(;i.overscaledZ>o;){i=i.scaledTo(i.overscaledZ-1);const o=this._tiles[i.key];if(o&&o.hasData()&&e[i.key]){r[n]=t.tileID;break}}}for(const n in t)r[n]||(this._coveredTiles[n]=!0,r[n]=t[n])}for(const a in r)this._tiles[a].clearFadeHold();const o=function(t,e){const i=[];for(const n in t)n in e||i.push(n);return i}(this._tiles,r);for(const a of o){const t=this._tiles[a];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+a)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const i={},n=t[t.length-1].overscaledZ,r=t[0].overscaledZ,o=Math.max(r-_d.maxOverzooming,this._source.minzoom),a=Math.max(r+_d.maxUnderzooming,this._source.minzoom),s={};for(const l of t){const t=this._addTile(l);e[l.key]=l,t.hasData()||n<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,n,a,e);for(const l of t){let t=this._tiles[l.key];if(t.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const t=l.children(this._source.maxzoom)[0],i=this.getTile(t);if(i&&i.hasData()){e[t.key]=t;continue}}else{const t=l.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let n=t.wasRequested();for(let r=l.overscaledZ-1;r>=o;--r){const o=l.scaledTo(r);if(i[o.key])break;if(i[o.key]=!0,t=this.getTile(o),!t&&n&&(t=this._addTile(o)),t&&(e[o.key]=o,n=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let i,n=this._tiles[t].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){i=this._loadedParentTiles[n.key];break}e.push(n.key);const t=n.scaledTo(n.overscaledZ-1);if(i=this._getLoadedTile(t),i)break;n=t}for(const t of e)this._loadedParentTiles[t]=i}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const i=Boolean(e);return i||(e=new Qh(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,i||this._source.fire(new Lt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),i))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._cache.reset()}tilesIn(t,e,i){const n=[],r=this.transform;if(!r)return n;for(const o in this._tiles){const a=this._tiles[o];if(i&&a.clearQueryDebugViz(),a.holdingForFade())continue;const s=t.containsTile(a,r,e);s&&n.push(s)}return n}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const i of e)i.projMatrix=this.transform.calculateProjMatrix(i.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(xd(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=U.now())return!0}return!1}setFeatureState(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)}removeFeatureState(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,i){const n=this._tiles[t];n&&n.setDependencies(e,i)}reloadTilesForDependencies(t,e){for(const i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(+i,"reloading");this._cache.filter((i=>!i.hasDependency(t,e)))}}function bd(t,e){const i=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function xd(t){return"raster"===t||"image"===t||"video"===t}_d.maxOverzooming=10,_d.maxUnderzooming=3;class wd{constructor(t,e,i){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=i}static create(t,e,i){const n=i||t.findDEMTileFor(e);if(!n||!n.dem)return;const r=n.dem,o=n.tileID,a=1<<e.canonical.z-o.canonical.z;return new wd(n,n.tileSize/Ga/a,[(e.canonical.x/a-o.canonical.x)*r.dim,(e.canonical.y/a-o.canonical.y)*r.dim])}tileCoordToPixel(t,e){const i=e*this._scale+this._offset[1],n=Math.floor(t*this._scale+this._offset[0]),o=Math.floor(i);return new r(n,o)}getElevationAt(t,e,i,n){const r=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],a=Math.floor(r),s=Math.floor(o),l=this._dem;return n=!!n,i?ii(ii(l.get(a,s,n),l.get(a,s+1,n),o-s),ii(l.get(a+1,s,n),l.get(a+1,s+1,n),o-s),r-a):l.get(a,s,n)}getElevationAtPixel(t,e,i){return this._dem.get(t,e,!!i)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Rh(1,t)*this._dem.stride}}class Sd{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ir(Ga,16,0),this.featureIndexArray=new aa,this.promoteId=e}insert(t,e,i,n,r,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,r,o);const s=this.grid;for(let l=0;l<e.length;l++){const t=e[l],i=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const n=t[e];i[0]=Math.min(i[0],n.x),i[1]=Math.min(i[1],n.y),i[2]=Math.max(i[2],n.x),i[3]=Math.max(i[3],n.y)}i[0]<Ga&&i[1]<Ga&&i[2]>=0&&i[3]>=0&&s.insert(a,i[0],i[1],i[2],i[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Wl.VectorTile(new zc(this.rawTileData)).layers,this.sourceLayerCoder=new Kh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,i,n){this.loadVTLayers();const r=t.params||{},o=En(r.filter),a=t.tileResult,s=t.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((t,e,i,n)=>as(a.bufferedTilespaceGeometry,t,e,i,n)));c.sort(kd);let u=null;s.elevation&&c.length>0&&(u=wd.create(s.elevation,this.tileID));const h={};let d;for(let p=0;p<c.length;p++){const s=c[p];if(s===d)continue;d=s;const l=this.featureIndexArray.get(s);let f=null;this.loadMatchingFeature(h,l,o,r.layers,r.availableImages,e,i,n,((e,i,n,r=0)=>(f||(f=Ha(e)),i.queryIntersectsFeature(a,e,n,f,this.z,t.transform,t.pixelPosMatrix,u,r))))}return h}loadMatchingFeature(t,e,i,n,r,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=e,p=this.bucketLayerIDs[u];if(n&&!function(t,e){for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(n,p))return;const f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(c);if(i.needGeometry){const t=Wa(m,!0);if(!i.filter(new ao(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!i.filter(new ao(this.tileID.overscaledZ),m))return;const y=this.getId(m,f);for(let v=0;v<p.length;v++){const e=p[v];if(n&&n.indexOf(e)<0)continue;const i=o[e];if(!i)continue;let u={};void 0!==y&&s&&(u=s.getState(i.sourceLayer||"_geojsonTileLayer",y));const h=_({},a[e]);h.paint=Ed(h.paint,i.paint,m,u,r),h.layout=Ed(h.layout,i.layout,m,u,r);const f=!l||l(m,i,u,d);if(!f)continue;const g=new $h(m,this.z,this.x,this.y,y);g.layer=h;let b=t[e];void 0===b&&(b=t[e]=[]),b.push({featureIndex:c,feature:g,intersectionZ:f})}}lookupSymbolFeatures(t,e,i,n,r,o,a,s){const l={};this.loadVTLayers();const c=En(r);for(const u of t)this.loadMatchingFeature(l,{bucketIndex:i,sourceLayerIndex:n,featureIndex:u,layoutVertexArrayOffset:0},c,o,a,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const i of e)if(t===i)return!0;return!1}getId(t,e){let i=t.id;return this.promoteId&&(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof i&&(i=Number(i))),i}}function Ed(t,e,i,n,r){return T(t,((t,o)=>{const a=e instanceof mo?e.get(o):null;return a&&a.evaluate?a.evaluate(i,n,r):a}))}function kd(t,e){return e-t}sr("FeatureIndex",Sd,{omit:["rawTileData","sourceLayerCoder"]});class Pd{constructor(t){const e={},i=[];for(const a in t){const n=t[a],r=e[a]={};for(const t in n.glyphs){const e=n.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const o=e.metrics.localGlyph?2:1,a={x:0,y:0,w:e.bitmap.width+2*o,h:e.bitmap.height+2*o};i.push(a),r[t]=a}}const{w:n,h:r}=nu(i),o=new qs({width:n||1,height:r||1});for(const a in t){const i=t[a];for(const t in i.glyphs){const n=i.glyphs[+t];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;const r=e[a][t],s=n.metrics.localGlyph?2:1;qs.copy(n.bitmap,o,{x:0,y:0},{x:r.x+s,y:r.y+s},n.bitmap)}}this.image=o,this.positions=e}}sr("GlyphAtlas",Pd);class Td{constructor(t){this.tileID=new Xh(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile}parse(t,e,i,n,r){this.status="parsing",this.data=t,this.collisionBoxArray=new Jo;const o=new Kh(Object.keys(t.layers).sort()),a=new Sd(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new Nh(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:i},u=e.familiesBySource[this.source];for(const g in u){const e=t.layers[g];if(!e)continue;let n=!1,r=!1;for(const t of u[g])"symbol"===t[0].type?n=!0:r=!0;if(!0===this.isSymbolTile&&!n)continue;if(!1===this.isSymbolTile&&!r)continue;1===e.version&&O('Vector tile source "'.concat(this.source,'" layer "').concat(g,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const l=o.encode(g),h=[];for(let t=0;t<e.length;t++){const i=e.feature(t),n=a.getId(i,g);h.push({feature:i,id:n,index:t,sourceLayerIndex:l})}for(const t of u[g]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(Cd(t,this.zoom,i),(s[e.id]=e.createBucket({index:a.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(h,c,this.tileID.canonical),a.bucketLayerIDs.push(t.map((t=>t.id))))}}let h,d,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},y=T(c.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?n.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{h||(h=t,d=e,b.call(this))}),void 0,!1,m):d={};const v=Object.keys(c.iconDependencies);v.length?n.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{h||(h=t,p=e,b.call(this))}),void 0,!1,m):p={};const _=Object.keys(c.patternDependencies);function b(){if(h)return r(h);if(d&&p&&f){const t=new Pd(d),e=new ou(p,f);for(const n in s){const r=s[n];r instanceof dh?(Cd(r.layers,this.zoom,i),Ku(r,d,t.positions,p,e.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):r.hasPattern&&(r instanceof hc||r instanceof Dl||r instanceof Jl)&&(Cd(r.layers,this.zoom,i),r.addFeatures(c,this.tileID.canonical,e.patternPositions))}this.status="done",r(null,{buckets:g(s).filter((t=>!t.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?t.positions:null})}}_.length?n.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{h||(h=t,f=e,b.call(this))}),void 0,!1,m):f={},b.call(this)}}function Cd(t,e,i){const n=new ao(e);for(const r of t)r.recalculate(n,i)}class Md{constructor(t){this.entries={},this.scheduler=t}request(t,e,i,n){const r=this.entries[t]=this.entries[t]||{callbacks:[]};if(r.result){const[t,i]=r.result;return this.scheduler?this.scheduler.add((()=>{n(t,i)}),e):n(t,i),()=>{}}return r.callbacks.push(n),r.cancel||(r.cancel=i(((i,n)=>{r.result=[i,n];for(const t of r.callbacks)this.scheduler?this.scheduler.add((()=>{t(i,n)}),e):t(i,n);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{r.result||(r.callbacks=r.callbacks.filter((t=>t!==n)),r.callbacks.length||(r.cancel(),delete this.entries[t]))}}}function Ad(t,e,i){const n=JSON.stringify(t.request);return t.data&&(this.deduped.entries[n]={result:[null,t.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const n=kt(t.request,((t,n,r,o)=>{t?e(t):n&&e(null,{vectorTile:i?void 0:new Wl.VectorTile(new zc(n)),rawData:n,cacheControl:r,expires:o})}));return()=>{n.cancel(),e()}}),e)}t.ARRAY_TYPE=fs,t.AUTH_ERR_MSG=J,t.Actor=class{constructor(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.cancelCallbacks={},k(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=z()?t:a,this.scheduler=new qh}send(t,e,i,n,r=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=o,this.callbacks[a]=i);const s=N(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!i,targetMapId:n,mustQueue:r,sourceMapId:this.mapId,data:ur(e,s)},s),{cancel:()=>{i&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(t){const e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[i];delete this.cancelCallbacks[i],t&&t.cancel()}else if(e.mustQueue||z()){const t=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add((()=>this.processTask(i,e)),t&&t.metadata||{type:"message"})}else this.processTask(i,e)}processTask(t,e){if("<response>"===e.type){const i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(hr(e.error)):i(null,hr(e.data)))}else{const i=N(this.globalScope)?void 0:[],n=e.hasCallback?(e,n)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?ur(e):null,data:ur(n,i)},i)}:t=>{},r=hr(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,r,n);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],r.source)[t[1]](r,n)}else n(new Error("Could not find function ".concat(e.type)))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=Hh,t.Color=ue,t.ColorMode=md,t.CullFaceMode=gd,t.DEMData=ud,t.DataConstantProperty=yo,t.DedupedRequest=Md,t.DepthMode=dd,t.EXTENT=Ga,t.Elevation=class{getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,i=!0){null==e&&(e=null);const n=this._source();if(!n)return e;if(t.y<0||t.y>1)return e;const r=n.getSource().maxzoom,o=1<<r,a=Math.floor(t.x),s=t.x-a,l=new Xh(r,a,r,Math.floor(s*o),Math.floor(t.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return e;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,p=(t.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(p);return(i?this.exaggeration():1)*ii(ii(u.get(f,m),u.get(f,m+1),p-m),ii(u.get(f+1,m),u.get(f+1,m+1),p-m),d-f)}getAtTileOffset(t,e,i){const n=1<<t.canonical.z;return this.getAtPointOrZero(new jh(t.wrap+(t.canonical.x+e/Ga)/n,(t.canonical.y+i/Ga)/n))}getForTilePoints(t,e,i,n){const r=wd.create(this,t,n);return!!r&&(e.forEach((t=>{t[2]=this.exaggeration()*r.getElevationAt(t[0],t[1],i)})),!0)}getMinMaxForTile(t){const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const i=e.dem.tree,n=e.tileID,r=1<<t.canonical.z-n.canonical.z;let o=t.canonical.x/r-n.canonical.x,a=t.canonical.y/r-n.canonical.y,s=0;for(let l=0;l<t.canonical.z-n.canonical.z&&!i.leaves[s];l++){o*=2,a*=2;const t=2*Math.floor(a)+Math.floor(o);s=i.childOffsets[s]+t,o%=1,a%=1}return{min:this.exaggeration()*i.minimums[s],max:this.exaggeration()*i.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,i){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Rt,t.EvaluationParameters=ao,t.Event=Lt,t.Evented=Ft,t.GlyphManager=Lu,t.ImagePosition=ru,t.LineAtlas=Nh,t.LngLat=Oh,t.LngLatBounds=Mh,t.LocalGlyphMode=zu,t.MAX_SAFE_INTEGER=s,t.MercatorCoordinate=jh,t.ONE_EM=wc,t.OverscaledTileID=Xh,t.Properties=xo,t.RGBAImage=Zs,t.RequestManager=class{constructor(t,e,i){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!i,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",$,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!Q(t))return t;const i=it(t);return i.path="/styles/v1".concat(i.path),this._makeAPIURL(i,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!Q(t))return t;const i=it(t);return i.path="/fonts/v1".concat(i.path),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSourceURL(t,e){if(!Q(t))return t;const i=it(t);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,i,n){const r=it(t);return Q(t)?(r.path="/styles/v1".concat(r.path,"/sprite").concat(e).concat(i),this._makeAPIURL(r,this._customAccessToken||n)):(r.path+="".concat(e).concat(i),nt(r))}normalizeTileURL(t,e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Q(t))return t;const n=it(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(e||i&&"raster"!==n.authority&&512===i?"@2x":"").concat(Z.supported?".webp":"$1")),"raster"===n.authority?n.path="/".concat(q.RASTER_URL_PREFIX).concat(n.path):(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/".concat(q.TILE_URL_VERSION).concat(n.path));const r=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(n.params)||q.ACCESS_TOKEN;return q.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(n,r)}canonicalizeTileURL(t,e){const i=it(t);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return t;let n="mapbox://";i.path.match(/^\/raster\/v1\//)?n+="raster/".concat(i.path.replace("/".concat(q.RASTER_URL_PREFIX,"/"),"")):n+="tiles/".concat(i.path.replace("/".concat(q.TILE_URL_VERSION,"/"),""));let r=i.params;return e&&(r=r.filter((t=>!t.match(/^access_token=/)))),r.length&&(n+="?".concat(r.join("&"))),n}canonicalizeTileset(t,e){const i=!!e&&Q(e),n=[];for(const r of t.tiles||[])tt(r)?n.push(this.canonicalizeTileURL(r,i)):n.push(r);return n}_makeAPIURL(t,e){const i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=it(q.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==n.path&&(t.path="".concat(n.path).concat(t.path)),!q.REQUIRE_ACCESS_TOKEN)return nt(t);if(e=e||q.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error("An API access token is required to use Mapbox GL. ".concat(i));if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(i))}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push("access_token=".concat(e||"")),nt(t)}},t.ResourceType=xt,t.SegmentVector=Ua,t.SourceCache=_d,t.StencilMode=fd,t.StructArrayLayout1ui2=Wo,t.StructArrayLayout2f1f2i16=Bo,t.StructArrayLayout2i4=Co,t.StructArrayLayout2ui4=Ho,t.StructArrayLayout3f12=Oo,t.StructArrayLayout3ui6=No,t.StructArrayLayout4i8=Mo,t.Texture=Ch,t.Tile=Qh,t.Transitionable=co,t.Uniform1f=ba,t.Uniform1i=class extends _a{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends _a{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends _a{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=xa,t.UniformColor=wa,t.UniformMatrix3f=class extends _a{constructor(t,e){super(t,e),this.current=Ea}set(t){for(let e=0;e<9;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix3fv(this.location,!1,t);break}}},t.UniformMatrix4f=class extends _a{constructor(t,e){super(t,e),this.current=Sa}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=Wh,t.ValidationError=jt,t.VectorTileWorkerSource=class extends Ft{constructor(t,e,i,n,r){super(),this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=r||Ad,this.loading={},this.loaded={},this.deduped=new Md(t.scheduler),this.isSpriteLoaded=n,this.scheduler=t.scheduler}loadTile(t,e){const i=t.uid,n=t&&t.request,r=n&&n.collectResourceTiming,o=this.loading[i]=new Td(t);o.abort=this.loadVectorData(t,((a,s)=>{const l=!this.loading[i];if(delete this.loading[i],l||a||!s)return o.status="done",l||(this.loaded[i]=o),e(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new Wl.VectorTile(new zc(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,i)=>{if(t||!i)return e(t);const o={};if(r){const t=Gh(n);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,_({rawTileData:c.slice(0)},i,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[i]=o}))}reloadTile(t,e){const i=this.loaded,n=t.uid,r=this;if(i&&i[n]){const o=i[n];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain;const a=(t,i)=>{const n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,r.layerIndex,this.availableImages,r.actor,n)),e(t,i)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const i=t.uid,n=this.loading[i];n&&(n.abort&&n.abort(),delete this.loading[i]),e()}removeTile(t,e){const i=this.loaded,n=t.uid;i&&i[n]&&delete i[n],e()}},t.WritingMode=au,t.ZoomHistory=dr,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=lh,t.altitudeFromMercatorZ=Bh,t.asyncAll=v,t.bezier=p,t.bindAll=k,t.bufferConvexPolygon=function(t,e){const i=[];for(let n=0;n<t.length;n++){const r=y(n-1,-1,t.length-1),o=y(n+1,-1,t.length-1),a=t[n],s=t[o],l=t[r].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*e/Math.sin(u/2));i.push(a.add(h))}return i},t.cacheEntryPossiblyAdded=function(t){bt++,bt>vt&&(t.getActor().send("enforceCacheSizeLimit",yt),bt=0)},t.clamp=m,t.clearTileCache=function(t){const e=a.caches.delete(pt);t&&e.catch(t).then((()=>t()))},t.clipLine=Au,t.clone=function(t){var e=new fs(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.clone$1=function(t){var e=new fs(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$2=M,t.collisionCircleLayout=xc,t.config=q,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=_s,t.create$1=function(){var t=new fs(16);return fs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$2=ms,t.createExpression=un,t.createFilter=En,t.createLayout=Po,t.createStyleLayer=function(t){return"custom"===t.type?new _h(t):new wh[t.type](t)},t.cross=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=i[0],s=i[1],l=i[2];return t[0]=r*l-o*s,t[1]=o*a-n*l,t[2]=n*s-r*a,t},t.degToRad=u,t.div=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=f,t.easeCubicInOut=d,t.emitValidationErrors=er,t.endsWith=P,t.enforceCacheSizeLimit=function(t){gt(),ft&&ft.then((e=>{e.keys().then((i=>{for(let n=0;n<i.length-t;n++)e.delete(i[n])}))}))},t.evaluateSizeForFeature=kc,t.evaluateSizeForZoom=Pc,t.evaluateVariableOffset=Yu,t.evented=io,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=U,t.exported$1=Z,t.extend=_,t.filterObject=C,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=i+i,s=n+n,l=r+r,c=i*a,u=n*a,h=n*s,d=r*a,p=r*s,f=r*l,m=o*a,y=o*s,v=o*l;return t[0]=1-h-f,t[1]=u+v,t[2]=d-y,t[3]=0,t[4]=u-v,t[5]=1-c-f,t[6]=p+m,t[7]=0,t[8]=d+y,t[9]=p-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return h[e]},t.getAABBPointSquareDist=function(t,e,i){let n=0;for(let r=0;r<2;++r){const o=i?i[r]:0;t[r]>o&&(n+=(t[r]-o)*(t[r]-o)),e[r]<o&&(n+=(o-e[r])*(o-e[r]))}return n},t.getAnchorAlignment=gu,t.getAnchorJustification=$u,t.getBounds=function(t){let e=1/0,i=1/0,n=-1/0,o=-1/0;for(const r of t)e=Math.min(e,r.x),i=Math.min(i,r.y),n=Math.max(n,r.x),o=Math.max(o,r.y);return{min:new r(e,i),max:new r(n,o)}},t.getImage=It,t.getJSON=function(t,e){return Et(_(t,{type:"json"}),e)},t.getMapSessionAPI=ht,t.getPerformanceMeasurement=Gh,t.getRTLTextPluginStatus=no,t.getReferrer=St,t.getVideo=function(t,e){const i=a.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(let n=0;n<t.length;n++){const e=a.document.createElement("source");Ct(t[n])||(i.crossOrigin="Anonymous"),e.src=t[n],i.appendChild(e)}return{cancel:()=>{}}},t.identity=ys,t.identity$1=Ds,t.invert=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],y=e[14],v=e[15],g=i*s-n*a,_=i*l-r*a,b=i*c-o*a,x=n*l-r*s,w=n*c-o*s,S=r*c-o*l,E=u*m-h*f,k=u*y-d*f,P=u*v-p*f,T=h*y-d*m,C=h*v-p*m,M=d*v-p*y,A=g*M-_*C+b*T+x*P-w*k+S*E;return A?(t[0]=(s*M-l*C+c*T)*(A=1/A),t[1]=(r*C-n*M-o*T)*A,t[2]=(m*S-y*w+v*x)*A,t[3]=(d*w-h*S-p*x)*A,t[4]=(l*P-a*M-c*k)*A,t[5]=(i*M-r*P+o*k)*A,t[6]=(y*b-f*S-v*_)*A,t[7]=(u*S-d*b+p*_)*A,t[8]=(a*C-s*P+c*E)*A,t[9]=(n*P-i*C-o*E)*A,t[10]=(f*w-m*b+v*g)*A,t[11]=(h*b-u*w-p*g)*A,t[12]=(s*k-a*T-l*E)*A,t[13]=(i*T-n*k+r*E)*A,t[14]=(m*_-f*x-y*g)*A,t[15]=(u*x-h*_+d*g)*A,t):null},t.isMapAuthenticated=function(t){return dt.has(t)},t.isMapboxURL=Q,t.latFromMercatorY=Fh,t.len=As,t.length=bs,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.loadVectorTile=Ad,t.makeRequest=Et,t.mercatorXfromLng=zh,t.mercatorYfromLat=Lh,t.mercatorZfromAltitude=Rh,t.mul=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},t.mul$1=gs,t.mul$2=Ms,t.multiply=vs,t.multiply$1=Ss,t.nextPowerOfTwo=S,t.normalize=ks,t.normalize$1=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=i*i+n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=i*a,t[1]=n*a,t[2]=r*a,t[3]=o*a,t},t.number=ii,t.ortho=function(t,e,i,n,r,o,a){var s=1/(e-i),l=1/(n-r),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(r+n)*l,t[14]=(a+o)*c,t[15]=1,t},t.pbf=zc,t.perspective=function(t,e,i,n,r){var o,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+n)*(o=1/(n-r)),t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){const i={};for(let n=0;n<e.length;n++){const r=e[n];r in t&&(i[r]=t[r])}return i},t.plugin=oo,t.pointGeometry=r,t.polygonIntersectsBox=as,t.polygonIntersectsPolygon=Ka,t.polygonizeBounds=function(t,e,i=0,n=!0){const o=new r(i,i),a=t.sub(o),s=e.add(o),l=[a,new r(s.x,a.y),s,new r(a.x,s.y)];return n&&l.push(a),l},t.posAttributes=Jh,t.postMapLoadEvent=ct,t.postTurnstileEvent=st,t.potpack=nu,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=function(t){return t*c},t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Jr,pluginURL:Qr}),io.on("pluginStateChange",t),t},t.removeAuthState=function(t){dt.delete(t)},t.renderColorRamp=Ws,t.rotateX=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*n,t[5]=a*r+u*n,t[6]=s*r+h*n,t[7]=l*r+d*n,t[8]=c*r-o*n,t[9]=u*r-a*n,t[10]=h*r-s*n,t[11]=d*r-l*n,t},t.rotateX$1=zs,t.rotateY=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*n,t[1]=a*r-u*n,t[2]=s*r-h*n,t[3]=l*r-d*n,t[8]=o*n+c*r,t[9]=a*n+u*r,t[10]=s*n+h*r,t[11]=l*n+d*r,t},t.rotateZ=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*n,t[1]=a*r+u*n,t[2]=s*r+h*n,t[3]=l*r+d*n,t[4]=c*r-o*n,t[5]=u*r-a*n,t[6]=h*r-s*n,t[7]=d*r-l*n,t},t.rotateZ$1=function(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);return t[0]=n*l+r*s,t[1]=r*l-n*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},t.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.scale$1=function(t,e,i){var n=i[0],r=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scaleAndAdd=Es,t.setCacheLimits=function(t,e){yt=t,vt=e},t.setRTLTextPlugin=function(t,e,i=!1){if(Jr===Xr||Jr===Yr||Jr===Kr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Qr=U.resolveURL(t),Jr=Xr,$r=e,eo(),i||ro()},t.smoothstep=function(t,e,i){return(i=m((i-t)/(e-t),0,1))*i*(3-2*i)},t.spec=Bt,t.storeAuthState=function(t,e){e?dt.add(t):dt.delete(t)},t.sub=Cs,t.subtract=ws,t.symbolSize=Tc,t.transformMat3=function(t,e,i){var n=e[0],r=e[1],o=e[2];return t[0]=n*i[0]+r*i[3]+o*i[6],t[1]=n*i[1]+r*i[4]+o*i[7],t[2]=n*i[2]+r*i[5]+o*i[8],t},t.transformMat4=Os,t.transformMat4$1=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=i[3]*n+i[7]*r+i[11]*o+i[15];return t[0]=(i[0]*n+i[4]*r+i[8]*o+i[12])/(a=a||1),t[1]=(i[1]*n+i[5]*r+i[9]*o+i[13])/a,t[2]=(i[2]*n+i[6]*r+i[10]*o+i[14])/a,t},t.transformQuat=Ps,t.translate=function(t,e,i){var n,r,o,a,s,l,c,u,h,d,p,f,m=i[0],y=i[1],v=i[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*v+e[12],t[13]=e[1]*m+e[5]*y+e[9]*v+e[13],t[14]=e[2]*m+e[6]*y+e[10]*v+e[14],t[15]=e[3]*m+e[7]*y+e[11]*v+e[15]):(r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=n=e[0],t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=n*m+s*y+h*v+e[12],t[13]=r*m+l*y+d*v+e[13],t[14]=o*m+c*y+p*v+e[14],t[15]=a*m+u*y+f*v+e[15]),t},t.triggerPluginCompletionEvent=to,t.uniqueId=x,t.validateCustomStyleLayer=function(t){const e=[],i=t.id;return void 0===i&&e.push({message:"layers.".concat(i,': missing required property "id"')}),void 0===t.render&&e.push({message:"layers.".concat(i,': missing required method "render"')}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers.".concat(i,': property "renderingMode" must be either "2d" or "3d"')}),e},t.validateFog=Jn,t.validateLight=$n,t.validateStyle=Kn,t.values=g,t.vectorTile=Wl,t.version=e,t.warnOnce=O,t.window=a,t.wrap=y})),n(["./shared"],(function(t){function e(t){const i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){let i="[";for(const n of t)i+="".concat(e(n),",");return"".concat(i,"]")}const n=Object.keys(t).sort();let r="{";for(let o=0;o<n.length;o++)r+="".concat(JSON.stringify(n[o]),":").concat(e(t[n[o]]),",");return"".concat(r,"}")}function i(i){let n="";for(const r of t.refProperties)n+="/".concat(e(i[r]));return n}class n{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,n){for(const i of e){this._layerConfigs[i.id]=i;const e=this._layers[i.id]=t.createStyleLayer(i);e._featureFilter=t.createFilter(e.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const t of n)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const n={};for(let o=0;o<t.length;o++){const r=e&&e[t[o].id]||i(t[o]);e&&(e[t[o].id]=r);let a=n[r];a||(a=n[r]=[]),a.push(t[o])}const r=[];for(const i in n)r.push(n[i]);return r}(t.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),i=e[0];if("none"===i.visibility)continue;const n=i.source||"";let r=this.familiesBySource[n];r||(r=this.familiesBySource[n]={});const o=i.sourceLayer||"_geojsonTileLayer";let a=r[o];a||(a=r[o]=[]),a.push(e)}}}const{ImageBitmap:r}=t.window;class o{loadTile(e,i){const{uid:n,encoding:o,rawImageData:a,padding:s,buildQuadTree:l}=e,c=r&&a instanceof r?this.getImageData(a,s):a;i(null,new t.DEMData(n,c,o,s<1,l))}getImageData(e,i){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-i,-i,e.width+2*i,e.height+2*i);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)}}var a=function t(e,i){var n,r=e&&e.type;if("FeatureCollection"===r)for(n=0;n<e.features.length;n++)t(e.features[n],i);else if("GeometryCollection"===r)for(n=0;n<e.geometries.length;n++)t(e.geometries[n],i);else if("Feature"===r)t(e.geometry,i);else if("Polygon"===r)s(e.coordinates,i);else if("MultiPolygon"===r)for(n=0;n<e.coordinates.length;n++)s(e.coordinates[n],i);return e};function s(t,e){if(0!==t.length){l(t[0],e);for(var i=1;i<t.length;i++)l(t[i],!e)}}function l(t,e){for(var i=0,n=0,r=t.length,o=r-1;n<r;o=n++)i+=(t[n][0]-t[o][0])*(t[o][1]+t[n][1]);i>=0!=!!e&&t.reverse()}const c=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class u{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const i of this._feature.geometry)e.push([new t.pointGeometry(i[0],i[1])]);return e}{const e=[];for(const i of this._feature.geometry){const n=[];for(const e of i)n.push(new t.pointGeometry(e[0],e[1]));e.push(n)}return e}}toGeoJSON(t,e,i){return c.call(this,t,e,i)}}class h{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new u(this._features[t])}}var d=t.vectorTile.VectorTileFeature,p=f;function f(t,e){this.options=e||{},this.features=t,this.length=t.length}function m(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}f.prototype.feature=function(t){return new m(this.features[t],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var n=e[i],r=[],o=0;o<n.length;o++)r.push(new t.pointGeometry(n[o][0],n[o][1]));this.geometry.push(r)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,n=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y)}return[e,n,i,r]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var y=g,v=p;function g(e){var i=new t.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,_,t.layers[i])}(e,i),i.finish()}function _(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,b,n);var r=n.keys;for(i=0;i<r.length;i++)e.writeStringField(3,r[i]);var o=n.values;for(i=0;i<o.length;i++)e.writeMessage(4,k,o[i])}function b(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,x,t),e.writeVarintField(3,i.type),e.writeMessage(4,E,i)}function x(t,e){var i=t.feature,n=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var l=o[s];void 0===l&&(n.push(s),o[s]=l=n.length-1),e.writeVarint(l);var c=i.properties[s],u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var h=u+":"+c,d=a[h];void 0===d&&(r.push(c),a[h]=d=r.length-1),e.writeVarint(d)}}function w(t,e){return(e<<3)+(7&t)}function S(t){return t<<1^t>>31}function E(t,e){for(var i=t.loadGeometry(),n=t.type,r=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],c=1;1===n&&(c=l.length),e.writeVarint(w(1,c));for(var u=3===n?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==n&&e.writeVarint(w(2,u-1));var d=l[h].x-r,p=l[h].y-o;e.writeVarint(S(d)),e.writeVarint(S(p)),r+=d,o+=p}3===n&&e.writeVarint(w(7,1))}}function k(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function P(t,e,i,n,r,o){if(r-n<=i)return;const a=n+r>>1;T(t,e,a,n,r,o%2),P(t,e,i,n,a-1,o+1),P(t,e,i,a+1,r,o+1)}function T(t,e,i,n,r,o){for(;r>n;){if(r-n>600){const a=r-n+1,s=i-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);T(t,e,i,Math.max(n,Math.floor(i-s*c/a+u)),Math.min(r,Math.floor(i+(a-s)*c/a+u)),o)}const a=e[2*i+o];let s=n,l=r;for(C(t,e,n,i),e[2*r+o]>a&&C(t,e,n,r);s<l;){for(C(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*n+o]===a?C(t,e,n,l):(l++,C(t,e,l,r)),l<=i&&(n=l+1),i<=l&&(r=l-1)}}function C(t,e,i,n){M(t,i,n),M(e,2*i,2*n),M(e,2*i+1,2*n+1)}function M(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function A(t,e,i,n){const r=t-i,o=e-n;return r*r+o*o}y.fromVectorTileJs=g,y.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var n in t)i[n]=new p(t[n].features,e),i[n].name=n,i[n].version=e.version,i[n].extent=e.extent;return g({layers:i})},y.GeoJSONWrapper=v;const O=t=>t[0],I=t=>t[1];class D{constructor(t,e=O,i=I,n=64,r=Float64Array){this.nodeSize=n,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length);for(let l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=i(t[l]);P(a,s,n,0,a.length-1,0)}range(t,e,i,n){return function(t,e,i,n,r,o,a){const s=[0,t.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=a){for(let a=p;a<=d;a++)c=e[2*a],u=e[2*a+1],c>=i&&c<=r&&u>=n&&u<=o&&l.push(t[a]);continue}const f=Math.floor((p+d)/2);c=e[2*f],u=e[2*f+1],c>=i&&c<=r&&u>=n&&u<=o&&l.push(t[f]);const m=(h+1)%2;(0===h?i<=c:n<=u)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?r>=c:o>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,t,e,i,n,this.nodeSize)}within(t,e,i){return function(t,e,i,n,r,o){const a=[0,t.length-1,0],s=[],l=r*r;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let r=h;r<=u;r++)A(e[2*r],e[2*r+1],i,n)<=l&&s.push(t[r]);continue}const d=Math.floor((h+u)/2),p=e[2*d],f=e[2*d+1];A(p,f,i,n)<=l&&s.push(t[d]);const m=(c+1)%2;(0===c?i-r<=p:n-r<=f)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?i+r>=p:n+r>=f)&&(a.push(d+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,t,e,i,this.nodeSize)}}const z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},L=Math.fround||(R=new Float32Array(1),t=>(R[0]=+t,R[0]));var R;class F{constructor(t){this.options=Z(Object.create(z),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:i,maxZoom:n,nodeSize:r}=this.options;e&&console.time("total time");const o="prepare ".concat(t.length," points");e&&console.time(o),this.points=t;let a=[];for(let s=0;s<t.length;s++)t[s].geometry&&a.push(j(t[s],s));this.trees[n+1]=new D(a,H,W,r,Float32Array),e&&console.timeEnd(o);for(let s=n;s>=i;s--){const t=+Date.now();a=this._cluster(a,s),this.trees[s]=new D(a,H,W,r,Float32Array),e&&console.log("z%d: %d clusters in %dms",s,a.length,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let i=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,r=180;else if(i>r){const t=this.getClusters([i,n,180,o],e),a=this.getClusters([-180,n,r,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(U(i),G(o),U(r),G(n)),l=[];for(const c of s){const t=a.points[c];l.push(t.numPoints?N(t):this.points[t.index])}return l}getChildren(t){const e=this._getOriginId(t),i=this._getOriginZoom(t),n="No cluster with the specified id.",r=this.trees[i];if(!r)throw new Error(n);const o=r.points[e];if(!o)throw new Error(n);const a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=r.within(o.x,o.y,a),l=[];for(const c of s){const e=r.points[c];e.parentId===t&&l.push(e.numPoints?N(e):this.points[e.index])}if(0===l.length)throw new Error(n);return l}getLeaves(t,e,i){const n=[];return this._appendLeaves(n,t,e=e||10,i=i||0,0),n}getTile(t,e,i){const n=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(i-s)/r,c=(i+1+s)/r,u={features:[]};return this._addTileFeatures(n.range((e-s)/r,l,(e+1+s)/r,c),n.points,e,i,r,u),0===e&&this._addTileFeatures(n.range(1-s/r,l,1,c),n.points,r,i,r,u),e===r-1&&this._addTileFeatures(n.range(0,l,s/r,c),n.points,-1,i,r,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}_appendLeaves(t,e,i,n,r){const o=this.getChildren(e);for(const a of o){const e=a.properties;if(e&&e.cluster?r+e.point_count<=n?r+=e.point_count:r=this._appendLeaves(t,e.cluster_id,i,n,r):r<n?r++:t.push(a),t.length===i)break}return r}_addTileFeatures(t,e,i,n,r,o){for(const a of t){const t=e[a],s=t.numPoints;let l,c,u;if(s)l=V(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=U(e.geometry.coordinates[0]),u=G(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*r-i)),Math.round(this.options.extent*(u*r-n))]],tags:l};let d;s?d=t.id:this.options.generateId?d=t.index:this.points[t.index].id&&(d=this.points[t.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const i=[],{radius:n,extent:r,reduce:o,minPoints:a}=this.options,s=n/(r*Math.pow(2,e));for(let l=0;l<t.length;l++){const n=t[l];if(n.zoom<=e)continue;n.zoom=e;const r=this.trees[e+1],c=r.within(n.x,n.y,s),u=n.numPoints||1;let h=u;for(const t of c){const i=r.points[t];i.zoom>e&&(h+=i.numPoints||1)}if(h>=a){let t=n.x*u,a=n.y*u,s=o&&u>1?this._map(n,!0):null;const d=(l<<5)+(e+1)+this.points.length;for(const i of c){const l=r.points[i];if(l.zoom<=e)continue;l.zoom=e;const c=l.numPoints||1;t+=l.x*c,a+=l.y*c,l.parentId=d,o&&(s||(s=this._map(n,!0)),o(s,this._map(l)))}n.parentId=d,i.push(B(t/h,a/h,d,h,s))}else if(i.push(n),h>1)for(const t of c){const n=r.points[t];n.zoom<=e||(n.zoom=e,i.push(n))}}return i}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?Z({},t.properties):t.properties;const i=this.points[t.index].properties,n=this.options.map(i);return e&&n===i?Z({},n):n}}function B(t,e,i,n,r){return{x:L(t),y:L(e),zoom:1/0,id:i,parentId:-1,numPoints:n,properties:r}}function j(t,e){const[i,n]=t.geometry.coordinates;return{x:L(U(i)),y:L(G(n)),zoom:1/0,index:e,parentId:-1}}function N(t){return{type:"Feature",id:t.id,properties:V(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),q(t.y)]}};var e}function V(t){const e=t.numPoints,i=e>=1e4?"".concat(Math.round(e/1e3),"k"):e>=1e3?Math.round(e/100)/10+"k":e;return Z(Z({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function U(t){return t/360+.5}function G(t){const e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function q(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function Z(t,e){for(const i in e)t[i]=e[i];return t}function H(t){return t.x}function W(t){return t.y}function X(t,e,i,n){for(var r,o=n,a=i-e>>1,s=i-e,l=t[e],c=t[e+1],u=t[i],h=t[i+1],d=e+3;d<i;d+=3){var p=Y(t[d],t[d+1],l,c,u,h);if(p>o)r=d,o=p;else if(p===o){var f=Math.abs(d-a);f<s&&(r=d,s=f)}}o>n&&(r-e>3&&X(t,e,r,n),t[r+2]=o,i-r>3&&X(t,r,i,n))}function Y(t,e,i,n,r,o){var a=r-i,s=o-n;if(0!==a||0!==s){var l=((t-i)*a+(e-n)*s)/(a*a+s*s);l>1?(i=r,n=o):l>0&&(i+=a*l,n+=s*l)}return(a=t-i)*a+(s=e-n)*s}function K(t,e,i,n){var r={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)$(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)$(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)$(t,e[n][r])}(r),r}function $(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function J(t,e,i,n){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===o)Q(r,s);else if("MultiPoint"===o)for(var c=0;c<r.length;c++)Q(r[c],s);else if("LineString"===o)tt(r,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(c=0;c<r.length;c++)tt(r[c],s=[],a,!1),t.push(K(l,"LineString",s,e.properties));return}et(r,s,a,!1)}else if("Polygon"===o)et(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)J(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},i,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<r.length;c++){var u=[];et(r[c],u,a,!0),s.push(u)}}t.push(K(l,o,s,e.properties))}}function Q(t,e){e.push(it(t[0])),e.push(nt(t[1])),e.push(0)}function tt(t,e,i,n){for(var r,o,a=0,s=0;s<t.length;s++){var l=it(t[s][0]),c=nt(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=n?(r*c-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(c-o,2))),r=l,o=c}var u=e.length-3;e[2]=1,X(e,0,u,i),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function et(t,e,i,n){for(var r=0;r<t.length;r++){var o=[];tt(t[r],o,i,n),e.push(o)}}function it(t){return t/360+.5}function nt(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function rt(t,e,i,n,r,o,a,s){if(n/=e,o>=(i/=e)&&a<n)return t;if(a<i||o>=n)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,d=u.type,p=0===r?u.minX:u.minY,f=0===r?u.maxX:u.maxY;if(p>=i&&f<n)l.push(u);else if(!(f<i||p>=n)){var m=[];if("Point"===d||"MultiPoint"===d)ot(h,m,i,n,r);else if("LineString"===d)at(h,m,i,n,r,!1,s.lineMetrics);else if("MultiLineString"===d)lt(h,m,i,n,r,!1);else if("Polygon"===d)lt(h,m,i,n,r,!0);else if("MultiPolygon"===d)for(var y=0;y<h.length;y++){var v=[];lt(h[y],v,i,n,r,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(y=0;y<m.length;y++)l.push(K(u.id,d,m[y],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(K(u.id,d,m,u.tags))}}}return l.length?l:null}function ot(t,e,i,n,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=i&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function at(t,e,i,n,r,o,a){for(var s,l,c=st(t),u=0===r?ut:ht,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],m=t[d+2],y=t[d+3],v=t[d+4],g=0===r?p:f,_=0===r?y:v,b=!1;a&&(s=Math.sqrt(Math.pow(p-y,2)+Math.pow(f-v,2))),g<i?_>i&&(l=u(c,p,f,y,v,i),a&&(c.start=h+s*l)):g>n?_<n&&(l=u(c,p,f,y,v,n),a&&(c.start=h+s*l)):ct(c,p,f,m),_<i&&g>=i&&(l=u(c,p,f,y,v,i),b=!0),_>n&&g<=n&&(l=u(c,p,f,y,v,n),b=!0),!o&&b&&(a&&(c.end=h+s*l),e.push(c),c=st(t)),a&&(h+=s)}var x=t.length-3;p=t[x],f=t[x+1],m=t[x+2],(g=0===r?p:f)>=i&&g<=n&&ct(c,p,f,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&ct(c,c[0],c[1],c[2]),c.length&&e.push(c)}function st(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function lt(t,e,i,n,r,o){for(var a=0;a<t.length;a++)at(t[a],e,i,n,r,o,!1)}function ct(t,e,i,n){t.push(e),t.push(i),t.push(n)}function ut(t,e,i,n,r,o){var a=(o-e)/(n-e);return t.push(o),t.push(i+(r-i)*a),t.push(1),a}function ht(t,e,i,n,r,o){var a=(o-i)/(r-i);return t.push(e+(n-e)*a),t.push(o),t.push(1),a}function dt(t,e){for(var i=[],n=0;n<t.length;n++){var r,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=pt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(pt(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(pt(o.geometry[s][c],e));r.push(l)}i.push(K(o.id,a,r,o.tags))}return i}function pt(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function ft(t,e){if(t.transformed)return t;var i,n,r,o=1<<t.z,a=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(mt(c[n],c[n+1],e,o,a,s));else for(n=0;n<c.length;n++){var h=[];for(r=0;r<c[n].length;r+=2)h.push(mt(c[n][r],c[n][r+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function mt(t,e,i,n,r,o){return[Math.round(i*(t*n-r)),Math.round(i*(e*n-o))]}function yt(t,e,i,n,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,vt(a,t[s],o,r);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function vt(t,e,i,n){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)gt(a,r,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)gt(a,r[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var c=r[l];for(s=0;s<c.length;s++)gt(a,c[s],t,i,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function gt(t,e,i,n,r,o){var a=n*n;if(n>0&&e.size<(r?a:n))i.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>a)&&(i.numSimplified++,s.push(e[l]),s.push(e[l+1])),i.numPoints++;r&&function(t,e){for(var i=0,n=0,r=t.length,o=r-2;n<r;o=n,n+=2)i+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(i>0===e)for(n=0,r=t.length;n<r/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[r-2-n],t[n+1]=t[r-1-n],t[r-2-n]=a,t[r-1-n]=s}}(s,o),t.push(s)}}function _t(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)J(i,t.features[n],e,n);else J(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(t,e){var i=e.buffer/e.extent,n=t,r=rt(t,1,-1-i,i,0,-1,2,e),o=rt(t,1,1-i,2+i,0,-1,2,e);return(r||o)&&(n=rt(t,1,-i,1+i,0,-1,2,e)||[],r&&(n=dt(r,1).concat(n)),o&&(n=n.concat(dt(o,-1)))),n}(n,e)).length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function bt(t,e,i){return 32*((1<<t)*i+e)+t}function xt(t,e){const i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const n=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!n)return e(null,null);const r=new h(n.features);let o=y(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}_t.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_t.prototype.splitTile=function(t,e,i,n,r,o,a){for(var s=[t,e,i,n],l=this.options,c=l.debug;s.length;){n=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=bt(e,i,n),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=yt(t,e,i,n,l),this.tileCoords.push({z:e,x:i,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(i!==Math.floor(o/f)||n!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var m,y,v,g,_,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,E=1+x;m=y=v=g=null,_=rt(t,u,i-x,i+S,0,d.minX,d.maxX,l),b=rt(t,u,i+w,i+E,0,d.minX,d.maxX,l),t=null,_&&(m=rt(_,u,n-x,n+S,1,d.minY,d.maxY,l),y=rt(_,u,n+w,n+E,1,d.minY,d.maxY,l),_=null),b&&(v=rt(b,u,n-x,n+S,1,d.minY,d.maxY,l),g=rt(b,u,n+w,n+E,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*i,2*n),s.push(y||[],e+1,2*i,2*n+1),s.push(v||[],e+1,2*i+1,2*n),s.push(g||[],e+1,2*i+1,2*n+1)}}},_t.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent,o=n.debug;if(t<0||t>24)return null;var a=1<<t,s=bt(t,e=(e%a+a)%a,i);if(this.tiles[s])return ft(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,c=t,u=e,h=i;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[bt(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,i),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ft(this.tiles[s],r):null):null};class wt extends t.VectorTileWorkerSource{constructor(t,e,i,n,r){super(t,e,i,n,xt),r&&(this.loadGeoJSON=r)}loadData(e,i){const n=e&&e.request,r=n&&n.collectResourceTiming;this.loadGeoJSON(e,((o,s)=>{if(o||!s)return i(o);if("object"!=typeof s)return i(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));{a(s,!0);try{if(e.filter){const i=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw new Error(i.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));const n=s.features.filter((t=>i.value.evaluate({zoom:0},t)));s={type:"FeatureCollection",features:n}}this._geoJSONIndex=e.cluster?new F(function({superclusterOptions:e,clusterProperties:i}){if(!i||!e)return e;const n={},r={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(i);for(const l of s){const[e,o]=i[l],a=t.createExpression(o),s=t.createExpression("string"==typeof e?[e,["accumulated"],["get",l]]:e);n[l]=a.value,r[l]=s.value}return e.map=t=>{a.properties=t;const e={};for(const i of s)e[i]=n[i].evaluate(o,a);return e},e.reduce=(t,e)=>{a.properties=e;for(const i of s)o.accumulated=t[i],t[i]=r[i].evaluate(o,a)},e}(e)).load(s.features):function(t,e){return new _t(t,e)}(s,e.geojsonVtOptions)}catch(o){return i(o)}this.loaded={};const l={};if(r){const i=t.getPerformanceMeasurement(n);i&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(i)))}i(null,l)}}))}reloadTile(t,e){const i=this.loaded;return i&&i[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,i){if(e.request)t.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class St{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error('Worker source with name "'.concat(t,'" already registered.'));this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}checkIfReady(t,e,i){i()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,i){this.isSpriteLoaded=i;for(const n in this.workerSources[e]){const r=this.workerSources[e][n];for(const e in r)r[e]instanceof t.VectorTileWorkerSource&&(r[e].isSpriteLoaded=i,r[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,i){this.availableImages[t]=e;for(const n in this.workerSources[t]){const i=this.workerSources[t][n];for(const t in i)i[t].availableImages=e}i()}enableTerrain(t,e,i){this.terrain=e,i()}setLayers(t,e,i){this.getLayerIndex(t).replace(e),i()}updateLayers(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()}loadTile(e,i,n){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(e,i.type,i.source).loadTile(r,n)}loadDEMTile(e,i,n){const r=this.enableTerrain?t.extend({buildQuadTree:this.terrain},i):i;this.getDEMWorkerSource(e,i.source).loadTile(r,n)}reloadTile(e,i,n){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(e,i.type,i.source).reloadTile(r,n)}abortTile(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)}removeTile(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)}removeSource(t,e,i){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,i):i()}loadWorkerSource(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}}syncRTLPluginState(e,i,n){try{t.plugin.setState(i);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const i=t.plugin.isParsed();n(i?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(e)),i)}}catch(t){n(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e}getWorkerSource(t,e,i){return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][i]||(this.workerSources[t][e][i]=new this.workerSourceTypes[e]({send:(e,i,n,r,o,a)=>{this.actor.send(e,i,n,t,o,a)},scheduler:this.actor.scheduler},this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded)),this.workerSources[t][e][i]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new o),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,i){t.enforceCacheSizeLimit(i)}getWorkerPerformanceMetrics(t,e,i){i(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new St(self)),St})),n(["./shared"],(function(t){var e=i;function i(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===n[e=t&&t.failIfMajorPerformanceCaveat]&&(n[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),n[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var n={};function r(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!r(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!r(t[i],e[i]))return!1;return!0}return t===e}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const o={create:function(e,i,n){const r=t.window.document.createElement(e);return void 0!==i&&(r.className=i),n&&n.appendChild(r),r},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},a=t.window.document&&t.window.document.documentElement.style,s=a&&void 0!==a.userSelect?"userSelect":"WebkitUserSelect";let l;o.disableDrag=function(){a&&s&&(l=a[s],a[s]="none")},o.enableDrag=function(){a&&s&&(a[s]=l)},o.setTransform=function(t,e){t.style.transform=e};let c=!1;try{const e=Object.defineProperty({},"passive",{get(){c=!0}});t.window.addEventListener("test",e,e),t.window.removeEventListener("test",e,e)}catch(t){c=!1}o.addEventListener=function(t,e,i,n={}){t.addEventListener(e,i,"passive"in n&&c?n:n.capture)},o.removeEventListener=function(t,e,i,n={}){t.removeEventListener(e,i,"passive"in n&&c?n:n.capture)};const u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};function h(e,i,n){const r=e.offsetWidth===i.width?1:e.offsetWidth/i.width;return new t.pointGeometry((n.clientX-i.left)*r,(n.clientY-i.top)*r)}o.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",u,!0)}),0)},o.mousePos=function(t,e){const i=t.getBoundingClientRect();return h(t,i,e)},o.touchPos=function(t,e){const i=t.getBoundingClientRect(),n=[];for(let r=0;r<e.length;r++)n.push(h(t,i,e[r]));return n},o.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},o.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};class d{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(e,i,n){const r=t.dot(i,this.dir);if(Math.abs(r)<1e-6)return!1;const o=t.dot(t.sub(t.create(),e,this.pos),i)/r,a=t.scaleAndAdd(t.create(),this.pos,this.dir,o);return t.copy(n,a),!0}}class p{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,i,n){const r=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=t.transformMat4([],n,e),a=1/o[3]/i*r;return t.mul(o,o,[a,a,1/o[3],a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const i=t.sub([],o[e[0]],o[e[1]]),n=t.sub([],o[e[2]],o[e[1]]),r=t.normalize([],t.cross([],i,n)),a=-t.dot(r,o[e[1]]);return r.concat(a)}));return new p(o,a)}}class f{constructor(e,i){this.min=e,this.max=i,this.center=t.scale([],t.add([],this.min,this.max),.5)}quadrant(e){const i=[e%2==0,e<2],n=t.clone(this.min),r=t.clone(this.max);for(let t=0;t<i.length;t++)n[t]=i[t]?this.min[t]:this.center[t],r[t]=i[t]?this.center[t]:this.max[t];return r[2]=this.max[2],new f(n,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}intersects(e){const i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let r=0;r<e.planes.length;r++){const o=e.planes[r];let a=0;for(let e=0;e<i.length;e++)a+=t.dot$1(o,i[e])>=0;if(0===a)return 0;a!==i.length&&(n=!1)}if(n)return 2;for(let t=0;t<3;t++){let i=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let r=0;r<e.points.length;r++){const o=e.points[r][t]-this.min[t];i=Math.min(i,o),n=Math.max(n,o)}if(n<0||i>this.max[t]-this.min[t])return 0}return 1}}function m(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class y extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,i){let n=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),n=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),n=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "content" value')))),n=!1),n}_validateStretch(t,e){if(!t)return!0;let i=0;for(const n of t){if(n[0]<i||n[1]<n[0]||e<n[1])return!1;i=n[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let i=!0;if(!this.isLoaded())for(const n of t)this.images[n]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,i){const n={};for(const r of e){this.images[r]||this.fire(new t.Event("styleimagemissing",{id:r}));const e=this.images[r];e?n[r]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce('Image "'.concat(r,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}i(null,n)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const i=this.patterns[e],n=this.getImage(e);if(!n)return null;if(i&&i.position.version===n.version)return i.position;if(i)i.position.version=n.version;else{const i={w:n.data.width+2,h:n.data.height+2,x:0,y:0},r=new t.ImagePosition(i,n);this.patterns[e]={bin:i,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:i,h:n}=t.potpack(e),r=this.atlasImage;r.resize({width:i||1,height:n||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],i=e.x+1,n=e.y+1,a=this.images[o].data,s=a.width,l=a.height;t.RGBAImage.copy(a,r,{x:0,y:0},{x:i,y:n},{width:s,height:l}),t.RGBAImage.copy(a,r,{x:0,y:l-1},{x:i,y:n-1},{width:s,height:1}),t.RGBAImage.copy(a,r,{x:0,y:0},{x:i,y:n+l},{width:s,height:1}),t.RGBAImage.copy(a,r,{x:s-1,y:0},{x:i-1,y:n},{width:1,height:l}),t.RGBAImage.copy(a,r,{x:0,y:0},{x:i+s,y:n},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];m(t)&&this.updateImage(e,t)}}}const v=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,i){return function([e,i,n]){const r=t.degToRad(i+90),o=t.degToRad(n);return{x:e*Math.cos(r)*Math.sin(o),y:e*Math.sin(r)*Math.sin(o),z:e*Math.cos(o),azimuthal:i,polar:n}}(e.expression.evaluate(i))}interpolate(e,i,n){return{x:t.number(e.x,i.x,n),y:t.number(e.y,i.y,n),z:t.number(e.z,i.z,n),azimuthal:t.number(e.azimuthal,i.azimuthal,n),polar:t.number(e.polar,i.polar,n)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),g="-transition";class _ extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(v),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,i={}){if(!this._validate(t.validateLight,e,i))for(const n in e){const i=e[n];t.endsWith(n,g)?this._transitionable.setTransition(n.slice(0,-g.length),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,i,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const b=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)}),x="-transition";class w extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(b),this.set(e),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(e){for(const i in e){const n=e[i];t.endsWith(i,x)?this._transitionable.setTransition(i.slice(0,-x.length),n):this._transitionable.setValue(i,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function S(e,i,n,r){const o=t.smoothstep(45,65,n),[a,s]=E(e,r),l=t.length(i);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*e.alpha}function E(t,e){const i=.5/Math.tan(.5*e);return[t.range[0]+i,t.range[1]+i]}const k=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"])}),P="-transition";class T extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(k),this.set(e),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e,i={}){if(!this._validate(t.validateFog,e,i))for(const n in e){const i=e[n];t.endsWith(n,P)?this._transitionable.setTransition(n.slice(0,-P.length),i):this._transitionable.setValue(n,i)}}getOpacity(e){const i=this.properties&&this.properties.get("color")||1;return t.smoothstep(45,65,e)*i.a}getOpacityAtLatLng(e,i){return function(e,i,n){const r=t.MercatorCoordinate.fromLngLat(i),o=n.elevation?n.elevation.getAtPointOrZero(r):0,a=[r.x,r.y,o];return t.transformMat4$1(a,a,n.mercatorFogMatrix),S(e,a,n.pitch,n._fov)}(this.state,e,i)}getFovAdjustedRange(t){return E(this.state,t)}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,i,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class C{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const n=this.workerPool.acquire(this.id);for(let t=0;t<n.length;t++){const e=new C.Actor(n[t],i,this.id);e.name="Worker ".concat(t),this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,i,n){t.asyncAll(this.actors,((t,n)=>{t.send(e,i,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function M(e,i,n){return i*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}C.Actor=t.Actor;class A{constructor(t,e,i,n){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((t=>n.pointCoordinate3D(t))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(e,i){let n,r;if(e instanceof t.pointGeometry||"number"==typeof e[0]){const o=t.pointGeometry.convert(e);n=[t.pointGeometry.convert(e)],r=i.isPointAboveHorizon(o)}else{const o=t.pointGeometry.convert(e[0]),a=t.pointGeometry.convert(e[1]);n=[o,a],r=t.polygonizeBounds(o,a).every((t=>i.isPointAboveHorizon(t)))}return new A(n,i.getCameraPoint(),r,i)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const i=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],r=t.polygonizeBounds(i,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>i.x&&this.cameraPoint.x<n.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?r[2]=this.cameraPoint:this.cameraPoint.x<=i.x&&(r[3]=this.cameraPoint)),t.bufferConvexPolygon(r,e)}containsTile(e,i,n){const r=e.queryPadding+1,o=n?this._bufferedCameraMercator(r,i).map((t=>e.tileID.getTilePoint(t))):this._bufferedScreenMercator(r,i).map((t=>e.tileID.getTilePoint(t))),a=this.screenGeometryMercator.map((t=>e.tileID.getTileVec3(t))),s=a.map((e=>new t.pointGeometry(e[0],e[1]))),l=i.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),c=e.tileID.getTileVec3(l),u=a.map((e=>{const i=t.sub(e,e,c);return t.normalize(i,i),new d(c,i)})),h=M(e,1,i.zoom);if(t.polygonIntersectsBox(o,0,0,t.EXTENT,t.EXTENT))return{queryGeometry:this,tilespaceGeometry:s,tilespaceRays:u,bufferedTilespaceGeometry:o,bufferedTilespaceBounds:(p=t.getBounds(o),p.min.x=t.clamp(p.min.x,0,t.EXTENT),p.min.y=t.clamp(p.min.y,0,t.EXTENT),p.max.x=t.clamp(p.max.x,0,t.EXTENT),p.max.y=t.clamp(p.max.y,0,t.EXTENT),p),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:h};var p}_bufferedScreenMercator(t,e){const i=O(t);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{const n=this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._screenRaycastCache[i]=n,n}}_bufferedCameraMercator(t,e){const i=O(t);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{const n=this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._cameraRaycastCache[i]=n,n}}}function O(t){return 100*t|0}function I(e,i,n){const r=function(r,o){if(r)return n(r);if(o){const r=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(r.vectorLayers=o.vector_layers,r.vectorLayerIds=r.vectorLayers.map((t=>t.id))),r.tiles=i.canonicalizeTileset(r,e.url),n(null,r)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.exported.frame((()=>r(null,e)))}class D{constructor(e,i,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=n||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=n&&e.x<o&&e.y>=r&&e.y<a}}class z{constructor(t,e,i){this.context=t;const n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const L={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class R{constructor(t,e,i,n){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let i=0;i<this.attributes.length;i++){const n=e.attributes[this.attributes[i].name];void 0!==n&&t.enableVertexAttribArray(n)}}setVertexAttribPointers(t,e,i){for(let n=0;n<this.attributes.length;n++){const r=this.attributes[n],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[L[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class F{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class B extends F{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class j extends F{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class N extends F{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class V extends F{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class U extends F{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class G extends F{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class q extends F{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Z extends F{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class H extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class W extends F{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class X extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Y extends F{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class K extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class $ extends F{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class J extends F{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Q extends F{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class tt extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class et extends F{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class it extends F{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class nt extends F{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class rt extends F{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ot extends F{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class at extends F{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class st extends F{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class lt extends F{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ct extends F{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ut extends F{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ht extends F{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class dt extends F{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class pt extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class ft extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class mt extends F{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class yt extends mt{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class vt extends mt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class gt extends vt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class _t{constructor(t,e,i,n){this.context=t,this.width=e,this.height=i;const r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new yt(t,r),n&&(this.depthAttachment=new vt(t,r))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class bt{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new B(this),this.clearDepth=new j(this),this.clearStencil=new N(this),this.colorMask=new V(this),this.depthMask=new U(this),this.stencilMask=new G(this),this.stencilFunc=new q(this),this.stencilOp=new Z(this),this.stencilTest=new H(this),this.depthRange=new W(this),this.depthTest=new X(this),this.depthFunc=new Y(this),this.blend=new K(this),this.blendFunc=new $(this),this.blendColor=new J(this),this.blendEquation=new Q(this),this.cullFace=new tt(this),this.cullFaceSide=new et(this),this.frontFace=new it(this),this.program=new nt(this),this.activeTexture=new rt(this),this.viewport=new ot(this),this.bindFramebuffer=new at(this),this.bindRenderbuffer=new st(this),this.bindTexture=new lt(this),this.bindVertexBuffer=new ct(this),this.bindElementBuffer=new ut(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ht(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new pt(this),this.pixelStoreUnpackFlipY=new ft(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new z(this,t,e)}createVertexBuffer(t,e,i){return new R(this,t,e,i)}createRenderbuffer(t,e,i){const n=this.gl,r=n.createRenderbuffer();return this.bindRenderbuffer.set(r),n.renderbufferStorage(n.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,i){return new _t(this,t,e,i)}clear({color:t,depth:e,stencil:i}){const n=this.gl;let r=0;t&&(r|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==i&&(r|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),n.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(e){r(e.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class xt extends t.Evented{constructor(e,i,n,r){super(),this.id=e,this.dispatcher=n,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new D(i.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(i.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,i){const n=t.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),n,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((n,r,o,a)=>{if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a});const n=this.map.painter.context,s=n.gl;e.texture=this.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new t.Texture(n,r,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),i(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let wt;var St=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Et extends t.Evented{constructor(t,e,i,n){super(),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=e}load(e,i){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,r)=>{this._loaded=!0,n?this.fire(new t.ErrorEvent(n)):r&&(this.image=t.exported.getImageData(r),e&&(this.coordinates=e),i&&i(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let i=1/0,n=1/0,r=-1/0,o=-1/0;for(const t of e)i=Math.min(i,t.x),n=Math.min(n,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y);const a=Math.max(r-i,o-n),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((i+r)/2*l),Math.floor((n+o)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const n=i.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const kt={vector:class extends t.Evented{constructor(e,i,n,r){if(super(),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new D(i.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t();const e=this.map.style._getSourceCaches(this.id);for(const i of e)i.clearTiles();this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,i){const n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",r,o.bind(this));else if(e.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",r,o.bind(this),void 0,!0);else{const i=t.loadVectorTile.call({deduped:this._deduped},r,((t,i)=>{t||!i?o.call(this,t):(r.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},e.actor&&e.actor.send("loadTile",r,o.bind(this),void 0,!0))}),!0);e.request={cancel:i}}function o(n,r){return delete e.request,e.aborted?i(null):n&&404!==n.status?i(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:xt,"raster-dem":class extends xt{constructor(e,i,n,r){super(e,i,n,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(e,i){const n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(t,n){t&&(e.state="errored",i(t)),n&&(e.dem=n,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),function(n,o,a,s){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s});const i=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==wt&&(wt=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),wt),n=1-(o.width-t.prevPowerOfTwo(o.width))/2;n<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=i?o:t.exported.getImageData(o,n),c={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:n};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",c,r.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const i=e.canonical,n=Math.pow(2,i.z),r=(i.x-1+n)%n,o=0===i.x?e.wrap-1:e.wrap,a=(i.x+1+n)%n,s=i.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,i.z,r,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,r,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1}),i.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,r,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,i,n,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(r),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},n),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(i),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(i),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),e,((e,i)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&i&&i.resourceTiming&&i.resourceTiming[this.id]&&(e.resourceTiming=i.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,i){const n=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(n,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,r)=>(delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(r,this.map.painter,"reloadTile"===n),i(null)))),void 0,"loadTile"===n)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Et{constructor(t,e,i,n){super(t,e,i,n),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const i of e.urls)this.urls.push(this.map._requestManager.transformRequest(i,t.ResourceType.Source).url);t.getVideo(this.urls,((e,i)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(i.start(0)," and ").concat(i.end(0),"-second mark.")))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Et,canvas:class extends Et{constructor(e,i,n,r){super(e,i,n,r),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,n=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,n.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}},Pt=function(e,i,n,r){const o=new kt[i.type](e,i,n,r);if(o.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(o.id));return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Tt(e,i){const n=t.identity([]);return t.scale$1(n,n,[.5*e.width,.5*-e.height,1]),t.translate(n,n,[1,-1,0]),t.multiply(n,n,e.calculateProjMatrix(i.toUnwrapped()))}function Ct(t,e,i,n,r,o,a,s=!1){const l=t.tilesIn(n,a,s);l.sort(At);const c=[];for(const h of l)c.push({wrappedTileID:h.tile.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,i,t._state,h,r,o,Tt(t.transform,h.tile.tileID),s)});const u=function(t){const e={},i={};for(const n of t){const t=n.queryResults,r=n.wrappedTileID,o=i[r]=i[r]||{};for(const i in t){const n=t[i],r=o[i]=o[i]||{},a=e[i]=e[i]||[];for(const t of n)r[t.featureIndex]||(r[t.featureIndex]=!0,a.push(t))}}return e}(c);for(const h in u)u[h].forEach((e=>{const i=e.feature,n=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return u}function Mt(t,e){const i=t.getRenderableIds().map((e=>t.getTileByID(e))),n=[],r={};for(let o=0;o<i.length;o++){const t=i[o],a=t.tileID.canonical.key;r[a]||(r[a]=!0,t.querySourceFeatures(n,e))}return n}function At(t,e){const i=t.tileID,n=e.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}function Ot(){return null!=Hr.workerClass?new Hr.workerClass:new t.window.Worker(Hr.workerUrl)}const It="mapboxgl_preloaded_worker_pool";class Dt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new Ot);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[It]}numActive(){return Object.keys(this.active).length}}let zt;function Lt(){return zt||(zt=new Dt),zt}function Rt(e,i){const n={};for(const t in e)"ref"!==t&&(n[t]=e[t]);return t.refProperties.forEach((t=>{t in i&&(n[t]=i[t])})),n}function Ft(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Rt(t[i],e[t[i].ref]));return t}Dt.workerCount=2;const Bt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function jt(t,e,i){i.push({command:Bt.addSource,args:[t,e[t]]})}function Nt(t,e,i){e.push({command:Bt.removeSource,args:[t]}),i[t]=!0}function Vt(t,e,i,n){Nt(t,i,n),jt(t,e,i)}function Ut(t,e,i){let n;for(n in t[i])if(t[i].hasOwnProperty(n)&&"data"!==n&&!r(t[i][n],e[i][n]))return!1;for(n in e[i])if(e[i].hasOwnProperty(n)&&"data"!==n&&!r(t[i][n],e[i][n]))return!1;return!0}function Gt(t,e,i,n,o,a){let s;for(s in e=e||{},t=t||{})t.hasOwnProperty(s)&&(r(t[s],e[s])||i.push({command:a,args:[n,s,e[s],o]}));for(s in e)e.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(r(t[s],e[s])||i.push({command:a,args:[n,s,e[s],o]}))}function qt(t){return t.id}function Zt(t,e){return t[e.id]=e,t}class Ht{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let i=1,n=this._distances[i];const r=e*this.paddedLength+this.padding;for(;n<r&&i<this._distances.length;)n=this._distances[++i];const o=i-1,a=this._distances[o],s=n-a,l=s>0?(r-a)/s:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}class Wt{constructor(t,e,i){const n=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(let o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)}insertCircle(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n)}_insertBoxCell(t,e,i,n,r,o){this.boxCells[r].push(o)}_insertCircleCell(t,e,i,n,r,o){this.circleCells[r].push(o)}_query(t,e,i,n,r,o){if(i<0||t>this.width||n<0||e>this.height)return!r&&[];const a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(r)return!0;for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],i=this.circles[3*t+1],n=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-n,y1:i-n,x2:e+n,y2:i+n})}return o?a.filter(o):a}return this._forEachCell(t,e,i,n,this._queryCell,a,{hitTest:r,seenUids:{box:{},circle:{}}},o),r?a.length>0:a}_queryCircle(t,e,i,n,r){const o=t-i,a=t+i,s=e-i,l=e+i;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},r),n?c.length>0:c}query(t,e,i,n,r){return this._query(t,e,i,n,!1,r)}hitTest(t,e,i,n,r){return this._query(t,e,i,n,!0,r)}hitTestCircle(t,e,i,n){return this._queryCircle(t,e,i,!0,n)}_queryCell(t,e,i,n,r,o,a,s){const l=a.seenUids,c=this.boxCells[r];if(null!==c){const r=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(t<=r[c+2]&&e<=r[c+3]&&i>=r[c+0]&&n>=r[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:r[c],y1:r[c+1],x2:r[c+2],y2:r[c+3]})}}}const u=this.circleCells[r];if(null!==u){const r=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(r[u],r[u+1],r[u+2],t,e,i,n)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const t=r[u],e=r[u+1],i=r[u+2];o.push({key:this.circleKeys[c],x1:t-i,y1:e-i,x2:t+i,y2:e+i})}}}}}_queryCellCircle(t,e,i,n,r,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[r];if(null!==u){const t=this.bboxes;for(const e of u)if(!c.box[e]){c.box[e]=!0;const i=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[i+0],t[i+1],t[i+2],t[i+3])&&(!s||s(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[r];if(null!==h){const t=this.circles;for(const e of h)if(!c.circle[e]){c.circle[e]=!0;const i=3*e;if(this._circlesCollide(t[i],t[i+1],t[i+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,i,n,r,o,a,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(n);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(r.call(this,t,e,i,n,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,i,n,r,o){const a=n-t,s=r-e,l=i+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,i,n,r,o,a){const s=(o-n)/2,l=Math.abs(t-(n+s));if(l>s+i)return!1;const c=(a-r)/2,u=Math.abs(e-(r+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=i*i}}const Xt=Math.tan(85*Math.PI/180);function Yt(e,i,n,r,o){const a=t.create$1();return i?(t.scale$1(a,a,[1/o,1/o,1]),n||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function Kt(e,i,n,r,o){if(i){const i=t.clone$1(e);return t.scale$1(i,i,[o,o,1]),n||t.rotateZ(i,i,-r.angle),i}return r.glCoordMatrix}function $t(e,i,n=0){const r=[e.x,e.y,n,1];n?t.transformMat4(r,r,i):ce(r,r,i);const o=r[3];return{point:new t.pointGeometry(r[0]/o,r[1]/o),signedDistanceFromCamera:o}}function Jt(t,e){return Math.min(.5+t/e*.5,1.5)}function Qt(t,e){const i=t[0]/t[3],n=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&n>=-e[1]&&n<=e[1]}function te(e,i,n,r,o,a,s,l,c){const u=r?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(u,n.transform.zoom),d=[256/n.width*2+1,256/n.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();const f=e.lineVertexArray,m=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,y=n.transform.width/n.transform.height;let v=!1;for(let g=0;g<m.length;g++){const r=m.get(g);if(r.writingMode!==t.WritingMode.vertical||v||0!==g&&m.get(g-1).writingMode===t.WritingMode.horizontal||(v=!0),r.hidden||r.writingMode===t.WritingMode.vertical&&!v){le(r.numGlyphs,p);continue}v=!1;const _=new t.pointGeometry(r.tileAnchorX,r.tileAnchorY),b=c?c(_):0,x=[_.x,_.y,b],w=[...x,1];if(t.transformMat4(w,w,i),!Qt(w,d)){le(r.numGlyphs,p);continue}const S=Jt(n.transform.cameraToCenterDistance,w[3]),E=t.evaluateSizeForFeature(u,h,r),k=s?E/S:E*S,P=$t(new t.pointGeometry(x[0],x[1]),o,x[2]);if(P.signedDistanceFromCamera<=0){le(r.numGlyphs,p);continue}let T={};const C=s?null:c,M=ne(r,k,!1,l,i,o,a,e.glyphOffsetArray,f,p,P.point,_,T,y,C);v=M.useVertical,C&&M.needsFlipping&&(T={}),(M.notEnoughRoom||v||M.needsFlipping&&ne(r,k,!0,l,i,o,a,e.glyphOffsetArray,f,p,P.point,_,T,y,C).notEnoughRoom)&&le(r.numGlyphs,p)}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function ee(t,e,i,n,r,o,a,s,l,c,u,h,d){const p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,y=e.getoffsetX(s.glyphStartIndex),v=e.getoffsetX(p-1),g=ae(t*y,i,n,r,o,a,s.segment,f,m,l,c,u,h,d,!0);if(!g)return null;const _=ae(t*v,i,n,r,o,a,s.segment,f,m,l,c,u,h,d,!0);return _?{first:g,last:_}:null}function ie(e,i,n,r){return e.writingMode===t.WritingMode.horizontal&&Math.abs(n.y-i.y)>Math.abs(n.x-i.x)*r?{useVertical:!0}:e.writingMode===t.WritingMode.vertical?i.y<n.y?{needsFlipping:!0}:null:0!==e.flipState&&function(t,e,i){const n=(e.x-t.x)*i;return 0===n||Math.abs((e.y-t.y)/n)>Xt}(i,n,r)?1===e.flipState?{needsFlipping:!0}:null:i.x>n.x?{needsFlipping:!0}:null}function ne(e,i,n,r,o,a,s,l,c,u,h,d,p,f,m){const y=i/24,v=e.lineOffsetX*y,g=e.lineOffsetY*y;let _;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,i=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,u=ee(y,l,v,g,n,h,d,e,c,a,p,m,!1);if(!u)return{notEnoughRoom:!0};const b=$t(u.first.point,s).point,x=$t(u.last.point,s).point;if(r&&!n){const t=ie(e,b,x,f);if(e.flipState=t&&t.needsFlipping?1:2,t)return t}_=[u.first];for(let r=e.glyphStartIndex+1;r<t-1;r++)_.push(ae(y*l.getoffsetX(r),v,g,n,h,d,e.segment,i,o,c,a,p,m,!1,!1));_.push(u.last)}else{if(r&&!n){const i=$t(d,o).point,n=e.lineStartIndex+e.segment+1,r=new t.pointGeometry(c.getx(n),c.gety(n)),a=$t(r,o),s=ie(e,i,a.signedDistanceFromCamera>0?a.point:oe(d,r,i,1,o,void 0),f);if(e.flipState=s&&s.needsFlipping?1:2,s)return s}const i=ae(y*l.getoffsetX(e.glyphStartIndex),v,g,n,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,p,m,!1,!1);if(!i)return{notEnoughRoom:!0};_=[i]}for(const b of _)t.addDynamicAttributes(u,b.point,b.angle);return{}}function re(e,i,n){const r={x:e.x,y:e.y,z:0};if(!n)return $t(r,i,r.z);const o=n(e);return $t(new t.pointGeometry(r.x,r.y),i,r.z+o)}function oe(t,e,i,n,r,o){const a=re(t.add(t.sub(e)._unit()),r,o).point,s=i.sub(a);return i.add(s._mult(n/s.mag()))}function ae(e,i,n,r,o,a,s,l,c,u,h,d,p,f,m){const y=r?e-i:e+i;let v=y>0?1:-1,g=0;r&&(v*=-1,g=Math.PI),v<0&&(g+=Math.PI);let _=v>0?l+s:l+s+1,b=o,x=o,w=0,S=0;const E=Math.abs(y),k=[],P=[];let T=a;const C=()=>{const e=_-v;return 0===w?a:new t.pointGeometry(u.getx(e),u.gety(e))},M=()=>oe(C(),T,x,E-w+1,h,p);for(;w+S<=E;){if(_+=v,_<l||_>=c)return null;if(x=b,k.push(b),f&&P.push(T||C()),b=d[_],void 0===b){T=new t.pointGeometry(u.getx(_),u.gety(_));const e=re(T,h,p);b=e.signedDistanceFromCamera>0?d[_]=e.point:M()}else T=null;w+=S,S=x.dist(b)}m&&p&&(T=T||new t.pointGeometry(u.getx(_),u.gety(_)),d[_]=b=void 0===d[_]?b:M(),S=x.dist(b));const A=(E-w)/S,O=b.sub(x),I=O.mult(A)._add(x);n&&I._add(O._unit()._perp()._mult(n*v));const D=g+Math.atan2(b.y-x.y,b.x-x.x);return k.push(I),f&&(T=T||new t.pointGeometry(u.getx(_),u.gety(_)),P.push(function(e,i,n){const r=1-n;return new t.pointGeometry(e.x*r+i.x*n,e.y*r+i.y*n)}(P.length>0?P[P.length-1]:T,T,A))),{point:I,angle:D,path:k,tilePath:P}}const se=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function le(t,e){for(let i=0;i<t;i++){const t=e.length;e.resize(t+4),e.float32.set(se,3*t)}}function ce(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t[3]=i[3]*n+i[7]*r+i[15],t}const ue=100;class he{constructor(t,e,i=new Wt(t.width+200,t.height+200,25),n=new Wt(t.width+200,t.height+200,25)){this.transform=t,this.grid=i,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ue,this.screenBottomBoundary=t.height+ue,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,i,n,r,o,a){let s=e.projectedAnchorZ;e.elevation&&(s+=e.elevation);const l=this.projectAndGetPerspectiveRatio(o,e.projectedAnchorX,e.projectedAnchorY,s,e.tileID),c=r*l.perspectiveRatio,u=(e.x1*t+i.x-e.padding)*c+l.point.x,h=(e.y1*t+i.y-e.padding)*c+l.point.y,d=(e.x2*t+i.x+e.padding)*c+l.point.x,p=(e.y2*t+i.y+e.padding)*c+l.point.y,f=l.perspectiveRatio<=.55||l.aboveHorizon;return!this.isInsideGrid(u,h,d,p)||!n&&this.grid.hitTest(u,h,d,p,a)||f?{box:[],offscreen:!1}:{box:[u,h,d,p],offscreen:this.isOffscreen(u,h,d,p)}}placeCollisionCircles(e,i,n,r,o,a,s,l,c,u,h,d,p,f){const m=[],y=this.transform.elevation,v=y?t=>y.getAtTileOffset(f,t.x,t.y):t=>0,g=new t.pointGeometry(i.tileAnchorX,i.tileAnchorY),_=v(g),b=this.projectAndGetPerspectiveRatio(a,g.x,g.y,_,f),{perspectiveRatio:x}=b,w=(u?o/x:o*x)/t.ONE_EM,S=$t(g,s,_).point,E=b.signedDistanceFromCamera>0?ee(w,r,i.lineOffsetX*w,i.lineOffsetY*w,!1,S,g,i,n,s,{},y&&!u?v:null,u&&!!y):null;let k=!1,P=!1,T=!0;if(E&&!b.aboveHorizon){const i=.5*d*x+p,n=new t.pointGeometry(-100,-100),r=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new Ht,a=E.first,s=E.last;let u=[];for(let t=a.path.length-1;t>=1;t--)u.push(a.path[t]);for(let t=1;t<s.path.length;t++)u.push(s.path[t]);const f=2.5*i;if(l){const t=u.map(y?(t,e)=>{const i=v(e<a.path.length-1?a.tilePath[a.path.length-1-e]:s.tilePath[e-a.path.length+2]);return $t(t,l,i)}:t=>$t(t,l));u=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let g=[];if(u.length>0){const e=u[0].clone(),i=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),i.x=Math.max(i.x,u[t].x),i.y=Math.max(i.y,u[t].y);g=e.x>=n.x&&i.x<=r.x&&e.y>=n.y&&i.y<=r.y?[u]:i.x<n.x||e.x>r.x||i.y<n.y||e.y>r.y?[]:t.clipLine([u],n.x,n.y,r.x,r.y)}for(const t of g){o.reset(t,.25*i);let n=0;n=o.length<=.5*i?1:Math.ceil(o.paddedLength/f)+1;for(let t=0;t<n;t++){const r=t/Math.max(n-1,1),a=o.lerp(r),s=a.x+ue,l=a.y+ue;m.push(s,l,i,0);const u=s-i,d=l-i,p=s+i,f=l+i;if(T=T&&this.isOffscreen(u,d,p,f),P=P||this.isInsideGrid(u,d,p,f),!e&&this.grid.hitTestCircle(s,l,i,h)&&(k=!0,!c))return{circles:[],offscreen:!1,collisionDetected:k}}}}return{circles:!c&&k||!P?[]:m,offscreen:T,collisionDetected:k}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let n=1/0,r=1/0,o=-1/0,a=-1/0;for(const u of e){const e=new t.pointGeometry(u.x+ue,u.y+ue);n=Math.min(n,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),i.push(e)}const s=this.grid.query(n,r,o,a).concat(this.ignoredGrid.query(n,r,o,a)),l={},c={};for(const u of s){const e=u.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const n=[new t.pointGeometry(u.x1,u.y1),new t.pointGeometry(u.x2,u.y1),new t.pointGeometry(u.x2,u.y2),new t.pointGeometry(u.x1,u.y2)];t.polygonIntersectsPolygon(i,n)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(t,e,i,n,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:n,collisionGroupID:r},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,i,n,r){const o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:n,collisionGroupID:r};for(let s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])}projectAndGetPerspectiveRatio(e,i,n,r,o){const a=[i,n,r||0,1];let s=!1;if(r||this.transform.pitch>0){t.transformMat4(a,a,e);let l=!1;this.fogState&&o&&(l=function(e,i,n,r,o,a){const s=a.calculateFogTileMatrix(o),l=[i,n,r];return t.transformMat4$1(l,l,s),S(e,l,a.pitch,a._fov)}(this.fogState,i,n,r||0,o.toUnwrapped(),this.transform)>.9),s=a[2]>a[3]||l}else ce(a,a,e);return{point:new t.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+ue,(-a[1]/a[3]+1)/2*this.transform.height+ue),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5),signedDistanceFromCamera:a[3],aboveHorizon:s}}isOffscreen(t,e,i,n){return i<ue||t>=this.screenRightBoundary||n<ue||e>this.screenBottomBoundary}isInsideGrid(t,e,i,n){return i>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}class de{constructor(t,e,i,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class pe{constructor(t,e,i,n,r){this.text=new de(t?t.text:null,e,i,r),this.icon=new de(t?t.icon:null,e,n,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class fe{constructor(t,e,i){this.text=t,this.icon=e,this.skipFade=i}}class me{constructor(){this.invProjMatrix=t.create$1(),this.viewportMatrix=t.create$1(),this.circles=[]}}class ye{constructor(t,e,i,n,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=r}}class ve{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function ge(e,i,n,r,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*i,c=-(s-.5)*n,u=t.evaluateVariableOffset(e,r);return new t.pointGeometry(l+u[0]*o,c+u[1]*o)}function _e(e,i,n,r,o){const a=new t.pointGeometry(e,i);return n&&a._rotate(r?o:-o),a}class be{constructor(t,e,i,n,r){this.transform=t.clone(),this.collisionIndex=new he(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ve(i),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,i,n,r){const o=n.getBucket(i),a=n.latestFeatureIndex;if(!o||!a||i.id!==o.layerIds[0])return;const s=n.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/t.EXTENT,h=this.transform.calculateProjMatrix(n.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),f=M(n,1,this.transform.zoom),m=Yt(h,d,p,this.transform,f);let y=null;if(d){const e=Kt(h,d,p,this.transform,f);y=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new ye(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID);const v={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:y,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const t of o.sortKeyRanges){const{sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:r}=t;e.push({sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:r,parameters:v})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:v})}attemptAnchorPlacement(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v){const g=[h.textOffset0,h.textOffset1],_=ge(t,i,n,g,r),b=this.collisionIndex.placeCollisionBox(r,e,_e(_.x,_.y,o,a,this.transform.angle),u,s,l,c.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(v,this.transform.zoom,d),m,_e(_.x,_.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)&&b.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(e=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:g,width:i,height:n,anchor:t,textScale:r,prevAnchor:e},this.markUsedJustification(p,t,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[h.crossTileID]=f),{shift:_,placedGlyphBoxes:b}}}placeLayerBucketPart(e,i,n,r){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,textPixelRatio:u,holdingForFade:h,collisionBoxArray:d,partiallyEvaluatedTextSize:p,partiallyEvaluatedIconSize:f,collisionGroup:m}=e.parameters,y=a.get("text-optional"),v=a.get("icon-optional"),g=a.get("text-allow-overlap"),_=a.get("icon-allow-overlap"),b="map"===a.get("text-rotation-alignment"),x="map"===a.get("text-pitch-alignment"),w="none"!==a.get("icon-text-fit"),S="viewport-y"===a.get("symbol-z-order"),E=g&&(_||!o.hasIconData()||v),k=_&&(g||!o.hasTextData()||y);!o.collisionArrays&&d&&o.deserializeCollisionBoxes(d),n&&r&&o.updateCollisionDebugBuffers(this.transform.zoom,d);const P=(e,r,d)=>{if(i[e.crossTileID])return;if(h)return void(this.placements[e.crossTileID]=new fe(!1,!1,!1));let S=!1,P=!1,T=!0,C=null,M={box:null,offscreen:null},A={box:null,offscreen:null},O=null,I=null,D=null,z=0,L=0,R=0;d.textFeatureIndex?z=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(z=e.featureIndex),d.verticalTextFeatureIndex&&(L=d.verticalTextFeatureIndex);const F=t=>{t.tileID=this.retainedQueryData[o.bucketInstanceId].tileID,(this.transform.elevation||t.elevation)&&(t.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[o.bucketInstanceId].tileID,t.tileAnchorX,t.tileAnchorY):0)},B=d.textBox;if(B){F(B);const i=i=>{let n=t.WritingMode.horizontal;if(o.allowVerticalPlacement&&!i&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,n=t,this.markUsedOrientation(o,n,e))}return n},n=(i,n)=>{if(o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&d.verticalTextBox){for(const e of o.writingModes)if(e===t.WritingMode.vertical?(M=n(),A=M):M=i(),M&&M.box&&M.box.length)break}else M=i()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];l.indexOf(t.anchor)>0&&(l=l.filter((e=>e!==t.anchor)),l.unshift(t.anchor))}const c=(t,i,n)=>{const a=o.getSymbolInstanceTextSize(p,e,this.transform.zoom,r),c=(t.x2-t.x1)*a+2*t.padding,h=(t.y2-t.y1)*a+2*t.padding,d=w&&!_?i:null;d&&F(d);let y={box:[],offscreen:!1};const v=g?2*l.length:l.length;for(let g=0;g<v;++g){const i=this.attemptAnchorPlacement(l[g%l.length],t,c,h,a,b,x,u,s,m,g>=l.length,e,r,o,n,d,p,f);if(i&&(y=i.placedGlyphBoxes,y&&y.box&&y.box.length)){S=!0,C=i.shift;break}}return y};n((()=>c(B,d.iconBox,t.WritingMode.horizontal)),(()=>{const i=d.verticalTextBox;return i&&F(i),o.allowVerticalPlacement&&!(M&&M.box&&M.box.length)&&e.numVerticalGlyphVertices>0&&i?c(i,d.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),M&&(S=M.box,T=M.offscreen);const h=i(M&&M.box);if(!S&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(o,t.anchor,e,h))}}else{const a=(i,n)=>{const a=o.getSymbolInstanceTextSize(p,e,this.transform.zoom,r),l=this.collisionIndex.placeCollisionBox(a,i,new t.pointGeometry(0,0),g,u,s,m.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,n,e),this.placedOrientations[e.crossTileID]=n),l};n((()=>a(B,t.WritingMode.horizontal)),(()=>{const i=d.verticalTextBox;return o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?(F(i),a(i,t.WritingMode.vertical)):{box:null,offscreen:null}})),i(M&&M.box&&M.box.length)}}if(O=M,S=O&&O.box&&O.box.length>0,T=O&&O.offscreen,e.useRuntimeCollisionCircles){const i=o.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),r=t.evaluateSizeForFeature(o.textSizeData,p,i),u=a.get("text-padding");I=this.collisionIndex.placeCollisionCircles(g,i,o.lineVertexArray,o.glyphOffsetArray,r,s,l,c,n,x,m.predicate,e.collisionCircleDiameter*r/t.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),S=g||I.circles.length>0&&!I.collisionDetected,T=T&&I.offscreen}if(d.iconFeatureIndex&&(R=d.iconFeatureIndex),d.iconBox){const e=e=>{F(e);const i=w&&C?_e(C.x,C.y,b,x,this.transform.angle):new t.pointGeometry(0,0),n=o.getSymbolInstanceIconSize(f,this.transform.zoom,r);return this.collisionIndex.placeCollisionBox(n,e,i,_,u,s,m.predicate)};A&&A.box&&A.box.length&&d.verticalIconBox?(D=e(d.verticalIconBox),P=D.box.length>0):(D=e(d.iconBox),P=D.box.length>0),T=T&&D.offscreen}const j=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,N=v||0===e.numIconVertices;if(j||N?N?j||(P=P&&S):S=P&&S:P=S=P&&S,S&&O&&O.box&&this.collisionIndex.insertCollisionBox(O.box,a.get("text-ignore-placement"),o.bucketInstanceId,A&&A.box&&L?L:z,m.ID),P&&D&&this.collisionIndex.insertCollisionBox(D.box,a.get("icon-ignore-placement"),o.bucketInstanceId,R,m.ID),I&&(S&&this.collisionIndex.insertCollisionCircles(I.circles,a.get("text-ignore-placement"),o.bucketInstanceId,z,m.ID),n)){const t=o.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new me);for(let i=0;i<I.circles.length;i+=4)e.circles.push(I.circles[i+0]),e.circles.push(I.circles[i+1]),e.circles.push(I.circles[i+2]),e.circles.push(I.collisionDetected?1:0)}this.placements[e.crossTileID]=new fe(S||E,P||k,T||o.justReloaded),i[e.crossTileID]=!0};if(S){const t=o.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const i=t[e];P(o.symbolInstances.get(i),i,o.collisionArrays[i])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)P(o.symbolInstances.get(t),t,o.collisionArrays[t]);if(n&&o.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[o.bucketInstanceId];t.invert(e.invProjMatrix,s),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(e,i,n,r){let o;o=r===t.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];const a=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:n.crossTileID)}markUsedOrientation(e,i,n){const r=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,o=i===t.WritingMode.vertical?i:0,a=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=r;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const n=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(const s in this.placements){const t=this.placements[s],e=r[s];e?(this.opacities[s]=new pe(e,n,t.text,t.icon),i=i||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[s]=new pe(null,n,t.text,t.icon,t.skipFade),i=i||t.text||t.icon)}for(const s in r){const t=r[s];if(!this.opacities[s]){const e=new pe(t,n,!1,!1);e.isHidden()||(this.opacities[s]=e,i=i||t.text.placed||t.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const i={};for(const n of e){const e=n.getBucket(t);e&&n.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,i,n.collisionBoxArray)}}updateBucketOpacities(e,i,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const r=e.layers[0].layout,o=new pe(null,0,!1,!1,!0),a=r.get("text-allow-overlap"),s=r.get("icon-allow-overlap"),l=r.get("text-variable-anchor"),c="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),h="none"!==r.get("icon-text-fit"),d=new pe(null,0,a&&(s||!e.hasIconData()||r.get("icon-optional")),s&&(a||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);const p=(t,e,i)=>{for(let n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(i)};for(let f=0;f<e.symbolInstances.length;f++){const n=e.symbolInstances.get(f),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:a,crossTileID:s}=n;let m=this.opacities[s];i[s]?m=o:m||(m=d,this.opacities[s]=m),i[s]=!0;const y=n.numIconVertices>0,v=this.placedOrientations[n.crossTileID],g=v===t.WritingMode.vertical,_=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(r>0||a>0){const t=Me(m.text);p(e.text,r,g?Ae:t),p(e.text,a,_?Ae:t);const i=m.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||g?1:0)})),n.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=i||_?1:0);const o=this.variableOffsets[n.crossTileID];o&&this.markUsedJustification(e,o.anchor,n,v);const s=this.placedOrientations[n.crossTileID];s&&(this.markUsedJustification(e,"left",n,s),this.markUsedOrientation(e,s,n))}if(y){const t=Me(m.icon);n.placedIconSymbolIndex>=0&&(p(e.icon,n.numIconVertices,g?Ae:t),e.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=m.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,n.numVerticalIconVertices,_?Ae:t),e.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const i=e.collisionArrays[f];if(i){let n=new t.pointGeometry(0,0);if(i.textBox||i.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[s];e?(n=ge(e.anchor,e.width,e.height,e.textOffset,e.textScale),c&&n._rotate(u?this.transform.angle:-this.transform.angle)):t=!1}i.textBox&&xe(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||g,n.x,n.y),i.verticalTextBox&&xe(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||_,n.x,n.y)}const r=Boolean(!_&&i.verticalIconBox);i.iconBox&&xe(e.iconCollisionBox.collisionVertexArray,m.icon.placed,r,h?n.x:0,h?n.y:0),i.verticalIconBox&&xe(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!r,h?n.x:0,h?n.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t}setStale(){this.stale=!0}}function xe(t,e,i,n,r){t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0)}const we=Math.pow(2,25),Se=Math.pow(2,24),Ee=Math.pow(2,17),ke=Math.pow(2,16),Pe=Math.pow(2,9),Te=Math.pow(2,8),Ce=Math.pow(2,1);function Me(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*we+e*Se+i*Ee+e*ke+i*Pe+e*Te+i*Ce+e}const Ae=0;class Oe{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,i,n,r){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;){const t=o[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,i,0===t.symbolInstanceStart),this._currentPartIndex++,r())return!0}return!1}}class Ie{constructor(t,e,i,n,r,o,a,s){this.placement=new be(t,r,o,a,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(e,i,n){const r=t.exported.now(),o=()=>{const e=t.exported.now()-r;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=i[e[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=r)&&(!t.maxzoom||t.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new Oe(t)),this._inProgressLayer.continuePlacement(n[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const De=512/t.EXTENT/2;class ze{constructor(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let n=0;n<e.length;n++){const i=e.get(n),r=i.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}}getScaledCoordinates(e,i){const n=De/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.tileAnchorX)*n),y:Math.floor((i.canonical.y*t.EXTENT+e.tileAnchorY)*n)}}findMatches(t,e,i){const n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let r=0;r<t.length;r++){const o=t.get(r);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,e);for(const t of a)if(Math.abs(t.coord.x-s.x)<=n&&Math.abs(t.coord.y-s.y)<=n&&!i[t.crossTileID]){i[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class Le{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Re{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const i in this.indexes){const t=this.indexes[i],n={};for(const i in t){const r=t[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),n[r.tileID.key]=r}this.indexes[i]=n}this.lng=t}addBucket(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const n=this.usedCrossTileIDs[t.overscaledZ];for(const r in this.indexes){const i=this.indexes[r];if(Number(r)>t.overscaledZ)for(const r in i){const o=i[r];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,n)}else{const o=i[t.scaledTo(Number(r)).key];o&&o.findMatches(e.symbolInstances,t,n)}}for(let r=0;r<e.symbolInstances.length;r++){const t=e.symbolInstances.get(r);t.crossTileID||(t.crossTileID=i.generate(),n[t.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ze(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const i in e.indexedSymbolInstances)for(const n of e.indexedSymbolInstances[i])delete this.usedCrossTileIDs[t][n.crossTileID]}removeStaleBuckets(t){let e=!1;for(const i in this.indexes){const n=this.indexes[i];for(const r in n)t[n[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[r]),delete n[r],e=!0)}return e}}class Fe{constructor(){this.layerIndexes={},this.crossTileIDs=new Le,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,i){let n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Re);let r=!1;const o={};n.handleWrapJump(i);for(const a of e){const e=a.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(a.tileID,e,this.crossTileIDs)&&(r=!0),o[e.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const i in this.layerIndexes)e[i]||delete this.layerIndexes[i]}}const Be=(e,i)=>t.emitValidationErrors(e,i&&i.filter((t=>"source.canvas"!==t.identifier))),je=t.pick(Bt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),Ne=t.pick(Bt,["setCenter","setZoom","setBearing","setPitch"]),Ve=function(){const e={},i=t.spec.$version;for(const n in t.spec.$root){const r=t.spec.$root[n];if(r.required){let t=null;t="version"===n?i:"array"===r.type?[]:{},null!=t&&(e[n]=t)}}return e}(),Ue={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ge extends t.Evented{constructor(e,i={}){super(),this.map=e,this.dispatcher=new C(Lt(),this),this.imageManager=new y,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,i.localFontFamily?t.LocalGlyphMode.all:i.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,i.localFontFamily||i.localIdeographFontFamily),this.lineAtlas=new t.LineAtlas(256,512),this.crossTileSymbolIndex=new Fe,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const n=this;this._rtlTextPluginCallback=Ge.registerForPluginStateChange((e=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,i)=>{if(t.triggerPluginCompletionEvent(e),i&&i.every((t=>t)))for(const t in n._sourceCaches){const e=n._sourceCaches[t],i=e.getSource().type;"vector"!==i&&"geojson"!==i||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const i in this._layers){const t=this._layers[i];t.source===e.id&&this._validateLayer(t)}}))}loadURL(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const n="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);const r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,((e,i)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):i&&this._load(i,n)}))}loadJSON(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==i.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ve,!1)}_updateLayerCount(t,e){const i=e?1:-1;t.is3D()&&(this._num3DLayers+=i),"circle"===t.type&&(this._numCircleLayers+=i),"symbol"===t.type&&(this._numSymbolLayers+=i)}_load(e,i){if(i&&Be(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const n=Ft(this.stylesheet.layers);this._order=n.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let r of n)r=t.createStyleLayer(r),r.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=r,this._serializedLayers[r.id]=r.serialize(),this._updateLayerCount(r,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,i,n){let r,o,a;const s=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,a||(a=t,r=e,u())})),c=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),((t,e)=>{c=null,a||(a=t,o=e,u())}));function u(){if(a)n(a);else if(r&&o){const e=t.exported.getImageData(o),i={};for(const n in r){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=r[n],f=new t.RGBAImage({width:o,height:a});t.RGBAImage.copy(e,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),i[n]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p}}n(null,i)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,((e,i)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(i)for(const t in i)this.imageManager.addImage(t,i[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const i=this.getSource(e.source);if(!i)return;const n=e.sourceLayer;n&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error('Source layer "'.concat(n,'" does not exist on source "').concat(i.id,'" as specified by style layer "').concat(e.id,'"'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const i of t){const t=this._layers[i];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&Ue[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const i=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(t.length||i.length)&&this._updateWorkerLayers(t,i);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const n in this._updatedPaintProps)this._layers[n].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const n={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];n[t]=e.used,e.used=!1}for(const t of this._order){const i=this._layers[t];if(i.recalculate(e,this._availableImages),!i.isHidden(e.zoom)){const t=this._getLayerSourceCache(i);t&&(t.used=!0)}const n=this.map.painter;if(n){const t=i.getProgramIds();if(!t)continue;const r=i.getProgramConfiguration(e.zoom);for(const e of t)n.useProgram(e,r)}}for(const r in n){const e=this._sourceCaches[r];n[r]!==e.used&&e.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),i&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Be(this,t.validateStyle(e)))return!1;(e=t.clone$2(e)).layers=Ft(e.layers);const i=function(t,e){if(!t)return[{command:Bt.setStyle,args:[e]}];let i=[];try{if(!r(t.version,e.version))return[{command:Bt.setStyle,args:[e]}];r(t.center,e.center)||i.push({command:Bt.setCenter,args:[e.center]}),r(t.zoom,e.zoom)||i.push({command:Bt.setZoom,args:[e.zoom]}),r(t.bearing,e.bearing)||i.push({command:Bt.setBearing,args:[e.bearing]}),r(t.pitch,e.pitch)||i.push({command:Bt.setPitch,args:[e.pitch]}),r(t.sprite,e.sprite)||i.push({command:Bt.setSprite,args:[e.sprite]}),r(t.glyphs,e.glyphs)||i.push({command:Bt.setGlyphs,args:[e.glyphs]}),r(t.transition,e.transition)||i.push({command:Bt.setTransition,args:[e.transition]}),r(t.light,e.light)||i.push({command:Bt.setLight,args:[e.light]}),r(t.fog,e.fog)||i.push({command:Bt.setFog,args:[e.fog]});const n={},o=[];!function(t,e,i,n){let o;for(o in e=e||{},t=t||{})t.hasOwnProperty(o)&&(e.hasOwnProperty(o)||Nt(o,i,n));for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)?r(t[o],e[o])||("geojson"===t[o].type&&"geojson"===e[o].type&&Ut(t,e,o)?i.push({command:Bt.setGeoJSONSourceData,args:[o,e[o].data]}):Vt(o,e,i,n)):jt(o,e,i))}(t.sources,e.sources,o,n);const a=[];t.layers&&t.layers.forEach((t=>{n[t.source]?i.push({command:Bt.removeLayer,args:[t.id]}):a.push(t)}));let s=t.terrain;s&&n[s.source]&&(i.push({command:Bt.setTerrain,args:[void 0]}),s=void 0),i=i.concat(o),r(s,e.terrain)||i.push({command:Bt.setTerrain,args:[e.terrain]}),function(t,e,i){e=e||[];const n=(t=t||[]).map(qt),o=e.map(qt),a=t.reduce(Zt,{}),s=e.reduce(Zt,{}),l=n.slice(),c=Object.create(null);let u,h,d,p,f,m,y;for(u=0,h=0;u<n.length;u++)d=n[u],s.hasOwnProperty(d)?h++:(i.push({command:Bt.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(i.push({command:Bt.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],i.push({command:Bt.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],p=a[d],f=s[d],!c[d]&&!r(p,f))if(r(p.source,f.source)&&r(p["source-layer"],f["source-layer"])&&r(p.type,f.type)){for(y in Gt(p.layout,f.layout,i,d,null,Bt.setLayoutProperty),Gt(p.paint,f.paint,i,d,null,Bt.setPaintProperty),r(p.filter,f.filter)||i.push({command:Bt.setFilter,args:[d,f.filter]}),r(p.minzoom,f.minzoom)&&r(p.maxzoom,f.maxzoom)||i.push({command:Bt.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?Gt(p[y],f[y],i,d,y.slice(6),Bt.setPaintProperty):r(p[y],f[y])||i.push({command:Bt.setLayerProperty,args:[d,y,f[y]]}));for(y in f)f.hasOwnProperty(y)&&!p.hasOwnProperty(y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?Gt(p[y],f[y],i,d,y.slice(6),Bt.setPaintProperty):r(p[y],f[y])||i.push({command:Bt.setLayerProperty,args:[d,y,f[y]]}))}else i.push({command:Bt.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],i.push({command:Bt.addLayer,args:[f,m]})}(a,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Bt.setStyle,args:[e]}]}return i}(this.serialize(),e).filter((t=>!(t.command in Ne)));if(0===i.length)return!1;const n=i.filter((t=>!(t.command in je)));if(n.length>0)throw new Error("Unimplemented: ".concat(n.map((t=>t.command)).join(", "),"."));return i.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,i,n={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(i).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources.".concat(e),i,null,n))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const r=Pt(e,i,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:r.serialize(),sourceId:e})));const o=i=>{const n=(i?"symbol:":"other:")+e,o=this._sourceCaches[n]=new t.SourceCache(n,r,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==i.type&&"geojson"!==i.type||o(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const i=this.getSource(e);if(void 0===i)throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while terrain is using it.'))));const n=this._getSourceCaches(e);for(const r of n)delete this._sourceCaches[r.id],delete this._updatedSources[r.id],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r.getSource().id})),r.setEventedParent(null),r.clearTiles();delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}addLayer(e,i,n={}){this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(r,'" already exists on this map'))));let o;if("custom"===e.type){if(Be(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$2(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers.".concat(r),e,{arrayIndex:-1},n))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=i?this._order.indexOf(i):this._order.length;if(i&&-1===a)return void this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(i,'" does not exist on this map.'))));this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[r]&&o.source&&s&&"custom"!==o.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,i){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))));if(e===i)return;const n=this._order.indexOf(e);this._order.splice(n,1);const r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(i,'" does not exist on this map.')))):(this._order.splice(r,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const i=this._layers[e];if(!i)return void this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be removed."))));i.setEventedParent(null),this._updateLayerCount(i,!1);const n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,i,n){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===n||(null!=i&&(r.minzoom=i),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot have zoom extent."))))}setFilter(e,i,n={}){this._checkLoaded();const o=this.getLayer(e);if(o){if(!r(o.filter,i))return null==i?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateStyle.filter,"layers.".concat(o.id,".filter"),i,null,n)||(o.filter=t.clone$2(i),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be filtered."))))}getFilter(e){return t.clone$2(this.getLayer(e).filter)}setLayoutProperty(e,i,n,o={}){this._checkLoaded();const a=this.getLayer(e);a?r(a.getLayoutProperty(i),n)||(a.setLayoutProperty(i,n,o),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be styled."))))}getLayoutProperty(e,i){const n=this.getLayer(e);if(n)return n.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style."))))}setPaintProperty(e,i,n,o={}){this._checkLoaded();const a=this.getLayer(e);a?r(a.getPaintProperty(i),n)||(a.setPaintProperty(i,n,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be styled."))))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,i){this._checkLoaded();const n=e.source,r=e.sourceLayer,o=this.getSource(n);if(void 0===o)return void this.fire(new t.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))));const a=o.type;if("geojson"===a&&r)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!r)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(n);for(const t of s)t.setFeatureState(r,e.id,i)}removeFeatureState(e,i){this._checkLoaded();const n=e.source,r=this.getSource(n);if(void 0===r)return void this.fire(new t.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))));const o=r.type,a="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(n);for(const t of s)t.removeFeatureState(a,e.id,i)}getFeatureState(e){this._checkLoaded();const i=e.source,n=e.sourceLayer,r=this.getSource(i);if(void 0!==r){if("vector"!==r.type||n)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(i)[0].getFeatureState(n,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const i=this._sourceCaches[t].getSource();e[i.id]||(e[i.id]=i.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,i={},n=[];for(let o=this._order.length-1;o>=0;o--){const r=this._order[o];if(e(r)){i[r]=o;for(const e of t){const t=e[r];if(t)for(const e of t)n.push(e)}}}n.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=n.length-1;t>=0;t--){const e=n[t].feature;if(i[e.layer.id]<o)break;r.push(e),n.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(e,i,n){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of i.layers){const i=this._layers[e];if(!i)return this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be queried for features.")))),[];r[i.source]=!0}}const o=[];i.availableImages=this._availableImages;const a=i&&i.layers?i.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),s=A.createFromScreenPoints(e,n);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;i.layers&&!r[e]||o.push(Ct(this._sourceCaches[t],this._layers,this._serializedLayers,s,i,n,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(t,e,i,n,r,o,a){const s={},l=o.queryRenderedSymbols(n),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(At);for(const u of c){const i=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],e,u.bucketIndex,u.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(const t in i){const e=s[t]=s[t]||[],n=i[t];n.sort(((t,e)=>{const i=u.featureSortOrder;if(i){const n=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(const t of n)e.push(t)}}for(const u in s)s[u].forEach((e=>{const n=e.feature,r=i(t[u]).getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const n=this._getSourceCaches(e);let r=[];for(const t of n)r=r.concat(Mt(t,i));return r}addSourceType(t,e,i){return Ge.getSourceType(t)?i(new Error('A source type called "'.concat(t,'" already exists.'))):(Ge.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const n=this.light.getLight();let o=!1;for(const t in e)if(!r(e[t],n[t])){o=!0;break}if(!o)return;const a={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(a)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof e.source){const i="terrain-dem-src";this.addSource(i,e.source),e=t.clone$2(e),e=t.extend(e,{source:i})}if(!this._validate(t.validateStyle.terrain,"terrain",e)){if(this.terrain){const i=this.terrain,n=i.get();for(const o in e)if(!r(e[o],n[o])){i.set(e),this.stylesheet.terrain=e;const n={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(n);break}}else this._createTerrain(e);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(e){const i=this.fog=new T(e);this.stylesheet.fog=e;const n={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const i=this.fog,n=i.get();for(const o in e)if(!r(e[o],n[o])){i.set(e),this.stylesheet.fog=e;const n={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(n);break}}else this._createFog(e);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(e){const i=this.terrain=new w(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const n={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(n)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_validate(e,i,n,r,o={}){return(!o||!1!==o.validate)&&Be(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:n,styleSpec:t.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const i of e)i.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const i of e)i.resume(),i.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,i,n,r,o=!1){let a=!1,s=!1;const l={};for(const t of this._order){const i=this._layers[t];if("symbol"!==i.type)continue;if(!l[i.source]){const t=this._getLayerSourceCache(i);if(!t)continue;l[i.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(i,l[i.source],e.center.lng);a=a||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Ie(e,this._order,o,i,n,r,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();const n=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};n(this._otherSourceCaches[e.source]),n(this._symbolSourceCaches[e.source])}getGlyphs(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)}getResource(e,i,n){return t.makeRequest(i,n)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}Ge.getSourceType=function(t){return kt[t]},Ge.setSourceType=function(t,e){kt[t]=e},Ge.registerForPluginStateChange=t.registerForPluginStateChange;var qe="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",Ze="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let He={},We={};He=$e("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec3 elevationVector(vec2 pos) {vec2 uv=pos/8192.0;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif",!0),We=$e("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const Xe=$e("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef TERRAIN\nhighp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ye=qe;var Ke={background:$e("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:$e("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:$e("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:$e("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$e("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec3 pos=vec3(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)));gl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:$e("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:$e("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$e("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$e("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:$e("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:$e("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:$e("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:$e("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:$e("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:$e("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:$e("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$e("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:$e("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nvec4 out_color=texture2D(u_gradient_image,v_uv);\n#else\nvec4 out_color=color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#ifdef RENDER_LINE_GRADIENT\nattribute vec3 a_packed;\n#else\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:$e("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:$e("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:$e("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec4 projectedPoint=u_matrix*vec4(vec3(a_pos,anchorZ)+h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(vec3(a_projected_pos.xy,anchorZ)+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:$e("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec4 projectedPoint=u_matrix*vec4(vec3(a_pos,anchorZ)+h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(vec3(a_projected_pos.xy,anchorZ)+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:$e("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec4 projectedPoint=u_matrix*vec4(vec3(a_pos,anchorZ)+h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(vec3(a_projected_pos.xy,anchorZ)+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:$e("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:$e("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:$e("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ze),skyboxGradient:$e("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ze),skyboxCapture:$e("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:$e("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {vec4 color=texture2D(u_image0,v_pos0);gl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_globe_matrix;attribute vec3 a_globe_pos;attribute vec2 a_uv;varying vec2 v_pos0;void main() {v_pos0=a_uv;gl_Position=u_globe_matrix*vec4(a_globe_pos+elevationVector(a_uv*8192.0)*elevation(a_uv*8192.0),1.0);}"),globeAtmosphere:$e("uniform vec2 u_center;uniform float u_radius;uniform vec2 u_screen_size;uniform float u_opacity;uniform float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform float u_pixel_ratio;void main() {vec2 fragCoord=gl_FragCoord.xy/u_pixel_ratio;fragCoord.y=u_screen_size.y-fragCoord.y;float distFromCenter=length(fragCoord-u_center);float normDistFromCenter=length(fragCoord-u_center)/u_radius;if (normDistFromCenter < 1.0)\ndiscard;float t=clamp(1.0-sqrt(normDistFromCenter-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}","attribute vec3 a_pos;void main() {gl_Position=vec4(a_pos,1.0);}"),globeDepth:$e("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_globe_matrix;attribute vec3 a_globe_pos;attribute vec2 a_uv;varying float v_depth;void main() {gl_Position=u_globe_matrix*vec4(a_globe_pos+elevationVector(a_uv*8192.0)*elevation(a_uv*8192.0),1.0);v_depth=gl_Position.z/gl_Position.w;}")};function $e(t,e,i){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,o=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=t.match(r),s=e.match(r),l=qe.match(r);let c=s?s.concat(a):a;i||(He.staticUniforms&&(c=He.staticUniforms.concat(c)),We.staticUniforms&&(c=We.staticUniforms.concat(c))),c&&(c=c.concat(l));const u={};return{fragmentSource:t=t.replace(n,((t,e,i,n,r)=>(u[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nvarying ").concat(i," ").concat(n," ").concat(r,";\n#else\nuniform ").concat(i," ").concat(n," u_").concat(r,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(r,"\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n")))),vertexSource:e=e.replace(n,((t,e,i,n,r)=>{const o="float"===n?"vec2":"vec4",a=r.match(/color/)?"color":o;return u[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(i," ").concat(o," a_").concat(r,";\nvarying ").concat(i," ").concat(n," ").concat(r,";\n#else\nuniform ").concat(i," ").concat(n," u_").concat(r,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = a_").concat(r,";\n#else\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = unpack_mix_").concat(a,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n"):"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(i," ").concat(o," a_").concat(r,";\n#else\nuniform ").concat(i," ").concat(n," u_").concat(r,";\n#endif\n"):"vec4"===a?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(i," ").concat(n," ").concat(r," = a_").concat(r,";\n#else\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(i," ").concat(n," ").concat(r," = unpack_mix_").concat(a,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n")})),staticAttributes:o,staticUniforms:c}}class Je{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,i,n,r,o,a,s){this.context=t;let l=this.boundPaintVertexBuffers.length!==n.length;for(let c=0;!l&&c<n.length;c++)this.boundPaintVertexBuffers[c]!==n[c]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,i,n,r,o,a,s)}freshBind(t,e,i,n,r,o,a){let s;const l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(let t=l;t<s;t++)u.disableVertexAttribArray(t)}e.enableAttributes(u,t);for(const h of i)h.enableAttributes(u,t);o&&o.enableAttributes(u,t),a&&a.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(const h of i)h.bind(),h.setVertexAttribPointers(u,t,r);o&&(o.bind(),o.setVertexAttribPointers(u,t,r)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Qe(e,i){const n=Math.pow(2,i.canonical.z),r=i.canonical.y;return[new t.MercatorCoordinate(0,r/n).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/n).toLngLat().lat]}function ti(e,i,n,r,o,a,s){const l=e.context,c=l.gl,u=n.fbo;if(!u)return;e.prepareDrawTile(i);const h=e.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((t,e,i,n)=>{const r=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color");let s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:n||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:Qe(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}})(e,n,r,e.terrain?i.projMatrix:null);e.prepareDrawProgram(l,h,i.toUnwrapped()),h.draw(l,c.TRIANGLES,o,a,s,t.CullFaceMode.disabled,d,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function ei(e,i,n){if(!i.needsDEMTextureUpload)return;const r=e.context,o=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(n.stride);const a=n.getPixels();i.demTexture?i.demTexture.update(a,{premultiply:!1}):i.demTexture=new t.Texture(r,a,o.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function ii(e,i,n,r,o,a){const s=e.context,l=s.gl;if(!i.dem)return;const c=i.dem;if(s.activeTexture.set(l.TEXTURE1),ei(e,i,c),!i.demTexture)return;i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=i.fbo;if(!h){const e=new t.Texture(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=i.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(e.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,o,a,t.CullFaceMode.disabled,((e,i)=>{const n=i.stride,r=t.create$1();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:i.unpackVector}})(i.tileID,c),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}const ni=(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image0:new t.Uniform1i(e,i.u_image0),u_skirt_height:new t.Uniform1f(e,i.u_skirt_height)}),ri=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),oi=new class{constructor(){this.operations={}}newMorphing(t,e,i,n,r){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==i.tileID.key&&(e.queued=i)}else this.operations[t]={startTime:n,phase:0,duration:r,from:e,to:i,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const i=this.operations[e];for(i.phase=(t-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},ai={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function si(t,e){const i=1<<t.z;return!e&&(0===t.x||t.x===i-1)||0===t.y||t.y===i-1}const li=t=>({u_matrix:t});function ci(e,i,n,r,o){if(o>0){const a=t.exported.now(),s=(a-e.timeAdded)/o,l=i?(a-i.timeAdded)/o:-1,c=n.getSource(),u=r.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class ui extends t.SourceCache{constructor(t){const e=Pt("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new C(Lt(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,i,n){if(e.freezeTileCoverage)return;this.transform=e;const r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((i,n)=>{if(i[n.key]="",!this._tiles[n.key]){const i=new t.Tile(n,this._source.tileSize*n.overscaleFactor(),e.tileZoom);i.state="loaded",this._tiles[n.key]=i}return i}),{});for(const t in this._tiles)t in r||(this.freeFBO(t),this._tiles[t].unloadVectorData(),delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const i=Object.values(e);this.renderCachePool.push(...i),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class hi extends t.OverscaledTileID{constructor(t,e,i){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=i}}class di extends t.Elevation{constructor(e,i){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[n,r,o]=function(e){const i=new t.StructArrayLayout4i8,n=new t.StructArrayLayout3ui6,r=131;i.reserve(17161),n.reserve(33800);const o=t.EXTENT/128,a=t.EXTENT+o/2,s=a+o;for(let c=-o;c<s;c+=o)for(let e=-o;e<s;e+=o){const n=e<0||e>a||c<0||c>a?24575:0,r=t.clamp(Math.round(e),0,t.EXTENT),o=t.clamp(Math.round(c),0,t.EXTENT);i.emplaceBack(r+n,o,r,o)}const l=(t,e)=>{const i=e*r+t;n.emplaceBack(i+1,i,i+r),n.emplaceBack(i+r,i+r+1,i+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)l(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)l(e,t),l(t,e)})),[i,n,32768]}(),a=e.context;this.gridBuffer=a.createVertexBuffer(n,St.members),this.gridIndexBuffer=a.createIndexBuffer(r),this.gridSegments=t.SegmentVector.simpleSegment(0,0,n.length,r.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,n.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ui(i.map),this.orthoMatrix=t.create$1(),t.ortho(this.orthoMatrix,0,t.EXTENT,0,t.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new t.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,this._useVertexMorphing=!0,this._exaggeration=1}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(e,i,n){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const r=e.terrain.properties;this.sourceCache=e._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce("Raster DEM source '".concat(this.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));const e=this.sourceCache.getSource().tileSize/128,n=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(i,e*n,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),i.updateElevation(!n),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(i),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce("Terrain render cache efficiency is not optimal (".concat(e.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(e.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,n=this.painter.transform;this._initializing&&(this._initializing=0===n._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(n.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=i.getIds().map((t=>{const e=i.getTileByID(t).tileID;return e.projMatrix=n.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,i){const n=i.transform.pointCoordinate(i.transform.getCameraPoint()),r=new t.pointGeometry(n.x,n.y);e.sort(((e,i)=>{if(i.overscaledZ-e.overscaledZ)return i.overscaledZ-e.overscaledZ;const n=new t.pointGeometry(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.pointGeometry(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),a=r.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(n)-a.distSqr(o)}))}(r,this.painter),this._previousZoom=n.zoom;const o=this.proxyToSource||{};this.proxyToSource={},r.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const t in a){const i=a[t];if(!i.used)continue;if(i!==this.sourceCache&&(this._findCoveringTileCache[i.id]={}),this._setupProxiedCoordsForOrtho(i,e[t],o),i.usedForTerrain)continue;const n=e[t];i.getSource().reparseOverscaled&&this._assignTerrainTiles(n)}this.proxiedCoords[i.id]=r.map((t=>new hi(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const s={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const i=e.tileID.key;i in s||(this._visibleDemTiles.push(e),s[i]=i)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const i in this.terrainTileForTile){const n=this.terrainTileForTile[i],r=n.dem;!r||n.demTexture&&!n.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),ei(this.painter,n,r))}}_prepareDemTileUniforms(t,e,i,n){if(!e||null==e.demTexture)return!1;const r=t.tileID.canonical,o=Math.pow(2,e.tileID.canonical.z-r.z),a=n||"";return i["u_dem_tl".concat(a)]=[r.x*o%1,r.y*o%1],i["u_dem_scale".concat(a)]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,i)=>{if(!i.dem)return e;const n=i.dem.tree.minimums[0];return n>0&&t++,e+n}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,i=e.gl;e.activeTexture.set(i.TEXTURE2);const n=this._getLoadedAreaMinimum(),r={width:1,height:1,data:new Uint8Array(t.DEMData.pack(n,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(r,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,r,i.RGBA,{premultiply:!1}),o}setupElevationDraw(e,i,n){const r=this.painter.context,o=r.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(n&&n.morphing&&this._useVertexMorphing){const t=n.morphing.srcDemTile,i=n.morphing.dstDemTile;u=n.morphing.phase,t&&i&&(this._prepareDemTileUniforms(e,t,a,"_prev")&&(c=t),this._prepareDemTileUniforms(e,i,a)&&(l=i))}if(c&&l?(r.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),r.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[e.tileID.key],r.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST)),n&&n.useDepthForOcclusion&&(r.activeTexture.set(o.TEXTURE3),this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),n&&n.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=e}n&&n.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),i.setTerrainUniformValues(r,a)}renderToBackBuffer(e){const i=this.painter,n=this.painter.context;0!==e.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,i.width,i.height]),this.renderingToTexture=!1,function(e,i,n,r,o){const a=e.context,s=a.gl;let l,c;const u=e.options.showTerrainWireframe?2:0,h=(t,i)=>{if(c===t)return;const n=[ai[t]];i&&n.push(ai[u]),l=e.useProgram("terrainRaster",null,n),c=t},d=e.colorModeForRenderPass(),p=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);oi.update(o);const f=e.transform,m=6*Math.pow(1.5,22-f.zoom)*i.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const y=u?s.LINES:s.TRIANGLES,[v,g]=u?i.getWirefameBuffer():[i.gridIndexBuffer,i.gridSegments];for(const c of r){const r=n.getTile(c),x=t.StencilMode.disabled,w=i.prevTerrainTileForTile[c.key],S=i.terrainTileForTile[c.key];b=S,null!=(_=w)&&null!=b&&_.hasData()&&b.hasData()&&null!=_.demTexture&&null!=b.demTexture&&_.tileID.key!==b.tileID.key&&oi.newMorphing(c.key,w,S,o,250),a.activeTexture.set(s.TEXTURE0),r.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const E=oi.getMorphValuesForProxy(c.key),k=E?1:0;let P;E&&(P={morphing:{srcDemTile:E.from,dstDemTile:E.to,phase:t.easeCubicInOut(E.phase)}});const T=ri(c.projMatrix,si(c.canonical,f.renderWorldCopies)?m/10:m);h(k,u),i.setupElevationDraw(r,l,P),e.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,y,p,x,d,t.CullFaceMode.backCCW,T,"terrain_raster",i.gridBuffer,v,g)}var _,b}))}(i,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const i=this.painter,n=this.painter.context,r=this.proxySourceCache,o=this.proxiedCoords[r.id],a=this._drapedRenderBatches.shift(),s=[],l=i.style.order;let c=0;for(const u of o){const o=r.getTileByID(u.proxyTileKey),h=r.proxyCachedFBO[u.key]?r.proxyCachedFBO[u.key][e]:void 0,d=void 0!==h?r.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=d.tex,p&&!d.dirty){s.push(o.tileID);continue}let f;n.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(n.clear({color:t.Color.transparent}),d.dirty=!1);for(let t=a.start;t<=a.end;++t){const e=i.style._layers[l[t]];if(e.isHidden(i.transform.zoom))continue;const r=i.style._getLayerSourceCache(e),o=r?this.proxyToSource[u.key][r.id]:[u];if(!o)continue;const a=o;n.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(r?r.id:null)&&(this._setupStencil(d,o,e,r),f=r?r.id:null),i.renderLayer(i,r,e,a)}this.renderedToTile?(d.dirty=!0,s.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,n.bindFramebuffer.set(null),n.viewport.set([0,0,i.width,i.height]),a.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let i,n=0,r=0,o=!1;for(let a=0;a<e;++a){const e=t._layers[t.order[a]];this._style.isLayerDraped(e)?(o&&++n,++r):o||(o=!0,i=e.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-n/r),firstUndrapedLayer:i}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,i){if(!this._visibleDemTiles)return null;const n=this._visibleDemTiles.filter((t=>t.dem)).map((n=>{const r=n.tileID,o=Math.pow(2,r.overscaledZ),{x:a,y:s}=r.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:n.dem.tree.raycastRoot(l,u,c,h,t,e,i),tile:n}}));n.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const r of n){if(null==r.t)return null;const n=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,t,e,i);if(null!=n)return n}return null}_createFBO(){const e=this.painter.context,i=e.gl,n=this.drapeBufferSize;e.activeTexture.set(i.TEXTURE0);const r=new t.Texture(e,{width:n[0],height:n[1],data:null},i.RGBA);r.bind(i.LINEAR,i.CLAMP_TO_EDGE);const o=e.createFramebuffer(n[0],n[1],!1);return o.colorAttachment.set(r.texture),o.depthAttachment=new gt(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],i=e.isHidden(this.painter.transform.zoom),n=e.getCrossfadeParameters(),r=!!n&&1!==n.t,o=e.hasTransition();return"custom"!==e.type&&!i&&(r||o)}))}_clearRasterFadeFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof xt){t=!0;break}if(t)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],i=t.isHidden(this.painter.transform.zoom),n=this._style._getLayerSourceCache(t);if("raster"!==t.type||i||!n)continue;const r=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][n.id];if(t)for(const e of t){const t=ci(n.getTile(e),n.findLoadedParent(e,0),n,this.painter.transform,r);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(n.id,e)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const i=[];let n,r=0,o=this._style._layers[t[r]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++r<e;)o=this._style._layers[t[r]];for(;r<e;++r){const e=this._style._layers[t[r]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===n&&(n=r):void 0!==n&&(i.push({start:n,end:r-1}),n=void 0))}void 0!==n&&i.push({start:n,end:r-1}),this._drapedRenderBatches=i}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let i=0;i<t.length;++i){const n=Object.values(t[i]);e.renderCachePool.push(...n)}}return}this._clearRasterFadeFromRenderCache();const i=this.proxyCoords,n=this._tilesDirty;for(let o=i.length-1;o>=0;o--){const r=i[o];if(e.getTileByID(r.key),void 0!==e.proxyCachedFBO[r.key]){const i=t[r.key],o=this.proxyToSource[r.key];let a=0;for(const t in o){const e=o[t],r=i[t];if(!r||r.length!==e.length||e.some(((e,i)=>e!==r[i]||n[t]&&n[t].hasOwnProperty(e.key)))){a=-1;break}++a}for(const t in e.proxyCachedFBO[r.key])e.renderCache[e.proxyCachedFBO[r.key][t]].dirty=a<0||a!==Object.values(i).length}}const r=[...this._drapedRenderBatches];r.sort(((t,e)=>e.end-e.start-(t.end-t.start)));for(const o of r)for(const t of i){if(e.proxyCachedFBO[t.key])continue;let i=e.renderCachePool.pop();void 0===i&&e.renderCache.length<50&&(i=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==i&&(e.proxyCachedFBO[t.key]={},e.proxyCachedFBO[t.key][o.start]=i,e.renderCache[i].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,i,n){if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,o=r.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let a;if(i.isTileClipped())a=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,i.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,i){const n=this.painter,r=this.painter.context,o=r.gl;n._tileClippingMaskIDs={},r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const a=n.useProgram("clippingMask");for(const s of e){const e=n._tileClippingMaskIDs[s.key]=--i;a.draw(r,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,li(s.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}pointCoordinate(e){const i=this.painter.transform;if(e.x<0||e.x>i.width||e.y<0||e.y>i.height)return null;const n=[e.x,e.y,1,1];t.transformMat4(n,n,i.pixelMatrixInverse),t.scale$2(n,n,1/n[3]),n[0]/=i.worldSize,n[1]/=i.worldSize;const r=i._camera.position,o=t.mercatorZfromAltitude(1,i.center.lat),a=[r[0],r[1],r[2]/o,0],s=t.subtract([],n.slice(0,3),a);t.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const e=this.painter,i=e.context,n=this.proxySourceCache,r=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const e=i.gl,n=i.createFramebuffer(r,o,!0);i.activeTexture.set(e.TEXTURE0);const a=new t.Texture(i,{width:r,height:o,data:null},e.RGBA);a.bind(e.NEAREST,e.CLAMP_TO_EDGE),n.colorAttachment.set(a.texture);const s=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,r,o);n.depthAttachment.set(s),this._depthFBO=n,this._depthTexture=a}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,r,o]),function(e,i,n,r){const o=e.context,a=o.gl;o.clear({depth:1});const s=e.useProgram("terrainDepth"),l=new t.DepthMode(a.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const c of r){const e=n.getTile(c),r=ri(c.projMatrix,0);i.setupElevationDraw(e,s),s.draw(o,a.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,r,"terrain_depth",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments)}}(e,this,n,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,i){if(t.getSource()instanceof Et)return this._setupProxiedCoordsForImageSource(t,e,i);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const n=this.proxiedCoords[t.id]=[],r=this.proxyCoords;for(let a=0;a<r.length;a++){const e=r[a],o=this._findTileCoveringTileID(e,t);if(o){const r=this._createProxiedId(e,o,i[e.key]&&i[e.key][t.id]);n.push(r),this.proxyToSource[e.key][t.id]=[r]}}let o=!1;for(let a=0;a<e.length;a++){const r=t.getTile(e[a]);if(!r||!r.hasData())continue;const s=this._findTileCoveringTileID(r.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==r.tileID.canonical.z){const e=this.proxyToSource[s.tileID.key][t.id],a=this._createProxiedId(s.tileID,r,i[s.tileID.key]&&i[s.tileID.key][t.id]);e?e.splice(e.length-1,0,a):this.proxyToSource[s.tileID.key][t.id]=[a],n.push(a),o=!0}}this._sourceTilesOverlap[t.id]=o}_setupProxiedCoordsForImageSource(e,i,n){if(!e.getSource().loaded())return;const r=this.proxiedCoords[e.id]=[],o=this.proxyCoords,a=e.getSource(),s=new t.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-s.x),t.min.y=Math.min(t.min.y,e.y-s.y),t.max.x=Math.max(t.max.x,e.x-s.x),t.max.y=Math.max(t.max.y,e.y-s.y),t)),{min:new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(e,i)=>{const n=e.wrap+e.canonical.x/(1<<e.canonical.z),r=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),a=i.wrap+i.canonical.x/(1<<i.canonical.z),s=i.canonical.y/(1<<i.canonical.z);return n+o<a+l.min.x||n>a+l.max.x||r+o<s+l.min.y||r>s+l.max.y};for(let t=0;t<o.length;t++){const a=o[t];for(let t=0;t<i.length;t++){const o=e.getTile(i[t]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,n[a.key]&&n[a.key][e.id]),l=this.proxyToSource[a.key][e.id];l?l.push(s):this.proxyToSource[a.key][e.id]=[s],r.push(s)}}}_createProxiedId(e,i,n){let r=this.orthoMatrix;if(n){const t=n.find((t=>t.key===i.tileID.key));if(t)return t}if(i.tileID.key!==e.key){const n=e.canonical.z-i.tileID.canonical.z;let o,a,s;r=t.create$1();const l=i.tileID.wrap-e.wrap<<e.overscaledZ;n>0?(o=t.EXTENT>>n,a=o*((i.tileID.canonical.x<<n)-e.canonical.x+l),s=o*((i.tileID.canonical.y<<n)-e.canonical.y)):(o=t.EXTENT<<-n,a=t.EXTENT*(i.tileID.canonical.x-(e.canonical.x+l<<-n)),s=t.EXTENT*(i.tileID.canonical.y-(e.canonical.y<<-n))),t.ortho(r,0,o,0,o,0,1),t.translate(r,r,[a,s,0])}return new hi(i.tileID,e.key,r)}_findTileCoveringTileID(e,i){let n=i.getTile(e);if(n&&n.hasData())return n;const r=this._findCoveringTileCache[i.id],o=r[e.key];if(n=o?i.getTileByID(o):null,n&&n.hasData()||null===o)return n;let a=n?n.tileID:e,s=a.overscaledZ;const l=i.getSource().minzoom,c=[];if(!o){const r=i.getSource().maxzoom;if(e.canonical.z>=r){const n=e.canonical.z-r;i.getSource().reparseOverscaled?(s=Math.max(e.canonical.z+2,i.transform.tileZoom),a=new t.OverscaledTileID(s,e.wrap,r,e.canonical.x>>n,e.canonical.y>>n)):0!==n&&(s=r,a=new t.OverscaledTileID(s,e.wrap,r,e.canonical.x>>n,e.canonical.y>>n))}a.key!==e.key&&(c.push(a.key),n=i.getTile(a))}const u=t=>{c.forEach((e=>{r[e]=t})),c.length=0};for(s-=1;s>=l&&(!n||!n.hasData());s--){n&&u(n.tileID.key);const t=a.calculateScaledKey(s);if(n=i.getTileByID(t),n&&n.hasData())break;const e=r[t];if(null===e)break;void 0===e?c.push(t):n=i.getTileByID(e)}return u(n?n.tileID.key:null),n&&n.hasData()?n:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(t){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let i=this._tilesDirty[t];i||(i=this._tilesDirty[t]={}),i[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let i,n,r;const o=new t.StructArrayLayout2ui4,a=131;for(n=1;n<129;n++){for(i=1;i<129;i++)r=n*a+i,o.emplaceBack(r,r+1),o.emplaceBack(r,r+a),o.emplaceBack(r+1,r+a),128===n&&o.emplaceBack(r+a,r+a+1);o.emplaceBack(r+1,r+1+a)}return o}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function pi(t){const e=[];for(let i=0;i<t.length;i++){if(null===t[i])continue;const n=t[i].split(" ");e.push(n.pop())}return e}class fi{static cacheKey(t,e,i){let n="".concat(t).concat(i?i.cacheKey:"");for(const r of e)n+="/".concat(r);return n}constructor(e,i,n,r,o,a){const s=e.gl;this.program=s.createProgram();const l=pi(n.staticAttributes),c=r?r.getBinderAttributes():[],u=l.concat(c),h=n.staticUniforms?pi(n.staticUniforms):[],d=r?r.getBinderUniforms():[],p=h.concat(d),f=[];for(const t of p)f.indexOf(t)<0&&f.push(t);let m=r?r.defines():[];m=m.concat(a.map((t=>"#define ".concat(t))));const y=m.concat(Xe.fragmentSource,Ye,We.fragmentSource,n.fragmentSource).join("\n"),v=m.concat(Xe.vertexSource,Ye,We.vertexSource,He.vertexSource,n.vertexSource).join("\n"),g=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(g,y),s.compileShader(g),s.attachShader(this.program,g);const _=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(_,v),s.compileShader(_),s.attachShader(this.program,_),this.attributes={};const b={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);s.linkProgram(this.program),s.deleteShader(_),s.deleteShader(g);for(let t=0;t<f.length;t++){const e=f[t];if(e&&!b[e]){const t=s.getUniformLocation(this.program,e);t&&(b[e]=t)}}this.fixedUniforms=o(e,b),this.binderUniforms=r?r.getUniforms(e,b):[],-1!==a.indexOf("TERRAIN")&&(this.terrainUniforms=((e,i)=>({u_dem:new t.Uniform1i(e,i.u_dem),u_dem_prev:new t.Uniform1i(e,i.u_dem_prev),u_dem_unpack:new t.Uniform4f(e,i.u_dem_unpack),u_dem_tl:new t.Uniform2f(e,i.u_dem_tl),u_dem_scale:new t.Uniform1f(e,i.u_dem_scale),u_dem_tl_prev:new t.Uniform2f(e,i.u_dem_tl_prev),u_dem_scale_prev:new t.Uniform1f(e,i.u_dem_scale_prev),u_dem_size:new t.Uniform1f(e,i.u_dem_size),u_dem_lerp:new t.Uniform1f(e,i.u_dem_lerp),u_exaggeration:new t.Uniform1f(e,i.u_exaggeration),u_depth:new t.Uniform1i(e,i.u_depth),u_depth_size_inv:new t.Uniform2f(e,i.u_depth_size_inv),u_meter_to_dem:new t.Uniform1f(e,i.u_meter_to_dem),u_label_plane_matrix_inv:new t.UniformMatrix4f(e,i.u_label_plane_matrix_inv),u_tile_tl_up:new t.Uniform3f(e,i.u_tile_tl_up),u_tile_tr_up:new t.Uniform3f(e,i.u_tile_tr_up),u_tile_br_up:new t.Uniform3f(e,i.u_tile_br_up),u_tile_bl_up:new t.Uniform3f(e,i.u_tile_bl_up),u_tile_up_scale:new t.Uniform1f(e,i.u_tile_up_scale)}))(e,b)),-1!==a.indexOf("FOG")&&(this.fogUniforms=((e,i)=>({u_fog_matrix:new t.UniformMatrix4f(e,i.u_fog_matrix),u_fog_range:new t.Uniform2f(e,i.u_fog_range),u_fog_color:new t.Uniform4f(e,i.u_fog_color),u_fog_horizon_blend:new t.Uniform1f(e,i.u_fog_horizon_blend),u_fog_temporal_offset:new t.Uniform1f(e,i.u_fog_temporal_offset)}))(e,b))}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const i=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)i[t].set(e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const i=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)i[t].location&&i[t].set(e[t])}}draw(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m){const y=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(n),t.setColorMode(r),t.setCullFace(o);for(const g in this.fixedUniforms)this.fixedUniforms[g].set(a[g]);p&&p.setUniforms(t,this.binderUniforms,h,{zoom:d});const v={[y.LINES]:2,[y.TRIANGLES]:3,[y.LINE_STRIP]:1}[e];for(const g of u.get()){const i=g.vaos||(g.vaos={});(i[s]||(i[s]=new Je)).bind(t,this,l,p?p.getPaintVertexBuffers():[],c,g.vertexOffset,f,m),y.drawElements(e,g.primitiveLength*v,y.UNSIGNED_SHORT,g.primitiveOffset*v*2)}}}function mi(t,e,i){const n=1/M(i,1,e.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/r,a=o*(i.tileID.canonical.x+i.tileID.wrap*r),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const yi=(e,i,n,r)=>{const o=i.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$2();"viewport"===o.properties.get("anchor")&&(t.fromRotation(l,-i.transform.angle),t.transformMat3(s,s,l));const c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+n,u_opacity:r}},vi=(e,i,n,r,o,a,s)=>t.extend(yi(e,i,n,r),mi(a,i,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),gi=t=>({u_matrix:t}),_i=(e,i,n,r)=>t.extend(gi(e),mi(n,i,r)),bi=(t,e)=>({u_matrix:t,u_world:e}),xi=(e,i,n,r,o)=>t.extend(_i(e,i,n,r),{u_world:o}),wi=(e,i,n,r)=>{const o=e.transform;let a;if("map"===r.paint.get("circle-pitch-alignment")){const t=M(n,1,o.zoom);a=[t,t]}else a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:e.translatePosMatrix(i.projMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:a}},Si=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Ei=(e,i,n)=>{const r=t.EXTENT/n.tileSize;return{u_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/r,i.pixelsToGLUnits[1]/r]}},ki=(t,e,i=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}),Pi=(t,e,i,n)=>({u_matrix:t,u_extrude_scale:M(e,1,i),u_intensity:n}),Ti=(e,i,n,r,o,a)=>{const s=e.transform,l={u_matrix:Ai(e,i,n,o),u_ratio:1/M(i,1,s.zoom),u_device_pixel_ratio:t.exported.devicePixelRatio,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0};if(Ii(n)){const t=Mi(i,e.transform);l.u_texsize=i.lineAtlasTexture.size,l.u_scale=[t,r.fromScale,r.toScale],l.u_mix=r.t}return l},Ci=(e,i,n,r,o)=>{const a=e.transform,s=Mi(i,a);return{u_matrix:Ai(e,i,n,o),u_texsize:i.imageAtlasTexture.size,u_ratio:1/M(i,1,a.zoom),u_device_pixel_ratio:t.exported.devicePixelRatio,u_image:0,u_scale:[s,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}};function Mi(t,e){return 1/M(t,1,e.tileZoom)}function Ai(t,e,i,n){return t.translatePosMatrix(n||e.tileID.projMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const Oi=t=>{const e=[];return Ii(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT"),e};function Ii(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}const Di=(t,e,i,n,r)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:zi(r.paint.get("raster-hue-rotate"))};var o,a};function zi(t){t*=Math.PI/180;const e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}const Li=(t,e,i,n,r,o,a,s,l,c)=>{const u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:c,u_texture:0}},Ri=(e,i,n,r,o,a,s,l,c,u,h)=>{const{cameraToCenterDistance:d,_pitch:p}=o.transform;return t.extend(Li(e,i,n,r,o,a,s,l,c,u),{u_gamma_scale:r?d*Math.cos(o.terrain?0:p):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h})},Fi=(e,i,n,r,o,a,s,l,c,u)=>t.extend(Ri(e,i,n,r,o,a,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),Bi=(t,e,i)=>({u_matrix:t,u_opacity:e,u_color:i}),ji=(e,i,n,r,o,a)=>t.extend(function(t,e,i,n){const r=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),{width:a,height:s}=i.imageManager.getPixelSize(),l=Math.pow(2,n.tileID.overscaledZ),c=n.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=c*(n.tileID.canonical.x+n.tileID.wrap*l),h=c*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/M(n,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(r,a,n,o),{u_matrix:e,u_opacity:i}),Ni={fillExtrusion:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fillExtrusionPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fill:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),fillPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),fillOutline:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}),fillOutlinePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),circle:(e,i)=>({u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),collisionBox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale)}),collisionCircle:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}),debug:(e,i)=>({u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}),clippingMask:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmap:(e,i)=>({u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmapTexture:(e,i)=>({u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}),hillshade:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}),hillshadePrepare:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}),line:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_dash_image:new t.Uniform1i(e,i.u_dash_image),u_gradient_image:new t.Uniform1i(e,i.u_gradient_image),u_image_height:new t.Uniform1f(e,i.u_image_height),u_texsize:new t.Uniform2f(e,i.u_texsize),u_scale:new t.Uniform3f(e,i.u_scale),u_mix:new t.Uniform1f(e,i.u_mix)}),linePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),raster:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}),symbolIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}),symbolSDF:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),symbolTextAndIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),background:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}),backgroundPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}),terrainRaster:ni,terrainDepth:ni,skybox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_sun_direction:new t.Uniform3f(e,i.u_sun_direction),u_cubemap:new t.Uniform1i(e,i.u_cubemap),u_opacity:new t.Uniform1f(e,i.u_opacity),u_temporal_offset:new t.Uniform1f(e,i.u_temporal_offset)}),skyboxGradient:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_center_direction:new t.Uniform3f(e,i.u_center_direction),u_radius:new t.Uniform1f(e,i.u_radius),u_opacity:new t.Uniform1f(e,i.u_opacity),u_temporal_offset:new t.Uniform1f(e,i.u_temporal_offset)}),skyboxCapture:(e,i)=>({u_matrix_3f:new t.UniformMatrix3f(e,i.u_matrix_3f),u_sun_direction:new t.Uniform3f(e,i.u_sun_direction),u_sun_intensity:new t.Uniform1f(e,i.u_sun_intensity),u_color_tint_r:new t.Uniform4f(e,i.u_color_tint_r),u_color_tint_m:new t.Uniform4f(e,i.u_color_tint_m),u_luminance:new t.Uniform1f(e,i.u_luminance)})};let Vi;function Ui(e,i,n,r,o,a,s){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[];let d=0,p=0;for(let b=0;b<r.length;b++){const f=r[b],m=i.getTile(f),y=m.getBucket(n);if(!y)continue;let v=f.projMatrix;0===o[0]&&0===o[1]||(v=e.translatePosMatrix(f.projMatrix,m,o,a));const g=s?y.textCollisionBox:y.iconCollisionBox,_=y.collisionCircleArray;if(_.length>0){const i=t.create$1(),n=v;t.mul$1(i,y.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul$1(i,i,y.placementViewportMatrix),h.push({circleArray:_,circleOffset:p,transform:n,invTransform:i}),d+=_.length/4,p=d}g&&(e.terrain&&e.terrain.setupElevationDraw(m,u),u.draw(l,c.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Ei(v,e.transform,m),n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,e.transform.zoom,null,g.collisionVertexBuffer,g.collisionVertexBufferExt))}if(!s||!h.length)return;const f=e.useProgram("collisionCircle"),m=new t.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let y=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const i=4*e,n=t.circleArray[i+0],r=t.circleArray[i+1],o=t.circleArray[i+2],a=t.circleArray[i+3];m.emplace(y++,n,r,o,a,0),m.emplace(y++,n,r,o,a,1),m.emplace(y++,n,r,o,a,2),m.emplace(y++,n,r,o,a,3)}(!Vi||Vi.length<2*d)&&(Vi=function(e){const i=2*e,n=new t.StructArrayLayout3ui6;n.resize(i),n._trim();for(let t=0;t<i;t++){const e=6*t;n.uint16[e+0]=4*t+0,n.uint16[e+1]=4*t+1,n.uint16[e+2]=4*t+2,n.uint16[e+3]=4*t+2,n.uint16[e+4]=4*t+3,n.uint16[e+5]=4*t+0}return n}(d));const v=l.createIndexBuffer(Vi,!0),g=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const b of h){const i={u_matrix:b.transform,u_inv_matrix:b.invTransform,u_camera_to_center_distance:(_=e.transform).cameraToCenterDistance,u_viewport_size:[_.width,_.height]};f.draw(l,c.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,i,n.id,g,v,t.SegmentVector.simpleSegment(0,2*b.circleOffset,b.circleArray.length,b.circleArray.length/2),null,e.transform.zoom,null,null,null)}var _;g.destroy(),v.destroy()}const Gi=t.identity(new Float32Array(16));function qi(e,i,n,r,o,a){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),c=-(s-.5)*i,u=-(l-.5)*n,h=t.evaluateVariableOffset(e,r);return new t.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function Zi(e,i,n,r,o,a,s,l,c,u,h,d){const p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,y={};f.clear();for(let v=0;v<p.length;v++){const m=p.get(v),g=e.allowVerticalPlacement&&!m.placedOrientation,_=m.hidden||!m.crossTileID||g?null:r[m.crossTileID];if(_){const r=new t.pointGeometry(m.tileAnchorX,m.tileAnchorY),p=d(r),v=$t(r,n?l:s,p),g=Jt(a.cameraToCenterDistance,v.signedDistanceFromCamera);let b=o.evaluateSizeForFeature(e.textSizeData,u,m)*g/t.ONE_EM;n&&(b*=e.tilePixelRatio/c);const{width:x,height:w,anchor:S,textOffset:E,textScale:k}=_,P=qi(S,x,w,E,k,b),T=n?$t(r.add(P),s,p).point:v.point.add(i?P.rotate(-a.angle):P),C=e.allowVerticalPlacement&&m.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<m.numGlyphs;e++)t.addDynamicAttributes(f,T,C);h&&m.associatedIconIndex>=0&&(y[m.associatedIconIndex]={shiftedAnchor:T,angle:C})}else le(m.numGlyphs,f)}if(h){m.clear();const i=e.icon.placedSymbolArray;for(let e=0;e<i.length;e++){const n=i.get(e);if(n.hidden)le(n.numGlyphs,m);else{const i=y[e];if(i)for(let e=0;e<n.numGlyphs;e++)t.addDynamicAttributes(m,i.shiftedAnchor,i.angle);else le(n.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function Hi(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Wi(e,i,n,r,o,a,s,l,c,u,h,d){const p=e.context,f=p.gl,m=e.transform,y="map"===l,v="map"===c,g=y&&"point"!==n.layout.get("symbol-placement"),_=y&&!v&&!g,b=void 0!==n.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),S=n.layout.get("text-variable-anchor"),E=[],k=e.terrain&&v?["PITCH_WITH_MAP_TERRAIN"]:null;for(const P of r){const r=i.getTile(P),l=r.getBucket(n);if(!l)continue;const c=o?l.text:l.icon;if(!c||!c.segments.get().length)continue;const h=c.programConfigurations.get(n.id),d=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,w=v||0!==m.pitch,T=e.useProgram(Hi(d,o,l),h,k),C=t.evaluateSizeForZoom(p,m.zoom);let A,O,I,D,z=[0,0],L=null;if(o){if(O=r.glyphAtlasTexture,I=f.LINEAR,A=r.glyphAtlasTexture.size,l.iconsInText){z=r.imageAtlasTexture.size,L=r.imageAtlasTexture;const t="composite"===p.kind||"camera"===p.kind;D=w||e.options.rotating||e.options.zooming||t?f.LINEAR:f.NEAREST}}else{const t=1!==n.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;O=r.imageAtlasTexture,I=d||e.options.rotating||e.options.zooming||t||w?f.LINEAR:f.NEAREST,A=r.imageAtlasTexture.size}const R=M(r,1,e.transform.zoom),F=Yt(P.projMatrix,v,y,e.transform,R),B=e.terrain&&v&&g?t.invert(new Float32Array(16),F):Gi,j=Kt(P.projMatrix,v,y,e.transform,R),N=S&&l.hasTextData(),V="none"!==n.layout.get("icon-text-fit")&&N&&l.hasIconData();if(g){const t=m.elevation;te(l,P.projMatrix,e,o,F,j,v,u,t?e=>t.getAtTileOffset(P,e.x,e.y):null)}const U=e.translatePosMatrix(P.projMatrix,r,a,s),G=g||o&&S||V?Gi:F,q=e.translatePosMatrix(j,r,a,s,!0),Z=d&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let H;H=d?l.iconsInText?Fi(p.kind,C,_,v,e,U,G,q,A,z):Ri(p.kind,C,_,v,e,U,G,q,o,A,!0):Li(p.kind,C,_,v,e,U,G,q,o,A);const W={program:T,buffers:c,uniformValues:H,atlasTexture:O,atlasTextureIcon:L,atlasInterpolation:I,atlasInterpolationIcon:D,isSDF:d,hasHalo:Z,tile:r,labelPlaneMatrixInv:B};if(b&&l.canOverlap){x=!0;const e=c.segments.get();for(const i of e)E.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:W})}else E.push({segments:c.segments,sortKey:0,state:W})}x&&E.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of E){const i=t.state;if(e.terrain&&e.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:i.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,f.CLAMP_TO_EDGE),i.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),i.isSDF){const r=i.uniformValues;i.hasHalo&&(r.u_is_halo=1,Xi(i.buffers,t.segments,n,e,i.program,w,h,d,r)),r.u_is_halo=0}Xi(i.buffers,t.segments,n,e,i.program,w,h,d,i.uniformValues)}}function Xi(e,i,n,r,o,a,s,l,c){const u=r.context;o.draw(u,u.gl.TRIANGLES,a,s,l,t.CullFaceMode.disabled,c,n.id,e.layoutVertexBuffer,e.indexBuffer,i,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Yi(e,i,n,r,o,a,s){const l=e.context.gl,c=n.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=n.getCrossfadeParameters();let d,p,f,m,y;s?(p=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=u?"fillPattern":"fill",d=l.TRIANGLES);for(const v of r){const r=i.getTile(v);if(u&&!r.patternsLoaded())continue;const g=r.getBucket(n);if(!g)continue;e.prepareDrawTile(v);const _=g.programConfigurations.get(n.id),b=e.useProgram(p,_);u&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),_.updatePaintBuffers(h));const x=c.constantOr(null);if(x&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[x.to.toString()],i=t.patternPositions[x.from.toString()];e&&i&&_.setConstantPatternPositions(e,i)}const w=e.translatePosMatrix(v.projMatrix,r,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){m=g.indexBuffer2,y=g.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===p&&u?xi(w,e,h,r,t):bi(w,t)}else m=g.indexBuffer,y=g.segments,f=u?_i(w,e,h,r):gi(w);e.prepareDrawProgram(e.context,b,v.toUnwrapped()),b.draw(e.context,d,o,e.stencilModeForClipping(v),a,t.CullFaceMode.disabled,f,n.id,g.layoutVertexBuffer,m,y,n.paint,e.transform.zoom,_)}}function Ki(e,i,n,r,o,a,s){const l=e.context,c=l.gl,u=n.paint.get("fill-extrusion-pattern"),h=u.constantOr(1),d=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity");for(const f of r){const r=i.getTile(f),m=r.getBucket(n);if(!m)continue;const y=m.programConfigurations.get(n.id),v=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",y);if(e.terrain){const t=e.terrain;if(!m.enableTerrain)continue;if(t.setupElevationDraw(r,v,{useMeterToDem:!0}),$i(l,i,f,m,n,t),!m.centroidVertexBuffer){const t=v.attributes.a_centroid_pos;void 0!==t&&c.vertexAttrib2f(t,0,0)}}h&&(e.context.activeTexture.set(c.TEXTURE0),r.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),y.updatePaintBuffers(d));const g=u.constantOr(null);if(g&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[g.to.toString()],i=t.patternPositions[g.from.toString()];e&&i&&y.setConstantPatternPositions(e,i)}const _=e.translatePosMatrix(f.projMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),b=n.paint.get("fill-extrusion-vertical-gradient"),x=h?vi(_,e,b,p,f,d,r):yi(_,e,b,p);e.prepareDrawProgram(l,v,f.toUnwrapped()),v.draw(l,l.gl.TRIANGLES,o,a,s,t.CullFaceMode.backCCW,x,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,e.transform.zoom,y,e.terrain?m.centroidVertexBuffer:null)}}function $i(e,i,n,r,o,a){const s=[e=>{let i=e.canonical.x-1,n=e.wrap;return i<0&&(i=(1<<e.canonical.z)-1,n--),new t.OverscaledTileID(e.overscaledZ,n,e.canonical.z,i,e.canonical.y)},e=>{let i=e.canonical.x+1,n=e.wrap;return i===1<<e.canonical.z&&(i=0,n++),new t.OverscaledTileID(e.overscaledZ,n,e.canonical.z,i,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=i.getSource().maxzoom,n=t=>{const e=i.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)};let r,a,s;return(t.overscaledZ===t.canonical.z||t.overscaledZ>=e)&&(r=n(t.key)),t.overscaledZ>=e&&(a=n(t.calculateScaledKey(t.overscaledZ+1))),t.overscaledZ>e&&(s=n(t.calculateScaledKey(t.overscaledZ-1))),r||a||s},c=[0,0,0],u=(e,i)=>(c[0]=Math.min(e.min.y,i.min.y),c[1]=Math.max(e.max.y,i.max.y),c[2]=t.EXTENT-i.min.x>e.max.x?i.min.x-t.EXTENT:e.max.x,c),h=(e,i)=>(c[0]=Math.min(e.min.x,i.min.x),c[1]=Math.max(e.max.x,i.max.x),c[2]=t.EXTENT-i.min.y>e.max.y?i.min.y-t.EXTENT:e.max.y,c),d=[(t,e)=>u(t,e),(t,e)=>u(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],p=new t.pointGeometry(0,0);let f,m,y;const v=(e,i,r,o,s)=>{const l=[[o?r:e,o?e:r,0],[o?r:i,o?i:r,0]],c=s<0?t.EXTENT+s:s,u=[o?c:(e+i)/2,o?(e+i)/2:c,0];return 0===r&&s<0||0!==r&&s>0?a.getForTilePoints(y,[u],!0,m):l.push(u),a.getForTilePoints(n,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let g=0;g<4;g++){const e=r.borders[g];if(0===e.length&&(r.borderDone[g]=!0),r.borderDone[g])continue;const i=y=s[g](n),o=l(i);if(!o||!o.enableTerrain)continue;if(m=a.findDEMTileFor(i),!m||!m.dem)continue;if(!f){const t=a.findDEMTileFor(n);if(!t||!t.dem)return;f=t}const c=(g<2?1:5)-g,u=o.borders[c];let h=0;for(let n=0;n<e.length;n++){const i=r.featuresOnBorder[e[n]],a=i.borders[g];let s;for(;h<u.length&&(s=o.featuresOnBorder[u[h]],!(s.borders[c][1]>a[0]+3));)o.borderDone[c]||o.encodeCentroid(void 0,s,!1),h++;if(s&&h<u.length){const e=h;let n=0;for(;!(s.borders[c][0]>a[1]-3)&&(n++,++h!==u.length);)s=o.featuresOnBorder[u[h]];if(s=o.featuresOnBorder[u[e]],i.intersectsCount()>1||s.intersectsCount()>1||1!==n){1!==n&&(h=e),r.encodeCentroid(void 0,i,!1),o.borderDone[c]||o.encodeCentroid(void 0,s,!1);continue}const l=d[g](i,s),f=g%2?t.EXTENT-1:0;p.x=v(l[0],Math.min(t.EXTENT-1,l[1]),f,g<2,l[2]),p.y=0,r.encodeCentroid(p,i,!1),o.borderDone[c]||o.encodeCentroid(p,s,!1)}else r.encodeCentroid(void 0,i,!1)}r.borderDone[g]=r.needsCentroidUpdate=!0,o.borderDone[c]||(o.borderDone[c]=o.needsCentroidUpdate=!0)}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(e)}const Ji=new t.Color(1,0,0,1),Qi=new t.Color(0,1,0,1),tn=new t.Color(0,0,1,1),en=new t.Color(1,0,1,1),nn=new t.Color(0,1,1,1);function rn(t,e,i,n){an(t,0,e+i/2,t.transform.width,i,n)}function on(t,e,i,n){an(t,e-i/2,0,i,t.transform.height,n)}function an(e,i,n,r,o,a){const s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*t.exported.devicePixelRatio,n*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function sn(e,i,n){const r=e.context,o=r.gl,a=n.projMatrix,s=e.useProgram("debug"),l=i.getTileByID(n.key);e.terrain&&e.terrain.setupElevationDraw(l,s);const c=t.DepthMode.disabled,u=t.StencilMode.disabled,h=e.colorModeForRenderPass(),d="$debug";r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(r,o.LINE_STRIP,c,u,h,t.CullFaceMode.disabled,ki(a,t.Color.red),d,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);const p=l.latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=i.getTile(n).tileSize,y=512/Math.min(m,512)*(n.overscaledZ/e.transform.zoom)*.5;let v=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(v+=" => ".concat(n.overscaledZ)),function(t,e){t.initDebugOverlayCanvas();const i=t.debugOverlayCanvas,n=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,"".concat(v," ").concat(f,"kb")),s.draw(r,o.TRIANGLES,c,u,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,ki(a,t.Color.transparent,y),d,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const ln=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:cn}=ln;function un(t,e,i,n){t.emplaceBack(e,i,n)}class hn{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,un(this.vertexArray,-1,-1,1),un(this.vertexArray,1,-1,1),un(this.vertexArray,-1,1,1),un(this.vertexArray,1,1,1),un(this.vertexArray,-1,-1,-1),un(this.vertexArray,1,-1,-1),un(this.vertexArray,-1,1,-1),un(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,cn),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function dn(e,i,n,r,o,a){const s=e.gl,l=i.paint.get("sky-atmosphere-color"),c=i.paint.get("sky-atmosphere-halo-color"),u=i.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,i,n,r)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:i,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(t.fromMat4([],r),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,i.skyboxTexture,0),n.draw(e,s.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const pn={symbol:function(e,i,n,r,o){if("translucent"!==e.renderPass)return;const a=t.StencilMode.disabled,s=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,i,n,r,o,a,s){const l=i.transform,c="map"===o,u="map"===a;for(const h of e){const e=r.getTile(h),o=e.getBucket(n);if(!o||!o.text||!o.text.segments.get().length)continue;const a=t.evaluateSizeForZoom(o.textSizeData,l.zoom),d=M(e,1,i.transform.zoom),p=Yt(h.projMatrix,u,c,i.transform,d),f="none"!==n.layout.get("icon-text-fit")&&o.hasIconData();if(a){const i=Math.pow(2,l.zoom-e.tileID.overscaledZ),n=l.elevation;Zi(o,c,u,s,t.symbolSize,l,p,h.projMatrix,i,a,f,n?t=>n.getAtTileOffset(h,t.x,t.y):t=>0)}}}(r,e,n,i,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),o),0!==n.paint.get("icon-opacity").constantOr(1)&&Wi(e,i,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),a,s),0!==n.paint.get("text-opacity").constantOr(1)&&Wi(e,i,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),a,s),i.map.showCollisionBoxes&&(Ui(e,i,n,r,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Ui(e,i,n,r,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(e,i,n,r){if("translucent"!==e.renderPass)return;const o=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,p=e.colorModeForRenderPass(),f=[];for(let m=0;m<r.length;m++){const o=r[m],a=i.getTile(o),s=a.getBucket(n);if(!s)continue;const c=s.programConfigurations.get(n.id),u=Si(n),h={programConfiguration:c,program:e.useProgram("circle",c,u),layoutVertexBuffer:s.layoutVertexBuffer,indexBuffer:s.indexBuffer,uniformValues:wi(e,o,a,n),tile:a};if(l){const e=s.segments.get();for(const i of e)f.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:h})}else f.push({segments:s.segments,sortKey:0,state:h})}l&&f.sort(((t,e)=>t.sortKey-e.sortKey));for(const m of f){const{programConfiguration:i,program:r,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,tile:l}=m.state,f=m.segments;e.terrain&&e.terrain.setupElevationDraw(l,r,{useDepthForOcclusion:!0}),e.prepareDrawProgram(c,r,l.tileID.toUnwrapped()),r.draw(c,u.TRIANGLES,h,d,p,t.CullFaceMode.disabled,s,n.id,o,a,f,n.paint,e.transform.zoom,i)}},heatmap:function(e,i,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=t.StencilMode.disabled,l=new t.ColorMode([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){const n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let r=i.heatmapFbo;if(r)n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{const o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,n){const r=t.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),n.colorAttachment.set(i)}(t,e,o,r)}}(o,e,n),o.clear({color:t.Color.transparent});for(let c=0;c<r.length;c++){const u=r[c];if(i.hasRenderableParent(u))continue;const h=i.getTile(u),d=h.getBucket(n);if(!d)continue;const p=d.programConfigurations.get(n.id),f=e.useProgram("heatmap",p),{zoom:m}=e.transform;e.terrain&&e.terrain.setupElevationDraw(h,f),e.prepareDrawProgram(o,f,u.toUnwrapped()),f.draw(o,a.TRIANGLES,t.DepthMode.disabled,s,l,t.CullFaceMode.disabled,Pi(u.projMatrix,h,m,n.paint.get("heatmap-intensity")),n.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,n.paint,e.transform.zoom,p)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){const n=e.context,r=n.gl,o=i.heatmapFbo;if(!o)return;n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);let a=i.colorRampTexture;a||(a=i.colorRampTexture=new t.Texture(n,i.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,r.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,i,n)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}(e,n))},line:function(e,i,n,r){if("translucent"!==e.renderPass)return;const o=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),c=n.paint.get("line-dasharray"),u=c.constantOr(1),h=n.layout.get("line-cap"),d=n.paint.get("line-pattern"),p=d.constantOr(1),f=n.paint.get("line-gradient"),m=n.getCrossfadeParameters(),y=p?"linePattern":"line",v=e.context,g=v.gl;for(const _ of r){const r=i.getTile(_);if(p&&!r.patternsLoaded())continue;const o=r.getBucket(n);if(!o)continue;e.prepareDrawTile(_);const a=o.programConfigurations.get(n.id),b=Oi(n),x=e.useProgram(y,a,b),w=d.constantOr(null);if(w&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[w.to.toString()],i=t.patternPositions[w.from.toString()];e&&i&&a.setConstantPatternPositions(e,i)}const S=c.constantOr(null),E=h.constantOr(null);if(!p&&S&&E&&r.lineAtlas){const t=r.lineAtlas,e=t.getDash(S.to,E),i=t.getDash(S.from,E);e&&i&&a.setConstantPatternPositions(e,i)}const k=e.terrain?_.projMatrix:null,P=p?Ci(e,r,n,m,k):Ti(e,r,n,m,k,o.lineClipsArray.length);if(f){const r=o.gradients[n.id];let a=r.texture;if(n.gradientVersion!==r.version){let s=256;if(n.stepInterpolant){const n=i.getSource().maxzoom,r=_.canonical.z===n?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;s=t.clamp(t.nextPowerOfTwo(o.maxLineLength/t.EXTENT*1024*r),256,v.maxTextureSize)}r.gradient=t.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:r.gradient||void 0,clips:o.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new t.Texture(v,r.gradient,g.RGBA),r.version=n.gradientVersion,a=r.texture}v.activeTexture.set(g.TEXTURE1),a.bind(n.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}u&&(v.activeTexture.set(g.TEXTURE0),r.lineAtlasTexture.bind(g.LINEAR,g.REPEAT),a.updatePaintBuffers(m)),p&&(v.activeTexture.set(g.TEXTURE0),r.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),a.updatePaintBuffers(m)),e.prepareDrawProgram(v,x,_.toUnwrapped()),x.draw(v,g.TRIANGLES,s,e.stencilModeForClipping(_),l,t.CullFaceMode.disabled,P,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,n.paint,e.transform.zoom,a,o.layoutVertexBuffer2)}},fill:function(e,i,n,r){const o=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);Yi(e,i,n,r,o,s,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){const o=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);Yi(e,i,n,r,o,s,!0)}},"fill-extrusion":function(e,i,n,r){const o=n.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const a=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||n.paint.get("fill-extrusion-pattern").constantOr(1))Ki(e,i,n,r,a,t.StencilMode.disabled,t.ColorMode.disabled),Ki(e,i,n,r,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const o=e.colorModeForRenderPass();Ki(e,i,n,r,a,t.StencilMode.disabled,o)}}},hillshade:function(e,i,n,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),s=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[c,u]="translucent"!==e.renderPass||l?[{},r]:e.stencilConfigForOverlap(r);for(const h of u){const r=i.getTile(h);if(r.needsHillshadePrepare&&"offscreen"===e.renderPass)ii(e,r,n,a,t.StencilMode.disabled,s);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(h):c[h.overscaledZ];ti(e,h,r,n,a,t,s)}}o.viewport.set([0,0,e.width,e.height])},raster:function(e,i,n,r,o,a){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!r.length)return;const s=e.context,l=s.gl,c=i.getSource(),u=e.useProgram("raster"),h=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,[p,f]=c instanceof Et||d?[{},r]:e.stencilConfigForOverlap(r),m=f[f.length-1].overscaledZ,y=!e.options.moving;for(const v of f){const r=d?t.DepthMode.disabled:e.depthModeForSublayer(v.overscaledZ-m,1===n.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),o=v.toUnwrapped(),f=i.getTile(v);if(d&&(!f||!f.hasData()))continue;const g=d?v.projMatrix:e.transform.calculateProjMatrix(o,y),_=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(v):p[v.overscaledZ],b=a?0:n.paint.get("raster-fade-duration");f.registerFadeDuration(b);const x=i.findLoadedParent(v,0),w=ci(f,x,i,e.transform,b);let S,E;e.terrain&&e.terrain.prepareDrawTile(v);const k="nearest"===n.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),f.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),S=Math.pow(2,x.tileID.overscaledZ-f.tileID.overscaledZ),E=[f.tileID.canonical.x*S%1,f.tileID.canonical.y*S%1]):f.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const P=Di(g,E||[0,0],S||1,w,n);e.prepareDrawProgram(s,u,o),c instanceof Et?u.draw(s,l.TRIANGLES,r,t.StencilMode.disabled,h,t.CullFaceMode.disabled,P,n.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments):u.draw(s,l.TRIANGLES,r,_,h,t.CullFaceMode.disabled,P,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,i,n,r){const o=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0===a)return;const s=e.context,l=s.gl,c=e.transform,u=c.tileSize,h=n.paint.get("background-pattern");if(e.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const p=t.StencilMode.disabled,f=e.depthModeForSublayer(0,"opaque"===d?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),y=e.useProgram(h?"backgroundPattern":"background"),v=r||c.coveringTiles({tileSize:u});h&&(s.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const g=n.getCrossfadeParameters();for(const _ of v){const i=_.toUnwrapped(),c=r?_.projMatrix:e.transform.calculateProjMatrix(i);e.prepareDrawTile(_);const d=h?ji(c,a,e,h,{tileID:_,tileSize:u},g):Bi(c,a,o);e.prepareDrawProgram(s,y,i),y.draw(s,l.TRIANGLES,f,p,m,t.CullFaceMode.disabled,d,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},sky:function(e,i,n){const r=n.paint.get("sky-opacity");if(0===r)return;const o=e.context,a=n.paint.get("sky-type"),s=new t.DepthMode(o.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),l=e.frameCounter/1e3%1;"atmosphere"===a?"offscreen"===e.renderPass?n.needsSkyboxCapture(e)&&(function(e,i,n,r){const o=e.context,a=o.gl;let s=i.skyboxFbo;if(!s){s=i.skyboxFbo=o.createFramebuffer(32,32,!1),i.skyboxGeometry=new hn(o),i.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,i.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let t=0;t<6;++t)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=i.getCenter(e,!0),c=e.useProgram("skyboxCapture"),u=new Float64Array(16);t.identity(u),t.rotateY(u,u,.5*-Math.PI),dn(o,i,c,u,l,0),t.identity(u),t.rotateY(u,u,.5*Math.PI),dn(o,i,c,u,l,1),t.identity(u),t.rotateX(u,u,.5*-Math.PI),dn(o,i,c,u,l,2),t.identity(u),t.rotateX(u,u,.5*Math.PI),dn(o,i,c,u,l,3),t.identity(u),dn(o,i,c,u,l,4),t.identity(u),t.rotateY(u,u,Math.PI),dn(o,i,c,u,l,5),o.viewport.set([0,0,e.width,e.height])}(e,n),n.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,i,n,r,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,i.skyboxTexture);const u=((t,e,i,n,r)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:n,u_temporal_offset:r}))(l.skyboxMatrix,i.getCenter(e,!1),0,r,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,n,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skybox",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(e,n,s,r,l):"gradient"===a&&"sky"===e.renderPass&&function(e,i,n,r,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new hn(a)),a.activeTexture.set(s.TEXTURE0);let u=i.colorRampTexture;u||(u=i.colorRampTexture=new t.Texture(a,i.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((e,i,n,r,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:i,u_radius:t.degToRad(n),u_opacity:r,u_temporal_offset:o}))(l.skyboxMatrix,i.getCenter(e,!1),i.paint.get("sky-gradient-radius"),r,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,n,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(e,n,s,r,l)},debug:function(t,e,i){for(let n=0;n<i.length;n++)sn(t,e,i[n])},custom:function(e,i,n){const r=e.context,o=n.implementation;if("offscreen"===e.renderPass){const t=o.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(o,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(t.StencilMode.disabled);const i="3d"===o.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);r.setDepthMode(i),o.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}};class fn{constructor(e,i){this.context=new bt(e),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fe,this.gpuTimers={},this.frameCounter=0}updateTerrain(t,e){const i=!!t&&!!t.terrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new di(this,t));const n=this._terrain;this.transform.elevation=i?n:null,n.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[i,n]=e.getFovAdjustedRange(this.transform._fov);if(i>n)return void(this.transform.fogCullDistSq=null);const r=i+.78*(n-i);this.transform.fogCullDistSq=r*r}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,i){if(this.width=e*t.exported.devicePixelRatio,this.height=i*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,St.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout2i4;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(-1,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA),this.identityMat=t.create$1();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now())}clearStencil(){const e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this.useProgram("clippingMask").draw(e,i.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,li(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,i,n){if(!(i&&this.currentStencilSource!==i.id&&e.isTileClipped()&&n&&n.length))return;this.currentStencilSource=i.id;const r=this.context,o=r.gl;this.nextStencilID+n.length>256&&this.clearStencil(),r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of n){const e=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;a.draw(r,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,li(s.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,i=this.context.gl;return new t.StencilMode({func:i.NOTEQUAL,mask:255},e,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const i=this.context.gl;return new t.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(e){const i=this.context.gl,n=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=n[n.length-1].overscaledZ,o=n[0].overscaledZ-r+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let n=0;n<o;n++)e[n+r]=new t.StencilMode({func:i.GEQUAL,mask:255},n+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[e,n]}return[{[r]:t.StencilMode.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,i,n){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(n||this.context.gl.LEQUAL,i,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const n=this.style.order,r=this.style._sourceCaches;for(const t in r){const e=r[t];e.used&&e.prepare(this.context)}const o={},a={},s={};for(const t in r){const e=r[t];o[t]=e.getVisibleCoordinates(),a[t]=o[t].slice().reverse(),s[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<n.length;t++)if(this.style._layers[n[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of n){const i=this.style._layers[t],n=e._getLayerSourceCache(i);if(!i.hasOffscreenPass()||i.isHidden(this.transform.zoom))continue;const r=n?a[n.id]:void 0;("custom"===i.type||i.isSky()||r&&r.length)&&this.renderLayer(this,n,i,r)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let l=t.Color.transparent;if(this.style.fog&&(l=this.style.fog.properties.get("color")),this.context.clear({color:i.showOverdrawInspector?t.Color.black:l,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[n[this.currentLayer]],i=e._getLayerSourceCache(t);if(t.isSky())continue;const r=i?a[i.id]:void 0;this._renderTileClippingMasks(t,i,r),this.renderLayer(this,i,t,r)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const t=this.style._layers[n[this.currentLayer]],i=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,i,t,i?a[i.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;){const t=this.style._layers[n[this.currentLayer]],i=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const r=i?("symbol"===t.type?s:a)[i.id]:void 0;this._renderTileClippingMasks(t,i,i?o[i.id]:void 0),this.renderLayer(this,i,t,r),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let i=null;t.values(this.style._layers).forEach((t=>{const n=e._getLayerSourceCache(t);n&&!t.isHidden(this.transform.zoom)&&(!i||i.getSource().maxzoom<n.getSource().maxzoom)&&(i=n)})),i&&this.options.showTileBoundaries&&pn.debug(this,i,i.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;rn(t,t.transform.height-(e.top||0),3,Ji),rn(t,e.bottom||0,3,Qi),on(t,e.left||0,3,tn),on(t,t.transform.width-(e.right||0),3,en);const i=t.transform.centerPoint;!function(t,e,i,n){an(t,e-1,i-10,2,20,n),an(t,e-10,i-1,20,2,n)}(t,i.x,t.transform.height-i.y,nn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%t.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||n&&n.length)&&(this.id=i.id,this.gpuTimingStart(i),pn[i.type](t,e,i,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const i in t){const n=t[i],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(n.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n.query),e[i]=o}return e}translatePosMatrix(e,i,n,r,o){if(!n[0]&&!n[1])return e;const a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);n=[n[0]*e-n[1]*t,n[0]*t+n[1]*e]}const s=[o?n[0]:M(i,n[0],this.transform.zoom),o?n[1]:M(i,n[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.style&&this.style.fog,i=[];return this.terrain&&!this.terrain.renderingToTexture&&i.push("TERRAIN"),e&&!t&&0!==e.getOpacity(this.transform.pitch)&&i.push("FOG"),t&&i.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&i.push("OVERDRAW_INSPECTOR"),i}useProgram(t,e,i){this.cache=this.cache||{};const n=i||[],r=this.currentGlobalDefines().concat(n),o=fi.cacheKey(t,r,e);return this.cache[o]||(this.cache[o]=new fi(this.context,t,Ke[t],e,Ni[t],r)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(t){this.terrain&&this.terrain.prepareDrawTile(t)}prepareDrawProgram(t,e,i){if(this.terrain&&this.terrain.renderingToTexture)return;const n=this.style.fog;if(n){const r=n.getOpacity(this.transform.pitch);0!==r&&e.setFogUniformValues(t,((t,e,i,n)=>{const r=e.properties.get("color"),o=t.frameCounter/1e3%1,a=[r.r/r.a,r.g/r.a,r.b/r.a,n];return{u_fog_matrix:i?t.transform.calculateFogTileMatrix(i):t.identityMat,u_fog_range:e.getFovAdjustedRange(t.transform._fov),u_fog_color:a,u_fog_horizon_blend:e.properties.get("horizon-blend"),u_fog_temporal_offset:o}})(this,n,i,r))}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}}class mn{constructor(t=0,e=0,i=0,n=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=n}interpolate(e,i,n){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,n)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,n)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,n)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,n)),this}getCenter(e,i){const n=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.pointGeometry(n,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new mn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function yn(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function vn(t,e,i){t[4*e+0]=i[0],t[4*e+1]=i[1],t[4*e+2]=i[2],t[4*e+3]=i[3]}function gn(e,i){const n=yn(e,3);t.fromQuat(e,i),vn(e,3,n)}function _n(t,e){vn(t,3,[e[0],e[1],e[2],1])}function bn(e,i){const n=t.identity$1([]);return t.rotateZ$1(n,n,-i),t.rotateX$1(n,n,-e),n}function xn(e,i){const n=[e[0],e[1],0],r=[i[0],i[1],0];if(t.length(n)>=1e-15){const e=t.normalize([],n);t.scale(r,e,t.dot(r,e)),i[0]=r[0],i[1]=r[1]}const o=t.cross([],i,e);if(t.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return bn(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),a)}class wn{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){this._position=this._renderWorldCopies?function(e){if(!e)return;const i=Array.isArray(e)?new t.MercatorCoordinate(e[0],e[1],e[2]):e;return i.x=t.wrap(i.x,0,1),i}(e):e}lookAtPoint(e,i){if(this.orientation=null,!this.position)return;const n=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,r=this.position,o=t.MercatorCoordinate.fromLngLat(e,n),a=[o.x-r.x,o.y-r.y,o.z-r.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=xn(a,i)}setPitchBearing(e,i){this.orientation=bn(t.degToRad(e),t.degToRad(-i))}}class Sn{constructor(e,i){this._transform=t.identity([]),this._orientation=t.identity$1([]),i&&(this._orientation=i,gn(this._transform,this._orientation)),e&&_n(this._transform,e)}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const t=yn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){_n(this._transform,t)}get orientation(){return this._orientation}set orientation(t){this._orientation=t,gn(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=bn(t,e),gn(this._transform,this._orientation)}forward(){const t=yn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=yn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=yn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(e,i){const n=new Float64Array(16);return t.invert(n,this.getWorldToCamera(e,i)),n}getWorldToCameraPosition(e,i,n){const r=this.position;t.scale(r,r,-e);const o=new Float64Array(16);return t.fromScaling(o,[n,n,n]),t.translate(o,o,r),o[10]*=i,o}getWorldToCamera(e,i){const n=new Float64Array(16),r=new Float64Array(4),o=this.position;return t.conjugate(r,this._orientation),t.scale(o,o,-e),t.fromQuat(n,r),t.translate(n,n,o),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=i,n[9]*=i,n[10]*=i,n[11]*=i,n}getCameraToClipPerspective(e,i,n,r){const o=new Float64Array(16);return t.perspective(o,e,i,n,r),o}getDistanceToElevation(e){const i=0===e?0:t.mercatorZfromAltitude(e,this.position[1]),n=this.forward();return(i-this.position[2])/n[2]}clone(){return new Sn([...this.position],[...this.orientation])}}class En{constructor(e,i,n,r,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==n?0:n,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new Sn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const t=new En(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,t?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(t){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),t&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const i=-t.wrap(e,-180,180)*Math.PI/180;var n;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=(n=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);t[0]=n*l+o*s,t[1]=r*l+a*s,t[2]=n*-s+o*l,t[3]=r*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const e=this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}_updateCameraOnTerrain(){const e=this.cameraToCenterDistance/this.worldSize,i=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(i+e)}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,i=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop();let r=0,o=0;for(let a=0;a<i.length;a++){const s=new t.pointGeometry(i[a][0]*this.width,n+i[a][1]*(this.height-n)),l=e.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*c,o+=c}return 0===o?NaN:r/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const e=this._cameraZoom,i=this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(this.center)),n=t.mercatorZfromAltitude(i,this.center.lat),r=this._mercatorZfromZoom(e),o=this._mercatorZfromZoom(this._maxZoom),a=Math.max(r-n,o);this._setZoom(this._zoomFromMercatorZ(a))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let n;n=e.z<this._camera.position[2]?[i.x,i.y,i.z]:[e.x,e.y,e.z];const r=t.length(t.sub([],this._camera.position,n));return t.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let i=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(e.orientation)),e.position){const n=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,i=new wn;return i.position=new t.MercatorCoordinate(e[0],e[1],e[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this._renderWorldCopies,i}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const i=t.transformQuat([],[0,0,-1],e),n=t.transformQuat([],[0,-1,0],e);if(n[2]<0)return!1;const r=xn(i,n);return!!r&&(this._camera.orientation=r,!0)}_setCameraPosition(e){const i=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;e[2]=t.clamp(e[2],r/n,r/i),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const n=this.pointCoordinate(new t.pointGeometry(0,0)),r=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(n.x,r.x,o.x,a.x)),l=Math.floor(Math.max(n.x,r.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&i.push(new t.UnwrappedTileID(u,e))}return i}coveringTiles(e){let i=this.coveringZoomLevel(e);const n=i,r=this.elevation&&!e.isTerrainDEM;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const o=t.MercatorCoordinate.fromLngLat(this.center),a=1<<i,s=[a*o.x,a*o.y,0],l=p.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),c=this.pointCoordinate(this.getCameraPoint()),u=a*t.mercatorZfromAltitude(1,this.center.lat),h=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),d=[a*c.x,a*c.y,h],m=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),y=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?i:0,v=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,g=e.isTerrainDEM?-v:this._elevation?this._elevation.getMinElevationBelowMSL():0,_=t=>({aabb:new f([t*a,0,g],[(t+1)*a,a,v]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),b=[];let x=[];const w=i,S=e.reparseOverscaled?n:i,E=t=>{if(!this._elevation||!t.tileID)return;const e=this._elevation.getMinMaxForTile(t.tileID),i=t.aabb;e?(i.min[2]=e.min,i.max[2]=e.max,i.center[2]=(i.min[2]+i.max[2])/2):(t.shouldSplit=T(t),t.shouldSplit||(i.min[2]=i.max[2]=i.center[2]=this._centerAltitude))},k=t=>t*t,P=k((h-this._centerAltitude)*u),T=t=>{if(t.zoom<y)return!0;if(t.zoom===w)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const e=t.aabb.distanceX(d),i=t.aabb.distanceY(d);let n=P;r&&(n=k(t.aabb.distanceZ(d)*u));const o=e*e+i*i+n;return o<k((1<<w-t.zoom)*m*((t,e)=>{if(e*k(.707)<t)return 1;const i=Math.sqrt(e/t);return i/(1.4144271570014144+(Math.pow(1.1,i-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(n,P),o))};if(this._renderWorldCopies)for(let t=1;t<=3;t++)b.push(_(-t)),b.push(_(t));for(b.push(_(0));b.length>0;){const n=b.pop(),o=n.x,a=n.y;let c=n.fullyVisible;if(!c){const t=n.aabb.intersects(l);if(0===t)continue;c=2===t}if(n.zoom!==w&&T(n))for(let e=0;e<4;e++){const i=(o<<1)+e%2,s=(a<<1)+(e>>1),l={aabb:n.aabb.quadrant(e),zoom:n.zoom+1,x:i,y:s,wrap:n.wrap,fullyVisible:c,tileID:void 0,shouldSplit:void 0};r&&(l.tileID=new t.OverscaledTileID(n.zoom+1===w?S:n.zoom+1,n.wrap,n.zoom+1,i,s),E(l)),b.push(l)}else{const r=n.zoom===w?S:n.zoom;if(e.minzoom&&e.minzoom>r)continue;const l=s[0]-(.5+o+(n.wrap<<n.zoom))*(1<<i-n.zoom),c=s[1]-.5-a,u=n.tileID?n.tileID:new t.OverscaledTileID(r,n.wrap,n.zoom,o,a);x.push({tileID:u,distanceSq:l*l+c*c})}}if(this.fogCullDistSq){const i=this.fogCullDistSq,n=this.horizonLineFromTop();x=x.filter((r=>{const o=[0,0,0,1],a=[t.EXTENT,t.EXTENT,0,1],s=this.calculateFogTileMatrix(r.tileID.toUnwrapped());t.transformMat4(o,o,s),t.transformMat4(a,a,s);const l=t.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>i&&0!==n){const i=this.calculateProjMatrix(r.tileID.toUnwrapped());let o;e.isTerrainDEM||(o=u.getMinMaxForTile(r.tileID)),o||(o={min:g,max:v});const a=t.furthestTileCorner(this.bearing),s=[a[0]*t.EXTENT,a[1]*t.EXTENT,o.max];t.transformMat4$1(s,s,i),c=(1-s[1])*this.height*.5<n}return l<i||c}))}return x.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(e,i){const n=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(n.x-r.x),o.y-(n.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(t){this.center=this.coordinateLocation(t),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this._coordinatePoint(this.locationCoordinate(t),!1)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t.toLngLat()}pointRayIntersection(e,i){const n=null!=i?i:this._centerAltitude,r=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(o,o,this.pixelMatrixInverse);const a=o[3];t.scale$2(r,r,1/r[3]),t.scale$2(o,o,1/a);const s=r[2],l=o[2];return{p0:r,p1:o,t:s===l?0:(n-s)/(l-s)}}screenPointToMercatorRay(e){const i=[e.x,e.y,0,1],n=[e.x,e.y,1,1];return t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(n,n,this.pixelMatrixInverse),t.scale$2(i,i,1/i[3]),t.scale$2(n,n,1/n[3]),i[2]=t.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,t.scale$2(i,i,1/this.worldSize),t.scale$2(n,n,1/this.worldSize),new d([i[0],i[1],i[2]],t.normalize([],t.sub([],n,i)))}rayIntersectionCoordinate(e){const{p0:i,p1:n,t:r}=e,o=t.mercatorZfromAltitude(i[2],this._center.lat),a=t.mercatorZfromAltitude(n[2],this._center.lat);return new t.MercatorCoordinate(t.number(i[0],n[0],r)/this.worldSize,t.number(i[1],n[1],r)/this.worldSize,t.number(o,a,r))}pointCoordinate(e,i=this._centerAltitude){const n=this.horizonLineFromTop(!1),r=new t.pointGeometry(e.x,Math.max(n,e.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(r,i))}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);const i=this.elevation;let n=this.elevation.pointCoordinate(e);if(n)return new t.MercatorCoordinate(n[0],n[1],n[2]);let r=0,o=this.horizonLineFromTop();if(e.y>o)return this.pointCoordinate(e);const a=.02*o,s=e.clone();for(let l=0;l<10&&o-r>a;l++){s.y=t.number(r,o,.66);const e=i.pointCoordinate(s);e?(o=s.y,n=e):r=s.y}return n?new t.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const e=this.horizonLineFromTop();return t.y<e}}_coordinatePoint(e,i){const n=i&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,r=[e.x*this.worldSize,e.y*this.worldSize,n+e.toAltitude(),1];return t.transformMat4(r,r,this.pixelMatrix),r[3]>0?new t.pointGeometry(r[0]/r[3],r[1]/r[3]):new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(e,i){const n=new t.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),r=new t.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),o=new t.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),a=new t.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let s=this.pointCoordinate(n,e),l=this.pointCoordinate(r,e);const c=this.pointCoordinate(o,i),u=this.pointCoordinate(a,i),h=(t,e)=>(e.y-t.y)/(e.x-t.x);return s.y>1&&l.y>=0?s=new t.MercatorCoordinate((1-u.y)/h(u,s)+u.x,1):s.y<0&&l.y<=1&&(s=new t.MercatorCoordinate(-u.y/h(u,s)+u.x,0)),l.y>1&&s.y>=0?l=new t.MercatorCoordinate((1-c.y)/h(c,l)+c.x,1):l.y<0&&s.y<=1&&(l=new t.MercatorCoordinate(-c.y/h(c,l)+c.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(u)).extend(this.coordinateLocation(c))}_getBounds3D(){const t=this.elevation,e=t.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const i=e.dem.tree;t.min=Math.min(t.min,i.minimums[0]),t.max=Math.max(t.max,i.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});return this._getBounds(e.min*t.exaggeration(),e.max*t.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(t=!0){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,i=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,i):i}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){if(t){const e=t.getEast(),i=t.getWest();this.lngRange=[i,e>i?e:e+360],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()}else this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude]}calculatePosMatrix(e,i){const n=e.canonical,r=i/this.zoomScale(n.z),o=n.x+Math.pow(2,n.z)*e.wrap,a=t.identity(new Float64Array(16));return t.translate(a,a,[o*r,n.y*r,0]),t.scale$1(a,a,[r/t.EXTENT,r/t.EXTENT,1]),a}calculateFogTileMatrix(e){const i=e.key,n=this._fogTileMatrixCache;if(n[i])return n[i];const r=this.calculatePosMatrix(e,this.cameraWorldSize);return t.multiply(r,this.worldToFogMatrix,r),n[i]=new Float32Array(r),n[i]}calculateProjMatrix(e,i=!1){const n=e.key,r=i?this._alignedProjMatrixCache:this._projMatrixCache;if(r[n])return r[n];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,i?this.alignedProjMatrix:this.projMatrix,o),r[n]=new Float32Array(o),r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const i=this._camera.position,n=this._camera.forward();if(i[2]<=0||n[2]>=0)return;const r=t.mercatorZfromAltitude(1,this._center.lat);i[2]/=r,n[2]/=r,t.normalize(n,n);const o=e.raycast(i,n,e.exaggeration());if(o){const e=t.scaleAndAdd([],i,n,o),r=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=this._camera.position,s=r.z+t.length([r.x-a[0],r.y-a[1],r.z-a[2]]);this._cameraZoom=this._zoomFromMercatorZ(s),this._centerAltitude=r.toAltitude(),this._center=r.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const i=e.getAtPointOrZero(this._camera.mercatorPosition),n=this._minimumHeightOverTerrain()*Math.cos(t.degToRad(this._maxPitch)),r=t.mercatorZfromAltitude(i,this._center.lat),o=this._camera.position[2]-r;if(o<n){const e=t.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),i=this._camera.mercatorPosition,r=[e.x-i.x,e.y-i.y,e.z-i.z],a=t.length(r);r[2]-=n-o;const s=t.length(r);if(0===s)return;t.scale(r,r,a/s),this._camera.position=[e.x-r[0],e.y-r[1],e.z-r[2]],this._camera.orientation=xn(r,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,i,n,r,o,a=1/0,s=-1/0;const l=this.size,c=this._unmodified;if(this.latRange){const e=this.latRange;a=t.mercatorYfromLat(e[1])*this.worldSize,s=t.mercatorYfromLat(e[0])*this.worldSize,n=s-a<l.y?l.y/(s-a):0}if(this.lngRange){const n=this.lngRange;e=t.mercatorXfromLng(n[0])*this.worldSize,i=t.mercatorXfromLng(n[1])*this.worldSize,r=i-e<l.x?l.x/(i-e):0}const u=this.point,h=Math.max(r||0,n||0);if(h)return this.center=this.unproject(new t.pointGeometry(r?(i+e)/2:u.x,n?(s+a)/2:u.y)),this.zoom+=this.scaleZoom(h),this._unmodified=c,void(this._constraining=!1);if(this.latRange){const t=u.y,e=l.y/2;t-e<a&&(o=a+e),t+e>s&&(o=s-e)}let d=u.x;if(this.lngRange){const t=this.worldSize/2-(e+i)/2;d=(d+t+this.worldSize)%this.worldSize,e+=t,i+=t;const n=l.x/2;d-n<e&&(d=e+n),d+n>i&&(d=i-n),d-=t}d===u.x&&void 0===o||(this.center=this.unproject(new t.pointGeometry(d,void 0!==o?o:u.y))),this._constrainCameraAltitude(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){const e=(t,e)=>Math.log2(t/(this.tileSize*Math.abs(e[1]-e[0])));let i=0;if(this.latRange){const n=this.latRange;i=e(this.height,[t.mercatorYfromLat(n[0]),t.mercatorYfromLat(n[1])])}let n=0;if(this.lngRange){const i=this.lngRange;n=e(this.width,[t.mercatorXfromLng(i[0]),t.mercatorXfromLng(i[1])])}return Math.max(i,n)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const i=this.pixelsPerMeter;this._updateCameraState();const n=Math.PI/2+this._pitch,r=this.fovAboveCenter,o=this.elevation?this.elevation.getMinElevationBelowMSL()*i:0,a=(this._camera.position[2]*this.worldSize-o)/Math.cos(this._pitch),s=Math.sin(r)*a/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),l=this.point,c=l.x,u=l.y,h=Math.cos(Math.PI/2-this._pitch)*s+a,d=Math.min(1.01*h,a*(1/this._horizonShift)),p=this.height/50,f=this._camera.getWorldToCamera(this.worldSize,i),m=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,p,d);m[8]=2*-e.x/this.width,m[9]=2*e.y/this.height;let y=t.mul$1([],m,f);this.mercatorMatrix=t.scale$1([],y,[this.worldSize,this.worldSize,this.worldSize/i]),this.projMatrix=y,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const v=new Float32Array(16);t.identity(v),t.scale$1(v,v,[1,-1,1]),t.rotateX(v,v,this._pitch),t.rotateZ(v,v,this.angle);const g=t.perspective(new Float32Array(16),this._fov,this.width/this.height,p,d),_=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;g[8]=2*-e.x/this.width,g[9]=2*(e.y+_)/this.height,this.skyboxMatrix=t.multiply(v,g,v);const b=this.width%2/2,x=this.height%2/2,w=Math.cos(this.angle),S=Math.sin(this.angle),E=c-Math.round(c)+w*b+S*x,k=u-Math.round(u)+w*x+S*b,P=new Float64Array(y);if(t.translate(P,P,[E>.5?E-1:E,k>.5?k-1:k,0]),this.alignedProjMatrix=P,y=t.create$1(),t.scale$1(y,y,[this.width/2,-this.height/2,1]),t.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=t.create$1(),t.scale$1(y,y,[1,-1,1]),t.translate(y,y,[-1,-1,0]),t.scale$1(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),y=t.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSize,i=this.cameraPixelsPerMeter,n=this._camera.position,r=1/this.height,o=[e,e,i];t.scale(o,o,r),t.scale(n,n,-1),t.multiply$1(n,n,o);const a=t.create$1();t.translate(a,a,n),t.scale$1(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,i,r)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const e=this._camera.forward(),i=this.cameraToCenterDistance,n=this.point,r=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),o=this.cameraToCenterDistance/r;this._camera.position=[n.x/this.worldSize-e[0]*i/o,n.y/this.worldSize-e[1]*i/o,t.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-e[2]*i/o]}_translateCameraConstrained(e){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=e[2];let r=1;n>0&&(r=Math.min((i-this._camera.position[2])/n,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,r),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,i=this._camera.forward(),{pitch:n,bearing:r}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),s=Math.max((e[2]-o)/Math.cos(n),a),l=this._zoomFromMercatorZ(s);t.scaleAndAdd(e,e,i,s),this._pitch=t.clamp(n,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(r,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new t.MercatorCoordinate(e[0],e[1],e[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!!this._elevation}isCornerOffEdge(e,i){const n=Math.min(e.x,i.x),r=Math.max(e.x,i.x),o=Math.min(e.y,i.y),a=Math.max(e.y,i.y);if(o<this.horizonLineFromTop(!1))return!0;const s=[new t.pointGeometry(n,o),new t.pointGeometry(r,a),new t.pointGeometry(n,a),new t.pointGeometry(r,o)],l=this._renderWorldCopies?-3:0,c=this._renderWorldCopies?4:1;for(const t of s){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const i=this.rayIntersectionCoordinate(e);if(i.x<l||i.y<0||i.x>c||i.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.isCornerOffEdge(new t.pointGeometry(0,0),new t.pointGeometry(this.width,this.height))}zoomDeltaToMovement(e,i){const n=t.length(t.sub([],this._camera.position,e)),r=this._zoomFromMercatorZ(n)+i;return n-this._mercatorZfromZoom(r)}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}}function kn(t,e){let i=!1,n=null;const r=()=>{n=null,i&&(t(),n=setTimeout(r,e),i=!1)};return()=>(i=!0,n||r(),n)}class Pn{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=kn(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const i=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),a=Math.round(i.lng*o)/o,s=Math.round(i.lat*o)/o,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=e?"/".concat(a,"/").concat(s,"/").concat(n):"".concat(n,"/").concat(s,"/").concat(a),(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/".concat(Math.round(c))),this._hashName){const e=this._hashName;let i=!1;const n=t.window.location.hash.slice(1).split("&").map((t=>{const n=t.split("=")[0];return n===e?(i=!0,"".concat(n,"=").concat(u)):t})).filter((t=>t));return i||n.push("".concat(e,"=").concat(u)),"#".concat(n.join("&"))}return"#".concat(u)}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}const Tn={linearity:.3,easing:t.bezier(0,0,.3,1)},Cn=t.extend({deceleration:2500,maxSpeed:1400},Tn),Mn=t.extend({deceleration:20,maxSpeed:1400},Tn),An=t.extend({deceleration:1e3,maxSpeed:360},Tn),On=t.extend({deceleration:1e3,maxSpeed:90},Tn);class In{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,i=t.exported.now();for(;e.length>0&&i-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)i.zoom+=t.zoomDelta||0,i.bearing+=t.bearingDelta||0,i.pitch+=t.pitchDelta||0,t.panDelta&&i.pan._add(t.panDelta),t.around&&(i.around=t.around),t.pinchAround&&(i.pinchAround=t.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(i.pan.mag()){const o=zn(i.pan.mag(),n,t.extend({},Cn,e||{}));r.offset=i.pan.mult(o.amount/i.pan.mag()),r.center=this._map.transform.center,Dn(r,o)}if(i.zoom){const t=zn(i.zoom,n,Mn);r.zoom=this._map.transform.zoom+t.amount,Dn(r,t)}if(i.bearing){const e=zn(i.bearing,n,An);r.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),Dn(r,e)}if(i.pitch){const t=zn(i.pitch,n,On);r.pitch=this._map.transform.pitch+t.amount,Dn(r,t)}if(r.zoom||r.bearing){const t=void 0===i.pinchAround?i.around:i.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(r,{noMoveStart:!0})}}function Dn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function zn(e,i,n){const{maxSpeed:r,linearity:o,deceleration:a}=n,s=t.clamp(e*o/(i/1e3),-r,r),l=Math.abs(s)/(a*o);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}class Ln extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,n,r={}){const a=o.mousePos(i.getCanvasContainer(),n),s=i.unproject(a);super(e,t.extend({point:a,lngLat:s,originalEvent:n},r)),this._defaultPrevented=!1,this.target=i}}class Rn extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,n){const r="touchend"===e?n.changedTouches:n.touches,a=o.touchPos(i.getCanvasContainer(),r),s=a.map((t=>i.unproject(t))),l=a.reduce(((t,e,i,n)=>t.add(e.div(n.length))),new t.pointGeometry(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:i.unproject(l),originalEvent:n}),this._defaultPrevented=!1}}class Fn extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,i){super(t,{originalEvent:i}),this._defaultPrevented=!1}}class Bn{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Fn(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new Ln(t.type,this._map,t))}mouseup(t){this._map.fire(new Ln(t.type,this._map,t))}preclick(e){const i=t.extend({},e);i.type="preclick",this._map.fire(new Ln(i.type,this._map,i))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new Ln(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new Ln(t.type,this._map,t))}mouseover(t){this._map.fire(new Ln(t.type,this._map,t))}mouseout(t){this._map.fire(new Ln(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Rn(t.type,this._map,t))}touchmove(t){this._map.fire(new Rn(t.type,this._map,t))}touchend(t){this._map.fire(new Rn(t.type,this._map,t))}touchcancel(t){this._map.fire(new Rn(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jn{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Ln(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ln("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Ln(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Nn{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(o.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const i=e;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;const n=this._startPos;this._lastPos=i,this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const r=Math.min(n.x,i.x),a=Math.max(n.x,i.x),s=Math.min(n.y,i.y),l=Math.max(n.y,i.y);this._map._requestDomTask((()=>{this._box&&(o.setTransform(this._box,"translate(".concat(r,"px,").concat(s,"px)")),this._box.style.width=a-r+"px",this._box.style.height=l-s+"px")}))}mouseupWindow(e,i){if(!this._active)return;if(0!==e.button)return;const n=this._startPos,r=i;if(this.reset(),o.suppressClick(),n.x!==r.x||n.y!==r.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(n,r,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))}}function Vn(t,e){const i={};for(let n=0;n<t.length;n++)i[t[n].identifier]=e[n];return i}class Un{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,i,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){const i=new t.pointGeometry(0,0);for(const t of e)i._add(t);return i.div(e.length)}(i),this.touches=Vn(n,i)))}touchmove(t,e,i){if(this.aborted||!this.centroid)return;const n=Vn(i,e);for(const r in this.touches){const t=this.touches[r],e=n[r];(!e||e.dist(t)>30)&&(this.aborted=!0)}}touchend(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class Gn{constructor(t){this.singleTap=new Un(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,i){this.singleTap.touchstart(t,e,i)}touchmove(t,e,i){this.singleTap.touchmove(t,e,i)}touchend(t,e,i){const n=this.singleTap.touchend(t,e,i);if(n){const e=t.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(n)<30;if(e&&i||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class qn{constructor(){this._zoomIn=new Gn({numTouches:1,numTaps:2}),this._zoomOut=new Gn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)}touchmove(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)}touchend(t,e,i){const n=this._zoomIn.touchend(t,e,i),r=this._zoomOut.touchend(t,e,i);return n?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Zn={0:1,2:2};class Hn{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const i=o.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}mousemoveWindow(t,e){const i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){const i=Zn[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)}mouseupWindow(t){this._lastPoint&&o.mouseButton(t)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wn extends Hn{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Xn extends Hn{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(t){t.preventDefault()}}class Yn extends Hn{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(t){t.preventDefault()}}class Kn{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,i){return this._calculateTransform(t,e,i)}touchmove(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)}touchend(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,i,n){n.length>0&&(this._active=!0);const r=Vn(n,i),o=new t.pointGeometry(0,0),a=new t.pointGeometry(0,0);let s=0;for(const t in r){const e=r[t],i=this._touches[t];i&&(o._add(e),a._add(e.sub(i)),s++,r[t]=e)}if(this._touches=r,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $n{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,i){return{}}touchstart(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,i){if(!this._firstTwoTouches)return;t.preventDefault();const[n,r]=this._firstTwoTouches,o=Jn(i,e,n),a=Jn(i,e,r);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,i){if(!this._firstTwoTouches)return;const[n,r]=this._firstTwoTouches,a=Jn(i,e,n),s=Jn(i,e,r);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Jn(t,e,i){for(let n=0;n<t.length;n++)if(t[n].identifier===i)return e[n]}function Qn(t,e){return Math.log(t/e)/Math.LN2}class tr extends $n{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Qn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qn(this._distance,i),pinchAround:e}}}function er(t,e){return 180*t.angleWith(e)/Math.PI}class ir extends $n{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:er(this._vector,i),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,i=er(t,this._startVector);return Math.abs(i)<e}}function nr(t){return Math.abs(t.y)>Math.abs(t.x)}class rr extends $n{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,nr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,i){const n=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(n,r,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+r.y)/2*-.5}}gestureBeginsVertically(t,e,i){if(void 0!==this._valid)return this._valid;const n=t.mag()>=2,r=e.mag()>=2;if(!n&&!r)return;if(!n||!r)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return nr(t)&&nr(e)&&o}}const or={panStep:100,bearingStep:15,pitchStep:10};class ar{constructor(){const t=or;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,i=0,n=0,r=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,n=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:sr,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+i*this._bearingStep,pitch:a.getPitch()+n*this._pitchStep,offset:[-r*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function sr(t){return t*(2-t)}const lr=4.000244140625;class cr{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;let i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=t.exported.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==i&&i%lr==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=o.mousePos(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform,i=()=>e._terrainEnabled()?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>lr?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const r=i(),o=Math.pow(2,r),a="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(a*n))),"wheel"===this._type&&(this._startZoom=i(),this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:i(),r=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&r&&o){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),i=o(e);a=t.number(r,n,i),e<1?this._frameId||(this._frameId=!0):s=!0}else a=n,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=t.ease;if(this._prevEase){const e=this._prevEase,n=(t.exported.now()-e.start)/e.duration,r=e.easing(n+.01)-e.easing(n),o=.27/Math.sqrt(r*r+1e-4)*.01,a=Math.sqrt(.0729-o*o);i=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:i},i}blur(){this.reset()}reset(){this._active=!1}}class ur{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class hr{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,e){return t.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dr{constructor(){this._tap=new Gn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))}touchmove(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const n=e[0],r=n.y-this._swipePoint.y;return this._swipePoint=n,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,i)}touchend(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pr{constructor(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fr{constructor(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class mr{constructor(t,e,i,n){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const yr=t=>t.zoom||t.drag||t.pitch||t.rotate;class vr extends t.Event{}class gr{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,i){const n=t.sub([],i,e);this.radius=t.length(n[2]<0?t.div([],n,this.constants):[n[0],n[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$2(e,e,this.constants);const i=t.scale([],e,this.radius);if(i[2]>0){const e=t.scale([],[0,0,1],t.dot(i,[0,0,1])),n=t.scale([],t.normalize([],[i[0],i[1],0]),this.radius),r=t.add([],i,t.scale([],t.sub([],t.add([],n,e),i),2));i[0]=r[0],i[1]=r[1]}return i}}function _r(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class br{constructor(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new In(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new gr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[r,a,s]of this._listeners)o.addEventListener(r,a,r===t.window.document?this.handleWindowEvent:this.handleEvent,s)}destroy(){for(const[e,i,n]of this._listeners)o.removeEventListener(e,i,e===t.window.document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(t){const e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Bn(e,t));const n=e.boxZoom=new Nn(e,t);this._add("boxZoom",n);const r=new qn,o=new hr;e.doubleClickZoom=new ur(o,r),this._add("tapZoom",r),this._add("clickZoom",o);const a=new dr;this._add("tapDragZoom",a);const s=e.touchPitch=new rr;this._add("touchPitch",s);const l=new Xn(t),c=new Yn(t);e.dragRotate=new fr(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Wn(t),h=new Kn(t);e.dragPan=new pr(i,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new ir,p=new tr;e.touchZoomRotate=new mr(i,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new jn(e));const f=e.scrollZoom=new cr(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new ar;this._add("keyboard",m);for(const y of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[y]&&e[y].enable(t[y])}_add(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(yr(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,i){for(const n in t)if(n!==i&&(!e||e.indexOf(n)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,"".concat(t.type,"Window"))}_getMapTouches(t){const e=[];for(const i of t)this._el.contains(i.target)&&e.push(i);return e}handleEvent(t,e){this._updatingCamera=!0;const i="renderFrame"===t.type,n=i?void 0:t,r={needsRenderFrame:!1},a={},s={},l=t.touches?this._getMapTouches(t.touches):void 0,c=l?o.touchPos(this._el,l):i?void 0:o.mousePos(this._el,t);for(const{handlerName:o,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let i;this._blockedByActive(s,p,o)?d.reset():d[e||t.type]&&(i=d[e||t.type](t,c,l),this.mergeHandlerResult(r,a,i,o,n),i&&i.needsRenderFrame&&this._triggerRenderFrame()),(i||d.isActive())&&(s[o]=d)}const u={};for(const o in this._previousActiveHandlers)s[o]||(u[o]=n);this._previousActiveHandlers=s,(Object.keys(u).length||_r(r))&&(this._changes.push([r,a,u]),this._triggerRenderFrame()),(Object.keys(s).length||_r(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,i,n,r,o){if(!n)return;t.extend(e,n);const a={handlerName:r,originalEvent:n.originalEvent||o};void 0!==n.zoomDelta&&(i.zoom=a),void 0!==n.panDelta&&(i.drag=a),void 0!==n.pitchDelta&&(i.pitch=a),void 0!==n.bearingDelta&&(i.rotate=a)}_applyChanges(){const e={},i={},n={};for(const[r,o,a]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.aroundCoord&&(e.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.extend(i,o),t.extend(n,a);this._updateMapTransform(e,i,n),this._changes=[]}_updateMapTransform(e,i,n){const r=this._map,o=r.transform,a=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!_r(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(!_r(e))return this._fireEvents(i,n,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:p}=e;void 0!==p&&(h=p),(t=>i.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",r._stop(!0),h=h||r.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s){const t=o.screenPointToMercatorRay(h),e=o.screenPointToMercatorRay(h.sub(s)),i=this._trackingEllipsoid.projectRay(t.dir),n=this._trackingEllipsoid.projectRay(e.dir);f[0]=n[0]-i[0],f[1]=n[1]-i[1]}const m=o.zoom,y=[0,0,0];if(l){const e=a(d||o.pointCoordinate3D(h)),i={dir:t.normalize([],t.sub([],e,o._camera.position))},n=o.screenPointToMercatorRay(o.centerPoint);if(i.dir[2]<0){const r=t.altitudeFromMercatorZ(e[2],e[1]),s=o.rayIntersectionCoordinate(o.pointRayIntersection(o.centerPoint,r)),c=o.zoomDeltaToMovement(a(s),l)*(n.dir[2]/i.dir[2]);t.scale(y,i.dir,c)}else if(o._terrainEnabled()){const n=o.zoomDeltaToMovement(e,l);t.scale(y,i.dir,n)}}const v=t.add(f,f,y);o._translateCameraConstrained(v),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(i,n,!0)}_fireEvents(e,i,n){const r=yr(this._eventsInProgress),o=yr(e),a={};for(const t in e){const{originalEvent:i}=e[t];this._eventsInProgress[t]||(a["".concat(t,"start")]=i),this._eventsInProgress[t]=e[t]}!r&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:i}=e[t];this._fireEvent(t,i)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:n}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=i[e]||n,s["".concat(t,"end")]=l)}for(const t in s)this._fireEvent(t,s[t]);const c=yr(this._eventsInProgress);if(n&&(r||o)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(i(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new vr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class xr extends t.Evented{constructor(e,i){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,i,n){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),n)}panTo(e,i,n){return this.easeTo(t.extend({center:e},i),n)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,i,n){return this.easeTo(t.extend({zoom:e},i),n)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,i,n){return this.easeTo(t.extend({bearing:e},i),n)}resetNorth(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,i){e=t.LngLatBounds.convert(e);const n=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,i)}_extendCameraOptions(e){const i={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(i,e.padding),e}_cameraForBoxAndBearing(e,i,n,r){const o=this._extendCameraOptions(r),a=this.transform,s=a.padding,l=a.project(t.LngLat.convert(e)),c=a.project(t.LngLat.convert(i)),u=l.rotate(-t.degToRad(n)),h=c.rotate(-t.degToRad(n)),d=new t.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),p=new t.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),f=d.sub(p),m=(a.width-(s.left+s.right+o.padding.left+o.padding.right))/f.x,y=(a.height-(s.top+s.bottom+o.padding.top+o.padding.bottom))/f.y;if(y<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const v=Math.min(a.scaleZoom(a.scale*Math.min(m,y)),o.maxZoom),g="number"==typeof o.offset.x?new t.pointGeometry(o.offset.x,o.offset.y):t.pointGeometry.convert(o.offset),_=new t.pointGeometry((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(n*Math.PI/180),b=g.add(_).mult(a.scale/a.zoomScale(v));return{center:a.unproject(l.add(c).div(2).sub(b)),zoom:v,bearing:n}}_cameraForBox(e,i,n,r,o){const a=this._extendCameraOptions(o);n=n||0,r=r||0,e=t.LngLat.convert(e),i=t.LngLat.convert(i);const s=this.transform.clone();s.padding=a.padding;const l=this.getFreeCameraOptions(),c=new t.LngLat(.5*(e.lng+i.lng),.5*(e.lat+i.lat)),u=.5*(n+r);if(s._camera.position[2]<t.mercatorZfromAltitude(u,c.lat))return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),s.setFreeCameraOptions(l);const h=t.MercatorCoordinate.fromLngLat(e),d=t.MercatorCoordinate.fromLngLat(i),m=s.pointRayIntersection(s.centerPoint,u),y=[(v=s.rayIntersectionCoordinate(m)).x,v.y,v.z];var v;const g=s.screenPointToMercatorRay(s.centerPoint);let _,b=0;do{const i=Math.floor(s.zoom),o=1<<i,a=Math.min(o*h.x,o*d.x),l=Math.min(o*h.y,o*d.y),c=Math.max(o*h.x,o*d.x),u=Math.max(o*h.y,o*d.y),m=new f([a,l,n],[c,u,r]),v=p.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,i);if(2!==m.intersects(v)){_&&(s._camera.position=t.scaleAndAdd([],s._camera.position,g.dir,-_),s._updateStateFromCamera());break}const b=t.sub([],s._camera.position,y);_=.5*t.length(b),s._camera.position=t.scaleAndAdd([],s._camera.position,g.dir,_);try{s._updateStateFromCamera()}catch(e){return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++b<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)}_raycastElevationBox(e,i){const n=this.transform.elevation;if(!n)return;const r=new t.pointGeometry(e.x,i.y),o=new t.pointGeometry(i.x,e.y),a=n.pointCoordinate(e);if(!a)return;const s=n.pointCoordinate(i);if(!s)return;const l=n.pointCoordinate(r);if(!l)return;const c=n.pointCoordinate(o);if(!c)return;const u=new t.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new t.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new t.MercatorCoordinate(l[0],l[1]).toLngLat(),p=new t.MercatorCoordinate(c[0],c[1]).toLngLat(),f=Math.min(u.lng,Math.min(h.lng,Math.min(d.lng,p.lng))),m=Math.min(u.lat,Math.min(h.lat,Math.min(d.lat,p.lat))),y=Math.max(u.lng,Math.max(h.lng,Math.max(d.lng,p.lng))),v=Math.max(u.lat,Math.max(h.lat,Math.max(d.lat,p.lat))),g=Math.min(a[3],Math.min(s[3],Math.min(l[3],c[3]))),_=Math.max(a[3],Math.max(s[3],Math.max(l[3],c[3])));return{minLngLat:new t.LngLat(f,m),maxLngLat:new t.LngLat(y,v),minAltitude:g,maxAltitude:_}}fitScreenCoordinates(e,i,n,r,o){let a,s,l,c;const u=t.pointGeometry.convert(e),h=t.pointGeometry.convert(i),d=this._raycastElevationBox(u,h);if(d)a=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,c=d.maxAltitude;else{if(this.transform.isCornerOffEdge(u,h))return this;a=this.transform.pointLocation(u),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(i)),n,r):this._cameraForBox(a,s,l,c,r),r,o)}_fitInternal(e,i,n){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,n):this.flyTo(i,n)):this}jumpTo(e,i){this.stop();const n=this.transform;let r=!1,o=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),r&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),o&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),a&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,i){this.stop();const n=this.transform,r=n.zoom,o=n.pitch,a=n.bearing;n.setFreeCameraOptions(e);const s=r!==n.zoom,l=o!==n.pitch,c=a!==n.bearing;return this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),s&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),c&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),l&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i)),this}easeTo(e,i){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const n=this.transform,r=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:r,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:n.padding,d=t.pointGeometry.convert(e.offset);let p=n.centerPoint.add(d);const f=n.pointLocation(p),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);const y=n.project(f),v=n.project(m).sub(y),g=n.zoomScale(l-r);let _,b;e.around&&(_=t.LngLat.convert(e.around),b=n.locationPoint(_));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==r,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==a,this._padding=!n.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,x),this._ease((e=>{if(this._zooming&&(n.zoom=t.number(r,l,e)),this._rotating&&(n.bearing=t.number(o,c,e)),this._pitching&&(n.pitch=t.number(a,u,e)),this._padding&&(n.interpolatePadding(s,h,e),p=n.centerPoint.add(d)),_)n.setLocationAtPoint(_,b);else{const t=n.zoomScale(n.zoom-r),i=l>r?Math.min(2,g):Math.max(.5,g),o=Math.pow(i,1-e),a=n.unproject(y.add(v.mult(e*o)).mult(t));n.setLocationAtPoint(n.renderWorldCopies?a.wrap():a,p)}this._fireMoveEvents(i)}),(t=>{n.recenterOnTerrain(),this._afterEase(i,t)}),e),this}_prepareEase(e,i,n={}){this._moving=!0,this.transform.cameraElevationReference="sea",i||n.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId,this.transform.cameraElevationReference="ground";const n=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,i){if(!e.essential&&t.exported.prefersReducedMotion){const n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const n=this.transform,r=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,n.minZoom,n.maxZoom):r,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:n.padding,d=n.zoomScale(l-r),p=t.pointGeometry.convert(e.offset);let f=n.centerPoint.add(p);const m=n.pointLocation(f),y=t.LngLat.convert(e.center||m);this._normalizeCenter(y);const v=n.project(m),g=n.project(y).sub(v);let _=e.curve;const b=Math.max(n.width,n.height),x=b/d,w=g.mag();if("minZoom"in e){const i=t.clamp(Math.min(e.minZoom,r,l),n.minZoom,n.maxZoom),o=b/n.zoomScale(i-r);_=Math.sqrt(o/w*2)}const S=_*_;function E(t){const e=(x*x-b*b+(t?-1:1)*S*S*w*w)/(2*(t?x:b)*S*w);return Math.log(Math.sqrt(e*e+1)-e)}function k(t){return(Math.exp(t)-Math.exp(-t))/2}function P(t){return(Math.exp(t)+Math.exp(-t))/2}const T=E(0);let C=function(t){return P(T)/P(T+_*t)},M=function(t){return b*((P(T)*(k(e=T+_*t)/P(e))-k(T))/S)/w;var e},A=(E(1)-T)/_;if(Math.abs(w)<1e-6||!isFinite(A)){if(Math.abs(b-x)<1e-6)return this.easeTo(e,i);const t=x<b?-1:1;A=Math.abs(Math.log(x/b))/_,M=function(){return 0},C=function(e){return Math.exp(t*_*e)}}return e.duration="duration"in e?+e.duration:1e3*A/("screenSpeed"in e?+e.screenSpeed/_:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==a,this._padding=!n.isPaddingEqual(h),this._prepareEase(i,!1),this._ease((e=>{const d=e*A,m=1/C(d);n.zoom=1===e?l:r+n.scaleZoom(m),this._rotating&&(n.bearing=t.number(o,c,e)),this._pitching&&(n.pitch=t.number(a,u,e)),this._padding&&(n.interpolatePadding(s,h,e),f=n.centerPoint.add(p));const _=1===e?y:n.unproject(v.add(g.mult(M(d))).mult(m));n.setLocationAtPoint(n.renderWorldCopies?_.wrap():_,f),n._updateCenterElevation(),this._fireMoveEvents(i)}),(()=>this._afterEase(i)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,i,n){!1===n.animate||0===n.duration?(e(1),i()):(this._easeStart=t.exported.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,i){e=t.wrap(e,-180,180);const n=Math.abs(e-i);return Math.abs(e-360-i)<n&&(e-=360),Math.abs(e+360-i)<n&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}}class wr{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const i=this._map._getUIString("AttributionControl.".concat(e));t.title=i,t.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const n=i.reduce(((t,e,n)=>(e.value&&(t+="".concat(e.key,"=").concat(e.value).concat(n<i.length-1?"&":"")),t)),"?");e.href="".concat(t.config.FEEDBACK_URL,"/").concat(n).concat(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const n in e){const i=e[n];if(i.used){const e=i.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,i)=>{for(let n=i+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0}));const i=t.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,t.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Sr{constructor(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)}onAdd(t){this._map=t,this._container=o.create("div","mapboxgl-ctrl");const e=o.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const i=t[e].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Er{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,i=e?this._queue.concat(e):this._queue;for(const n of i)if(n.id===t)return void(n.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const i of e)if(!i.cancelled&&(i.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function kr(e,i,n){if(e=new t.LngLat(e.lng,e.lat),i){const r=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-n.center.lng)/360),s=n.locationPoint(e).distSqr(i),l=i.x<0||i.y<0||i.x>n.width||i.y>n.height;n.locationPoint(r).distSqr(i)<s&&(l||Math.abs(r.lng-n.center.lng)<a)?e=r:n.locationPoint(o).distSqr(i)<s&&(l||Math.abs(o.lng-n.center.lng)<a)&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){const t=n.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=n.width&&t.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}const Pr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Tr extends t.Evented{constructor(e,i){if(super(),(e instanceof t.window.HTMLElement||i)&&(e=t.extend({element:e},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const i=o.createNS("http://www.w3.org/2000/svg","svg"),n=41,r=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height","".concat(n,"px")),i.setAttributeNS(null,"width","".concat(r,"px")),i.setAttributeNS(null,"viewBox","0 0 ".concat(r," ").concat(n));const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=o.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=o.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const y=o.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");const v=o.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#FFFFFF"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962"),m.appendChild(y),m.appendChild(v),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),i.appendChild(s),i.setAttributeNS(null,"height",n*this._scale+"px"),i.setAttributeNS(null,"width",r*this._scale+"px"),this._element.appendChild(i),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()}));const n=this._element.classList;for(const t in Pr)n.remove("mapboxgl-marker-anchor-".concat(t));n.add("mapboxgl-marker-anchor-".concat(this._anchor)),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,i=13.5,n=Math.sqrt(Math.pow(i,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[n,-1*(e-i+n)],"bottom-right":[-n,-1*(e-i+n)],left:[i,-1*(e-i)],right:[-i,-1*(e-i)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_evaluateOpacity(){const t=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(t))return void this._clearFadeTimer();const e=this._map.unproject(t);let i=!1;if(this._map.getTerrain()){const t=this._map.getFreeCameraOptions();if(t.position){const n=t.position.toLngLat();i=n.distanceTo(e)<.9*n.distanceTo(this._lngLat)}}const n=(1-this._map._queryFogOpacity(e))*(i?.2:1);this._element.style.opacity="".concat(n),this._popup&&this._popup._setOpacity("".concat(n)),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(t){const e=this._map.transform;return!!t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=kr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(e="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX(".concat(this._map.getPitch(),"deg)")),t&&"moveend"!==t.type||(this._pos=this._pos.round()),this._map._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&o.setTransform(this._element,"".concat(Pr[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(i," ").concat(e)),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}_transformedOffset(){if(!this._defaultMarker)return this._offset;const t=this._map.transform,e=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&e._rotate(t.angle),"map"===this._pitchAlignment&&(e.y*=Math.cos(t._pitch)),e}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Cr{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const i=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-i)+this._end*i}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,i){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+i}}const Mr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:Ar,HTMLElement:Or,ImageBitmap:Ir}=t.window,Dr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function zr(t){t.parentNode&&t.parentNode.removeChild(t)}const Lr={showCompass:!0,showZoom:!0,visualizePitch:!1};class Rr{constructor(e,i,n=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new Xn({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,n&&(this.mousePitch=new Yn({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(i,"mousedown",this.mousedown),o.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(i,"touchmove",this.touchmove),o.addEventListener(i,"touchend",this.touchend),o.addEventListener(i,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),o.disableDrag()}move(t,e){const i=this.map,n=this.mouseRotate.mousemoveWindow(t,e);if(n&&n.bearingDelta&&i.setBearing(i.getBearing()+n.bearingDelta),this.mousePitch){const n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}}off(){const t=this.element;o.removeEventListener(t,"mousedown",this.mousedown),o.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(t,"touchmove",this.touchmove),o.removeEventListener(t,"touchend",this.touchend),o.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(t.window,"mousemove",this.mousemove),o.removeEventListener(t.window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),o.mousePos(this.element,e)),o.addEventListener(t.window,"mousemove",this.mousemove),o.addEventListener(t.window,"mouseup",this.mouseup)}mousemove(t){this.move(t,o.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Fr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Br,jr=0,Nr=!1;const Vr={maxWidth:100,unit:"metric"};function Ur(t,e,i){const n=i&&i.maxWidth||100,r=t._container.getBoundingClientRect().height/2,o=t.unproject([0,r]),a=t.unproject([n,r]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){const i=3.2808*s;i>5280?Gr(e,n,i/5280,t._getUIString("ScaleControl.Miles"),t):Gr(e,n,i,t._getUIString("ScaleControl.Feet"),t)}else i&&"nautical"===i.unit?Gr(e,n,s/1852,t._getUIString("ScaleControl.NauticalMiles"),t):s>=1e3?Gr(e,n,s/1e3,t._getUIString("ScaleControl.Kilometers"),t):Gr(e,n,s,t._getUIString("ScaleControl.Meters"),t)}function Gr(t,e,i,n,r){const o=function(t){const e=Math.pow(10,"".concat(Math.floor(t)).length-1);let i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(i),e*i}(i),a=o/i;r._requestDomTask((()=>{t.style.width=e*a+"px",t.innerHTML="".concat(o,"&nbsp;").concat(n)}))}const qr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Hr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends xr{constructor(e){if(null!=(e=t.extend({},Dr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new En(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._renderTaskQueue=new Er,this._domRenderTaskQueue=new Er,this._controls=[],this._markers=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Mr,e.locale),this._clickTolerance=e.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Cr(0),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof Or))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new br(this,e),this._hash=e.hash&&new Pn("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.attributionControl&&this.addControl(new wr({customAttribution:e.customAttribution})),this._logoControl=new Sr,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event("".concat(e.dataType,"data"),e))})),this.on("dataloading",(e=>{this.fire(new t.Event("".concat(e.dataType,"dataloading"),e))}))}_getMapId(){return this._mapId}addControl(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){const[i,n]=this._containerDimensions();if(i===this.transform.width&&n===this.transform.height)return this;this._resizeCanvas(i,n),this.transform.resize(i,n),this.painter.resize(Math.ceil(i),Math.ceil(n));const r=!this._moving;return r&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),r&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(t,e,i){if("mouseenter"===t||"mouseover"===t){let n=!1;const r=r=>{const o=this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[];o.length?n||(n=!0,i.call(this,new Ln(t,this,r.originalEvent,{features:o}))):n=!1};return{layer:e,listener:i,delegates:{mousemove:r,mouseout:()=>{n=!1}}}}if("mouseleave"===t||"mouseout"===t){let n=!1;const r=r=>{(this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?n=!0:n&&(n=!1,i.call(this,new Ln(t,this,r.originalEvent)))},o=e=>{n&&(n=!1,i.call(this,new Ln(t,this,e.originalEvent)))};return{layer:e,listener:i,delegates:{mousemove:r,mouseout:o}}}{const n=t=>{const n=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,i.call(this,t),delete t.features)};return{layer:e,listener:i,delegates:{[t]:n}}}}on(t,e,i){if(void 0===i)return super.on(t,e);const n=this._createDelegatedListener(t,e,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n);for(const r in n.delegates)this.on(r,n.delegates[r]);return this}once(t,e,i){if(void 0===i)return super.once(t,e);const n=this._createDelegatedListener(t,e,i);for(const r in n.delegates)this.once(r,n.delegates[r]);return this}off(t,e,i){return void 0===i?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(n=>{const r=this._delegatedListeners[t];for(let t=0;t<r.length;t++){const n=r[t];if(n.layer===e&&n.listener===i){for(const t in n.delegates)this.off(t,n.delegates[t]);return r.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,i){return this.style?(void 0!==i||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(i=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}queryTerrainElevation(e,i){const n=this.transform.elevation;return n?(i=t.extend({},{exaggerated:!0},i),n.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,i.exaggerated)):null}setStyle(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(e,i))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error("Missing UI string '".concat(t,"'"));return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),t&&(this.style=new Ge(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ge(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,i){if("string"==typeof e){const n=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(n,t.ResourceType.Style);t.getJSON(r,((e,n)=>{e?this.fire(new t.ErrorEvent(e)):n&&this._updateDiff(n,i)}))}else"object"==typeof e&&this._updateDiff(e,i)}_updateDiff(e,i){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce("Unable to perform style diff: ".concat(n.message||n.error||n,".  Rebuilding the style from scratch.")),this._updateStyle(e,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const i=this.style&&this.style._getSourceCaches(e);if(0!==i.length)return i.every((t=>t.loaded()));this.fire(new t.ErrorEvent(new Error("There is no source with ID '".concat(e,"'"))))}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const i=t[e]._tiles;for(const t in i){const e=i[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,i,{pixelRatio:n=1,sdf:r=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),i instanceof Ar||Ir&&i instanceof Ir){const{width:l,height:c,data:u}=t.exported.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:n,stretchX:o,stretchY:a,content:s,sdf:r,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=i,h=i;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:n,stretchX:o,stretchY:a,content:s,sdf:r,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,i){const n=this.style.getImage(e);if(!n)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=i instanceof Ar||Ir&&i instanceof Ir?t.exported.getImageData(i):i,{width:o,height:a,data:s}=r;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==n.data.width||a!==n.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(n.data.replace(s,!(i instanceof Ar||Ir&&i instanceof Ir)),void this.style.updateImage(e,n))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,n)=>{i(e,n instanceof Ar?t.exported.getImageData(n):n)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)}setFilter(t,e,i={}){return this.style.setFilter(t,e,i),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,i,n={}){return this.style.setPaintProperty(t,e,i,n),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,i,n={}){return this.style.setLayoutProperty(t,e,i,n),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.getBoundingClientRect().width||400,e=this._container.getBoundingClientRect().height||300),[t,e]}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=o.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=o.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=o.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);const n=this._controlContainer=o.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{r[t]=o.create("div","mapboxgl-ctrl-".concat(t),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,i){const n=t.exported.devicePixelRatio||1;this._canvas.width=n*Math.ceil(e),this._canvas.height=n*Math.ceil(i),this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(i,"px")}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_setupPainter(){const i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);n?(t.storeAuthState(n,!0),this.painter=new fn(n,this.transform),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.isMoving()&&this.loaded()?t():this._domRenderTaskQueue.add(t)}_render(e){let i;const n=this.painter.context.extTimerQuery,r=t.exported.now();this.listens("gpu-timing-frame")&&(i=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,i));let o=this._updateAverageElevation(r);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;let a=!1;const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=t.exported.now();this.style.zoomHistory.update(e,i);const n=new t.EvaluationParameters(e,{now:i,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=n.crossFadingFactor();1===r&&r===this._crossFadingFactor||(a=!0,this._crossFadingFactor=r),this.style.update(n)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform),this._forceMarkerUpdate()),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-r;n.endQueryEXT(n.TIME_ELAPSED_EXT,i),setTimeout((()=>{const r=n.getQueryObjectEXT(i,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(i),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const i=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:i}))}),50)}const l=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(l||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(o=this._updateAverageElevation(r,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||l||(this._fullyLoaded=!0,this._authenticate()),this}_forceMarkerUpdate(){for(const t of this._markers)t._update()}_updateAverageElevation(t,e=!1){const i=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&i(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let n=this.transform.sampleAverageElevation();isNaN(n)?n=0:this._averageElevationLastSampledAt=t;const r=Math.abs(e-n);if(r>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(n),i(n);this._averageElevation.easeTo(n,t,300)}else if(r>1e-4)return this._averageElevation.jumpTo(n),i(n)}return!!this._averageElevation.isEasing(t)&&i(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Sr&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const i=this.painter.context.gl,n=i.createFramebuffer();function r(t){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0);const e=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,e),e}return i.bindFramebuffer(i.FRAMEBUFFER,n),this._canvasPixelComparison(r(t),e.canvasCopies.map(r),e.timeStamps)}_canvasPixelComparison(t,e,i){let n=i[1]-i[0];const r=t.length/4;for(let o=0;o<e.length;o++){const a=e[o];let s=0;for(let e=0;e<a.length;e+=4)a[e]===t[e]&&a[e+1]===t[e+1]&&a[e+2]===t[e+2]&&a[e+3]===t[e+3]&&(s+=1);n+=(i[o+2]-i[o+1])*(1-s/r)}return n}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),zr(this._canvasContainer),zr(this._controlContainer),zr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,i){t.setCacheLimits(e,i)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},Lr,e),this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),o.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),o.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=o.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._map._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const i=o.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i}_setButtonTitle(t,e){const i=this._map._getUIString("NavigationControl.".concat(e));t.title=i,t.setAttribute("aria-label",i)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},Fr,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=kn(this._updateMarkerRotation,20)}onAdd(e){var i;return this._map=e,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Br?i(Br):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>{Br="denied"!==t.state,i(Br)})):(Br=!!t.window.navigator.geolocation,i(Br)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,jr=0,Nr=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=this._map.getBearing(),o=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(n),o,{geolocateSource:!0})}_updateMarker(e){if(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.getBoundingClientRect().height/2,e=this._map.unproject([0,t]),i=this._map.unproject([100,t]),n=e.distanceTo(i)/100,r=Math.ceil(2*this._accuracy/n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Nr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o.create("button","mapboxgl-ctrl-geolocate",this._container),o.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location"),this._dotElement.appendChild(o.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Tr({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Tr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jr--,Nr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jr++,jr>1?(e={maximumAge:6e5,timeout:0},Nr=!0):(e=this.options.positionOptions,Nr=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(console.error):e()}_clearWatch(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:wr,ScaleControl:class{constructor(e){this.options=t.extend({},Vr,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ur(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,Ur(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=o.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(qr),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this),this._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[])}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("preclick",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const i=t.window.document.createDocumentFragment(),n=t.window.document.createElement("body");let r;for(n.innerHTML=e;r=n.firstChild,r;)i.appendChild(r);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){return this._classList.add(t),this._container&&this._updateClassList(),this}removeClassName(t){return this._classList.delete(t),this._container&&this._updateClassList(),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){let e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._container&&this._updateClassList(),e}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_getAnchor(t){if(this.options.anchor)return this.options.anchor;const e=this._pos,i=this._container.offsetWidth,n=this._container.offsetHeight;let r;return r=e.y+t.bottom.y<n?["top"]:e.y>this._map.transform.height-n?["bottom"]:[],e.x<i/2?r.push("left"):e.x>this._map.transform.width-i/2&&r.push("right"),0===r.length?"bottom":r.join("-")}_updateClassList(){const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),this._container.className=t.join(" ")}_update(e){if(this._map&&(this._lngLat||this._trackPointer)&&this._content){if(this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=kr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e){const i=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),n=function(e){if(e||(e=new t.pointGeometry(0,0)),"number"==typeof e){const i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(i,i),"top-right":new t.pointGeometry(-i,i),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(i,-i),"bottom-right":new t.pointGeometry(-i,-i),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const i=t.pointGeometry.convert(e);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}(this.options.offset),r=this._anchor=this._getAnchor(n),a=i.add(n[r]).round();this._map._requestDomTask((()=>{this._container&&r&&o.setTransform(this._container,"".concat(Pr[r]," translate(").concat(a.x,"px,").concat(a.y,"px)"))}))}this._updateClassList()}}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(Zr);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._content&&(this._content.style.opacity=t),this._tip&&(this._tip.style.opacity=t)}},Marker:Tr,Style:Ge,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:wn,Evented:t.Evented,config:t.config,prewarm:function(){Lt().acquire(It)},clearPrewarmedResources:function(){const t=zt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(It),zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Dt.workerCount},set workerCount(t){Dt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return Hr})),i}()},function(t,e,i){var n=i(145);for(var r in n)n.default[r]=n[r];t.exports=n.default},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(0);function r(t){return Object(n.a)({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}},function(t,e,i){t.exports=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="dist/",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o=(n(i(1)),i(6)),a=n(o),s=n(i(7)),l=n(i(8)),c=n(i(9)),u=n(i(10)),h=n(i(11)),d=n(i(14)),p=[],f=!1,m={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},y=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(f=!0),f)return p=(0,h.default)(p,m),(0,u.default)(p,m.once),p},v=function(){p=(0,d.default)(),y()},g=function(){p.forEach((function(t,e){t.node.removeAttribute("data-aos"),t.node.removeAttribute("data-aos-easing"),t.node.removeAttribute("data-aos-duration"),t.node.removeAttribute("data-aos-delay")}))},_=function(t){return!0===t||"mobile"===t&&c.default.mobile()||"phone"===t&&c.default.phone()||"tablet"===t&&c.default.tablet()||"function"==typeof t&&!0===t()},b=function(t){m=r(m,t),p=(0,d.default)();var e=document.all&&!window.atob;return _(m.disable)||e?g():(m.disableMutationObserver||l.default.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),m.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",m.easing),document.querySelector("body").setAttribute("data-aos-duration",m.duration),document.querySelector("body").setAttribute("data-aos-delay",m.delay),"DOMContentLoaded"===m.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?y(!0):"load"===m.startEvent?window.addEventListener(m.startEvent,(function(){y(!0)})):document.addEventListener(m.startEvent,(function(){y(!0)})),window.addEventListener("resize",(0,s.default)(y,m.debounceDelay,!0)),window.addEventListener("orientationchange",(0,s.default)(y,m.debounceDelay,!0)),window.addEventListener("scroll",(0,a.default)((function(){(0,u.default)(p,m.once)}),m.throttleDelay)),m.disableMutationObserver||l.default.ready("[data-aos]",v),p)};t.exports={init:b,refresh:y,refreshHard:v}},function(t,e){},,,,,function(t,e){(function(e){"use strict";function i(t,e,i){function n(e){var i=m,n=y;return m=y=void 0,E=e,g=t.apply(n,i)}function o(t){return E=t,_=setTimeout(u,e),k?n(t):g}function a(t){var i=e-(t-b);return P?w(i,v-(t-E)):i}function l(t){var i=t-b;return void 0===b||i>=e||i<0||P&&t-E>=v}function u(){var t=S();return l(t)?h(t):void(_=setTimeout(u,a(t)))}function h(t){return _=void 0,T&&m?n(t):(m=y=void 0,g)}function d(){void 0!==_&&clearTimeout(_),E=0,m=b=y=_=void 0}function p(){return void 0===_?g:h(S())}function f(){var t=S(),i=l(t);if(m=arguments,y=this,b=t,i){if(void 0===_)return o(b);if(P)return _=setTimeout(u,e),n(b)}return void 0===_&&(_=setTimeout(u,e)),g}var m,y,v,g,_,b,E=0,k=!1,P=!1,T=!0;if("function"!=typeof t)throw new TypeError(c);return e=s(e)||0,r(i)&&(k=!!i.leading,v=(P="maxWait"in i)?x(s(i.maxWait)||0,e):v,T="trailing"in i?!!i.trailing:T),f.cancel=d,f.flush=p,f}function n(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError(c);return r(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),i(t,e,{leading:o,maxWait:e,trailing:a})}function r(t){var e="undefined"==typeof t?"undefined":l(t);return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==("undefined"==typeof t?"undefined":l(t))}function a(t){return"symbol"==("undefined"==typeof t?"undefined":l(t))||o(t)&&b.call(t)==h}function s(t){if("number"==typeof t)return t;if(a(t))return u;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(d,"");var i=f.test(t);return i||m.test(t)?y(t.slice(2),i?2:8):p.test(t)?u:+t}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c="Expected a function",u=NaN,h="[object Symbol]",d=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,m=/^0o[0-7]+$/i,y=parseInt,v="object"==("undefined"==typeof e?"undefined":l(e))&&e&&e.Object===Object&&e,g="object"==("undefined"==typeof self?"undefined":l(self))&&self&&self.Object===Object&&self,_=v||g||Function("return this")(),b=Object.prototype.toString,x=Math.max,w=Math.min,S=function(){return _.Date.now()};t.exports=n}).call(e,function(){return this}())},function(t,e){(function(e){"use strict";function i(t,e,i){function r(e){var i=m,n=y;return m=y=void 0,E=e,g=t.apply(n,i)}function o(t){return E=t,_=setTimeout(u,e),k?r(t):g}function s(t){var i=e-(t-S);return P?x(i,v-(t-E)):i}function c(t){var i=t-S;return void 0===S||i>=e||i<0||P&&t-E>=v}function u(){var t=w();return c(t)?h(t):void(_=setTimeout(u,s(t)))}function h(t){return _=void 0,T&&m?r(t):(m=y=void 0,g)}function d(){void 0!==_&&clearTimeout(_),E=0,m=S=y=_=void 0}function p(){return void 0===_?g:h(w())}function f(){var t=w(),i=c(t);if(m=arguments,y=this,S=t,i){if(void 0===_)return o(S);if(P)return _=setTimeout(u,e),r(S)}return void 0===_&&(_=setTimeout(u,e)),g}var m,y,v,g,_,S,E=0,k=!1,P=!1,T=!0;if("function"!=typeof t)throw new TypeError(l);return e=a(e)||0,n(i)&&(k=!!i.leading,v=(P="maxWait"in i)?b(a(i.maxWait)||0,e):v,T="trailing"in i?!!i.trailing:T),f.cancel=d,f.flush=p,f}function n(t){var e="undefined"==typeof t?"undefined":s(t);return!!t&&("object"==e||"function"==e)}function r(t){return!!t&&"object"==("undefined"==typeof t?"undefined":s(t))}function o(t){return"symbol"==("undefined"==typeof t?"undefined":s(t))||r(t)&&_.call(t)==u}function a(t){if("number"==typeof t)return t;if(o(t))return c;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(h,"");var i=p.test(t);return i||f.test(t)?m(t.slice(2),i?2:8):d.test(t)?c:+t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l="Expected a function",c=NaN,u="[object Symbol]",h=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,f=/^0o[0-7]+$/i,m=parseInt,y="object"==("undefined"==typeof e?"undefined":s(e))&&e&&e.Object===Object&&e,v="object"==("undefined"==typeof self?"undefined":s(self))&&self&&self.Object===Object&&self,g=y||v||Function("return this")(),_=Object.prototype.toString,b=Math.max,x=Math.min,w=function(){return g.Date.now()};t.exports=i}).call(e,function(){return this}())},function(t,e){"use strict";function i(t){var e=void 0,n=void 0;for(e=0;e<t.length;e+=1){if((n=t[e]).dataset&&n.dataset.aos)return!0;if(n.children&&i(n.children))return!0}return!1}function n(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function r(){return!!n()}function o(t,e){var i=window.document,r=new(n())(a);s=e,r.observe(i.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function a(t){t&&t.forEach((function(t){var e=Array.prototype.slice.call(t.addedNodes),n=Array.prototype.slice.call(t.removedNodes);if(i(e.concat(n)))return s()}))}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){};e.default={isSupported:r,ready:o}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,a=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=function(){function t(){i(this,t)}return r(t,[{key:"phone",value:function(){var t=n();return!(!o.test(t)&&!a.test(t.substr(0,4)))}},{key:"mobile",value:function(){var t=n();return!(!s.test(t)&&!l.test(t.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),t}();e.default=new c},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,i){var n=t.node.getAttribute("data-aos-once");e>t.position?t.node.classList.add("aos-animate"):"undefined"!=typeof n&&("false"===n||!i&&"true"!==n)&&t.node.classList.remove("aos-animate")},n=function(t,e){var n=window.pageYOffset,r=window.innerHeight;t.forEach((function(t,o){i(t,r+n,e)}))};e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(12)),o=function(t,e){return t.forEach((function(t,i){t.node.classList.add("aos-init"),t.position=(0,r.default)(t.node,e.offset)})),t};e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(13)),o=function(t,e){var i=0,n=0,o=window.innerHeight,a={offset:t.getAttribute("data-aos-offset"),anchor:t.getAttribute("data-aos-anchor"),anchorPlacement:t.getAttribute("data-aos-anchor-placement")};switch(a.offset&&!isNaN(a.offset)&&(n=parseInt(a.offset)),a.anchor&&document.querySelectorAll(a.anchor)&&(t=document.querySelectorAll(a.anchor)[0]),i=(0,r.default)(t).top,a.anchorPlacement){case"top-bottom":break;case"center-bottom":i+=t.offsetHeight/2;break;case"bottom-bottom":i+=t.offsetHeight;break;case"top-center":i+=o/2;break;case"bottom-center":i+=o/2+t.offsetHeight;break;case"center-center":i+=o/2+t.offsetHeight/2;break;case"top-top":i+=o;break;case"bottom-top":i+=t.offsetHeight+o;break;case"center-top":i+=t.offsetHeight/2+o}return a.anchorPlacement||a.offset||isNaN(e)||(n=e),i+n};e.default=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){for(var e=0,i=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-("BODY"!=t.tagName?t.scrollLeft:0),i+=t.offsetTop-("BODY"!=t.tagName?t.scrollTop:0),t=t.offsetParent;return{top:i,left:e}};e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t=t||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(t,(function(t){return{node:t}}))};e.default=i}])},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,root,factory;"undefined"!==typeof navigator&&(root=window||{},factory=function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,idPrefix="",expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bmRnd,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface(){return{}}!function(){var t,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],i=e.length;for(t=0;t<i;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===typeof t&&t.length){var e,i=createSizedArray(t.length),n=t.length;for(e=0;e<n;e+=1)i[e]=Math.abs(t[e]);return i}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){bmRnd=t?Math.round:function(t){return t}}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,i,n){this.type=t,this.currentTime=e,this.totalTime=i,this.direction=n<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,i,n){this.type=t,this.currentLoop=i,this.totalLoops=e,this.direction=n<0?-1:1}function BMSegmentStartEvent(t,e,i){this.type=t,this.firstFrame=e,this.totalFrames=i}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}roundValues(!1);var createElementID=function(){var t=0;return function(){return idPrefix+"__lottie_element_"+(t+=1)}}();function HSVtoRGB(t,e,i){var n,r,o,a,s,l,c,u;switch(l=i*(1-e),c=i*(1-(s=6*t-(a=Math.floor(6*t)))*e),u=i*(1-(1-s)*e),a%6){case 0:n=i,r=u,o=l;break;case 1:n=c,r=i,o=l;break;case 2:n=l,r=i,o=u;break;case 3:n=l,r=c,o=i;break;case 4:n=u,r=l,o=i;break;case 5:n=i,r=l,o=c}return[n,r,o]}function RGBtoHSV(t,e,i){var n,r=Math.max(t,e,i),o=Math.min(t,e,i),a=r-o,s=0===r?0:a/r,l=r/255;switch(r){case o:n=0;break;case t:n=e-i+a*(e<i?6:0),n/=6*a;break;case e:n=i-t+2*a,n/=6*a;break;case i:n=t-e+4*a,n/=6*a}return[n,s,l]}function addSaturationToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[1]+=e,i[1]>1?i[1]=1:i[1]<=0&&(i[1]=0),HSVtoRGB(i[0],i[1],i[2])}function addBrightnessToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[2]+=e,i[2]>1?i[2]=1:i[2]<0&&(i[2]=0),HSVtoRGB(i[0],i[1],i[2])}function addHueToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[0]+=e/360,i[0]>1?i[0]-=1:i[0]<0&&(i[0]+=1),HSVtoRGB(i[0],i[1],i[2])}var rgbToHex=function(){var t,e,i=[];for(t=0;t<256;t+=1)e=t.toString(16),i[t]=1===e.length?"0"+e:e;return function(t,e,n){return t<0&&(t=0),e<0&&(e=0),n<0&&(n=0),"#"+i[t]+i[e]+i[n]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var i=this._cbs[t],n=0;n<i.length;n+=1)i[n](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var i=0,n=this._cbs[t].length;i<n;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,n-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var createTypedArray=function(){function t(t,e){var i,n=0,r=[];switch(t){case"int16":case"uint8c":i=1;break;default:i=1.1}for(n=0;n<e;n+=1)r.push(i);return r}return"function"===typeof Uint8ClampedArray&&"function"===typeof Float32Array?function(e,i){return"float32"===e?new Float32Array(i):"int16"===e?new Int16Array(i):"uint8c"===e?new Uint8ClampedArray(i):t(e,i)}:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function createNS(t){return document.createElementNS(svgNS,t)}function createTag(t){return document.createElement(t)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var t;this._mdf=!1;var e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}(),lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"},Matrix=function(){var t=Math.cos,e=Math.sin,i=Math.tan,n=Math.round;function r(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function o(i){if(0===i)return this;var n=t(i),r=e(i);return this._t(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1)}function a(i){if(0===i)return this;var n=t(i),r=e(i);return this._t(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1)}function s(i){if(0===i)return this;var n=t(i),r=e(i);return this._t(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1)}function l(i){if(0===i)return this;var n=t(i),r=e(i);return this._t(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1)}function c(t,e){return this._t(1,e,t,1,0,0)}function u(t,e){return this.shear(i(t),i(e))}function h(n,r){var o=t(r),a=e(r);return this._t(o,a,0,0,-a,o,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,i(n),1,0,0,0,0,1,0,0,0,0,1)._t(o,-a,0,0,a,o,0,0,0,0,1,0,0,0,0,1)}function d(t,e,i){return i||0===i||(i=1),1===t&&1===e&&1===i?this:this._t(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}function p(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m){return this.props[0]=t,this.props[1]=e,this.props[2]=i,this.props[3]=n,this.props[4]=r,this.props[5]=o,this.props[6]=a,this.props[7]=s,this.props[8]=l,this.props[9]=c,this.props[10]=u,this.props[11]=h,this.props[12]=d,this.props[13]=p,this.props[14]=f,this.props[15]=m,this}function f(t,e,i){return i=i||0,0!==t||0!==e||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1):this}function m(t,e,i,n,r,o,a,s,l,c,u,h,d,p,f,m){var y=this.props;if(1===t&&0===e&&0===i&&0===n&&0===r&&1===o&&0===a&&0===s&&0===l&&0===c&&1===u&&0===h)return y[12]=y[12]*t+y[15]*d,y[13]=y[13]*o+y[15]*p,y[14]=y[14]*u+y[15]*f,y[15]*=m,this._identityCalculated=!1,this;var v=y[0],g=y[1],_=y[2],b=y[3],x=y[4],w=y[5],S=y[6],E=y[7],k=y[8],P=y[9],T=y[10],C=y[11],M=y[12],A=y[13],O=y[14],I=y[15];return y[0]=v*t+g*r+_*l+b*d,y[1]=v*e+g*o+_*c+b*p,y[2]=v*i+g*a+_*u+b*f,y[3]=v*n+g*s+_*h+b*m,y[4]=x*t+w*r+S*l+E*d,y[5]=x*e+w*o+S*c+E*p,y[6]=x*i+w*a+S*u+E*f,y[7]=x*n+w*s+S*h+E*m,y[8]=k*t+P*r+T*l+C*d,y[9]=k*e+P*o+T*c+C*p,y[10]=k*i+P*a+T*u+C*f,y[11]=k*n+P*s+T*h+C*m,y[12]=M*t+A*r+O*l+I*d,y[13]=M*e+A*o+O*c+I*p,y[14]=M*i+A*a+O*u+I*f,y[15]=M*n+A*s+O*h+I*m,this._identityCalculated=!1,this}function y(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function g(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e];return t}function _(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function b(t,e,i){return{x:t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}}function x(t,e,i){return t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12]}function w(t,e,i){return t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13]}function S(t,e,i){return t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}function E(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,i=-this.props[1]/t,n=-this.props[4]/t,r=this.props[0]/t,o=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,s=new Matrix;return s.props[0]=e,s.props[1]=i,s.props[4]=n,s.props[5]=r,s.props[12]=o,s.props[13]=a,s}function k(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function P(t){var e,i=t.length,n=[];for(e=0;e<i;e+=1)n[e]=k(t[e]);return n}function T(t,e,i){var n=createTypedArray("float32",6);if(this.isIdentity())n[0]=t[0],n[1]=t[1],n[2]=e[0],n[3]=e[1],n[4]=i[0],n[5]=i[1];else{var r=this.props[0],o=this.props[1],a=this.props[4],s=this.props[5],l=this.props[12],c=this.props[13];n[0]=t[0]*r+t[1]*a+l,n[1]=t[0]*o+t[1]*s+c,n[2]=e[0]*r+e[1]*a+l,n[3]=e[0]*o+e[1]*s+c,n[4]=i[0]*r+i[1]*a+l,n[5]=i[0]*o+i[1]*s+c}return n}function C(t,e,i){return this.isIdentity()?[t,e,i]:[t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]]}function M(t,e){if(this.isIdentity())return t+","+e;var i=this.props;return Math.round(100*(t*i[0]+e*i[4]+i[12]))/100+","+Math.round(100*(t*i[1]+e*i[5]+i[13]))/100}function A(){for(var t=0,e=this.props,i="matrix3d(";t<16;)i+=n(1e4*e[t])/1e4,i+=15===t?")":",",t+=1;return i}function O(t){return t<1e-6&&t>0||t>-1e-6&&t<0?n(1e4*t)/1e4:t}function I(){var t=this.props;return"matrix("+O(t[0])+","+O(t[1])+","+O(t[4])+","+O(t[5])+","+O(t[12])+","+O(t[13])+")"}return function(){this.reset=r,this.rotate=o,this.rotateX=a,this.rotateY=s,this.rotateZ=l,this.skew=u,this.skewFromAxis=h,this.shear=c,this.scale=d,this.setTransform=p,this.translate=f,this.transform=m,this.applyToPoint=b,this.applyToX=x,this.applyToY=w,this.applyToZ=S,this.applyToPointArray=C,this.applyToTriplePoints=T,this.applyToPointStringified=M,this.toCSS=A,this.to2dCSS=I,this.clone=g,this.cloneFromProps=_,this.equals=v,this.inversePoints=P,this.inversePoint=k,this.getInverseMatrix=E,this._t=this.transform,this.isIdentity=y,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();!function(t,e){var i=this,n=256,r=e.pow(n,6),o=e.pow(2,52),a=2*o,s=255;function l(t){var e,i=t.length,r=this,o=0,a=r.i=r.j=0,l=r.S=[];for(i||(t=[i++]);o<n;)l[o]=o++;for(o=0;o<n;o++)l[o]=l[a=s&a+t[o%i]+(e=l[o])],l[a]=e;r.g=function(t){for(var e,i=0,o=r.i,a=r.j,l=r.S;t--;)e=l[o=s&o+1],i=i*n+l[s&(l[o]=l[a=s&a+e])+(l[a]=e)];return r.i=o,r.j=a,i}}function c(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function u(t,e){var i,n=[],r=typeof t;if(e&&"object"==r)for(i in t)try{n.push(u(t[i],e-1))}catch(o){}return n.length?n:"string"==r?t:t+"\0"}function h(t,e){for(var i,n=t+"",r=0;r<n.length;)e[s&r]=s&(i^=19*e[s&r])+n.charCodeAt(r++);return d(e)}function d(t){return String.fromCharCode.apply(0,t)}e.seedrandom=function(s,p,f){var m=[],y=h(u((p=!0===p?{entropy:!0}:p||{}).entropy?[s,d(t)]:null===s?function(){try{var e=new Uint8Array(n);return(i.crypto||i.msCrypto).getRandomValues(e),d(e)}catch(a){var r=i.navigator,o=r&&r.plugins;return[+new Date,i,o,i.screen,d(t)]}}():s,3),m),v=new l(m),g=function(){for(var t=v.g(6),e=r,i=0;t<o;)t=(t+i)*n,e*=n,i=v.g(1);for(;t>=a;)t/=2,e/=2,i>>>=1;return(t+i)/e};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,h(d(v.S),t),(p.pass||f||function(t,i,n,r){return r&&(r.S&&c(r,v),t.state=function(){return c(v,{})}),n?(e.random=t,i):t})(g,y,"global"in p?p.global:this==e,p.state)},h(e.random(),t)}([],BMMath);var BezierFactory=function(){var t={getBezierEasing:function(t,i,n,r,o){var a=o||("bez_"+t+"_"+i+"_"+n+"_"+r).replace(/\./g,"p");if(e[a])return e[a];var s=new c([t,i,n,r]);return e[a]=s,s}},e={},i=.1,n="function"===typeof Float32Array;function r(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function a(t){return 3*t}function s(t,e,i){return((r(e,i)*t+o(e,i))*t+a(e))*t}function l(t,e,i){return 3*r(e,i)*t*t+2*o(e,i)*t+a(e)}function c(t){this._p=t,this._mSampleValues=n?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return c.prototype={get:function(t){var e=this._p[0],i=this._p[1],n=this._p[2],r=this._p[3];return this._precomputed||this._precompute(),e===i&&n===r?t:0===t?0:1===t?1:s(this._getTForX(t),i,r)},_precompute:function(){var t=this._p[0],e=this._p[1],i=this._p[2],n=this._p[3];this._precomputed=!0,t===e&&i===n||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],n=0;n<11;++n)this._mSampleValues[n]=s(n*i,t,e)},_getTForX:function(t){for(var e=this._p[0],n=this._p[2],r=this._mSampleValues,o=0,a=1;10!==a&&r[a]<=t;++a)o+=i;var c=o+(t-r[--a])/(r[a+1]-r[a])*i,u=l(c,e,n);return u>=.001?function(t,e,i,n){for(var r=0;r<4;++r){var o=l(e,i,n);if(0===o)return e;e-=(s(e,i,n)-t)/o}return e}(t,c,e,n):0===u?c:function(t,e,i,n,r){var o,a,l=0;do{(o=s(a=e+(i-e)/2,n,r)-t)>0?i=a:e=a}while(Math.abs(o)>1e-7&&++l<10);return a}(t,o,o+i,e,n)}},t}();function extendPrototype(t,e){var i,n,r=t.length;for(i=0;i<r;i+=1)for(var o in n=t[i].prototype)Object.prototype.hasOwnProperty.call(n,o)&&(e.prototype[o]=n[o])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}function bezFunction(){var t=Math;function e(t,e,i,n,r,o){var a=t*n+e*r+i*o-r*n-o*t-i*e;return a>-.001&&a<.001}var i=function(t,e,i,n){var r,o,a,s,l,c,u=defaultCurveSegments,h=0,d=[],p=[],f=bezierLengthPool.newElement();for(a=i.length,r=0;r<u;r+=1){for(l=r/(u-1),c=0,o=0;o<a;o+=1)s=bmPow(1-l,3)*t[o]+3*bmPow(1-l,2)*l*i[o]+3*(1-l)*bmPow(l,2)*n[o]+bmPow(l,3)*e[o],d[o]=s,null!==p[o]&&(c+=bmPow(d[o]-p[o],2)),p[o]=d[o];c&&(h+=c=bmSqrt(c)),f.percents[r]=l,f.lengths[r]=h}return f.addedLength=h,f};function n(t){this.segmentLength=0,this.points=new Array(t)}function r(t,e){this.partialLength=t,this.point=e}var o=function(){var t={};return function(i,o,a,s){var l=(i[0]+"_"+i[1]+"_"+o[0]+"_"+o[1]+"_"+a[0]+"_"+a[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(!t[l]){var c,u,h,d,p,f,m,y=defaultCurveSegments,v=0,g=null;2===i.length&&(i[0]!==o[0]||i[1]!==o[1])&&e(i[0],i[1],o[0],o[1],i[0]+a[0],i[1]+a[1])&&e(i[0],i[1],o[0],o[1],o[0]+s[0],o[1]+s[1])&&(y=2);var _=new n(y);for(h=a.length,c=0;c<y;c+=1){for(m=createSizedArray(h),p=c/(y-1),f=0,u=0;u<h;u+=1)d=bmPow(1-p,3)*i[u]+3*bmPow(1-p,2)*p*(i[u]+a[u])+3*(1-p)*bmPow(p,2)*(o[u]+s[u])+bmPow(p,3)*o[u],m[u]=d,null!==g&&(f+=bmPow(m[u]-g[u],2));v+=f=bmSqrt(f),_.points[c]=new r(f,m),g=m}_.segmentLength=v,t[l]=_}return t[l]}}();function a(t,e){var i=e.percents,n=e.lengths,r=i.length,o=bmFloor((r-1)*t),a=t*e.addedLength,s=0;if(o===r-1||0===o||a===n[o])return i[o];for(var l=n[o]>a?-1:1,c=!0;c;)if(n[o]<=a&&n[o+1]>a?(s=(a-n[o])/(n[o+1]-n[o]),c=!1):o+=l,o<0||o>=r-1){if(o===r-1)return i[o];c=!1}return i[o]+(i[o+1]-i[o])*s}var s=createTypedArray("float32",8);return{getSegmentsLength:function(t){var e,n=segmentsLengthPool.newElement(),r=t.c,o=t.v,a=t.o,s=t.i,l=t._length,c=n.lengths,u=0;for(e=0;e<l-1;e+=1)c[e]=i(o[e],o[e+1],a[e],s[e+1]),u+=c[e].addedLength;return r&&l&&(c[e]=i(o[e],o[0],a[e],s[0]),u+=c[e].addedLength),n.totalLength=u,n},getNewSegment:function(e,i,n,r,o,l,c){o<0?o=0:o>1&&(o=1);var u,h=a(o,c),d=a(l=l>1?1:l,c),p=e.length,f=1-h,m=1-d,y=f*f*f,v=h*f*f*3,g=h*h*f*3,_=h*h*h,b=f*f*m,x=h*f*m+f*h*m+f*f*d,w=h*h*m+f*h*d+h*f*d,S=h*h*d,E=f*m*m,k=h*m*m+f*d*m+f*m*d,P=h*d*m+f*d*d+h*m*d,T=h*d*d,C=m*m*m,M=d*m*m+m*d*m+m*m*d,A=d*d*m+m*d*d+d*m*d,O=d*d*d;for(u=0;u<p;u+=1)s[4*u]=t.round(1e3*(y*e[u]+v*n[u]+g*r[u]+_*i[u]))/1e3,s[4*u+1]=t.round(1e3*(b*e[u]+x*n[u]+w*r[u]+S*i[u]))/1e3,s[4*u+2]=t.round(1e3*(E*e[u]+k*n[u]+P*r[u]+T*i[u]))/1e3,s[4*u+3]=t.round(1e3*(C*e[u]+M*n[u]+A*r[u]+O*i[u]))/1e3;return s},getPointInSegment:function(e,i,n,r,o,s){var l=a(o,s),c=1-l;return[t.round(1e3*(c*c*c*e[0]+(l*c*c+c*l*c+c*c*l)*n[0]+(l*l*c+c*l*l+l*c*l)*r[0]+l*l*l*i[0]))/1e3,t.round(1e3*(c*c*c*e[1]+(l*c*c+c*l*c+c*c*l)*n[1]+(l*l*c+c*l*l+l*c*l)*r[1]+l*l*l*i[1]))/1e3]},buildBezierData:o,pointOnLine2D:e,pointOnLine3D:function(i,n,r,o,a,s,l,c,u){if(0===r&&0===s&&0===u)return e(i,n,o,a,l,c);var h,d=t.sqrt(t.pow(o-i,2)+t.pow(a-n,2)+t.pow(s-r,2)),p=t.sqrt(t.pow(l-i,2)+t.pow(c-n,2)+t.pow(u-r,2)),f=t.sqrt(t.pow(l-o,2)+t.pow(c-a,2)+t.pow(u-s,2));return(h=d>p?d>f?d-p-f:f-p-d:f>p?f-p-d:p-d-f)>-1e-4&&h<1e-4}}}!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),r=setTimeout((function(){e(i+n)}),n);return t=i+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var bez=bezFunction();function dataFunctionManager(){function t(r,o,a){var s,l,c,u,h,d,p,f=r.length;for(l=0;l<f;l+=1)if("ks"in(s=r[l])&&!s.completed){if(s.completed=!0,s.tt&&(r[l-1].td=s.tt),s.hasMask){var m=s.masksProperties;for(u=m.length,c=0;c<u;c+=1)if(m[c].pt.k.i)n(m[c].pt.k);else for(d=m[c].pt.k.length,h=0;h<d;h+=1)m[c].pt.k[h].s&&n(m[c].pt.k[h].s[0]),m[c].pt.k[h].e&&n(m[c].pt.k[h].e[0])}0===s.ty?(s.layers=e(s.refId,o),t(s.layers,o,a)):4===s.ty?i(s.shapes):5===s.ty&&(0!==(p=s).t.a.length||"m"in p.t.p||(p.singleShape=!0))}}function e(t,e){for(var i=0,n=e.length;i<n;){if(e[i].id===t)return e[i].layers.__used?JSON.parse(JSON.stringify(e[i].layers)):(e[i].layers.__used=!0,e[i].layers);i+=1}return null}function i(t){var e,r,o;for(e=t.length-1;e>=0;e-=1)if("sh"===t[e].ty)if(t[e].ks.k.i)n(t[e].ks.k);else for(o=t[e].ks.k.length,r=0;r<o;r+=1)t[e].ks.k[r].s&&n(t[e].ks.k[r].s[0]),t[e].ks.k[r].e&&n(t[e].ks.k[r].e[0]);else"gr"===t[e].ty&&i(t[e].it)}function n(t){var e,i=t.i.length;for(e=0;e<i;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function r(t,e){var i=e?e.split("."):[100,100,100];return t[0]>i[0]||!(i[0]>t[0])&&(t[1]>i[1]||!(i[1]>t[1])&&(t[2]>i[2]||!(i[2]>t[2])&&null))}var o=function(){var t=[4,4,14];function e(t){var e=t.t.d;t.t.d={k:[{s:e,t:0}]}}function i(t){var i,n=t.length;for(i=0;i<n;i+=1)5===t[i].ty&&e(t[i])}return function(e){if(r(t,e.v)&&(i(e.layers),e.assets)){var n,o=e.assets.length;for(n=0;n<o;n+=1)e.assets[n].layers&&i(e.assets[n].layers)}}}(),a=function(){var t=[4,7,99];return function(e){if(e.chars&&!r(t,e.v)){var i,o,a,s,l,c=e.chars.length;for(i=0;i<c;i+=1)if(e.chars[i].data&&e.chars[i].data.shapes)for(a=(l=e.chars[i].data.shapes[0].it).length,o=0;o<a;o+=1)(s=l[o].ks.k).__converted||(n(l[o].ks.k),s.__converted=!0)}}}(),s=function(){var t=[5,7,15];function e(t){var e=t.t.p;"number"===typeof e.a&&(e.a={a:0,k:e.a}),"number"===typeof e.p&&(e.p={a:0,k:e.p}),"number"===typeof e.r&&(e.r={a:0,k:e.r})}function i(t){var i,n=t.length;for(i=0;i<n;i+=1)5===t[i].ty&&e(t[i])}return function(e){if(r(t,e.v)&&(i(e.layers),e.assets)){var n,o=e.assets.length;for(n=0;n<o;n+=1)e.assets[n].layers&&i(e.assets[n].layers)}}}(),l=function(){var t=[4,1,9];function e(t){var i,n,r,o=t.length;for(i=0;i<o;i+=1)if("gr"===t[i].ty)e(t[i].it);else if("fl"===t[i].ty||"st"===t[i].ty)if(t[i].c.k&&t[i].c.k[0].i)for(r=t[i].c.k.length,n=0;n<r;n+=1)t[i].c.k[n].s&&(t[i].c.k[n].s[0]/=255,t[i].c.k[n].s[1]/=255,t[i].c.k[n].s[2]/=255,t[i].c.k[n].s[3]/=255),t[i].c.k[n].e&&(t[i].c.k[n].e[0]/=255,t[i].c.k[n].e[1]/=255,t[i].c.k[n].e[2]/=255,t[i].c.k[n].e[3]/=255);else t[i].c.k[0]/=255,t[i].c.k[1]/=255,t[i].c.k[2]/=255,t[i].c.k[3]/=255}function i(t){var i,n=t.length;for(i=0;i<n;i+=1)4===t[i].ty&&e(t[i].shapes)}return function(e){if(r(t,e.v)&&(i(e.layers),e.assets)){var n,o=e.assets.length;for(n=0;n<o;n+=1)e.assets[n].layers&&i(e.assets[n].layers)}}}(),c=function(){var t=[4,4,18];function e(t){var i,n,r;for(i=t.length-1;i>=0;i-=1)if("sh"===t[i].ty)if(t[i].ks.k.i)t[i].ks.k.c=t[i].closed;else for(r=t[i].ks.k.length,n=0;n<r;n+=1)t[i].ks.k[n].s&&(t[i].ks.k[n].s[0].c=t[i].closed),t[i].ks.k[n].e&&(t[i].ks.k[n].e[0].c=t[i].closed);else"gr"===t[i].ty&&e(t[i].it)}function i(t){var i,n,r,o,a,s,l=t.length;for(n=0;n<l;n+=1){if((i=t[n]).hasMask){var c=i.masksProperties;for(o=c.length,r=0;r<o;r+=1)if(c[r].pt.k.i)c[r].pt.k.c=c[r].cl;else for(s=c[r].pt.k.length,a=0;a<s;a+=1)c[r].pt.k[a].s&&(c[r].pt.k[a].s[0].c=c[r].cl),c[r].pt.k[a].e&&(c[r].pt.k[a].e[0].c=c[r].cl)}4===i.ty&&e(i.shapes)}}return function(e){if(r(t,e.v)&&(i(e.layers),e.assets)){var n,o=e.assets.length;for(n=0;n<o;n+=1)e.assets[n].layers&&i(e.assets[n].layers)}}}();var u={completeData:function(e,i){e.__complete||(l(e),o(e),a(e),s(e),c(e),t(e.layers,e.assets,i),e.__complete=!0)}};return u.checkColors=l,u.checkChars=a,u.checkPathProperties=s,u.checkShapes=c,u.completeLayers=t,u}var dataManager=dataFunctionManager();function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],i="normal",n="normal",r=e.length,o=0;o<r;o+=1)switch(e[o].toLowerCase()){case"italic":n="italic";break;case"bold":i="700";break;case"black":i="900";break;case"medium":i="500";break;case"regular":case"normal":i="400";break;case"light":case"thin":i="200"}return{style:n,weight:t.fWeight||i}}var FontManager=function(){var t={w:0,size:0,shapes:[]},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],n=[65039,8205];function r(t,e){var i=createTag("span");i.setAttribute("aria-hidden",!0),i.style.fontFamily=e;var n=createTag("span");n.innerText="giItT1WQy@!-/#",i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px",i.style.fontSize="300px",i.style.fontVariant="normal",i.style.fontStyle="normal",i.style.fontWeight="normal",i.style.letterSpacing="0",i.appendChild(n),document.body.appendChild(i);var r=n.offsetWidth;return n.style.fontFamily=function(t){var e,i=t.split(","),n=i.length,r=[];for(e=0;e<n;e+=1)"sans-serif"!==i[e]&&"monospace"!==i[e]&&r.push(i[e]);return r.join(",")}(t)+", "+e,{node:n,w:r,parent:i}}function o(t,e){var i=createNS("text");i.style.fontSize="100px";var n=getFontProperties(e);return i.setAttribute("font-family",e.fFamily),i.setAttribute("font-style",n.style),i.setAttribute("font-weight",n.weight),i.textContent="1",e.fClass?(i.style.fontFamily="inherit",i.setAttribute("class",e.fClass)):i.style.fontFamily=e.fFamily,t.appendChild(i),createTag("canvas").getContext("2d").font=e.fWeight+" "+e.fStyle+" 100px "+e.fFamily,i}var a=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return a.isModifier=function(t,e){var n=t.toString(16)+e.toString(16);return-1!==i.indexOf(n)},a.isZeroWidthJoiner=function(t,e){return e?t===n[0]&&e===n[1]:t===n[1]},a.isCombinedCharacter=function(t){return-1!==e.indexOf(t)},a.prototype={addChars:function(t){if(t){var e;this.chars||(this.chars=[]);var i,n,r=t.length,o=this.chars.length;for(e=0;e<r;e+=1){for(i=0,n=!1;i<o;)this.chars[i].style===t[e].style&&this.chars[i].fFamily===t[e].fFamily&&this.chars[i].ch===t[e].ch&&(n=!0),i+=1;n||(this.chars.push(t[e]),o+=1)}}},addFonts:function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);var i,n=t.list,a=n.length,s=a;for(i=0;i<a;i+=1){var l,c,u=!0;if(n[i].loaded=!1,n[i].monoCase=r(n[i].fFamily,"monospace"),n[i].sansCase=r(n[i].fFamily,"sans-serif"),n[i].fPath){if("p"===n[i].fOrigin||3===n[i].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+n[i].fFamily+'"], style[f-origin="3"][f-family="'+n[i].fFamily+'"]')).length>0&&(u=!1),u){var h=createTag("style");h.setAttribute("f-forigin",n[i].fOrigin),h.setAttribute("f-origin",n[i].origin),h.setAttribute("f-family",n[i].fFamily),h.type="text/css",h.innerText="@font-face {font-family: "+n[i].fFamily+"; font-style: normal; src: url('"+n[i].fPath+"');}",e.appendChild(h)}}else if("g"===n[i].fOrigin||1===n[i].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),c=0;c<l.length;c+=1)-1!==l[c].href.indexOf(n[i].fPath)&&(u=!1);if(u){var d=createTag("link");d.setAttribute("f-forigin",n[i].fOrigin),d.setAttribute("f-origin",n[i].origin),d.type="text/css",d.rel="stylesheet",d.href=n[i].fPath,document.body.appendChild(d)}}else if("t"===n[i].fOrigin||2===n[i].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),c=0;c<l.length;c+=1)n[i].fPath===l[c].src&&(u=!1);if(u){var p=createTag("link");p.setAttribute("f-forigin",n[i].fOrigin),p.setAttribute("f-origin",n[i].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",n[i].fPath),e.appendChild(p)}}}else n[i].loaded=!0,s-=1;n[i].helper=o(e,n[i]),n[i].cache={},this.fonts.push(n[i])}0===s?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,i,n){for(var r=0,o=this.chars.length;r<o;){if(this.chars[r].ch===e&&this.chars[r].style===i&&this.chars[r].fFamily===n)return this.chars[r];r+=1}return("string"===typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,i,n)),t},getFontByName:function(t){for(var e=0,i=this.fonts.length;e<i;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},measureText:function(t,e,i){var n=this.getFontByName(e),r=t.charCodeAt(0);if(!n.cache[r+1]){var o=n.helper;if(" "===t){o.textContent="|"+t+"|";var a=o.getComputedTextLength();o.textContent="||";var s=o.getComputedTextLength();n.cache[r+1]=(a-s)/100}else o.textContent=t,n.cache[r+1]=o.getComputedTextLength()/100}return n.cache[r+1]*i},checkLoadedFonts:function(){var t,e,i,n=this.fonts.length,r=n;for(t=0;t<n;t+=1)this.fonts[t].loaded?r-=1:"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(e=this.fonts[t].monoCase.node,i=this.fonts[t].monoCase.w,e.offsetWidth!==i?(r-=1,this.fonts[t].loaded=!0):(e=this.fonts[t].sansCase.node,i=this.fonts[t].sansCase.w,e.offsetWidth!==i&&(r-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==r&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},a}(),PropertyFactory=function(){var t=initialDefaultFrame,e=Math.abs;function i(t,e){var i,r=this.offsetTime;"multidimensional"===this.propType&&(i=createTypedArray("float32",this.pv.length));for(var o,a,s,l,c,u,h,d,p=e.lastIndex,f=p,m=this.keyframes.length-1,y=!0;y;){if(o=this.keyframes[f],a=this.keyframes[f+1],f===m-1&&t>=a.t-r){o.h&&(o=a),p=0;break}if(a.t-r>t){p=f;break}f<m-1?f+=1:(p=0,y=!1)}var v,g=a.t-r,_=o.t-r;if(o.to){o.bezierData||(o.bezierData=bez.buildBezierData(o.s,a.s||o.e,o.to,o.ti));var b=o.bezierData;if(t>=g||t<_){var x=t>=g?b.points.length-1:0;for(l=b.points[x].point.length,s=0;s<l;s+=1)i[s]=b.points[x].point[s]}else{o.__fnct?d=o.__fnct:(d=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y,o.n).get,o.__fnct=d),c=d((t-_)/(g-_));var w,S=b.segmentLength*c,E=e.lastFrame<t&&e._lastKeyframeIndex===f?e._lastAddedLength:0;for(h=e.lastFrame<t&&e._lastKeyframeIndex===f?e._lastPoint:0,y=!0,u=b.points.length;y;){if(E+=b.points[h].partialLength,0===S||0===c||h===b.points.length-1){for(l=b.points[h].point.length,s=0;s<l;s+=1)i[s]=b.points[h].point[s];break}if(S>=E&&S<E+b.points[h+1].partialLength){for(w=(S-E)/b.points[h+1].partialLength,l=b.points[h].point.length,s=0;s<l;s+=1)i[s]=b.points[h].point[s]+(b.points[h+1].point[s]-b.points[h].point[s])*w;break}h<u-1?h+=1:y=!1}e._lastPoint=h,e._lastAddedLength=E-b.points[h].partialLength,e._lastKeyframeIndex=f}}else{var k,P,T,C,M;if(m=o.s.length,v=a.s||o.e,this.sh&&1!==o.h)t>=g?(i[0]=v[0],i[1]=v[1],i[2]=v[2]):t<=_?(i[0]=o.s[0],i[1]=o.s[1],i[2]=o.s[2]):function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=Math.atan2(2*n*o-2*i*r,1-2*n*n-2*r*r),s=Math.asin(2*i*n+2*r*o),l=Math.atan2(2*i*o-2*n*r,1-2*i*i-2*r*r);t[0]=a/degToRads,t[1]=s/degToRads,t[2]=l/degToRads}(i,function(t,e,i){var n,r,o,a,s,l=[],c=t[0],u=t[1],h=t[2],d=t[3],p=e[0],f=e[1],m=e[2],y=e[3];return(r=c*p+u*f+h*m+d*y)<0&&(r=-r,p=-p,f=-f,m=-m,y=-y),1-r>1e-6?(n=Math.acos(r),o=Math.sin(n),a=Math.sin((1-i)*n)/o,s=Math.sin(i*n)/o):(a=1-i,s=i),l[0]=a*c+s*p,l[1]=a*u+s*f,l[2]=a*h+s*m,l[3]=a*d+s*y,l}(n(o.s),n(v),(t-_)/(g-_)));else for(f=0;f<m;f+=1)1!==o.h&&(t>=g?c=1:t<_?c=0:(o.o.x.constructor===Array?(o.__fnct||(o.__fnct=[]),o.__fnct[f]?d=o.__fnct[f]:(k="undefined"===typeof o.o.x[f]?o.o.x[0]:o.o.x[f],P="undefined"===typeof o.o.y[f]?o.o.y[0]:o.o.y[f],T="undefined"===typeof o.i.x[f]?o.i.x[0]:o.i.x[f],C="undefined"===typeof o.i.y[f]?o.i.y[0]:o.i.y[f],d=BezierFactory.getBezierEasing(k,P,T,C).get,o.__fnct[f]=d)):o.__fnct?d=o.__fnct:(k=o.o.x,P=o.o.y,T=o.i.x,C=o.i.y,d=BezierFactory.getBezierEasing(k,P,T,C).get,o.__fnct=d),c=d((t-_)/(g-_)))),v=a.s||o.e,M=1===o.h?o.s[f]:o.s[f]+(v[f]-o.s[f])*c,"multidimensional"===this.propType?i[f]=M:i=M}return e.lastIndex=p,i}function n(t){var e=t[0]*degToRads,i=t[1]*degToRads,n=t[2]*degToRads,r=Math.cos(e/2),o=Math.cos(i/2),a=Math.cos(n/2),s=Math.sin(e/2),l=Math.sin(i/2),c=Math.sin(n/2);return[s*l*a+r*o*c,s*o*a+r*l*c,r*l*a-s*o*c,r*o*a-s*l*c]}function r(){var e=this.comp.renderedFrame-this.offsetTime,i=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==t&&(this._caching.lastFrame>=n&&e>=n||this._caching.lastFrame<i&&e<i))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var r=this.interpolateValue(e,this._caching);this.pv=r}return this._caching.lastFrame=e,this.pv}function o(t){var i;if("unidimensional"===this.propType)i=t*this.mult,e(this.v-i)>1e-5&&(this.v=i,this._mdf=!0);else for(var n=0,r=this.v.length;n<r;)i=t[n]*this.mult,e(this.v[n]-i)>1e-5&&(this.v[n]=i,this._mdf=!0),n+=1}function a(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t;this.lock=!0,this._mdf=this._isFirstFrame;var e=this.effectsSequence.length,i=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)i=this.effectsSequence[t](i);this.setVValue(i),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function s(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function l(t,e,i,n){this.propType="unidimensional",this.mult=i||1,this.data=e,this.v=i?e.k*i:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=a,this.setVValue=o,this.addEffect=s}function c(t,e,i,n){var r;this.propType="multidimensional",this.mult=i||1,this.data=e,this._mdf=!1,this.elem=t,this.container=n,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var l=e.k.length;for(this.v=createTypedArray("float32",l),this.pv=createTypedArray("float32",l),this.vel=createTypedArray("float32",l),r=0;r<l;r+=1)this.v[r]=e.k[r]*this.mult,this.pv[r]=e.k[r];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=a,this.setVValue=o,this.addEffect=s}function u(e,n,l,c){this.propType="unidimensional",this.keyframes=n.k,this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:t,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=n,this.mult=l||1,this.elem=e,this.container=c,this.comp=e.comp,this.v=t,this.pv=t,this._isFirstFrame=!0,this.getValue=a,this.setVValue=o,this.interpolateValue=i,this.effectsSequence=[r.bind(this)],this.addEffect=s}function h(e,n,l,c){var u;this.propType="multidimensional";var h,d,p,f,m=n.k.length;for(u=0;u<m-1;u+=1)n.k[u].to&&n.k[u].s&&n.k[u+1]&&n.k[u+1].s&&(h=n.k[u].s,d=n.k[u+1].s,p=n.k[u].to,f=n.k[u].ti,(2===h.length&&(h[0]!==d[0]||h[1]!==d[1])&&bez.pointOnLine2D(h[0],h[1],d[0],d[1],h[0]+p[0],h[1]+p[1])&&bez.pointOnLine2D(h[0],h[1],d[0],d[1],d[0]+f[0],d[1]+f[1])||3===h.length&&(h[0]!==d[0]||h[1]!==d[1]||h[2]!==d[2])&&bez.pointOnLine3D(h[0],h[1],h[2],d[0],d[1],d[2],h[0]+p[0],h[1]+p[1],h[2]+p[2])&&bez.pointOnLine3D(h[0],h[1],h[2],d[0],d[1],d[2],d[0]+f[0],d[1]+f[1],d[2]+f[2]))&&(n.k[u].to=null,n.k[u].ti=null),h[0]===d[0]&&h[1]===d[1]&&0===p[0]&&0===p[1]&&0===f[0]&&0===f[1]&&(2===h.length||h[2]===d[2]&&0===p[2]&&0===f[2])&&(n.k[u].to=null,n.k[u].ti=null));this.effectsSequence=[r.bind(this)],this.data=n,this.keyframes=n.k,this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=l||1,this.elem=e,this.container=c,this.comp=e.comp,this.getValue=a,this.setVValue=o,this.interpolateValue=i,this.frameId=-1;var y=n.k[0].s.length;for(this.v=createTypedArray("float32",y),this.pv=createTypedArray("float32",y),u=0;u<y;u+=1)this.v[u]=t,this.pv[u]=t;this._caching={lastFrame:t,lastIndex:0,value:createTypedArray("float32",y)},this.addEffect=s}return{getProp:function(t,e,i,n,r){var o;if(e.k.length)if("number"===typeof e.k[0])o=new c(t,e,n,r);else switch(i){case 0:o=new u(t,e,n,r);break;case 1:o=new h(t,e,n,r)}else o=new l(t,e,n,r);return o.effectsSequence.length&&r.addDynamicProperty(o),o}}}(),TransformPropertyFactory=function(){var t=[0,0];function e(t,e,i){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(i||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var n,r=e.or.k.length;for(n=0;n<r;n+=1)e.or.k[n].to=null,e.or.k[n].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=PropertyFactory.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var i;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var n,r;if(i=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(n=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/i,0),r=this.p.getValueAtTime(this.p.keyframes[0].t/i,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(n=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/i,0),r=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/i,0)):(n=this.p.pv,r=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/i,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){n=[],r=[];var o=this.px,a=this.py;o._caching.lastFrame+o.offsetTime<=o.keyframes[0].t?(n[0]=o.getValueAtTime((o.keyframes[0].t+.01)/i,0),n[1]=a.getValueAtTime((a.keyframes[0].t+.01)/i,0),r[0]=o.getValueAtTime(o.keyframes[0].t/i,0),r[1]=a.getValueAtTime(a.keyframes[0].t/i,0)):o._caching.lastFrame+o.offsetTime>=o.keyframes[o.keyframes.length-1].t?(n[0]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/i,0),n[1]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/i,0),r[0]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/i,0),r[1]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/i,0)):(n=[o.pv,a.pv],r[0]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/i,o.offsetTime),r[1]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/i,a.offsetTime))}else n=r=t;this.v.rotate(-Math.atan2(n[1]-r[1],n[0]-r[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,i,n){return new e(t,i,n)}}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=pointPool.newElement(),this.o[i]=pointPool.newElement(),this.i[i]=pointPool.newElement(),i+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,i,n,r){var o;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o;break;default:o=[]}(!o[n]||o[n]&&!r)&&(o[n]=pointPool.newElement()),o[n][0]=t,o[n][1]=e},ShapePath.prototype.setTripleAt=function(t,e,i,n,r,o,a,s){this.setXYAt(t,e,"v",a,s),this.setXYAt(i,n,"o",a,s),this.setXYAt(r,o,"i",a,s)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,i=this.o,n=this.i,r=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],n[0][0],n[0][1],i[0][0],i[0][1],0,!1),r=1);var o,a=this._length-1,s=this._length;for(o=r;o<s;o+=1)t.setTripleAt(e[a][0],e[a][1],n[a][0],n[a][1],i[a][0],i[a][1],o,!1),a-=1;return t};var ShapePropertyFactory=function(){var t=-999999;function e(t,e,i){var n,r,o,a,s,l,c,u,h,d=i.lastIndex,p=this.keyframes;if(t<p[0].t-this.offsetTime)n=p[0].s[0],o=!0,d=0;else if(t>=p[p.length-1].t-this.offsetTime)n=p[p.length-1].s?p[p.length-1].s[0]:p[p.length-2].e[0],o=!0;else{for(var f,m,y=d,v=p.length-1,g=!0;g&&(f=p[y],!((m=p[y+1]).t-this.offsetTime>t));)y<v-1?y+=1:g=!1;if(d=y,!(o=1===f.h)){if(t>=m.t-this.offsetTime)u=1;else if(t<f.t-this.offsetTime)u=0;else{var _;f.__fnct?_=f.__fnct:(_=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,f.__fnct=_),u=_((t-(f.t-this.offsetTime))/(m.t-this.offsetTime-(f.t-this.offsetTime)))}r=m.s?m.s[0]:f.e[0]}n=f.s[0]}for(l=e._length,c=n.i[0].length,i.lastIndex=d,a=0;a<l;a+=1)for(s=0;s<c;s+=1)h=o?n.i[a][s]:n.i[a][s]+(r.i[a][s]-n.i[a][s])*u,e.i[a][s]=h,h=o?n.o[a][s]:n.o[a][s]+(r.o[a][s]-n.o[a][s])*u,e.o[a][s]=h,h=o?n.v[a][s]:n.v[a][s]+(r.v[a][s]-n.v[a][s])*u,e.v[a][s]=h}function i(){var e=this.comp.renderedFrame-this.offsetTime,i=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime,r=this._caching.lastFrame;return r!==t&&(r<i&&e<i||r>n&&e>n)||(this._caching.lastIndex=r<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function n(){this.paths=this.localShapeCollection}function r(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var i,n=t._length;for(i=0;i<n;i+=1)if(t.v[i][0]!==e.v[i][0]||t.v[i][1]!==e.v[i][1]||t.o[i][0]!==e.o[i][0]||t.o[i][1]!==e.o[i][1]||t.i[i][0]!==e.i[i][0]||t.i[i][1]!==e.i[i][1])return!1;return!0})(this.v,t)||(this.v=shapePool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t,e;this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var i=this.effectsSequence.length;for(e=0;e<i;e+=1)t=this.effectsSequence[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function a(t,e,i){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;var r=3===i?e.pt.k:e.ks.k;this.v=shapePool.clone(r),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n,this.effectsSequence=[]}function s(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function l(e,r,o){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===o?r.pt.k:r.ks.k,this.k=!0,this.kf=!0;var a=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,a),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=n,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[i.bind(this)]}a.prototype.interpolateShape=e,a.prototype.getValue=o,a.prototype.setVValue=r,a.prototype.addEffect=s,l.prototype.getValue=o,l.prototype.interpolateShape=e,l.prototype.setVValue=r,l.prototype.addEffect=s;var c=function(){var t=roundCorner;function e(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],i=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,o=3!==this.d,a=this.v;a.v[0][0]=e,a.v[0][1]=i-r,a.v[1][0]=o?e+n:e-n,a.v[1][1]=i,a.v[2][0]=e,a.v[2][1]=i+r,a.v[3][0]=o?e-n:e+n,a.v[3][1]=i,a.i[0][0]=o?e-n*t:e+n*t,a.i[0][1]=i-r,a.i[1][0]=o?e+n:e-n,a.i[1][1]=i-r*t,a.i[2][0]=o?e+n*t:e-n*t,a.i[2][1]=i+r,a.i[3][0]=o?e-n:e+n,a.i[3][1]=i+r*t,a.o[0][0]=o?e+n*t:e-n*t,a.o[0][1]=i-r,a.o[1][0]=o?e+n:e-n,a.o[1][1]=i+r*t,a.o[2][0]=o?e-n*t:e+n*t,a.o[2][1]=i+r,a.o[3][0]=o?e-n:e+n,a.o[3][1]=i-r*t}},extendPrototype([DynamicPropertyContainer],e),e}(),u=function(){function t(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,i,n,r=2*Math.floor(this.pt.v),o=2*Math.PI/r,a=!0,s=this.or.v,l=this.ir.v,c=this.os.v,u=this.is.v,h=2*Math.PI*s/(2*r),d=2*Math.PI*l/(2*r),p=-Math.PI/2;p+=this.r.v;var f=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<r;t+=1){i=a?c:u,n=a?h:d;var m=(e=a?s:l)*Math.cos(p),y=e*Math.sin(p),v=0===m&&0===y?0:y/Math.sqrt(m*m+y*y),g=0===m&&0===y?0:-m/Math.sqrt(m*m+y*y);m+=+this.p.v[0],y+=+this.p.v[1],this.v.setTripleAt(m,y,m-v*n*i*f,y-g*n*i*f,m+v*n*i*f,y+g*n*i*f,t,!0),a=!a,p+=o*f}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),i=2*Math.PI/e,n=this.or.v,r=this.os.v,o=2*Math.PI*n/(4*e),a=.5*-Math.PI,s=3===this.data.d?-1:1;for(a+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var l=n*Math.cos(a),c=n*Math.sin(a),u=0===l&&0===c?0:c/Math.sqrt(l*l+c*c),h=0===l&&0===c?0:-l/Math.sqrt(l*l+c*c);l+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(l,c,l-u*o*r*s,c-h*o*r*s,l+u*o*r*s,c+h*o*r*s,t,!0),a+=i*s}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),h=function(){function t(t,e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,n=this.s.v[1]/2,r=bmMin(i,n,this.r.v),o=r*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+i,e-n+r,t+i,e-n+r,t+i,e-n+o,0,!0),this.v.setTripleAt(t+i,e+n-r,t+i,e+n-o,t+i,e+n-r,1,!0),0!==r?(this.v.setTripleAt(t+i-r,e+n,t+i-r,e+n,t+i-o,e+n,2,!0),this.v.setTripleAt(t-i+r,e+n,t-i+o,e+n,t-i+r,e+n,3,!0),this.v.setTripleAt(t-i,e+n-r,t-i,e+n-r,t-i,e+n-o,4,!0),this.v.setTripleAt(t-i,e-n+r,t-i,e-n+o,t-i,e-n+r,5,!0),this.v.setTripleAt(t-i+r,e-n,t-i+r,e-n,t-i+o,e-n,6,!0),this.v.setTripleAt(t+i-r,e-n,t+i-o,e-n,t+i-r,e-n,7,!0)):(this.v.setTripleAt(t-i,e+n,t-i+o,e+n,t-i,e+n,2),this.v.setTripleAt(t-i,e-n,t-i,e-n+o,t-i,e-n,3))):(this.v.setTripleAt(t+i,e-n+r,t+i,e-n+o,t+i,e-n+r,0,!0),0!==r?(this.v.setTripleAt(t+i-r,e-n,t+i-r,e-n,t+i-o,e-n,1,!0),this.v.setTripleAt(t-i+r,e-n,t-i+o,e-n,t-i+r,e-n,2,!0),this.v.setTripleAt(t-i,e-n+r,t-i,e-n+r,t-i,e-n+o,3,!0),this.v.setTripleAt(t-i,e+n-r,t-i,e+n-o,t-i,e+n-r,4,!0),this.v.setTripleAt(t-i+r,e+n,t-i+r,e+n,t-i+o,e+n,5,!0),this.v.setTripleAt(t+i-r,e+n,t+i-o,e+n,t+i-r,e+n,6,!0),this.v.setTripleAt(t+i,e+n-r,t+i,e+n-r,t+i,e+n-o,7,!0)):(this.v.setTripleAt(t-i,e-n,t-i+o,e-n,t-i,e-n,1,!0),this.v.setTripleAt(t-i,e+n,t-i,e+n-o,t-i,e+n,2,!0),this.v.setTripleAt(t+i,e+n,t+i-o,e+n,t+i,e+n,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:n},extendPrototype([DynamicPropertyContainer],t),t}(),d={getShapeProp:function(t,e,i){var n;return 3===i||4===i?n=(3===i?e.pt:e.ks).k.length?new l(t,e,i):new a(t,e,i):5===i?n=new h(t,e):6===i?n=new c(t,e):7===i&&(n=new u(t,e)),n.k&&t.addDynamicProperty(n),n},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return l}};return d}(),ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,i){e[t]||(e[t]=i)},t.getModifier=function(t,i,n){return new e[t](i,n)},t}();function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function PuckerAndBloatModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(t,e,i,n){var r;this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=i,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var o,a=e.length||0;for(r=0;r<a;r+=1)o=PropertyFactory.getProp(t,e[r].v,0,0,this),this.k=o.k||this.k,this.dataProps[r]={n:e[r].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(t,e,i){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var n=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(i),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,i,n,r){var o=[];e<=1?o.push({s:t,e:e}):t>=1?o.push({s:t-1,e:e-1}):(o.push({s:t,e:1}),o.push({s:0,e:e-1}));var a,s,l=[],c=o.length;for(a=0;a<c;a+=1){var u,h;(s=o[a]).e*r<n||s.s*r>n+i||(u=s.s*r<=n?0:(s.s*r-n)/i,h=s.e*r>=n+i?1:(s.e*r-n)/i,l.push([u,h]))}return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(t){var e,i=t.length;for(e=0;e<i;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,i,n,r;if(this._mdf||t){var o=this.o.v%360/360;if(o<0&&(o+=1),(e=this.s.v>1?1+o:this.s.v<0?0+o:this.s.v+o)>(i=this.e.v>1?1+o:this.e.v<0?0+o:this.e.v+o)){var a=e;e=i,i=a}e=1e-4*Math.round(1e4*e),i=1e-4*Math.round(1e4*i),this.sValue=e,this.eValue=i}else e=this.sValue,i=this.eValue;var s,l,c,u,h,d=this.shapes.length,p=0;if(i===e)for(r=0;r<d;r+=1)this.shapes[r].localShapeCollection.releaseShapes(),this.shapes[r].shape._mdf=!0,this.shapes[r].shape.paths=this.shapes[r].localShapeCollection,this._mdf&&(this.shapes[r].pathsData.length=0);else if(1===i&&0===e||0===i&&1===e){if(this._mdf)for(r=0;r<d;r+=1)this.shapes[r].pathsData.length=0,this.shapes[r].shape._mdf=!0}else{var f,m,y=[];for(r=0;r<d;r+=1)if((f=this.shapes[r]).shape._mdf||this._mdf||t||2===this.m){if(l=(n=f.shape.paths)._length,h=0,!f.shape._mdf&&f.pathsData.length)h=f.totalShapeLength;else{for(c=this.releasePathsData(f.pathsData),s=0;s<l;s+=1)u=bez.getSegmentsLength(n.shapes[s]),c.push(u),h+=u.totalLength;f.totalShapeLength=h,f.pathsData=c}p+=h,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var v,g=e,_=i,b=0;for(r=d-1;r>=0;r-=1)if((f=this.shapes[r]).shape._mdf){for((m=f.localShapeCollection).releaseShapes(),2===this.m&&d>1?(v=this.calculateShapeEdges(e,i,f.totalShapeLength,b,p),b+=f.totalShapeLength):v=[[g,_]],l=v.length,s=0;s<l;s+=1){g=v[s][0],_=v[s][1],y.length=0,_<=1?y.push({s:f.totalShapeLength*g,e:f.totalShapeLength*_}):g>=1?y.push({s:f.totalShapeLength*(g-1),e:f.totalShapeLength*(_-1)}):(y.push({s:f.totalShapeLength*g,e:f.totalShapeLength}),y.push({s:0,e:f.totalShapeLength*(_-1)}));var x=this.addShapes(f,y[0]);if(y[0].s!==y[0].e){if(y.length>1)if(f.shape.paths.shapes[f.shape.paths._length-1].c){var w=x.pop();this.addPaths(x,m),x=this.addShapes(f,y[1],w)}else this.addPaths(x,m),x=this.addShapes(f,y[1]);this.addPaths(x,m)}}f.shape.paths=m}}},TrimModifier.prototype.addPaths=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)e.addShape(t[i])},TrimModifier.prototype.addSegment=function(t,e,i,n,r,o,a){r.setXYAt(e[0],e[1],"o",o),r.setXYAt(i[0],i[1],"i",o+1),a&&r.setXYAt(t[0],t[1],"v",o),r.setXYAt(n[0],n[1],"v",o+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,i,n){e.setXYAt(t[1],t[5],"o",i),e.setXYAt(t[2],t[6],"i",i+1),n&&e.setXYAt(t[0],t[4],"v",i),e.setXYAt(t[3],t[7],"v",i+1)},TrimModifier.prototype.addShapes=function(t,e,i){var n,r,o,a,s,l,c,u,h=t.pathsData,d=t.shape.paths.shapes,p=t.shape.paths._length,f=0,m=[],y=!0;for(i?(s=i._length,u=i._length):(i=shapePool.newElement(),s=0,u=0),m.push(i),n=0;n<p;n+=1){for(l=h[n].lengths,i.c=d[n].c,o=d[n].c?l.length:l.length+1,r=1;r<o;r+=1)if(f+(a=l[r-1]).addedLength<e.s)f+=a.addedLength,i.c=!1;else{if(f>e.e){i.c=!1;break}e.s<=f&&e.e>=f+a.addedLength?(this.addSegment(d[n].v[r-1],d[n].o[r-1],d[n].i[r],d[n].v[r],i,s,y),y=!1):(c=bez.getNewSegment(d[n].v[r-1],d[n].v[r],d[n].o[r-1],d[n].i[r],(e.s-f)/a.addedLength,(e.e-f)/a.addedLength,l[r-1]),this.addSegmentFromArray(c,i,s,y),y=!1,i.c=!1),f+=a.addedLength,s+=1}if(d[n].c&&l.length){if(a=l[r-1],f<=e.e){var v=l[r-1].addedLength;e.s<=f&&e.e>=f+v?(this.addSegment(d[n].v[r-1],d[n].o[r-1],d[n].i[0],d[n].v[0],i,s,y),y=!1):(c=bez.getNewSegment(d[n].v[r-1],d[n].v[0],d[n].o[r-1],d[n].i[0],(e.s-f)/v,(e.e-f)/v,l[r-1]),this.addSegmentFromArray(c,i,s,y),y=!1,i.c=!1)}else i.c=!1;f+=a.addedLength,s+=1}if(i._length&&(i.setXYAt(i.v[u][0],i.v[u][1],"i",u),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),f>e.e)break;n<p-1&&(i=shapePool.newElement(),y=!0,m.push(i),s=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var i,n=shapePool.newElement();n.c=t.c;var r,o,a,s,l,c,u,h,d,p,f,m,y=t._length,v=0;for(i=0;i<y;i+=1)r=t.v[i],a=t.o[i],o=t.i[i],r[0]===a[0]&&r[1]===a[1]&&r[0]===o[0]&&r[1]===o[1]?0!==i&&i!==y-1||t.c?(s=0===i?t.v[y-1]:t.v[i-1],c=(l=Math.sqrt(Math.pow(r[0]-s[0],2)+Math.pow(r[1]-s[1],2)))?Math.min(l/2,e)/l:0,u=f=r[0]+(s[0]-r[0])*c,h=m=r[1]-(r[1]-s[1])*c,d=u-(u-r[0])*roundCorner,p=h-(h-r[1])*roundCorner,n.setTripleAt(u,h,d,p,f,m,v),v+=1,s=i===y-1?t.v[0]:t.v[i+1],c=(l=Math.sqrt(Math.pow(r[0]-s[0],2)+Math.pow(r[1]-s[1],2)))?Math.min(l/2,e)/l:0,u=d=r[0]+(s[0]-r[0])*c,h=p=r[1]+(s[1]-r[1])*c,f=u-(u-r[0])*roundCorner,m=h-(h-r[1])*roundCorner,n.setTripleAt(u,h,d,p,f,m,v),v+=1):(n.setTripleAt(r[0],r[1],a[0],a[1],o[0],o[1],v),v+=1):(n.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],v),v+=1);return n},RoundCornersModifier.prototype.processShapes=function(t){var e,i,n,r,o,a,s=this.shapes.length,l=this.rd.v;if(0!==l)for(i=0;i<s;i+=1){if(a=(o=this.shapes[i]).localShapeCollection,o.shape._mdf||this._mdf||t)for(a.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,r=o.shape.paths._length,n=0;n<r;n+=1)a.addShape(this.processPath(e[n],l));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var i=e/100,n=[0,0],r=t._length,o=0;for(o=0;o<r;o+=1)n[0]+=t.v[o][0],n[1]+=t.v[o][1];n[0]/=r,n[1]/=r;var a,s,l,c,u,h,d=shapePool.newElement();for(d.c=t.c,o=0;o<r;o+=1)a=t.v[o][0]+(n[0]-t.v[o][0])*i,s=t.v[o][1]+(n[1]-t.v[o][1])*i,l=t.o[o][0]+(n[0]-t.o[o][0])*-i,c=t.o[o][1]+(n[1]-t.o[o][1])*-i,u=t.i[o][0]+(n[0]-t.i[o][0])*-i,h=t.i[o][1]+(n[1]-t.i[o][1])*-i,d.setTripleAt(a,s,l,c,u,h,o);return d},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,i,n,r,o,a,s=this.shapes.length,l=this.amount.v;if(0!==l)for(i=0;i<s;i+=1){if(a=(o=this.shapes[i]).localShapeCollection,o.shape._mdf||this._mdf||t)for(a.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,r=o.shape.paths._length,n=0;n<r;n+=1)a.addShape(this.processPath(e[n],l));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,i,n,r,o){var a=o?-1:1,s=n.s.v[0]+(1-n.s.v[0])*(1-r),l=n.s.v[1]+(1-n.s.v[1])*(1-r);t.translate(n.p.v[0]*a*r,n.p.v[1]*a*r,n.p.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.rotate(-n.r.v*a*r),e.translate(n.a.v[0],n.a.v[1],n.a.v[2]),i.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),i.scale(o?1/s:s,o?1/l:l),i.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(t,e,i,n){for(this.elem=t,this.arr=e,this.pos=i,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[i]);i>0;)i-=1,this._elements.unshift(e[i]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,i,n,r,o,a=!1;if(this._mdf||t){var s,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),a=!0}for(o=0,n=0;n<=this._groups.length-1;n+=1){if(s=o<l,this._groups[n]._render=s,this.changeGroupRender(this._groups[n].it,s),!s){var u=this.elemsData[n].it,h=u[u.length-1];0!==h.transform.op.v?(h.transform.op._mdf=!0,h.transform.op.v=0):h.transform.op._mdf=!1}o+=1}this._currentCopies=l;var d=this.o.v,p=d%1,f=d>0?Math.floor(d):Math.ceil(d),m=this.pMatrix.props,y=this.rMatrix.props,v=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var g,_,b=0;if(d>0){for(;b<f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),b+=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,p,!1),b+=p)}else if(d<0){for(;b>f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),b-=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-p,!0),b-=p)}for(n=1===this.data.m?0:this._currentCopies-1,r=1===this.data.m?1:-1,o=this._currentCopies;o;){if(_=(i=(e=this.elemsData[n].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),0!==b){for((0!==n&&1===r||n!==this._currentCopies-1&&-1===r)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),g=0;g<_;g+=1)i[g]=this.matrix.props[g];this.matrix.reset()}else for(this.matrix.reset(),g=0;g<_;g+=1)i[g]=this.matrix.props[g];b+=1,o-=1,n+=r}}else for(o=this._currentCopies,n=0,r=1;o;)i=(e=this.elemsData[n].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,o-=1,n+=r;return a},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,i=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<i;e+=1)"o"!==this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(t,e){for(var i=0,n=this.o.length/2;i<n;){if(Math.abs(t[4*i]-t[4*e+2*i])>.01)return!1;i+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,i,n,r=4*this.data.p;for(e=0;e<r;e+=1)i=e%4===0?100:255,n=Math.round(this.prop.v[e]*i),this.c[e]!==n&&(this.c[e]=n,this._cmdf=!t);if(this.o.length)for(r=this.prop.v.length,e=4*this.data.p;e<r;e+=1)i=e%2===0?100:1,n=e%2===0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==n&&(this.o[e-4*this.data.p]=n,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(t,e,i,n){if(0===e)return"";var r,o=t.o,a=t.i,s=t.v,l=" M"+n.applyToPointStringified(s[0][0],s[0][1]);for(r=1;r<e;r+=1)l+=" C"+n.applyToPointStringified(o[r-1][0],o[r-1][1])+" "+n.applyToPointStringified(a[r][0],a[r][1])+" "+n.applyToPointStringified(s[r][0],s[r][1]);return i&&e&&(l+=" C"+n.applyToPointStringified(o[r-1][0],o[r-1][1])+" "+n.applyToPointStringified(a[0][0],a[0][1])+" "+n.applyToPointStringified(s[0][0],s[0][1]),l+="z"),l},audioControllerFactory=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(t){var e,i=this.audios.length;for(e=0;e<i;e+=1)this.audios[e].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):Howl?new Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(t,e,i){var n="";if(t.e)n=t.p;else if(e){var r=t.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),n=e+r}else n=i,n+=t.u?t.u:"",n+=t.p;return n}function r(t){var e=0,i=setInterval(function(){(t.getBBox().width||e>500)&&(this._imageLoaded(),clearInterval(i)),e+=1}.bind(this),50)}function o(t){var e={assetData:t},i=n(t,this.assetsPath,this.path);return assetLoader.load(i,function(t){e.img=t,this._footageLoaded()}.bind(this),function(){e.img={},this._footageLoaded()}.bind(this)),e}function a(){this._imageLoaded=e.bind(this),this._footageLoaded=i.bind(this),this.testImageLoaded=r.bind(this),this.createFootageData=o.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return a.prototype={loadAssets:function(t,e){var i;this.imagesLoadedCb=e;var n=t.length;for(i=0;i<n;i+=1)t[i].layers||(t[i].t&&"seq"!==t[i].t?3===t[i].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[i]))):(this.totalImages+=1,this.images.push(this._createImageData(t[i]))))},setAssetsPath:function(t){this.assetsPath=t||""},setPath:function(t){this.path=t||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(t){for(var e=0,i=this.images.length;e<i;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}return null},createImgData:function(e){var i=n(e,this.assetsPath,this.path),r=createTag("img");r.crossOrigin="anonymous",r.addEventListener("load",this._imageLoaded,!1),r.addEventListener("error",function(){o.img=t,this._imageLoaded()}.bind(this),!1),r.src=i;var o={img:r,assetData:e};return o},createImageData:function(e){var i=n(e,this.assetsPath,this.path),r=createNS("image");isSafari?this.testImageLoaded(r):r.addEventListener("load",this._imageLoaded,!1),r.addEventListener("error",function(){o.img=t,this._imageLoaded()}.bind(this),!1),r.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this._elementHelper.append?this._elementHelper.append(r):this._elementHelper.appendChild(r);var o={img:r,assetData:e};return o},imageLoaded:e,footageLoaded:i,setCacheType:function(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},a}(),featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),filtersFactory=function(){var t={createFilter:function(t,e){var i=createNS("filter");return i.setAttribute("id",t),!0!==e&&(i.setAttribute("filterUnits","objectBoundingBox"),i.setAttribute("x","0%"),i.setAttribute("y","0%"),i.setAttribute("width","100%"),i.setAttribute("height","100%")),i},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}};return t}(),assetLoader=function(){function t(t){return t.response&&"object"===typeof t.response?t.response:t.response&&"string"===typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}return{load:function(e,i,n){var r,o=new XMLHttpRequest;try{o.responseType="json"}catch(a){}o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)r=t(o),i(r);else try{r=t(o),i(r)}catch(a){n&&n(a)}},o.open("GET",e,!0),o.send()}}}();function TextAnimatorProperty(t,e,i){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=i,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(i)}function TextAnimatorDataProperty(t,e,i){var n={propType:!1},r=PropertyFactory.getProp,o=e.a;this.a={r:o.r?r(t,o.r,0,degToRads,i):n,rx:o.rx?r(t,o.rx,0,degToRads,i):n,ry:o.ry?r(t,o.ry,0,degToRads,i):n,sk:o.sk?r(t,o.sk,0,degToRads,i):n,sa:o.sa?r(t,o.sa,0,degToRads,i):n,s:o.s?r(t,o.s,1,.01,i):n,a:o.a?r(t,o.a,1,0,i):n,o:o.o?r(t,o.o,0,.01,i):n,p:o.p?r(t,o.p,1,0,i):n,sw:o.sw?r(t,o.sw,0,0,i):n,sc:o.sc?r(t,o.sc,1,0,i):n,fc:o.fc?r(t,o.fc,1,0,i):n,fh:o.fh?r(t,o.fh,0,0,i):n,fs:o.fs?r(t,o.fs,0,.01,i):n,fb:o.fb?r(t,o.fb,0,.01,i):n,t:o.t?r(t,o.t,0,0,i):n},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,i),this.s.t=e.s.t}function LetterProps(t,e,i,n,r,o){this.o=t,this.sw=e,this.sc=i,this.fc=n,this.m=r,this.p=o,this._mdf={o:!0,sw:!!e,sc:!!i,fc:!!n,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e,i=this._textData.a.length,n=PropertyFactory.getProp;for(t=0;t<i;t+=1)e=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:n(this._elem,this._textData.p.a,0,0,this),f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:n(this._elem,this._textData.p.r,0,0,this),p:n(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var i,n,r,o,a,s,l,c,u,h,d,p,f,m,y,v,g,_,b,x=this._moreOptions.alignment.v,w=this._animatorsData,S=this._textData,E=this.mHelper,k=this._renderType,P=this.renderedLetters.length,T=t.l;if(this._hasMaskedPath){if(b=this._pathData.m,!this._pathData.n||this._pathData._mdf){var C,M=b.v;for(this._pathData.r.v&&(M=M.reverse()),a={tLength:0,segments:[]},o=M._length-1,v=0,r=0;r<o;r+=1)C=bez.buildBezierData(M.v[r],M.v[r+1],[M.o[r][0]-M.v[r][0],M.o[r][1]-M.v[r][1]],[M.i[r+1][0]-M.v[r+1][0],M.i[r+1][1]-M.v[r+1][1]]),a.tLength+=C.segmentLength,a.segments.push(C),v+=C.segmentLength;r=o,b.v.c&&(C=bez.buildBezierData(M.v[r],M.v[0],[M.o[r][0]-M.v[r][0],M.o[r][1]-M.v[r][1]],[M.i[0][0]-M.v[0][0],M.i[0][1]-M.v[0][1]]),a.tLength+=C.segmentLength,a.segments.push(C),v+=C.segmentLength),this._pathData.pi=a}if(a=this._pathData.pi,s=this._pathData.f.v,d=0,h=1,c=0,u=!0,m=a.segments,s<0&&b.v.c)for(a.tLength<Math.abs(s)&&(s=-Math.abs(s)%a.tLength),h=(f=m[d=m.length-1].points).length-1;s<0;)s+=f[h].partialLength,(h-=1)<0&&(h=(f=m[d-=1].points).length-1);p=(f=m[d].points)[h-1],y=(l=f[h]).partialLength}o=T.length,i=0,n=0;var A,O,I,D,z,L=1.2*t.finalSize*.714,R=!0;I=w.length;var F,B,j,N,V,U,G,q,Z,H,W,X,Y=-1,K=s,$=d,J=h,Q=-1,tt="",et=this.defaultPropsArray;if(2===t.j||1===t.j){var it=0,nt=0,rt=2===t.j?-.5:-1,ot=0,at=!0;for(r=0;r<o;r+=1)if(T[r].n){for(it&&(it+=nt);ot<r;)T[ot].animatorJustifyOffset=it,ot+=1;it=0,at=!0}else{for(O=0;O<I;O+=1)(A=w[O].a).t.propType&&(at&&2===t.j&&(nt+=A.t.v*rt),(z=w[O].s.getMult(T[r].anIndexes[O],S.a[O].s.totalChars)).length?it+=A.t.v*z[0]*rt:it+=A.t.v*z*rt);at=!1}for(it&&(it+=nt);ot<r;)T[ot].animatorJustifyOffset=it,ot+=1}for(r=0;r<o;r+=1){if(E.reset(),N=1,T[r].n)i=0,n+=t.yOffset,n+=R?1:0,s=K,R=!1,this._hasMaskedPath&&(h=J,p=(f=m[d=$].points)[h-1],y=(l=f[h]).partialLength,c=0),tt="",W="",Z="",X="",et=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Q!==T[r].line){switch(t.j){case 1:s+=v-t.lineWidths[T[r].line];break;case 2:s+=(v-t.lineWidths[T[r].line])/2}Q=T[r].line}Y!==T[r].ind&&(T[Y]&&(s+=T[Y].extra),s+=T[r].an/2,Y=T[r].ind),s+=x[0]*T[r].an*.005;var st=0;for(O=0;O<I;O+=1)(A=w[O].a).p.propType&&((z=w[O].s.getMult(T[r].anIndexes[O],S.a[O].s.totalChars)).length?st+=A.p.v[0]*z[0]:st+=A.p.v[0]*z),A.a.propType&&((z=w[O].s.getMult(T[r].anIndexes[O],S.a[O].s.totalChars)).length?st+=A.a.v[0]*z[0]:st+=A.a.v[0]*z);for(u=!0,this._pathData.a.v&&(s=.5*T[0].an+(v-this._pathData.f.v-.5*T[0].an-.5*T[T.length-1].an)*Y/(o-1),s+=this._pathData.f.v);u;)c+y>=s+st||!f?(g=(s+st-c)/l.partialLength,B=p.point[0]+(l.point[0]-p.point[0])*g,j=p.point[1]+(l.point[1]-p.point[1])*g,E.translate(-x[0]*T[r].an*.005,-x[1]*L*.01),u=!1):f&&(c+=l.partialLength,(h+=1)>=f.length&&(h=0,m[d+=1]?f=m[d].points:b.v.c?(h=0,f=m[d=0].points):(c-=l.partialLength,f=null)),f&&(p=l,y=(l=f[h]).partialLength));F=T[r].an/2-T[r].add,E.translate(-F,0,0)}else F=T[r].an/2-T[r].add,E.translate(-F,0,0),E.translate(-x[0]*T[r].an*.005,-x[1]*L*.01,0);for(O=0;O<I;O+=1)(A=w[O].a).t.propType&&(z=w[O].s.getMult(T[r].anIndexes[O],S.a[O].s.totalChars),0===i&&0===t.j||(this._hasMaskedPath?z.length?s+=A.t.v*z[0]:s+=A.t.v*z:z.length?i+=A.t.v*z[0]:i+=A.t.v*z));for(t.strokeWidthAnim&&(U=t.sw||0),t.strokeColorAnim&&(V=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(G=[t.fc[0],t.fc[1],t.fc[2]]),O=0;O<I;O+=1)(A=w[O].a).a.propType&&((z=w[O].s.getMult(T[r].anIndexes[O],S.a[O].s.totalChars)).length?E.translate(-A.a.v[0]*z[0],-A.a.v[1]*z[1],A.a.v[2]*z[2]):E.translate(-A.a.v[0]*z,-A.a.v[1]*z,A.a.v[2]*z));for(O=0;O<I;O+=1)(A=w[O].a).s.propType&&((z=w[O].s.getMult(T[r].anIndexes[O],S.a[O].s.totalChars)).length?E.scale(1+(A.s.v[0]-1)*z[0],1+(A.s.v[1]-1)*z[1],1):E.scale(1+(A.s.v[0]-1)*z,1+(A.s.v[1]-1)*z,1));for(O=0;O<I;O+=1){if(A=w[O].a,z=w[O].s.getMult(T[r].anIndexes[O],S.a[O].s.totalChars),A.sk.propType&&(z.length?E.skewFromAxis(-A.sk.v*z[0],A.sa.v*z[1]):E.skewFromAxis(-A.sk.v*z,A.sa.v*z)),A.r.propType&&(z.length?E.rotateZ(-A.r.v*z[2]):E.rotateZ(-A.r.v*z)),A.ry.propType&&(z.length?E.rotateY(A.ry.v*z[1]):E.rotateY(A.ry.v*z)),A.rx.propType&&(z.length?E.rotateX(A.rx.v*z[0]):E.rotateX(A.rx.v*z)),A.o.propType&&(z.length?N+=(A.o.v*z[0]-N)*z[0]:N+=(A.o.v*z-N)*z),t.strokeWidthAnim&&A.sw.propType&&(z.length?U+=A.sw.v*z[0]:U+=A.sw.v*z),t.strokeColorAnim&&A.sc.propType)for(q=0;q<3;q+=1)z.length?V[q]+=(A.sc.v[q]-V[q])*z[0]:V[q]+=(A.sc.v[q]-V[q])*z;if(t.fillColorAnim&&t.fc){if(A.fc.propType)for(q=0;q<3;q+=1)z.length?G[q]+=(A.fc.v[q]-G[q])*z[0]:G[q]+=(A.fc.v[q]-G[q])*z;A.fh.propType&&(G=z.length?addHueToRGB(G,A.fh.v*z[0]):addHueToRGB(G,A.fh.v*z)),A.fs.propType&&(G=z.length?addSaturationToRGB(G,A.fs.v*z[0]):addSaturationToRGB(G,A.fs.v*z)),A.fb.propType&&(G=z.length?addBrightnessToRGB(G,A.fb.v*z[0]):addBrightnessToRGB(G,A.fb.v*z))}}for(O=0;O<I;O+=1)(A=w[O].a).p.propType&&(z=w[O].s.getMult(T[r].anIndexes[O],S.a[O].s.totalChars),this._hasMaskedPath?z.length?E.translate(0,A.p.v[1]*z[0],-A.p.v[2]*z[1]):E.translate(0,A.p.v[1]*z,-A.p.v[2]*z):z.length?E.translate(A.p.v[0]*z[0],A.p.v[1]*z[1],-A.p.v[2]*z[2]):E.translate(A.p.v[0]*z,A.p.v[1]*z,-A.p.v[2]*z));if(t.strokeWidthAnim&&(Z=U<0?0:U),t.strokeColorAnim&&(H="rgb("+Math.round(255*V[0])+","+Math.round(255*V[1])+","+Math.round(255*V[2])+")"),t.fillColorAnim&&t.fc&&(W="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),this._hasMaskedPath){if(E.translate(0,-t.ls),E.translate(0,x[1]*L*.01+n,0),this._pathData.p.v){_=(l.point[1]-p.point[1])/(l.point[0]-p.point[0]);var lt=180*Math.atan(_)/Math.PI;l.point[0]<p.point[0]&&(lt+=180),E.rotate(-lt*Math.PI/180)}E.translate(B,j,0),s-=x[0]*T[r].an*.005,T[r+1]&&Y!==T[r+1].ind&&(s+=T[r].an/2,s+=.001*t.tr*t.finalSize)}else{switch(E.translate(i,n,0),t.ps&&E.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:E.translate(T[r].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[T[r].line]),0,0);break;case 2:E.translate(T[r].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[T[r].line])/2,0,0)}E.translate(0,-t.ls),E.translate(F,0,0),E.translate(x[0]*T[r].an*.005,x[1]*L*.01,0),i+=T[r].l+.001*t.tr*t.finalSize}"html"===k?tt=E.toCSS():"svg"===k?tt=E.to2dCSS():et=[E.props[0],E.props[1],E.props[2],E.props[3],E.props[4],E.props[5],E.props[6],E.props[7],E.props[8],E.props[9],E.props[10],E.props[11],E.props[12],E.props[13],E.props[14],E.props[15]],X=N}P<=r?(D=new LetterProps(X,Z,H,W,tt,et),this.renderedLetters.push(D),P+=1,this.lettersChangedFlag=!0):(D=this.renderedLetters[r],this.lettersChangedFlag=D.update(X,Z,H,W,tt,et)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(t,e,i,n,r,o){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,a=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,a=!0),this.sc!==i&&(this.sc=i,this._mdf.sc=!0,a=!0),this.fc!==n&&(this.fc=n,this._mdf.fc=!0,a=!0),this.m!==r&&(this.m=r,this._mdf.m=!0,a=!0),!o.length||this.p[0]===o[0]&&this.p[1]===o[1]&&this.p[4]===o[4]&&this.p[5]===o[5]&&this.p[12]===o[12]&&this.p[13]===o[13]||(this.p=o,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,i=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var n;this.lock=!0,this._mdf=!1;var r=this.effectsSequence.length,o=t||this.data.d.k[this.keysIndex].s;for(n=0;n<r;n+=1)o=i!==this.keysIndex?this.effectsSequence[n](o,o.t):this.effectsSequence[n](this.currentData,o.t);e!==o&&this.setCurrentData(o),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,i=0,n=t.length;i<=n-1&&!(i===n-1||t[i+1].t>e);)i+=1;return this.keysIndex!==i&&(this.keysIndex=i),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e,i,n=[],r=0,o=t.length,a=!1;r<o;)e=t.charCodeAt(r),FontManager.isCombinedCharacter(e)?n[n.length-1]+=t.charAt(r):e>=55296&&e<=56319?(i=t.charCodeAt(r+1))>=56320&&i<=57343?(a||FontManager.isModifier(e,i)?(n[n.length-1]+=t.substr(r,2),a=!1):n.push(t.substr(r,2)),r+=1):n.push(t.charAt(r)):e>56319?(i=t.charCodeAt(r+1),FontManager.isZeroWidthJoiner(e,i)?(a=!0,n[n.length-1]+=t.substr(r,2),r+=1):n.push(t.charAt(r))):FontManager.isZeroWidthJoiner(e)?(n[n.length-1]+=t.charAt(r),a=!0):n.push(t.charAt(r)),r+=1;return n},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,i,n,r,o,a,s,l=this.elem.globalData.fontManager,c=this.data,u=[],h=0,d=c.m.g,p=0,f=0,m=0,y=[],v=0,g=0,_=l.getFontByName(t.f),b=0,x=getFontProperties(_);t.fWeight=x.weight,t.fStyle=x.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),i=t.finalText.length,t.finalLineHeight=t.lh;var w,S=t.tr/1e3*t.finalSize;if(t.sz)for(var E,k,P=!0,T=t.sz[0],C=t.sz[1];P;){E=0,v=0,i=(k=this.buildFinalText(t.t)).length,S=t.tr/1e3*t.finalSize;var M=-1;for(e=0;e<i;e+=1)w=k[e].charCodeAt(0),n=!1," "===k[e]?M=e:13!==w&&3!==w||(v=0,n=!0,E+=t.finalLineHeight||1.2*t.finalSize),l.chars?(s=l.getCharData(k[e],_.fStyle,_.fFamily),b=n?0:s.w*t.finalSize/100):b=l.measureText(k[e],t.f,t.finalSize),v+b>T&&" "!==k[e]?(-1===M?i+=1:e=M,E+=t.finalLineHeight||1.2*t.finalSize,k.splice(e,M===e?1:0,"\r"),M=-1,v=0):(v+=b,v+=S);E+=_.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&C<E?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=k,i=t.finalText.length,P=!1)}v=-S,b=0;var A,O=0;for(e=0;e<i;e+=1)if(n=!1,13===(w=(A=t.finalText[e]).charCodeAt(0))||3===w?(O=0,y.push(v),g=v>g?v:g,v=-2*S,r="",n=!0,m+=1):r=A,l.chars?(s=l.getCharData(A,_.fStyle,l.getFontByName(t.f).fFamily),b=n?0:s.w*t.finalSize/100):b=l.measureText(r,t.f,t.finalSize)," "===A?O+=b+S:(v+=b+S+O,O=0),u.push({l:b,an:b,add:p,n:n,anIndexes:[],val:r,line:m,animatorJustifyOffset:0}),2==d){if(p+=b,""===r||" "===r||e===i-1){for(""!==r&&" "!==r||(p-=b);f<=e;)u[f].an=p,u[f].ind=h,u[f].extra=b,f+=1;h+=1,p=0}}else if(3==d){if(p+=b,""===r||e===i-1){for(""===r&&(p-=b);f<=e;)u[f].an=p,u[f].ind=h,u[f].extra=b,f+=1;p=0,h+=1}}else u[h].ind=h,u[h].extra=0,h+=1;if(t.l=u,g=v>g?v:g,y.push(v),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=g,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=y;var I,D,z,L,R=c.a;a=R.length;var F=[];for(o=0;o<a;o+=1){for((I=R[o]).a.sc&&(t.strokeColorAnim=!0),I.a.sw&&(t.strokeWidthAnim=!0),(I.a.fc||I.a.fh||I.a.fs||I.a.fb)&&(t.fillColorAnim=!0),L=0,z=I.s.b,e=0;e<i;e+=1)(D=u[e]).anIndexes[o]=L,(1==z&&""!==D.val||2==z&&""!==D.val&&" "!==D.val||3==z&&(D.n||" "==D.val||e==i-1)||4==z&&(D.n||e==i-1))&&(1===I.s.rn&&F.push(L),L+=1);c.a[o].s.totalChars=L;var B,j=-1;if(1===I.s.rn)for(e=0;e<i;e+=1)j!=(D=u[e]).anIndexes[o]&&(j=D.anIndexes[o],B=F.splice(Math.floor(Math.random()*F.length),1)[0]),D.anIndexes[o]=B}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=_.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var i=this.copyData({},this.data.d.k[e].s);i=this.copyData(i,t),this.data.d.k[e].s=i,this.recalculate(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,i=Math.floor;function n(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(t,e.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return n.prototype={getMult:function(n){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var r=0,o=0,a=1,s=1;this.ne.v>0?r=this.ne.v/100:o=-this.ne.v/100,this.xe.v>0?a=1-this.xe.v/100:s=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(r,o,a,s).get,c=0,u=this.finalS,h=this.finalE,d=this.data.sh;if(2===d)c=l(c=h===u?n>=h?1:0:t(0,e(.5/(h-u)+(n-u)/(h-u),1)));else if(3===d)c=l(c=h===u?n>=h?0:1:1-t(0,e(.5/(h-u)+(n-u)/(h-u),1)));else if(4===d)h===u?c=0:(c=t(0,e(.5/(h-u)+(n-u)/(h-u),1)))<.5?c*=2:c=1-2*(c-.5),c=l(c);else if(5===d){if(h===u)c=0;else{var p=h-u,f=-p/2+(n=e(t(0,n+.5-u),h-u)),m=p/2;c=Math.sqrt(1-f*f/(m*m))}c=l(c)}else 6===d?(h===u?c=0:(n=e(t(0,n+.5-u),h-u),c=(1+Math.cos(Math.PI+2*Math.PI*n/(h-u)))/2),c=l(c)):(n>=i(u)&&(c=t(0,e(n-u<0?e(h,1)-(u-n):h-n,1))),c=l(c));if(100!==this.sm.v){var y=.01*this.sm.v;0===y&&(y=1e-8);var v=.5-.5*y;c<v?c=0:(c=(c-v)/y)>1&&(c=1)}return c*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,i=this.o.v/e,n=this.s.v/e+i,r=this.e.v/e+i;if(n>r){var o=n;n=r,r=o}this.finalS=n,this.finalE=r}},extendPrototype([DynamicPropertyContainer],n),{getTextSelectorProp:function(t,e,i){return new n(t,e,i)}}}(),poolFactory=function(t,e,i){var n=0,r=t,o=createSizedArray(r);return{newElement:function(){return n?o[n-=1]:e()},release:function(t){n===r&&(o=pooling.double(o),r*=2),i&&i(t),o[n]=t,n+=1}}},pooling={double:function(t){return t.concat(createSizedArray(t.length))}},pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)})),shapePool=function(){var t=poolFactory(4,(function(){return new ShapePath}),(function(t){var e,i=t._length;for(e=0;e<i;e+=1)pointPool.release(t.v[e]),pointPool.release(t.i[e]),pointPool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1}));return t.clone=function(e){var i,n=t.newElement(),r=void 0===e._length?e.v.length:e._length;for(n.setLength(r),n.c=e.c,i=0;i<r;i+=1)n.setTripleAt(e.v[i][0],e.v[i][1],e.o[i][0],e.o[i][1],e.i[i][0],e.i[i][1],i);return n},t}(),shapeCollectionPool=function(){var t={newShapeCollection:function(){return e?n[e-=1]:new ShapeCollection},release:function(t){var r,o=t._length;for(r=0;r<o;r+=1)shapePool.release(t.shapes[r]);t._length=0,e===i&&(n=pooling.double(n),i*=2),n[e]=t,e+=1}},e=0,i=4,n=createSizedArray(i);return t}(),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(t){var e,i=t.lengths.length;for(e=0;e<i;e+=1)bezierLengthPool.release(t.lengths[e]);t.lengths.length=0})),bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}})),markerParser=function(){function t(t){for(var e,i=t.split("\r\n"),n={},r=0,o=0;o<i.length;o+=1)2===(e=i[o].split(":")).length&&(n[e[0]]=e[1].trim(),r+=1);if(0===r)throw new Error;return n}return function(e){for(var i=[],n=0;n<e.length;n+=1){var r=e[n],o={time:r.tm,duration:r.dr};try{o.payload=JSON.parse(e[n].cm)}catch(a){try{o.payload=t(e[n].cm)}catch(s){o.payload={name:e[n]}}}i.push(o)}return i}}();function BaseRenderer(){}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var i="";if(e&&e.title){var n=createNS("title"),r=createElementID();n.setAttribute("id",r),n.textContent=e.title,this.svgElement.appendChild(n),i+=r}if(e&&e.description){var o=createNS("desc"),a=createElementID();o.setAttribute("id",a),o.textContent=e.description,this.svgElement.appendChild(o),i+=" "+a}i&&this.svgElement.setAttribute("aria-labelledby",i);var s=createNS("defs");this.svgElement.appendChild(s);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:s,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",className:e&&e.className||"",id:e&&e.id||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(t,e,i){this.data=t,this.element=e,this.globalData=i,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n,r,o=this.globalData.defs,a=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(a),this.solidPath="";var s,l,c,u,h,d,p=this.masksProperties,f=0,m=[],y=createElementID(),v="clipPath",g="clip-path";for(n=0;n<a;n+=1)if(("a"!==p[n].mode&&"n"!==p[n].mode||p[n].inv||100!==p[n].o.k||p[n].o.x)&&(v="mask",g="mask"),"s"!==p[n].mode&&"i"!==p[n].mode||0!==f?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),m.push(c)),r=createNS("path"),"n"===p[n].mode)this.viewData[n]={op:PropertyFactory.getProp(this.element,p[n].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[n],3),elem:r,lastPath:""},o.appendChild(r);else{var _;if(f+=1,r.setAttribute("fill","s"===p[n].mode?"#000000":"#ffffff"),r.setAttribute("clip-rule","nonzero"),0!==p[n].x.k?(v="mask",g="mask",d=PropertyFactory.getProp(this.element,p[n].x,0,null,this.element),_=createElementID(),(u=createNS("filter")).setAttribute("id",_),(h=createNS("feMorphology")).setAttribute("operator","erode"),h.setAttribute("in","SourceGraphic"),h.setAttribute("radius","0"),u.appendChild(h),o.appendChild(u),r.setAttribute("stroke","s"===p[n].mode?"#000000":"#ffffff")):(h=null,d=null),this.storedData[n]={elem:r,x:d,expan:h,lastPath:"",lastOperator:"",filterId:_,lastRadius:0},"i"===p[n].mode){l=m.length;var b=createNS("g");for(s=0;s<l;s+=1)b.appendChild(m[s]);var x=createNS("mask");x.setAttribute("mask-type","alpha"),x.setAttribute("id",y+"_"+f),x.appendChild(r),o.appendChild(x),b.setAttribute("mask","url("+locationHref+"#"+y+"_"+f+")"),m.length=0,m.push(b)}else m.push(r);p[n].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[n]={elem:r,lastPath:"",op:PropertyFactory.getProp(this.element,p[n].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[n],3),invRect:c},this.viewData[n].prop.k||this.drawPath(p[n],this.viewData[n].prop.v,this.viewData[n])}for(this.maskElement=createNS(v),a=m.length,n=0;n<a;n+=1)this.maskElement.appendChild(m[n]);f>0&&(this.maskElement.setAttribute("id",y),this.element.maskedElement.setAttribute(g,"url("+locationHref+"#"+y+")"),o.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(t,e){this.elem=t,this.pos=e}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(t,e,i){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=i,this.lvl=e,this._isAnimated=!!i.k;for(var n=0,r=t.length;n<r;){if(t[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}function SVGTransformData(t,e,i){this.transform={mProps:t,op:e,container:i},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=i,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=i}function SVGGradientFillStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,i)}function SVGGradientStrokeStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,i),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(t){var e,i,n=this.layers.length;for(this.completeLayers=!0,e=n-1;e>=0;e-=1)this.elements[e]||(i=this.layers[e]).ip-i.st<=t-this.layers[e].st&&i.op-i.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t);default:return this.createNull(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){var e;this.completeLayers=!1;var i,n=t.length,r=this.layers.length;for(e=0;e<n;e+=1)for(i=0;i<r;){if(this.layers[i].id===t[e].id){this.layers[i]=t[e];break}i+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,i){for(var n=this.elements,r=this.layers,o=0,a=r.length;o<a;)r[o].ind==e&&(n[o]&&!0!==n[o]?(i.push(n[o]),n[o].setAsParent(),void 0!==r[o].parent?this.buildElementParenting(t,r[o].parent,i):t.setHierarchy(i)):(this.buildItem(o),this.addPendingElement(t))),o+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length;for(e=0;e<i;e+=1)if(t[e].xt){var n=this.createComp(t[e]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var i=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.setAttribute("x",0),n.setAttribute("y",0);var r=createElementID();i.setAttribute("id",r),i.appendChild(n),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+r+")"),e.appendChild(i),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRenderer.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){e[t]=!0;var i=this.createItem(this.layers[t]);e[t]=i,expressionsPlugin&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(i),i.initExpressions()),this.appendElementInPos(i,t),this.layers[t].tt&&(this.elements[t-1]&&!0!==this.elements[t-1]?i.setMatte(e[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(i)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,i=this.elements.length;e<i;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var e;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<i;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){for(var n,r=0;r<e;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement()&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(i,n):this.layerElement.appendChild(i)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(t);var e=this.contextData.cTr.props;this.transformMat.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var i=this.contextData.cTr.props;this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])}else this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRenderer.prototype.ctxOpacity=function(t){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=t<0?0:t,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=t<0?0:t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(t){if(this.renderConfig.clearCanvas){t&&this.canvasContext.save();var e,i=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var n=this.contextData.saved[this.contextData.cArrPos];for(e=0;e<16;e+=1)n[e]=i[e];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(t){if(this.renderConfig.clearCanvas){t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var e,i=this.contextData.saved[this.contextData.cArrPos],n=this.contextData.cTr.props;for(e=0;e<16;e+=1)n[e]=i[e];this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13]),i=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=i,this.globalData.currentGlobalAlpha!==i&&(this.canvasContext.globalAlpha=i,this.globalData.currentGlobalAlpha=i)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var i="0px 0px 0px";e.transformOrigin=i,e.mozTransformOrigin=i,e.webkitTransformOrigin=i,e["-webkit-transform"]=i,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var t,e,i,n;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var r=this.renderConfig.preserveAspectRatio.split(" "),o=r[1]||"meet",a=r[0]||"xMidYMid",s=a.substr(0,4),l=a.substr(4);i=t/e,(n=this.transformCanvas.w/this.transformCanvas.h)>i&&"meet"===o||n<i&&"slice"===o?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===s&&(n<i&&"meet"===o||n>i&&"slice"===o)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===s&&(n<i&&"meet"===o||n>i&&"slice"===o)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===l&&(n>i&&"meet"===o||n<i&&"slice"===o)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===l&&(n>i&&"meet"===o||n<i&&"slice"===o)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){var i;this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var n=this.layers.length;for(this.completeLayers||this.checkLayers(t),i=0;i<n;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(t-this.layers[i].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),i=n-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){var i=this.createItem(this.layers[t],this,this.globalData);e[t]=i,i.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){var n=this.layers[e];if(n.ddd&&this.supports3d)this.addTo3dContainer(i,e);else if(this.threeDElements)this.addTo3dContainer(i,e);else{for(var r,o,a=0;a<e;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(o=this.elements[a],r=(this.layers[a].ddd?this.getThreeDContainerByPos(a):o.getBaseElement())||r),a+=1;r?n.ddd&&this.supports3d||this.layerElement.insertBefore(i,r):n.ddd&&this.supports3d||this.layerElement.appendChild(i)}}},HybridRenderer.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(t){for(var e=0,i=this.threeDElements.length;e<i;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRenderer.prototype.createThreeDContainer=function(t,e){var i,n,r=createTag("div");styleDiv(r);var o=createTag("div");if(styleDiv(o),"3d"===e){(i=r.style).width=this.globalData.compSize.w+"px",i.height=this.globalData.compSize.h+"px";var a="50% 50%";i.webkitTransformOrigin=a,i.mozTransformOrigin=a,i.transformOrigin=a;var s="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(n=o.style).transform=s,n.webkitTransform=s}r.appendChild(o);var l={container:o,perspectiveElem:r,startPos:t,endPos:t,type:e};return this.threeDElements.push(l),l},HybridRenderer.prototype.build3dContainers=function(){var t,e,i=this.layers.length,n="";for(t=0;t<i;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==n&&(n="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==n&&(n="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(i=this.threeDElements.length)-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var i=0,n=this.threeDElements.length;i<n;){if(e<=this.threeDElements[i].endPos){for(var r,o=this.threeDElements[i].startPos;o<e;)this.elements[o]&&this.elements[o].getBaseElement&&(r=this.elements[o].getBaseElement()),o+=1;r?this.threeDElements[i].container.insertBefore(t,r):this.threeDElements[i].container.appendChild(t);break}i+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=createTag("div"),i=this.animationItem.wrapper,n=e.style;n.width=t.w+"px",n.height=t.h+"px",this.resizerElem=e,styleDiv(e),n.transformStyle="flat",n.mozTransformStyle="flat",n.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),i.appendChild(e),n.overflow="hidden";var r=createNS("svg");r.setAttribute("width","1"),r.setAttribute("height","1"),styleDiv(r),this.resizerElem.appendChild(r);var o=createNS("defs");r.appendChild(o),this.data=t,this.setupGlobalData(t,r),this.globalData.defs=o,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t,e,i,n,r=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight,a=r/o;this.globalData.compSize.w/this.globalData.compSize.h>a?(t=r/this.globalData.compSize.w,e=r/this.globalData.compSize.w,i=0,n=(o-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(t=o/this.globalData.compSize.h,e=o/this.globalData.compSize.h,i=(r-this.globalData.compSize.w*(o/this.globalData.compSize.h))/2,n=0);var s=this.resizerElem.style;s.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+i+","+n+",0,1)",s.transform=s.webkitTransform},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,i=this.globalData.compSize.h,n=this.threeDElements.length;for(t=0;t<n;t+=1){var r=this.threeDElements[t].perspectiveElem.style;r.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))+"px",r.perspective=r.webkitPerspective}}},HybridRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length,n=createTag("div");for(e=0;e<i;e+=1)if(t[e].xt){var r=this.createComp(t[e],n,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,i=this.element.finalTransform.mat,n=this.masksProperties.length;for(e=0;e<n;e+=1)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[e].invRect.setAttribute("transform",i.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var r=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[e].filterId+")")),r.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,i){var n,r,o=" M"+e.v[0][0]+","+e.v[0][1];for(r=e._length,n=1;n<r;n+=1)o+=" C"+e.o[n-1][0]+","+e.o[n-1][1]+" "+e.i[n][0]+","+e.i[n][1]+" "+e.v[n][0]+","+e.v[n][1];if(e.c&&r>1&&(o+=" C"+e.o[n-1][0]+","+e.o[n-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),i.lastPath!==o){var a="";i.elem&&(e.c&&(a=t.inv?this.solidPath+o:o),i.elem.setAttribute("d",a)),i.lastPath=o}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var i,n=this.dynamicProperties.length;for(i=0;i<n;i+=1)(e||this._isParent&&"transform"===this.dynamicProperties[i].propType)&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,i=0,n=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<n;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),i=0;i<n;i+=1)t=this.hierarchy[i].finalTransform.mProp.v.props,e.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var i,n=!0,r=this.comp;n;)r.finalTransform?(r.data.hasMask&&e.splice(0,0,r.finalTransform),r=r.comp):n=!1;var o,a=e.length;for(i=0;i<a;i+=1)o=e[i].mat.applyToPointArray(0,0,0),t=[t[0]-o[0],t[1]-o[1],0];return t},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initTransform(t,e,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,i){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=i,this.stops=[],this.setGradientData(i.pElem,e),this.setGradientOpacity(e,i),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var i=createElementID(),n=createNS(1===e.t?"linearGradient":"radialGradient");n.setAttribute("id",i),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var r,o,a,s=[];for(a=4*e.g.p,o=0;o<a;o+=4)r=createNS("stop"),n.appendChild(r),s.push(r);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+i+")"),this.gf=n,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var i,n,r,o=createNS("mask"),a=createNS("path");o.appendChild(a);var s=createElementID(),l=createElementID();o.setAttribute("id",l);var c=createNS(1===t.t?"linearGradient":"radialGradient");c.setAttribute("id",s),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),r=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var u=this.stops;for(n=4*t.g.p;n<r;n+=2)(i=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(i),u.push(i);a.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+s+")"),"gs"===t.ty&&(a.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),1===t.lj&&a.setAttribute("stroke-miterlimit",t.ml)),this.of=c,this.ms=o,this.ost=u,this.maskId=l,e.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function i(t,e,i){(i||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(i||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function n(i,n,r){var o,a,s,l,c,u,h,d,p,f,m,y=n.styles.length,v=n.lvl;for(u=0;u<y;u+=1){if(l=n.sh._mdf||r,n.styles[u].lvl<v){for(d=e.reset(),f=v-n.styles[u].lvl,m=n.transformers.length-1;!l&&f>0;)l=n.transformers[m].mProps._mdf||l,f-=1,m-=1;if(l)for(f=v-n.styles[u].lvl,m=n.transformers.length-1;f>0;)p=n.transformers[m].mProps.v.props,d.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),f-=1,m-=1}else d=t;if(a=(h=n.sh.paths)._length,l){for(s="",o=0;o<a;o+=1)(c=h.shapes[o])&&c._length&&(s+=buildShapeString(c,c._length,c.c,d));n.caches[u]=s}else s=n.caches[u];n.styles[u].d+=!0===i.hd?"":s,n.styles[u]._mdf=l||n.styles[u]._mdf}}function r(t,e,i){var n=e.style;(e.c._mdf||i)&&n.pElem.setAttribute("fill","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i)&&n.pElem.setAttribute("fill-opacity",e.o.v)}function o(t,e,i){a(t,e,i),s(0,e,i)}function a(t,e,i){var n,r,o,a,s,l=e.gf,c=e.g._hasOpacity,u=e.s.v,h=e.e.v;if(e.o._mdf||i){var d="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(d,e.o.v)}if(e.s._mdf||i){var p=1===t.t?"x1":"cx",f="x1"===p?"y1":"cy";l.setAttribute(p,u[0]),l.setAttribute(f,u[1]),c&&!e.g._collapsable&&(e.of.setAttribute(p,u[0]),e.of.setAttribute(f,u[1]))}if(e.g._cmdf||i){n=e.cst;var m=e.g.c;for(o=n.length,r=0;r<o;r+=1)(a=n[r]).setAttribute("offset",m[4*r]+"%"),a.setAttribute("stop-color","rgb("+m[4*r+1]+","+m[4*r+2]+","+m[4*r+3]+")")}if(c&&(e.g._omdf||i)){var y=e.g.o;for(o=(n=e.g._collapsable?e.cst:e.ost).length,r=0;r<o;r+=1)a=n[r],e.g._collapsable||a.setAttribute("offset",y[2*r]+"%"),a.setAttribute("stop-opacity",y[2*r+1])}if(1===t.t)(e.e._mdf||i)&&(l.setAttribute("x2",h[0]),l.setAttribute("y2",h[1]),c&&!e.g._collapsable&&(e.of.setAttribute("x2",h[0]),e.of.setAttribute("y2",h[1])));else if((e.s._mdf||e.e._mdf||i)&&(s=Math.sqrt(Math.pow(u[0]-h[0],2)+Math.pow(u[1]-h[1],2)),l.setAttribute("r",s),c&&!e.g._collapsable&&e.of.setAttribute("r",s)),e.e._mdf||e.h._mdf||e.a._mdf||i){s||(s=Math.sqrt(Math.pow(u[0]-h[0],2)+Math.pow(u[1]-h[1],2)));var v=Math.atan2(h[1]-u[1],h[0]-u[0]),g=e.h.v;g>=1?g=.99:g<=-1&&(g=-.99);var _=s*g,b=Math.cos(v+e.a.v)*_+u[0],x=Math.sin(v+e.a.v)*_+u[1];l.setAttribute("fx",b),l.setAttribute("fy",x),c&&!e.g._collapsable&&(e.of.setAttribute("fx",b),e.of.setAttribute("fy",x))}}function s(t,e,i){var n=e.style,r=e.d;r&&(r._mdf||i)&&r.dashStr&&(n.pElem.setAttribute("stroke-dasharray",r.dashStr),n.pElem.setAttribute("stroke-dashoffset",r.dashoffset[0])),e.c&&(e.c._mdf||i)&&n.pElem.setAttribute("stroke","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i)&&n.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||i)&&(n.pElem.setAttribute("stroke-width",e.w.v),n.msElem&&n.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){switch(t.ty){case"fl":return r;case"gf":return a;case"gs":return o;case"st":return s;case"sh":case"el":case"rc":case"sr":return n;case"tr":return i;default:return null}}}}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(t,e,i,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var r,o=4;"rc"===e.ty?o=5:"el"===e.ty?o=6:"sr"===e.ty&&(o=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,o,t);var a,s=i.length;for(r=0;r<s;r+=1)i[r].closed||(a={transforms:n.addTransformSequence(i[r].transforms),trNodes:[]},this.styledShapes.push(a),i[r].elements.push(a))}function BaseElement(){}function NullElement(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initFrame(),this.initTransform(t,e,i),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,i),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(t,e,i){this.initElement(t,e,i)}function AudioElement(t,e,i){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,i),this._isPlaying=!1,this._canPlay=!1;var n=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(n),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function FootageElement(t,e,i){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,i)}function SVGCompElement(t,e,i){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGTextLottieElement(t,e,i){this.textSpans=[],this.renderType="svg",this.initElement(t,e,i)}function SVGShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,i),this.prevViewData=[]}function SVGTintFilter(t,e){this.filterManager=e;var i=createNS("feColorMatrix");if(i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i),(i=createNS("feColorMatrix")).setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result","f2"),t.appendChild(i),this.matrixFilter=i,100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var n,r=createNS("feMerge");t.appendChild(r),(n=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),r.appendChild(n),(n=createNS("feMergeNode")).setAttribute("in","f2"),r.appendChild(n)}}function SVGFillFilter(t,e){this.filterManager=e;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(i),this.matrixFilter=i}function SVGGaussianBlurEffect(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var i=createNS("feGaussianBlur");t.appendChild(i),this.feGaussianBlur=i}function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(t,e){this.filterManager=e;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),t.appendChild(i);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.matrixFilter=n;var r=createNS("feFuncR");r.setAttribute("type","table"),n.appendChild(r),this.feFuncR=r;var o=createNS("feFuncG");o.setAttribute("type","table"),n.appendChild(o),this.feFuncG=o;var a=createNS("feFuncB");a.setAttribute("type","table"),n.appendChild(a),this.feFuncB=a}function SVGProLevelsFilter(t,e){this.filterManager=e;var i=this.filterManager.effectElements,n=createNS("feComponentTransfer");(i[10].p.k||0!==i[10].p.v||i[11].p.k||1!==i[11].p.v||i[12].p.k||1!==i[12].p.v||i[13].p.k||0!==i[13].p.v||i[14].p.k||1!==i[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(i[17].p.k||0!==i[17].p.v||i[18].p.k||1!==i[18].p.v||i[19].p.k||1!==i[19].p.v||i[20].p.k||0!==i[20].p.v||i[21].p.k||1!==i[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(i[24].p.k||0!==i[24].p.v||i[25].p.k||1!==i[25].p.v||i[26].p.k||1!==i[26].p.v||i[27].p.k||0!==i[27].p.v||i[28].p.k||1!==i[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(i[31].p.k||0!==i[31].p.v||i[32].p.k||1!==i[32].p.v||i[33].p.k||1!==i[33].p.v||i[34].p.k||0!==i[34].p.v||i[35].p.k||1!==i[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),n=createNS("feComponentTransfer")),(i[3].p.k||0!==i[3].p.v||i[4].p.k||1!==i[4].p.v||i[5].p.k||1!==i[5].p.v||i[6].p.k||0!==i[6].p.v||i[7].p.k||1!==i[7].p.v)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function SVGDropShadowEffect(t,e){var i=e.container.globalData.renderConfig.filterSize;t.setAttribute("x",i.x),t.setAttribute("y",i.y),t.setAttribute("width",i.width),t.setAttribute("height",i.height),this.filterManager=e;var n=createNS("feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("result","drop_shadow_1"),n.setAttribute("stdDeviation","0"),this.feGaussianBlur=n,t.appendChild(n);var r=createNS("feOffset");r.setAttribute("dx","25"),r.setAttribute("dy","0"),r.setAttribute("in","drop_shadow_1"),r.setAttribute("result","drop_shadow_2"),this.feOffset=r,t.appendChild(r);var o=createNS("feFlood");o.setAttribute("flood-color","#00ff00"),o.setAttribute("flood-opacity","1"),o.setAttribute("result","drop_shadow_3"),this.feFlood=o,t.appendChild(o);var a=createNS("feComposite");a.setAttribute("in","drop_shadow_3"),a.setAttribute("in2","drop_shadow_2"),a.setAttribute("operator","in"),a.setAttribute("result","drop_shadow_4"),t.appendChild(a);var s,l=createNS("feMerge");t.appendChild(l),s=createNS("feMergeNode"),l.appendChild(s),(s=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=s,this.feMerge=l,this.originalNodeAdded=!1,l.appendChild(s)}ShapeTransformManager.prototype={addTransformSequence:function(t){var e,i=t.length,n="_";for(e=0;e<i;e+=1)n+=t[e].transform.key+"_";var r=this.sequences[n];return r||(r={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[n]=r,this.sequenceList.push(r)),r},processSequence:function(t,e){for(var i,n=0,r=t.transforms.length,o=e;n<r&&!e;){if(t.transforms[n].transform.mProps._mdf){o=!0;break}n+=1}if(o)for(t.finalTransform.reset(),n=r-1;n>=0;n-=1)i=t.transforms[n].transform.mProps.v.props,t.finalTransform.transform(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15]);t._mdf=o},processSequences:function(t){var e,i=this.sequenceList.length;for(e=0;e<i;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,i){this.globalData=e,this.comp=i,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t,e,i,n=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var r=createNS("mask");r.setAttribute("id",this.layerId),r.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),r.appendChild(this.layerElement),n=r,this.globalData.defs.appendChild(r),featureSupport.maskType||1!=this.data.td||(r.setAttribute("mask-type","luminance"),t=createElementID(),e=filtersFactory.createFilter(t),this.globalData.defs.appendChild(e),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(i=createNS("g")).appendChild(this.layerElement),n=i,r.appendChild(i),i.setAttribute("filter","url("+locationHref+"#"+t+")"))}else if(2==this.data.td){var o=createNS("mask");o.setAttribute("id",this.layerId),o.setAttribute("mask-type","alpha");var a=createNS("g");o.appendChild(a),t=createElementID(),e=filtersFactory.createFilter(t);var s=createNS("feComponentTransfer");s.setAttribute("in","SourceGraphic"),e.appendChild(s);var l=createNS("feFuncA");l.setAttribute("type","table"),l.setAttribute("tableValues","1.0 0.0"),s.appendChild(l),this.globalData.defs.appendChild(e);var c=createNS("rect");c.setAttribute("width",this.comp.data.w),c.setAttribute("height",this.comp.data.h),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("fill","#ffffff"),c.setAttribute("opacity","0"),a.setAttribute("filter","url("+locationHref+"#"+t+")"),a.appendChild(c),a.appendChild(this.layerElement),n=a,featureSupport.maskType||(o.setAttribute("mask-type","luminance"),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),i=createNS("g"),a.appendChild(c),i.appendChild(this.layerElement),n=i,a.appendChild(i)),this.globalData.defs.appendChild(o)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),n=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var u=createNS("clipPath"),h=createNS("path");h.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var d=createElementID();if(u.setAttribute("id",d),u.appendChild(h),this.globalData.defs.appendChild(u),this.checkMasks()){var p=createNS("g");p.setAttribute("clip-path","url("+locationHref+"#"+d+")"),p.appendChild(this.layerElement),this.transformedElement=p,n?n.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+d+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")}},IShapeElement.prototype={addShapeToModifiers:function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0&&!this.shapeModifiers[t].processShapes(this._isFirstFrame);t-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,i=0,n=e.length;i<n;){if(e[i].elem===t)return e[i].pos;i+=1}return 0},addProcessedElement:function(t,e){for(var i=this.processedElements,n=i.length;n;)if(i[n-=1].elem===t)return void(i[n].pos=e);i.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}},ITextElement.prototype.initElement=function(t,e,i){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,i),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){var i,n,r=e.length,o="";for(i=0;i<r;i+=1)n=e[i].ks.k,o+=buildShapeString(n,n.i.length,!0,t);return o},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,i,n,r){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i])/2,0,0)}e.translate(n,r,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initTransform(t,e,i),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var i,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=n-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st),this.elements[i]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this.audio.volume(t)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,i=t.length,n=[],r="";e<i;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(n.push(r),r=""):r+=t[e],e+=1;return n.push(r),n},SVGTextLottieElement.prototype.buildNewText=function(){var t,e,i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i?i.l.length:0),i.fc?this.layerElement.setAttribute("fill",this.buildColor(i.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),i.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(i.sc)),this.layerElement.setAttribute("stroke-width",i.sw)),this.layerElement.setAttribute("font-size",i.finalSize);var n=this.globalData.fontManager.getFontByName(i.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var r=i.fWeight,o=i.fStyle;this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",r)}this.layerElement.setAttribute("aria-label",i.t);var a,s=i.l||[],l=!!this.globalData.fontManager.chars;e=s.length;var c,u=this.mHelper,h="",d=this.data.singleShape,p=0,f=0,m=!0,y=.001*i.tr*i.finalSize;if(!d||l||i.sz){var v,g,_=this.textSpans.length;for(t=0;t<e;t+=1)l&&d&&0!==t||(a=_>t?this.textSpans[t]:createNS(l?"path":"text"),_<=t&&(a.setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4"),this.textSpans[t]=a,this.layerElement.appendChild(a)),a.style.display="inherit"),u.reset(),u.scale(i.finalSize/100,i.finalSize/100),d&&(s[t].n&&(p=-y,f+=i.yOffset,f+=m?1:0,m=!1),this.applyTextPropertiesToMatrix(i,u,s[t].line,p,f),p+=s[t].l||0,p+=y),l?(c=(v=(g=this.globalData.fontManager.getCharData(i.finalText[t],n.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily))&&g.data||{}).shapes?v.shapes[0].it:[],d?h+=this.createPathShape(u,c):a.setAttribute("d",this.createPathShape(u,c))):(d&&a.setAttribute("transform","translate("+u.props[12]+","+u.props[13]+")"),a.textContent=s[t].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));d&&a&&a.setAttribute("d",h)}else{var b=this.textContainer,x="start";switch(i.j){case 1:x="end";break;case 2:x="middle";break;default:x="start"}b.setAttribute("text-anchor",x),b.setAttribute("letter-spacing",y);var w=this.buildTextContents(i.finalText);for(e=w.length,f=i.ps?i.ps[1]+i.ascent:0,t=0;t<e;t+=1)(a=this.textSpans[t]||createNS("tspan")).textContent=w[t],a.setAttribute("x",0),a.setAttribute("y",f),a.style.display="inherit",b.appendChild(a),this.textSpans[t]=a,f+=i.finalLineHeight;this.layerElement.appendChild(b)}for(;t<this.textSpans.length;)this.textSpans[t].style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var i,n,r=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;for(e=o.length,t=0;t<e;t+=1)o[t].n||(i=r[t],n=this.textSpans[t],i._mdf.m&&n.setAttribute("transform",i.m),i._mdf.o&&n.setAttribute("opacity",i.o),i._mdf.sw&&n.setAttribute("stroke-width",i.sw),i._mdf.sc&&n.setAttribute("stroke",i.sc),i._mdf.fc&&n.setAttribute("fill",i.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,i,n,r=this.shapes.length,o=this.stylesList.length,a=[],s=!1;for(i=0;i<o;i+=1){for(n=this.stylesList[i],s=!1,a.length=0,t=0;t<r;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(n)&&(a.push(e),s=e._isAnimated||s);a.length>1&&s&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var i,n=new SVGStyleData(t,e),r=n.pElem;return"st"===t.ty?i=new SVGStrokeStyleData(this,t,n):"fl"===t.ty?i=new SVGFillStyleData(this,t,n):"gf"!==t.ty&&"gs"!==t.ty||(i=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,n),this.globalData.defs.appendChild(i.gf),i.maskId&&(this.globalData.defs.appendChild(i.ms),this.globalData.defs.appendChild(i.of),r.setAttribute("mask","url("+locationHref+"#"+i.maskId+")"))),"st"!==t.ty&&"gs"!==t.ty||(r.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),r.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),r.setAttribute("fill-opacity","0"),1===t.lj&&r.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&r.setAttribute("fill-rule","evenodd"),t.ln&&r.setAttribute("id",t.ln),t.cl&&r.setAttribute("class",t.cl),t.bm&&(r.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(n),this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var i=TransformPropertyFactory.getTransformProperty(this,t,this),n=new SVGTransformData(i,i.o,e);return this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createShapeElement=function(t,e,i){var n=4;"rc"===t.ty?n=5:"el"===t.ty?n=6:"sr"===t.ty&&(n=7);var r=new SVGShapeData(e,i,ShapePropertyFactory.getShapeProp(this,t,n,this));return this.shapes.push(r),this.addShapeToModifiers(r),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var i=0,n=this.animatedContents.length;i<n;){if(this.animatedContents[i].element===e)return;i+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,i=t.styles,n=this.stylesList.length;for(e=0;e<n;e+=1)this.stylesList[e].closed||i.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,i,n,r,o,a){var s,l,c,u,h,d,p=[].concat(o),f=t.length-1,m=[],y=[];for(s=f;s>=0;s-=1){if((d=this.searchProcessedElement(t[s]))?e[s]=i[d-1]:t[s]._render=a,"fl"===t[s].ty||"st"===t[s].ty||"gf"===t[s].ty||"gs"===t[s].ty)d?e[s].style.closed=!1:e[s]=this.createStyleElement(t[s],r),t[s]._render&&n.appendChild(e[s].style.pElem),m.push(e[s].style);else if("gr"===t[s].ty){if(d)for(c=e[s].it.length,l=0;l<c;l+=1)e[s].prevViewData[l]=e[s].it[l];else e[s]=this.createGroupElement(t[s]);this.searchShapes(t[s].it,e[s].it,e[s].prevViewData,e[s].gr,r+1,p,a),t[s]._render&&n.appendChild(e[s].gr)}else"tr"===t[s].ty?(d||(e[s]=this.createTransformElement(t[s],n)),u=e[s].transform,p.push(u)):"sh"===t[s].ty||"rc"===t[s].ty||"el"===t[s].ty||"sr"===t[s].ty?(d||(e[s]=this.createShapeElement(t[s],p,r)),this.setElementStyles(e[s])):"tm"===t[s].ty||"rd"===t[s].ty||"ms"===t[s].ty||"pb"===t[s].ty?(d?(h=e[s]).closed=!1:((h=ShapeModifiers.getModifier(t[s].ty)).init(this,t[s]),e[s]=h,this.shapeModifiers.push(h)),y.push(h)):"rp"===t[s].ty&&(d?(h=e[s]).closed=!0:(h=ShapeModifiers.getModifier(t[s].ty),e[s]=h,h.init(this,t,s,e),this.shapeModifiers.push(h),a=!1),y.push(h));this.addProcessedElement(t[s],s+1)}for(f=m.length,s=0;s<f;s+=1)m[s].closed=!0;for(f=y.length,s=0;s<f;s+=1)y[s].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var t;this.renderModifiers();var e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,i=this.animatedContents.length;for(t=0;t<i;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",i[0]-e[0]+" 0 0 0 "+e[0]+" "+(i[1]-e[1])+" 0 0 0 "+e[1]+" "+(i[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,i=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+i+" 0")}},SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=3==i?0:e,r=2==i?0:e;this.feGaussianBlur.setAttribute("stdDeviation",n+" "+r);var o=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}},SVGStrokeEffect.prototype.initialize=function(){var t,e,i,n,r=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(n=this.elem.maskManager.masksProperties.length,i=0):n=1+(i=this.filterManager.effectElements[0].p.v-1),(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);i<n;i+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:i});if(3===this.filterManager.effectElements[10].p.v){var o=createNS("mask"),a=createElementID();o.setAttribute("id",a),o.setAttribute("mask-type","alpha"),o.appendChild(e),this.elem.globalData.defs.appendChild(o);var s=createNS("g");for(s.setAttribute("mask","url("+locationHref+"#"+a+")");r[0];)s.appendChild(r[0]);this.elem.layerElement.appendChild(s),this.masker=o,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){var e;this.initialized||this.initialize();var i,n,r=this.paths.length;for(e=0;e<r;e+=1)if(-1!==this.paths[e].m&&(i=this.elem.maskManager.viewData[this.paths[e].m],n=this.paths[e].p,(t||this.filterManager._mdf||i.prop._mdf)&&n.setAttribute("d",i.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||i.prop._mdf)){var o;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var a=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),s=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),l=n.getTotalLength();o="0 0 0 "+l*a+" ";var c,u=l*(s-a),h=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,d=Math.floor(u/h);for(c=0;c<d;c+=1)o+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";o+="0 "+10*l+" 0 0"}else o="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;n.setAttribute("stroke-dasharray",o)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var p=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*p[0])+","+bmFloor(255*p[1])+","+bmFloor(255*p[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,r=n[0]+" "+i[0]+" "+e[0],o=n[1]+" "+i[1]+" "+e[1],a=n[2]+" "+i[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",o),this.feFuncB.setAttribute("tableValues",a)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var i=createNS(t);return i.setAttribute("type","table"),e.appendChild(i),i},SVGProLevelsFilter.prototype.getTableValue=function(t,e,i,n,r){for(var o,a,s=0,l=Math.min(t,e),c=Math.max(t,e),u=Array.call(null,{length:256}),h=0,d=r-n,p=e-t;s<=256;)a=(o=s/256)<=l?p<0?r:n:o>=c?p<0?n:r:n+d*Math.pow((o-t)/p,1/i),u[h]=a,h+=1,s+=256/255;return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,i=this.filterManager.effectElements;this.feFuncRComposed&&(t||i[3].p._mdf||i[4].p._mdf||i[5].p._mdf||i[6].p._mdf||i[7].p._mdf)&&(e=this.getTableValue(i[3].p.v,i[4].p.v,i[5].p.v,i[6].p.v,i[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||i[10].p._mdf||i[11].p._mdf||i[12].p._mdf||i[13].p._mdf||i[14].p._mdf)&&(e=this.getTableValue(i[10].p.v,i[11].p.v,i[12].p.v,i[13].p.v,i[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||i[17].p._mdf||i[18].p._mdf||i[19].p._mdf||i[20].p._mdf||i[21].p._mdf)&&(e=this.getTableValue(i[17].p.v,i[18].p.v,i[19].p.v,i[20].p.v,i[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||i[24].p._mdf||i[25].p._mdf||i[26].p._mdf||i[27].p._mdf||i[28].p._mdf)&&(e=this.getTableValue(i[24].p.v,i[25].p.v,i[26].p.v,i[27].p.v,i[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||i[31].p._mdf||i[32].p._mdf||i[33].p._mdf||i[34].p._mdf||i[35].p._mdf)&&(e=this.getTableValue(i[31].p.v,i[32].p.v,i[33].p.v,i[34].p.v,i[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var i=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,r=i*Math.cos(n),o=i*Math.sin(n);this.feOffset.setAttribute("dx",r),this.feOffset.setAttribute("dy",o)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,i){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=i,i.matteElement=createNS("g"),i.matteElement.appendChild(i.layerElement),i.matteElement.appendChild(i.transformedElement),i.baseElement=i.matteElement}function SVGEffects(t){var e,i,n=t.data.ef?t.data.ef.length:0,r=createElementID(),o=filtersFactory.createFilter(r,!0),a=0;for(this.filters=[],e=0;e<n;e+=1)i=null,20===t.data.ef[e].ty?(a+=1,i=new SVGTintFilter(o,t.effectsManager.effectElements[e])):21===t.data.ef[e].ty?(a+=1,i=new SVGFillFilter(o,t.effectsManager.effectElements[e])):22===t.data.ef[e].ty?i=new SVGStrokeEffect(t,t.effectsManager.effectElements[e]):23===t.data.ef[e].ty?(a+=1,i=new SVGTritoneFilter(o,t.effectsManager.effectElements[e])):24===t.data.ef[e].ty?(a+=1,i=new SVGProLevelsFilter(o,t.effectsManager.effectElements[e])):25===t.data.ef[e].ty?(a+=1,i=new SVGDropShadowEffect(o,t.effectsManager.effectElements[e])):28===t.data.ef[e].ty?i=new SVGMatte3Effect(o,t.effectsManager.effectElements[e],t):29===t.data.ef[e].ty&&(a+=1,i=new SVGGaussianBlurEffect(o,t.effectsManager.effectElements[e])),i&&this.filters.push(i);a&&(t.globalData.defs.appendChild(o),t.layerElement.setAttribute("filter","url("+locationHref+"#"+r+")")),this.filters.length&&t.addRenderableComponent(this)}function CVContextData(){var t;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),t=0;t<15;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,i)}function CVCompElement(t,e,i){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CVMaskElement(t,e){var i;this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n=this.masksProperties.length,r=!1;for(i=0;i<n;i+=1)"n"!==this.masksProperties[i].mode&&(r=!0),this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);this.hasMasks=r,r&&this.element.addRenderableComponent(this)}function CVShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,i)}function CVSolidElement(t,e,i){this.initElement(t,e,i)}function CVTextElement(t,e,i){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,i)}function CVEffects(){}function HBaseElement(){}function HSolidElement(t,e,i){this.initElement(t,e,i)}function HCompElement(t,e,i){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,i),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,i){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,i)}function HImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,i)}function HCameraElement(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,t.pe,0,0,this),t.ks.p.s?(this.px=n(this,t.ks.p.x,1,0,this),this.py=n(this,t.ks.p.y,1,0,this),this.pz=n(this,t.ks.p.z,1,0,this)):this.p=n(this,t.ks.p,1,0,this),t.ks.a&&(this.a=n(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var r,o=t.ks.or.k.length;for(r=0;r<o;r+=1)t.ks.or.k[r].to=null,t.ks.or.k[r].ti=null}this.or=n(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,t.ks.rx,0,degToRads,this),this.ry=n(this,t.ks.ry,0,degToRads,this),this.rz=n(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,i=_svgMatteSymbols.length;e<i;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var i=t.layerElement.parentNode;if(i){for(var n,r=i.children,o=0,a=r.length;o<a&&r[o]!==t.layerElement;)o+=1;o<=a-2&&(n=r[o+1]);var s=createNS("use");s.setAttribute("href","#"+e),n?i.insertBefore(s,n):i.appendChild(s)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var i=createElementID(),n=createNS("mask");n.setAttribute("id",e.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var r=t.globalData.defs;r.appendChild(n);var o=createNS("symbol");o.setAttribute("id",i),this.replaceInParent(e,i),o.appendChild(e.layerElement),r.appendChild(o);var a=createNS("use");a.setAttribute("href","#"+i),n.appendChild(a),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,i=0,n=e.length;i<n;)e[i]&&e[i].data.ind===t&&this.setElementAsMask(this.elem,e[i]),i+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);var i=0;for(i=this._length;i<t;i+=1)this.saved[i]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var t=0===this.data.ty;this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(t),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,i,n=t.getContext("2d"),r=this.img.width,o=this.img.height,a=r/o,s=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>s&&"xMidYMid slice"===l||a<s&&"xMidYMid slice"!==l?e=(i=o)*s:i=(e=r)/s,n.drawImage(this.img,(r-e)/2,(o-i)/2,e,i,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t,e=this.canvasContext;for(e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip(),t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,i,n,r=this.element.finalTransform.mat,o=this.element.canvasContext,a=this.masksProperties.length;for(o.beginPath(),t=0;t<a;t+=1)if("n"!==this.masksProperties[t].mode){var s;this.masksProperties[t].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compSize.w,0),o.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),o.lineTo(0,this.element.globalData.compSize.h),o.lineTo(0,0)),n=this.viewData[t].v,e=r.applyToPointArray(n.v[0][0],n.v[0][1],0),o.moveTo(e[0],e[1]);var l=n._length;for(s=1;s<l;s+=1)i=r.applyToTriplePoints(n.o[s-1],n.i[s],n.v[s]),o.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);i=r.applyToTriplePoints(n.o[s-1],n.i[0],n.v[0]),o.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}this.element.globalData.renderer.save(!0),o.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var i={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},n={};if("fl"===t.ty||"st"===t.ty?(n.c=PropertyFactory.getProp(this,t.c,1,255,this),n.c.k||(i.co="rgb("+bmFloor(n.c.v[0])+","+bmFloor(n.c.v[1])+","+bmFloor(n.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(n.s=PropertyFactory.getProp(this,t.s,1,null,this),n.e=PropertyFactory.getProp(this,t.e,1,null,this),n.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,t.g,this)),n.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"===t.ty||"gs"===t.ty){if(i.lc=lineCapEnum[t.lc||2],i.lj=lineJoinEnum[t.lj||2],1==t.lj&&(i.ml=t.ml),n.w=PropertyFactory.getProp(this,t.w,0,null,this),n.w.k||(i.wi=n.w.v),t.d){var r=new DashProperty(this,t.d,"canvas",this);n.d=r,n.d.k||(i.da=n.d.dashArray,i.do=n.d.dashoffset[0])}}else i.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(i),n.style=i,n},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,i,n,r){var o,a,s,l,c,u,h=t.length-1,d=[],p=[],f=[].concat(r);for(o=h;o>=0;o-=1){if((l=this.searchProcessedElement(t[o]))?e[o]=i[l-1]:t[o]._shouldRender=n,"fl"===t[o].ty||"st"===t[o].ty||"gf"===t[o].ty||"gs"===t[o].ty)l?e[o].style.closed=!1:e[o]=this.createStyleElement(t[o],f),d.push(e[o].style);else if("gr"===t[o].ty){if(l)for(s=e[o].it.length,a=0;a<s;a+=1)e[o].prevViewData[a]=e[o].it[a];else e[o]=this.createGroupElement(t[o]);this.searchShapes(t[o].it,e[o].it,e[o].prevViewData,n,f)}else"tr"===t[o].ty?(l||(u=this.createTransformElement(t[o]),e[o]=u),f.push(e[o]),this.addTransformToStyleList(e[o])):"sh"===t[o].ty||"rc"===t[o].ty||"el"===t[o].ty||"sr"===t[o].ty?l||(e[o]=this.createShapeElement(t[o])):"tm"===t[o].ty||"rd"===t[o].ty||"pb"===t[o].ty?(l?(c=e[o]).closed=!1:((c=ShapeModifiers.getModifier(t[o].ty)).init(this,t[o]),e[o]=c,this.shapeModifiers.push(c)),p.push(c)):"rp"===t[o].ty&&(l?(c=e[o]).closed=!0:(c=ShapeModifiers.getModifier(t[o].ty),e[o]=c,c.init(this,t,o,e),this.shapeModifiers.push(c),n=!1),p.push(c));this.addProcessedElement(t[o],o+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),h=p.length,o=0;o<h;o+=1)p[o].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,i,n,r,o,a,s,l,c=this.stylesList.length,u=this.globalData.renderer,h=this.globalData.canvasContext;for(t=0;t<c;t+=1)if(("st"!==(s=(l=this.stylesList[t]).type)&&"gs"!==s||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(u.save(),o=l.elements,"st"===s||"gs"===s?(h.strokeStyle="st"===s?l.co:l.grd,h.lineWidth=l.wi,h.lineCap=l.lc,h.lineJoin=l.lj,h.miterLimit=l.ml||0):h.fillStyle="fl"===s?l.co:l.grd,u.ctxOpacity(l.coOp),"st"!==s&&"gs"!==s&&h.beginPath(),u.ctxTransform(l.preTransforms.finalTransform.props),i=o.length,e=0;e<i;e+=1){for("st"!==s&&"gs"!==s||(h.beginPath(),l.da&&(h.setLineDash(l.da),h.lineDashOffset=l.do)),r=(a=o[e].trNodes).length,n=0;n<r;n+=1)"m"===a[n].t?h.moveTo(a[n].p[0],a[n].p[1]):"c"===a[n].t?h.bezierCurveTo(a[n].pts[0],a[n].pts[1],a[n].pts[2],a[n].pts[3],a[n].pts[4],a[n].pts[5]):h.closePath();"st"!==s&&"gs"!==s||(h.stroke(),l.da&&h.setLineDash(this.dashResetter))}"st"!==s&&"gs"!==s&&h.fill(l.r),u.restore()}},CVShapeElement.prototype.renderShape=function(t,e,i,n){var r,o;for(o=t,r=e.length-1;r>=0;r-=1)"tr"===e[r].ty?(o=i[r].transform,this.renderShapeTransform(t,o)):"sh"===e[r].ty||"el"===e[r].ty||"rc"===e[r].ty||"sr"===e[r].ty?this.renderPath(e[r],i[r]):"fl"===e[r].ty?this.renderFill(e[r],i[r],o):"st"===e[r].ty?this.renderStroke(e[r],i[r],o):"gf"===e[r].ty||"gs"===e[r].ty?this.renderGradientFill(e[r],i[r],o):"gr"===e[r].ty?this.renderShape(o,e[r].it,i[r].it):e[r].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var i,n,r,o=t.trNodes,a=e.paths,s=a._length;o.length=0;var l=t.transforms.finalTransform;for(r=0;r<s;r+=1){var c=a.shapes[r];if(c&&c.v){for(n=c._length,i=1;i<n;i+=1)1===i&&o.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),o.push({t:"c",pts:l.applyToTriplePoints(c.o[i-1],c.i[i],c.v[i])});1===n&&o.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&n&&(o.push({t:"c",pts:l.applyToTriplePoints(c.o[i-1],c.i[0],c.v[0])}),o.push({t:"z"}))}}t.trNodes=o}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var i,n=e.styledShapes.length;for(i=0;i<n;i+=1)this.renderStyledShape(e.styledShapes[i],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,i){var n=e.style;(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*i.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,i){var n,r=e.style;if(!r.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var o,a=this.globalData.canvasContext,s=e.s.v,l=e.e.v;if(1===t.t)n=a.createLinearGradient(s[0],s[1],l[0],l[1]);else{var c=Math.sqrt(Math.pow(s[0]-l[0],2)+Math.pow(s[1]-l[1],2)),u=Math.atan2(l[1]-s[1],l[0]-s[0]),h=e.h.v;h>=1?h=.99:h<=-1&&(h=-.99);var d=c*h,p=Math.cos(u+e.a.v)*d+s[0],f=Math.sin(u+e.a.v)*d+s[1];n=a.createRadialGradient(p,f,0,s[0],s[1],c)}var m=t.g.p,y=e.g.c,v=1;for(o=0;o<m;o+=1)e.g._hasOpacity&&e.g._collapsable&&(v=e.g.o[2*o+1]),n.addColorStop(y[4*o]/100,"rgba("+y[4*o+1]+","+y[4*o+2]+","+y[4*o+3]+","+v+")");r.grd=n}r.coOp=e.o.v*i.opacity},CVShapeElement.prototype.renderStroke=function(t,e,i){var n=e.style,r=e.d;r&&(r._mdf||this._isFirstFrame)&&(n.da=r.dashArray,n.do=r.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*i.opacity),(e.w._mdf||this._isFirstFrame)&&(n.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var i=!1;t.sc&&(i=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var n,r,o,a,s,l,c,u,h,d,p,f,m=this.globalData.fontManager.getFontByName(t.f),y=t.l,v=this.mHelper;this.stroke=i,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,r=t.finalText.length;var g=this.data.singleShape,_=.001*t.tr*t.finalSize,b=0,x=0,w=!0,S=0;for(n=0;n<r;n+=1){for(a=(o=this.globalData.fontManager.getCharData(t.finalText[n],m.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&o.data||{},v.reset(),g&&y[n].n&&(b=-_,x+=t.yOffset,x+=w?1:0,w=!1),h=(c=a.shapes?a.shapes[0].it:[]).length,v.scale(t.finalSize/100,t.finalSize/100),g&&this.applyTextPropertiesToMatrix(t,v,y[n].line,b,x),p=createSizedArray(h),u=0;u<h;u+=1){for(l=c[u].ks.k.i.length,d=c[u].ks.k,f=[],s=1;s<l;s+=1)1===s&&f.push(v.applyToX(d.v[0][0],d.v[0][1],0),v.applyToY(d.v[0][0],d.v[0][1],0)),f.push(v.applyToX(d.o[s-1][0],d.o[s-1][1],0),v.applyToY(d.o[s-1][0],d.o[s-1][1],0),v.applyToX(d.i[s][0],d.i[s][1],0),v.applyToY(d.i[s][0],d.i[s][1],0),v.applyToX(d.v[s][0],d.v[s][1],0),v.applyToY(d.v[s][0],d.v[s][1],0));f.push(v.applyToX(d.o[s-1][0],d.o[s-1][1],0),v.applyToY(d.o[s-1][0],d.o[s-1][1],0),v.applyToX(d.i[0][0],d.i[0][1],0),v.applyToY(d.i[0][0],d.i[0][1],0),v.applyToX(d.v[0][0],d.v[0][1],0),v.applyToY(d.v[0][0],d.v[0][1],0)),p[u]=f}g&&(b+=y[n].l,b+=_),this.textSpans[S]?this.textSpans[S].elem=p:this.textSpans[S]={elem:p},S+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,i,n,r,o,a=this.canvasContext;a.font=this.values.fValue,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var s,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;e=c.length;var u,h,d=null,p=null,f=null;for(t=0;t<e;t+=1)if(!c[t].n){if((s=l[t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(s.p),this.globalData.renderer.ctxOpacity(s.o)),this.fill){for(s&&s.fc?d!==s.fc&&(d=s.fc,a.fillStyle=s.fc):d!==this.values.fill&&(d=this.values.fill,a.fillStyle=this.values.fill),n=(u=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),i=0;i<n;i+=1)for(o=(h=u[i]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),r=2;r<o;r+=6)this.globalData.canvasContext.bezierCurveTo(h[r],h[r+1],h[r+2],h[r+3],h[r+4],h[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(s&&s.sw?f!==s.sw&&(f=s.sw,a.lineWidth=s.sw):f!==this.values.sWidth&&(f=this.values.sWidth,a.lineWidth=this.values.sWidth),s&&s.sc?p!==s.sc&&(p=s.sc,a.strokeStyle=s.sc):p!==this.values.stroke&&(p=this.values.stroke,a.strokeStyle=this.values.stroke),n=(u=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),i=0;i<n;i+=1)for(o=(h=u[i]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),r=2;r<o;r+=6)this.globalData.canvasContext.bezierCurveTo(h[r],h[r+1],h[r+2],h[r+3],h[r+4],h[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}s&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var i,n=0;n<e;)this.elements[n]&&this.elements[n].getBaseElement&&(i=this.elements[n].getBaseElement()),n+=1;i?this.layerElement.insertBefore(t,i):this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)e=t[i].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var i,n,r,o,a,s=t.sh.v,l=t.transformers,c=s._length;if(!(c<=1)){for(i=0;i<c-1;i+=1)n=this.getTransformedPoint(l,s.v[i]),r=this.getTransformedPoint(l,s.o[i]),o=this.getTransformedPoint(l,s.i[i+1]),a=this.getTransformedPoint(l,s.v[i+1]),this.checkBounds(n,r,o,a,e);s.c&&(n=this.getTransformedPoint(l,s.v[i]),r=this.getTransformedPoint(l,s.o[i]),o=this.getTransformedPoint(l,s.i[0]),a=this.getTransformedPoint(l,s.v[0]),this.checkBounds(n,r,o,a,e))}},HShapeElement.prototype.checkBounds=function(t,e,i,n,r){this.getBoundsOfCurve(t,e,i,n);var o=this.shapeBoundingBox;r.x=bmMin(o.left,r.x),r.xMax=bmMax(o.right,r.xMax),r.y=bmMin(o.top,r.y),r.yMax=bmMax(o.bottom,r.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,i,n){for(var r,o,a,s,l,c,u,h=[[t[0],n[0]],[t[1],n[1]]],d=0;d<2;++d)o=6*t[d]-12*e[d]+6*i[d],r=-3*t[d]+9*e[d]-9*i[d]+3*n[d],a=3*e[d]-3*t[d],o|=0,a|=0,0===(r|=0)&&0===o||(0===r?(s=-a/o)>0&&s<1&&h[d].push(this.calculateF(s,t,e,i,n,d)):(l=o*o-4*a*r)>=0&&((c=(-o+bmSqrt(l))/(2*r))>0&&c<1&&h[d].push(this.calculateF(c,t,e,i,n,d)),(u=(-o-bmSqrt(l))/(2*r))>0&&u<1&&h[d].push(this.calculateF(u,t,e,i,n,d))));this.shapeBoundingBox.left=bmMin.apply(null,h[0]),this.shapeBoundingBox.top=bmMin.apply(null,h[1]),this.shapeBoundingBox.right=bmMax.apply(null,h[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,h[1])},HShapeElement.prototype.calculateF=function(t,e,i,n,r,o){return bmPow(1-t,3)*e[o]+3*bmPow(1-t,2)*t*i[o]+3*(1-t)*bmPow(t,2)*n[o]+bmPow(t,3)*r[o]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var i,n=t.length;for(i=0;i<n;i+=1)t[i]&&t[i].sh?this.calculateShapeBoundingBox(t[i],e):t[i]&&t[i].it&&this.calculateBoundingBox(t[i].it,e)},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var i=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),i=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),i=!0),i||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var n=this.shapeCont.style,r="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";n.transform=r,n.webkitTransform=r}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,i=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=i,e.color=i,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var n,r,o=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",o.fClass)this.innerElem.className=o.fClass;else{e.fontFamily=o.fFamily;var a=t.fWeight,s=t.fStyle;e.fontStyle=s,e.fontWeight=a}var l,c,u,h=t.l;r=h.length;var d,p=this.mHelper,f="",m=0;for(n=0;n<r;n+=1){if(this.globalData.fontManager.chars?(this.textPaths[m]?l=this.textPaths[m]:((l=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),l.setAttribute("stroke-linejoin",lineJoinEnum[2]),l.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[m]?u=(c=this.textSpans[m]).children[0]:((c=createTag("div")).style.lineHeight=0,(u=createNS("svg")).appendChild(l),styleDiv(c)))):this.isMasked?l=this.textPaths[m]?this.textPaths[m]:createNS("text"):this.textSpans[m]?(c=this.textSpans[m],l=this.textPaths[m]):(styleDiv(c=createTag("span")),styleDiv(l=createTag("span")),c.appendChild(l)),this.globalData.fontManager.chars){var y,v=this.globalData.fontManager.getCharData(t.finalText[n],o.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(y=v?v.data:null,p.reset(),y&&y.shapes&&(d=y.shapes[0].it,p.scale(t.finalSize/100,t.finalSize/100),f=this.createPathShape(p,d),l.setAttribute("d",f)),this.isMasked)this.innerElem.appendChild(l);else{if(this.innerElem.appendChild(c),y&&y.shapes){document.body.appendChild(u);var g=u.getBBox();u.setAttribute("width",g.width+2),u.setAttribute("height",g.height+2),u.setAttribute("viewBox",g.x-1+" "+(g.y-1)+" "+(g.width+2)+" "+(g.height+2));var _=u.style,b="translate("+(g.x-1)+"px,"+(g.y-1)+"px)";_.transform=b,_.webkitTransform=b,h[n].yOffset=g.y-1}else u.setAttribute("width",1),u.setAttribute("height",1);c.appendChild(u)}}else if(l.textContent=h[n].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(l);else{this.innerElem.appendChild(c);var x=l.style,w="translate3d(0,"+-t.finalSize/1.2+"px,0)";x.transform=w,x.webkitTransform=w}this.isMasked?this.textSpans[m]=l:this.textSpans[m]=c,this.textSpans[m].style.display="block",this.textPaths[m]=l,m+=1}for(;m<this.textSpans.length;)this.textSpans[m].style.display="none",m+=1},HTextElement.prototype.renderInnerContent=function(){var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var i,n,r,o,a,s=0,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;for(n=c.length,i=0;i<n;i+=1)c[i].n?s+=1:(o=this.textSpans[i],a=this.textPaths[i],r=l[s],s+=1,r._mdf.m&&(this.isMasked?o.setAttribute("transform",r.m):(o.style.webkitTransform=r.m,o.style.transform=r.m)),o.style.opacity=r.o,r.sw&&r._mdf.sw&&a.setAttribute("stroke-width",r.sw),r.sc&&r._mdf.sc&&a.setAttribute("stroke",r.sc),r.fc&&r._mdf.fc&&(a.setAttribute("fill",r.fc),a.style.color=r.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.innerElem.getBBox();if(this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.svgElement.setAttribute("width",u.width)),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.svgElement.setAttribute("height",u.height)),this.currentBBox.w!==u.width+2||this.currentBBox.h!==u.height+2||this.currentBBox.x!==u.x-1||this.currentBBox.y!==u.y-1){this.currentBBox.w=u.width+2,this.currentBBox.h=u.height+2,this.currentBBox.x=u.x-1,this.currentBBox.y=u.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var h="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=h,t.webkitTransform=h}}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,i,n,r=this.comp.threeDElements.length;for(t=0;t<r;t+=1)if("3d"===(e=this.comp.threeDElements[t]).type){i=e.perspectiveElem.style,n=e.container.style;var o=this.pe.v+"px",a="0px 0px 0px",s="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";i.perspective=o,i.webkitPerspective=o,n.transformOrigin=a,n.mozTransformOrigin=a,n.webkitTransformOrigin=a,i.transform=s,i.webkitTransform=s}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,i=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)i=this.hierarchy[t].finalTransform.mProp._mdf||i;if(i||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var n=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-n.p.v[0],-n.p.v[1],n.p.v[2]),this.mat.rotateX(-n.or.v[0]).rotateY(-n.or.v[1]).rotateZ(n.or.v[2]),this.mat.rotateX(-n.rx.v).rotateY(-n.ry.v).rotateZ(n.rz.v),this.mat.scale(1/n.s.v[0],1/n.s.v[1],1/n.s.v[2]),this.mat.translate(n.a.v[0],n.a.v[1],n.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var r;r=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var o=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)),a=[r[0]/o,r[1]/o,r[2]/o],s=Math.sqrt(a[2]*a[2]+a[0]*a[0]),l=Math.atan2(a[1],s),c=Math.atan2(a[0],-a[2]);this.mat.rotateY(c).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var u=!this._prevMat.equals(this.mat);if((u||this.pe._mdf)&&this.comp.threeDElements){var h,d,p;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)if("3d"===(h=this.comp.threeDElements[t]).type){if(u){var f=this.mat.toCSS();(p=h.container.style).transform=f,p.webkitTransform=f}this.pe._mdf&&((d=h.perspectiveElem.style).perspective=this.pe.v+"px",d.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=function(){var t={},e=[],i=0,n=0,r=0,o=!0,a=!1;function s(t){for(var i=0,r=t.target;i<n;)e[i].animation===r&&(e.splice(i,1),i-=1,n-=1,r.isPaused||u()),i+=1}function l(t,i){if(!t)return null;for(var r=0;r<n;){if(e[r].elem===t&&null!==e[r].elem)return e[r].animation;r+=1}var o=new AnimationItem;return h(o,t),o.setData(t,i),o}function c(){r+=1,f()}function u(){r-=1}function h(t,i){t.addEventListener("destroy",s),t.addEventListener("_active",c),t.addEventListener("_idle",u),e.push({elem:i,animation:t}),n+=1}function d(t){var s,l=t-i;for(s=0;s<n;s+=1)e[s].animation.advanceTime(l);i=t,r&&!a?window.requestAnimationFrame(d):o=!0}function p(t){i=t,window.requestAnimationFrame(d)}function f(){!a&&r&&o&&(window.requestAnimationFrame(p),o=!1)}return t.registerAnimation=l,t.loadAnimation=function(t){var e=new AnimationItem;return h(e,null),e.setParams(t),e},t.setSpeed=function(t,i){var r;for(r=0;r<n;r+=1)e[r].animation.setSpeed(t,i)},t.setDirection=function(t,i){var r;for(r=0;r<n;r+=1)e[r].animation.setDirection(t,i)},t.play=function(t){var i;for(i=0;i<n;i+=1)e[i].animation.play(t)},t.pause=function(t){var i;for(i=0;i<n;i+=1)e[i].animation.pause(t)},t.stop=function(t){var i;for(i=0;i<n;i+=1)e[i].animation.stop(t)},t.togglePause=function(t){var i;for(i=0;i<n;i+=1)e[i].animation.togglePause(t)},t.searchAnimations=function(t,e,i){var n,r=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),o=r.length;for(n=0;n<o;n+=1)i&&r[n].setAttribute("data-bm-type",i),l(r[n],t);if(e&&0===o){i||(i="svg");var a=document.getElementsByTagName("body")[0];a.innerText="";var s=createTag("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",i),a.appendChild(s),l(s,t)}},t.resize=function(){var t;for(t=0;t<n;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,i,r){var o;for(o=0;o<n;o+=1)e[o].animation.goToAndStop(t,i,r)},t.destroy=function(t){var i;for(i=n-1;i>=0;i-=1)e[i].animation.destroy(t)},t.freeze=function(){a=!0},t.unfreeze=function(){a=!1,f()},t.setVolume=function(t,i){var r;for(r=0;r<n;r+=1)e[r].animation.setVolume(t,i)},t.mute=function(t){var i;for(i=0;i<n;i+=1)e[i].animation.mute(t)},t.unmute=function(t){var i;for(i=0;i<n;i+=1)e[i].animation.unmute(t)},t.getRegisteredAnimations=function(){var t,i=e.length,n=[];for(t=0;t<i;t+=1)n.push(e[t].animation);return n},t}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[]};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";switch(t.animType?e=t.animType:t.renderer&&(e=t.renderer),e){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;default:this.renderer=new HybridRenderer(this,t.rendererSettings)}this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.configAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(t.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(t,e){e&&"object"!==typeof e&&(e=JSON.parse(e));var i={wrapper:t,animationData:e},n=t.attributes;i.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",i.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:"canvas";var r=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";"false"===r?i.loop=!1:"true"===r?i.loop=!0:""!==r&&(i.loop=parseInt(r,10));var o=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:!n.getNamedItem("bm-autoplay")||n.getNamedItem("bm-autoplay").value;i.autoplay="false"!==o,i.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"","false"===(n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"")&&(i.prerender=!1),this.setParams(i)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,i,n=this.animationData.layers,r=n.length,o=t.layers,a=o.length;for(i=0;i<a;i+=1)for(e=0;e<r;){if(n[e].id===o[i].id){n[e]=o[i];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(r=t.assets.length,e=0;e<r;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var i=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(i,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()&&(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,i=0;i<this.markers.length;i+=1)if((e=this.markers[i]).payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,i){if(!i||this.name===i){var n=Number(t);if(isNaN(n)){var r=this.getMarkerData(t);r&&this.goToAndStop(r.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,i){if(!i||this.name===i){var n=Number(t);if(isNaN(n)){var r=this.getMarkerData(t);r&&(r.duration?this.playSegments([r.time,r.time+r.duration],!0):this.goToAndStop(r.time,!0))}else this.goToAndStop(n,e,i);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,i=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(i=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(i=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),i&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?i=t:this.currentRawFrame+this.firstFrame>e&&(i=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==i&&this.goToAndStop(i,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===typeof t[0]){var i,n=t.length;for(i=0;i<n;i+=1)this.segments.push(t[i])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,i=this.assets.length;e<i;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var Expressions=function(){var t={initExpressions:function(t){var e=0,i=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0===(e-=1)&&function(){var t,e=i.length;for(t=0;t<e;t+=1)i[t].release();i.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===i.indexOf(t)&&i.push(t)}}};return t}();expressionsPlugin=Expressions;var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null;function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||"boolean"===t||"string"===t||e instanceof Number}function $bm_neg(t){var e=typeof t;if("number"===e||"boolean"===e||t instanceof Number)return-t;if($bm_isInstanceOfArray(t)){var i,n=t.length,r=[];for(i=0;i<n;i+=1)r[i]=-t[i];return r}return t.propType?t.v:-t}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var i=typeof t,n=typeof e;if("string"===i||"string"===n)return t+e;if(isNumerable(i,t)&&isNumerable(n,e))return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(n,e))return(t=t.slice(0))[0]+=e,t;if(isNumerable(i,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var r=0,o=t.length,a=e.length,s=[];r<o||r<a;)("number"===typeof t[r]||t[r]instanceof Number)&&("number"===typeof e[r]||e[r]instanceof Number)?s[r]=t[r]+e[r]:s[r]=void 0===e[r]?t[r]:t[r]||e[r],r+=1;return s}return 0}var add=sum;function sub(t,e){var i=typeof t,n=typeof e;if(isNumerable(i,t)&&isNumerable(n,e))return"string"===i&&(t=parseInt(t,10)),"string"===n&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(n,e))return(t=t.slice(0))[0]-=e,t;if(isNumerable(i,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var r=0,o=t.length,a=e.length,s=[];r<o||r<a;)("number"===typeof t[r]||t[r]instanceof Number)&&("number"===typeof e[r]||e[r]instanceof Number)?s[r]=t[r]-e[r]:s[r]=void 0===e[r]?t[r]:t[r]||e[r],r+=1;return s}return 0}function mul(t,e){var i,n,r,o=typeof t,a=typeof e;if(isNumerable(o,t)&&isNumerable(a,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(r=t.length,i=createTypedArray("float32",r),n=0;n<r;n+=1)i[n]=t[n]*e;return i}if(isNumerable(o,t)&&$bm_isInstanceOfArray(e)){for(r=e.length,i=createTypedArray("float32",r),n=0;n<r;n+=1)i[n]=t*e[n];return i}return 0}function div(t,e){var i,n,r,o=typeof t,a=typeof e;if(isNumerable(o,t)&&isNumerable(a,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(r=t.length,i=createTypedArray("float32",r),n=0;n<r;n+=1)i[n]=t[n]/e;return i}if(isNumerable(o,t)&&$bm_isInstanceOfArray(e)){for(r=e.length,i=createTypedArray("float32",r),n=0;n<r;n+=1)i[n]=t/e[n];return i}return 0}function mod(t,e){return"string"===typeof t&&(t=parseInt(t,10)),"string"===typeof e&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,i){if(e>i){var n=i;i=e,e=n}return Math.min(Math.max(t,e),i)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"===typeof t||t instanceof Number)return e=e||0,Math.abs(t-e);var i;e||(e=helperLengthArray);var n=Math.min(t.length,e.length),r=0;for(i=0;i<n;i+=1)r+=Math.pow(e[i]-t[i],2);return Math.sqrt(r)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,i,n=t[0],r=t[1],o=t[2],a=Math.max(n,r,o),s=Math.min(n,r,o),l=(a+s)/2;if(a===s)e=0,i=0;else{var c=a-s;switch(i=l>.5?c/(2-a-s):c/(a+s),a){case n:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-n)/c+2;break;case o:e=(n-r)/c+4}e/=6}return[e,i,l,t[3]]}function hue2rgb(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function hslToRgb(t){var e,i,n,r=t[0],o=t[1],a=t[2];if(0===o)e=a,n=a,i=a;else{var s=a<.5?a*(1+o):a+o-a*o,l=2*a-s;e=hue2rgb(l,s,r+1/3),i=hue2rgb(l,s,r),n=hue2rgb(l,s,r-1/3)}return[e,i,n,t[3]]}function linear(t,e,i,n,r){if(void 0!==n&&void 0!==r||(n=e,r=i,e=0,i=1),i<e){var o=i;i=e,e=o}if(t<=e)return n;if(t>=i)return r;var a,s=i===e?0:(t-e)/(i-e);if(!n.length)return n+(r-n)*s;var l=n.length,c=createTypedArray("float32",l);for(a=0;a<l;a+=1)c[a]=n[a]+(r[a]-n[a])*s;return c}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var i,n=e.length;t||(t=createTypedArray("float32",n));var r=createTypedArray("float32",n),o=BMMath.random();for(i=0;i<n;i+=1)r[i]=t[i]+o*(e[i]-t[i]);return r}return void 0===t&&(t=0),t+BMMath.random()*(e-t)}function createPath(t,e,i,n){var r,o=t.length,a=shapePool.newElement();a.setPathData(!!n,o);var s,l,c=[0,0];for(r=0;r<o;r+=1)s=e&&e[r]?e[r]:c,l=i&&i[r]?i[r]:c,a.setTripleAt(t[r][0],t[r][1],l[0]+t[r][0],l[1]+t[r][1],s[0]+t[r][0],s[1]+t[r][1],r,!0);return a}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){var i,n,r=this.pv.length?this.pv.length:1,o=createTypedArray("float32",r),a=Math.floor(5*time);for(i=0,n=0;i<a;){for(n=0;n<r;n+=1)o[n]+=-e+2*e*BMMath.random();i+=1}var s=5*time,l=s-Math.floor(s),c=createTypedArray("float32",r);if(r>1){for(n=0;n<r;n+=1)c[n]=this.pv[n]+o[n]+(-e+2*e*BMMath.random())*l;return c}return this.pv+o[0]+(-e+2*e*BMMath.random())*l}.bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],n=Math.atan2(i[0],Math.sqrt(i[1]*i[1]+i[2]*i[2]))/degToRads;return[-Math.atan2(i[1],i[2])/degToRads,n,0]}function easeOut(t,e,i,n,r){return applyEase(easeOutBez,t,e,i,n,r)}function easeIn(t,e,i,n,r){return applyEase(easeInBez,t,e,i,n,r)}function ease(t,e,i,n,r){return applyEase(easeInOutBez,t,e,i,n,r)}function applyEase(t,e,i,n,r,o){void 0===r?(r=i,o=n):e=(e-i)/(n-i),e>1?e=1:e<0&&(e=0);var a=t(e);if($bm_isInstanceOfArray(r)){var s,l=r.length,c=createTypedArray("float32",l);for(s=0;s<l;s+=1)c[s]=(o[s]-r[s])*a+r[s];return c}return(o-r)*a+r}function nearestKey(t){var e,i,n,r=data.k.length;if(data.k.length&&"number"!==typeof data.k[0])if(i=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)i=1,n=data.k[0].t;else{for(e=0;e<r-1;e+=1){if(t===data.k[e].t){i=e+1,n=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(i=e+2,n=data.k[e+1].t):(i=e+1,n=data.k[e].t);break}}-1===i&&(i=e+1,n=data.k[e].t)}else i=0,n=0;var o={};return o.index=i,o.time=n/elem.comp.globalData.frameRate,o}function key(t){var e,i,n;if(!data.k.length||"number"===typeof data.k[0])throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var r=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(n=r.length,i=0;i<n;i+=1)e[i]=r[i],e.value[i]=r[i];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"===typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"===typeof value?void 0===e?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=0===t?0:Math.floor(time*t)/t,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(t,e,i){e.x&&(i.k=!0,i.x=!0,i.initiateExpression=ExpressionManager.initiateExpression,i.effectsSequence.push(i.initiateExpression(t,e,i).bind(i)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),i=this.getValueAtTime(t+-.01),n=0;if(e.length){var r;for(r=0;r<e.length;r+=1)n+=Math.pow(i[r]-e[r],2);n=100*Math.sqrt(n)}else n=0;return n},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,i,n=-.001,r=this.getValueAtTime(t),o=this.getValueAtTime(t+n);if(r.length)for(e=createTypedArray("float32",r.length),i=0;i<r.length;i+=1)e[i]=(o[i]-r[i])/n;else e=(o-r)/n;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};!function(){function t(t,e,i){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var n,r,o,a,s,l=this.comp.renderedFrame,c=this.keyframes,u=c[c.length-1].t;if(l<=u)return this.pv;if(i?r=u-(n=e?Math.abs(u-this.elem.comp.globalData.frameRate*e):Math.max(0,u-this.elem.data.ip)):((!e||e>c.length-1)&&(e=c.length-1),n=u-(r=c[c.length-1-e].t)),"pingpong"===t){if(Math.floor((l-r)/n)%2!==0)return this.getValueAtTime((n-(l-r)%n+r)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var h=this.getValueAtTime(r/this.comp.globalData.frameRate,0),d=this.getValueAtTime(u/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((l-r)%n+r)/this.comp.globalData.frameRate,0),f=Math.floor((l-r)/n);if(this.pv.length){for(a=(s=new Array(h.length)).length,o=0;o<a;o+=1)s[o]=(d[o]-h[o])*f+p[o];return s}return(d-h)*f+p}if("continue"===t){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),y=this.getValueAtTime((u-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,o=0;o<a;o+=1)s[o]=m[o]+(m[o]-y[o])*((l-u)/this.comp.globalData.frameRate)/5e-4;return s}return m+(l-u)/.001*(m-y)}}return this.getValueAtTime(((l-r)%n+r)/this.comp.globalData.frameRate,0)}function e(t,e,i){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var n,r,o,a,s,l=this.comp.renderedFrame,c=this.keyframes,u=c[0].t;if(l>=u)return this.pv;if(i?r=u+(n=e?Math.abs(this.elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-u)):((!e||e>c.length-1)&&(e=c.length-1),n=(r=c[e].t)-u),"pingpong"===t){if(Math.floor((u-l)/n)%2===0)return this.getValueAtTime(((u-l)%n+u)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var h=this.getValueAtTime(u/this.comp.globalData.frameRate,0),d=this.getValueAtTime(r/this.comp.globalData.frameRate,0),p=this.getValueAtTime((n-(u-l)%n+u)/this.comp.globalData.frameRate,0),f=Math.floor((u-l)/n)+1;if(this.pv.length){for(a=(s=new Array(h.length)).length,o=0;o<a;o+=1)s[o]=p[o]-(d[o]-h[o])*f;return s}return p-(d-h)*f}if("continue"===t){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),y=this.getValueAtTime((u+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,o=0;o<a;o+=1)s[o]=m[o]+(m[o]-y[o])*(u-l)/.001;return s}return m+(m-y)*(u-l)/.001}}return this.getValueAtTime((n-((u-l)%n+u))/this.comp.globalData.frameRate,0)}function i(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var i,n,r=this.comp.renderedFrame/this.comp.globalData.frameRate,o=r-t,a=e>1?(r+t-o)/(e-1):1,s=0,l=0;for(i=this.pv.length?createTypedArray("float32",this.pv.length):0;s<e;){if(n=this.getValueAtTime(o+s*a),this.pv.length)for(l=0;l<this.pv.length;l+=1)i[l]+=n[l];else i+=n;s+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)i[l]/=e;else i/=e;return i}function n(t){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var e=this._transformCachingAtTime.v;if(e.cloneFromProps(this.pre.props),this.appliedTransformations<1){var i=this.a.getValueAtTime(t);e.translate(-i[0]*this.a.mult,-i[1]*this.a.mult,i[2]*this.a.mult)}if(this.appliedTransformations<2){var n=this.s.getValueAtTime(t);e.scale(n[0]*this.s.mult,n[1]*this.s.mult,n[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var r=this.sk.getValueAtTime(t),o=this.sa.getValueAtTime(t);e.skewFromAxis(-r*this.sk.mult,o*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var a=this.r.getValueAtTime(t);e.rotate(-a*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var s=this.rz.getValueAtTime(t),l=this.ry.getValueAtTime(t),c=this.rx.getValueAtTime(t),u=this.or.getValueAtTime(t);e.rotateZ(-s*this.rz.mult).rotateY(l*this.ry.mult).rotateX(c*this.rx.mult).rotateZ(-u[2]*this.or.mult).rotateY(u[1]*this.or.mult).rotateX(u[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var h=this.px.getValueAtTime(t),d=this.py.getValueAtTime(t);if(this.data.p.z){var p=this.pz.getValueAtTime(t);e.translate(h*this.px.mult,d*this.py.mult,-p*this.pz.mult)}else e.translate(h*this.px.mult,d*this.py.mult,0)}else{var f=this.p.getValueAtTime(t);e.translate(f[0]*this.p.mult,f[1]*this.p.mult,-f[2]*this.p.mult)}return e}function r(){return this.v.clone(new Matrix)}var o=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,i){var a=o(t,e,i);return a.dynamicProperties.length?a.getValueAtTime=n.bind(a):a.getValueAtTime=r.bind(a),a.setGroupProperty=expressionHelpers.setGroupProperty,a};var a=PropertyFactory.getProp;PropertyFactory.getProp=function(n,r,o,s,l){var c=a(n,r,o,s,l);c.kf?c.getValueAtTime=expressionHelpers.getValueAtTime.bind(c):c.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(c),c.setGroupProperty=expressionHelpers.setGroupProperty,c.loopOut=t,c.loopIn=e,c.smooth=i,c.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(c),c.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(c),c.numKeys=1===r.a?r.k.length:0,c.propertyIndex=r.ix;var u=0;return 0!==o&&(u=createTypedArray("float32",1===r.a?r.k[0].s.length:r.k.length)),c._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:u},expressionHelpers.searchExpressions(n,r,c),c.k&&l.addDynamicProperty(c),c};var s=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function c(){}c.prototype={vertices:function(t,e){this.k&&this.getValue();var i,n=this.v;void 0!==e&&(n=this.getValueAtTime(e,0));var r=n._length,o=n[t],a=n.v,s=createSizedArray(r);for(i=0;i<r;i+=1)s[i]="i"===t||"o"===t?[o[i][0]-a[i][0],o[i][1]-a[i][1]]:[o[i][0],o[i][1]];return s},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var i=this.v;void 0!==e&&(i=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(i));for(var n,r=this._segmentsLength,o=r.lengths,a=r.totalLength*t,s=0,l=o.length,c=0;s<l;){if(c+o[s].addedLength>a){var u=s,h=i.c&&s===l-1?0:s+1,d=(a-c)/o[s].addedLength;n=bez.getPointInSegment(i.v[u],i.v[h],i.o[u],i.i[h],d,o[s]);break}c+=o[s].addedLength,s+=1}return n||(n=i.c?[i.v[0][0],i.v[0][1]]:[i.v[i._length-1][0],i.v[i._length-1][1]]),n},vectorOnPath:function(t,e,i){1==t?t=this.v.c:0==t&&(t=.999);var n=this.pointOnPath(t,e),r=this.pointOnPath(t+.001,e),o=r[0]-n[0],a=r[1]-n[1],s=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));return 0===s?[0,0]:"tangent"===i?[o/s,a/s]:[-a/s,o/s]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([c],s),extendPrototype([c],l),l.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var u=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,i,n,r){var o=u(t,e,i,n,r);return o.propertyIndex=e.ix,o.lock=!1,3===i?expressionHelpers.searchExpressions(t,e.pt,o):4===i&&expressionHelpers.searchExpressions(t,e.ks,o),o.k&&t.addDynamicProperty(o),o}}(),TextProperty.prototype.getExpressionValue=function(t,e){var i=this.calculateExpression(e);if(t.t!==i){var n={};return this.copyData(n,t),n.t=i.toString(),n.__complete=!1,n}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null};var ShapePathInterface=function(t,e,i){var n=e.sh;function r(t){return"Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t?r.path:null}var o=propertyGroupFactory(r,i);return n.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(r,{path:{get:function(){return n.k&&n.getValue(),n}},shape:{get:function(){return n.k&&n.getValue(),n}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:i}}),r},propertyGroupFactory=function(t,e){return function(i){return(i=void 0===i?1:i)<=0?t:e(i-1)}},PropertyInterface=function(t,e){var i={_name:t};return function(t){return(t=void 0===t?1:t)<=0?i:e(t-1)}},ShapeExpressionInterface=function(){function t(t,a,d){var p,f=[],m=t?t.length:0;for(p=0;p<m;p+=1)"gr"===t[p].ty?f.push(e(t[p],a[p],d)):"fl"===t[p].ty?f.push(i(t[p],a[p],d)):"st"===t[p].ty?f.push(r(t[p],a[p],d)):"tm"===t[p].ty?f.push(o(t[p],a[p],d)):"tr"===t[p].ty||("el"===t[p].ty?f.push(s(t[p],a[p],d)):"sr"===t[p].ty?f.push(l(t[p],a[p],d)):"sh"===t[p].ty?f.push(ShapePathInterface(t[p],a[p],d)):"rc"===t[p].ty?f.push(c(t[p],a[p],d)):"rd"===t[p].ty?f.push(u(t[p],a[p],d)):"rp"===t[p].ty?f.push(h(t[p],a[p],d)):"gf"===t[p].ty?f.push(n(t[p],a[p],d)):f.push((t[p],a[p],function(){return null})));return f}function e(e,i,n){var r=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return r.content;default:return r.transform}};r.propertyGroup=propertyGroupFactory(r,n);var o=function(e,i,n){var r,o=function(t){for(var e=0,i=r.length;e<i;){if(r[e]._name===t||r[e].mn===t||r[e].propertyIndex===t||r[e].ix===t||r[e].ind===t)return r[e];e+=1}return"number"===typeof t?r[t-1]:null};o.propertyGroup=propertyGroupFactory(o,n),r=t(e.it,i.it,o.propertyGroup),o.numProperties=r.length;var s=a(e.it[e.it.length-1],i.it[i.it.length-1],o.propertyGroup);return o.transform=s,o.propertyIndex=e.cix,o._name=e.nm,o}(e,i,r.propertyGroup),s=a(e.it[e.it.length-1],i.it[i.it.length-1],r.propertyGroup);return r.content=o,r.transform=s,Object.defineProperty(r,"_name",{get:function(){return e.nm}}),r.numProperties=e.np,r.propertyIndex=e.ix,r.nm=e.nm,r.mn=e.mn,r}function i(t,e,i){function n(t){return"Color"===t||"color"===t?n.color:"Opacity"===t||"opacity"===t?n.opacity:null}return Object.defineProperties(n,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),n}function n(t,e,i){function n(t){return"Start Point"===t||"start point"===t?n.startPoint:"End Point"===t||"end point"===t?n.endPoint:"Opacity"===t||"opacity"===t?n.opacity:null}return Object.defineProperties(n,{startPoint:{get:ExpressionPropertyInterface(e.s)},endPoint:{get:ExpressionPropertyInterface(e.e)},opacity:{get:ExpressionPropertyInterface(e.o)},type:{get:function(){return"a"}},_name:{value:t.nm},mn:{value:t.mn}}),e.s.setGroupProperty(PropertyInterface("Start Point",i)),e.e.setGroupProperty(PropertyInterface("End Point",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),n}function r(t,e,i){var n,r=propertyGroupFactory(c,i),o=propertyGroupFactory(l,r);function a(i){Object.defineProperty(l,t.d[i].nm,{get:ExpressionPropertyInterface(e.d.dataProps[i].p)})}var s=t.d?t.d.length:0,l={};for(n=0;n<s;n+=1)a(n),e.d.dataProps[n].p.setGroupProperty(o);function c(t){return"Color"===t||"color"===t?c.color:"Opacity"===t||"opacity"===t?c.opacity:"Stroke Width"===t||"stroke width"===t?c.strokeWidth:null}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return l}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",r)),e.o.setGroupProperty(PropertyInterface("Opacity",r)),e.w.setGroupProperty(PropertyInterface("Stroke Width",r)),c}function o(t,e,i){function n(e){return e===t.e.ix||"End"===e||"end"===e?n.end:e===t.s.ix?n.start:e===t.o.ix?n.offset:null}var r=propertyGroupFactory(n,i);return n.propertyIndex=t.ix,e.s.setGroupProperty(PropertyInterface("Start",r)),e.e.setGroupProperty(PropertyInterface("End",r)),e.o.setGroupProperty(PropertyInterface("Offset",r)),n.propertyIndex=t.ix,n.propertyGroup=i,Object.defineProperties(n,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),n.mn=t.mn,n}function a(t,e,i){function n(e){return t.a.ix===e||"Anchor Point"===e?n.anchorPoint:t.o.ix===e||"Opacity"===e?n.opacity:t.p.ix===e||"Position"===e?n.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?n.rotation:t.s.ix===e||"Scale"===e?n.scale:t.sk&&t.sk.ix===e||"Skew"===e?n.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?n.skewAxis:null}var r=propertyGroupFactory(n,i);return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",r)),e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",r)),e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",r)),e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",r)),e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",r)),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",r)),e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",r))),e.transform.op.setGroupProperty(PropertyInterface("Opacity",r)),Object.defineProperties(n,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),n.ty="tr",n.mn=t.mn,n.propertyGroup=i,n}function s(t,e,i){function n(e){return t.p.ix===e?n.position:t.s.ix===e?n.size:null}var r=propertyGroupFactory(n,i);n.propertyIndex=t.ix;var o="tm"===e.sh.ty?e.sh.prop:e.sh;return o.s.setGroupProperty(PropertyInterface("Size",r)),o.p.setGroupProperty(PropertyInterface("Position",r)),Object.defineProperties(n,{size:{get:ExpressionPropertyInterface(o.s)},position:{get:ExpressionPropertyInterface(o.p)},_name:{value:t.nm}}),n.mn=t.mn,n}function l(t,e,i){function n(e){return t.p.ix===e?n.position:t.r.ix===e?n.rotation:t.pt.ix===e?n.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?n.outerRadius:t.os.ix===e?n.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?n.innerRoundness:null:n.innerRadius}var r=propertyGroupFactory(n,i),o="tm"===e.sh.ty?e.sh.prop:e.sh;return n.propertyIndex=t.ix,o.or.setGroupProperty(PropertyInterface("Outer Radius",r)),o.os.setGroupProperty(PropertyInterface("Outer Roundness",r)),o.pt.setGroupProperty(PropertyInterface("Points",r)),o.p.setGroupProperty(PropertyInterface("Position",r)),o.r.setGroupProperty(PropertyInterface("Rotation",r)),t.ir&&(o.ir.setGroupProperty(PropertyInterface("Inner Radius",r)),o.is.setGroupProperty(PropertyInterface("Inner Roundness",r))),Object.defineProperties(n,{position:{get:ExpressionPropertyInterface(o.p)},rotation:{get:ExpressionPropertyInterface(o.r)},points:{get:ExpressionPropertyInterface(o.pt)},outerRadius:{get:ExpressionPropertyInterface(o.or)},outerRoundness:{get:ExpressionPropertyInterface(o.os)},innerRadius:{get:ExpressionPropertyInterface(o.ir)},innerRoundness:{get:ExpressionPropertyInterface(o.is)},_name:{value:t.nm}}),n.mn=t.mn,n}function c(t,e,i){function n(e){return t.p.ix===e?n.position:t.r.ix===e?n.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?n.size:null}var r=propertyGroupFactory(n,i),o="tm"===e.sh.ty?e.sh.prop:e.sh;return n.propertyIndex=t.ix,o.p.setGroupProperty(PropertyInterface("Position",r)),o.s.setGroupProperty(PropertyInterface("Size",r)),o.r.setGroupProperty(PropertyInterface("Rotation",r)),Object.defineProperties(n,{position:{get:ExpressionPropertyInterface(o.p)},roundness:{get:ExpressionPropertyInterface(o.r)},size:{get:ExpressionPropertyInterface(o.s)},_name:{value:t.nm}}),n.mn=t.mn,n}function u(t,e,i){function n(e){return t.r.ix===e||"Round Corners 1"===e?n.radius:null}var r=propertyGroupFactory(n,i),o=e;return n.propertyIndex=t.ix,o.rd.setGroupProperty(PropertyInterface("Radius",r)),Object.defineProperties(n,{radius:{get:ExpressionPropertyInterface(o.rd)},_name:{value:t.nm}}),n.mn=t.mn,n}function h(t,e,i){function n(e){return t.c.ix===e||"Copies"===e?n.copies:t.o.ix===e||"Offset"===e?n.offset:null}var r=propertyGroupFactory(n,i),o=e;return n.propertyIndex=t.ix,o.c.setGroupProperty(PropertyInterface("Copies",r)),o.o.setGroupProperty(PropertyInterface("Offset",r)),Object.defineProperties(n,{copies:{get:ExpressionPropertyInterface(o.c)},offset:{get:ExpressionPropertyInterface(o.o)},_name:{value:t.nm}}),n.mn=t.mn,n}return function(e,i,n){var r;function o(t){if("number"===typeof t)return 0===(t=void 0===t?1:t)?n:r[t-1];for(var e=0,i=r.length;e<i;){if(r[e]._name===t)return r[e];e+=1}return null}return o.propertyGroup=propertyGroupFactory(o,(function(){return n})),r=t(e,i,o.propertyGroup),o.numProperties=r.length,o._name="Contents",o}}(),TextExpressionInterface=function(t){var e,i;function n(t){switch(t){case"ADBE Text Document":return n.sourceText;default:return null}}return Object.defineProperty(n,"sourceText",{get:function(){t.textProperty.getValue();var n=t.textProperty.currentData.t;return n!==e&&(t.textProperty.currentData.t=e,(i=new String(n)).value=n||new String(n)),i}}),n},LayerExpressionInterface=function(){function t(t){var e=new Matrix;return void 0!==t?this._elem.finalTransform.mProp.getValueAtTime(t).clone(e):this._elem.finalTransform.mProp.applyToMatrix(e),e}function e(t,e){var i=this.getMatrix(e);return i.props[12]=0,i.props[13]=0,i.props[14]=0,this.applyPoint(i,t)}function i(t,e){var i=this.getMatrix(e);return this.applyPoint(i,t)}function n(t,e){var i=this.getMatrix(e);return i.props[12]=0,i.props[13]=0,i.props[14]=0,this.invertPoint(i,t)}function r(t,e){var i=this.getMatrix(e);return this.invertPoint(i,t)}function o(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,n=this._elem.hierarchy.length;for(i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.applyToPointArray(e[0],e[1],e[2]||0)}function a(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,n=this._elem.hierarchy.length;for(i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.inversePoint(e)}function s(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var i,n=this._elem.hierarchy.length;for(i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function l(){return[1,1,1,1]}return function(c){var u;function h(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return h.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return u;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return h.effect;case"ADBE Text Properties":return h.textInterface;default:return null}}h.getMatrix=t,h.invertPoint=a,h.applyPoint=o,h.toWorld=i,h.toWorldVec=e,h.fromWorld=r,h.fromWorldVec=n,h.toComp=i,h.fromComp=s,h.sampleImage=l,h.sourceRectAtTime=c.sourceRectAtTime.bind(c),h._elem=c;var d=getDescriptor(u=TransformExpressionInterface(c.finalTransform.mProp),"anchorPoint");return Object.defineProperties(h,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(u,"rotation"),scale:getDescriptor(u,"scale"),position:getDescriptor(u,"position"),opacity:getDescriptor(u,"opacity"),anchorPoint:d,anchor_point:d,transform:{get:function(){return u}},active:{get:function(){return c.isInRange}}}),h.startTime=c.data.st,h.index=c.data.ind,h.source=c.data.refId,h.height=0===c.data.ty?c.data.h:100,h.width=0===c.data.ty?c.data.w:100,h.inPoint=c.data.ip/c.comp.globalData.frameRate,h.outPoint=c.data.op/c.comp.globalData.frameRate,h._name=c.data.nm,h.registerMaskInterface=function(t){h.mask=new MaskManagerInterface(t,c)},h.registerEffectsInterface=function(t){h.effect=t},h}}(),FootageInterface=function(){var t=function(t){function e(t){return"Outline"===t?e.outlineInterface():null}return e._name="Outline",e.outlineInterface=function(t){var e="",i=t.getFootageData();function n(t){if(i[t])return e=t,"object"===typeof(i=i[t])?n:i;var r=t.indexOf(e);if(-1!==r){var o=parseInt(t.substr(r+e.length),10);return"object"===typeof(i=i[o])?n:i}return""}return function(){return e="",i=t.getFootageData(),n}}(t),e};return function(e){function i(t){return"Data"===t?i.dataInterface:null}return i._name="Data",i.dataInterface=t(e),i}}(),CompExpressionInterface=function(t){function e(e){for(var i=0,n=t.layers.length;i<n;){if(t.layers[i].nm===e||t.layers[i].ind===e)return t.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e},TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var i,n,r,o;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p?o=ExpressionPropertyInterface(t.p):(i=ExpressionPropertyInterface(t.px),n=ExpressionPropertyInterface(t.py),t.pz&&(r=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?o():[i(),n(),r?r():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,i=this.compositions.length;e<i;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),EffectsExpressionInterface=function(){function t(i,n,r,o){function a(t){for(var e=i.ef,n=0,r=e.length;n<r;){if(t===e[n].nm||t===e[n].mn||t===e[n].ix)return 5===e[n].ty?c[n]:c[n]();n+=1}throw new Error}var s,l=propertyGroupFactory(a,r),c=[],u=i.ef.length;for(s=0;s<u;s+=1)5===i.ef[s].ty?c.push(t(i.ef[s],n.effectElements[s],n.effectElements[s].propertyGroup,o)):c.push(e(n.effectElements[s],i.ef[s].ty,o,l));return"ADBE Color Control"===i.mn&&Object.defineProperty(a,"color",{get:function(){return c[0]()}}),Object.defineProperties(a,{numProperties:{get:function(){return i.np}},_name:{value:i.nm},propertyGroup:{value:l}}),a.enabled=0!==i.en,a.active=a.enabled,a}function e(t,e,i,n){var r=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(PropertyInterface("",n)),function(){return 10===e?i.comp.compInterface(t.p.v):r()}}return{createEffectsInterface:function(e,i){if(e.effectsManager){var n,r=[],o=e.data.ef,a=e.effectsManager.effectElements.length;for(n=0;n<a;n+=1)r.push(t(o[n],e.effectsManager.effectElements[n],i,e));var s=e.data.ef||[],l=function(t){for(n=0,a=s.length;n<a;){if(t===s[n].nm||t===s[n].mn||t===s[n].ix)return r[n];n+=1}return null};return Object.defineProperty(l,"numProperties",{get:function(){return s.length}}),l}return null}}}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}return Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(e){var i,n=createSizedArray(e.viewData.length),r=e.viewData.length;for(i=0;i<r;i+=1)n[i]=new t(e.viewData[i],e.masksProperties[i]);return function(t){for(i=0;i<r;){if(e.masksProperties[i].nm===t)return n[i];i+=1}return null}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function i(t,e,i){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(n){if(!t.numKeys)return 0;var r="";r="s"in e.keyframes[n-1]?e.keyframes[n-1].s:"e"in e.keyframes[n-2]?e.keyframes[n-2].e:e.keyframes[n-2].s;var o="unidimensional"===i?new Number(r):Object.assign({},r);return o.time=e.keyframes[n-1].t/e.elem.comp.globalData.frameRate,o.value="unidimensional"===i?r[0]:r,o},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function n(){return t}return function(r){return r?"unidimensional"===r.propType?function(e){e&&"pv"in e||(e=t);var n=1/e.mult,r=e.pv*n,o=new Number(r);return o.value=r,i(o,e,"unidimensional"),function(){return e.k&&e.getValue(),r=e.v*n,o.value!==r&&((o=new Number(r)).value=r,i(o,e,"unidimensional")),o}}(r):function(t){t&&"pv"in t||(t=e);var n=1/t.mult,r=t.data&&t.data.l||t.pv.length,o=createTypedArray("float32",r),a=createTypedArray("float32",r);return o.value=a,i(o,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<r;e+=1)a[e]=t.v[e]*n,o[e]=a[e];return o}}(r):n}}(),TextExpressionSelectorPropFactory=function(){function t(t,e){return this.textIndex=t+1,this.textTotal=e,this.v=this.getValue()*this.mult,this.v}return function(e,i){this.pv=1,this.comp=e.comp,this.elem=e,this.mult=.01,this.propType="textSelector",this.textTotal=i.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(e,i,this),this.getMult=t,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),propertyGetTextProp=TextSelectorProp.getTextSelectorProp;function SliderEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function AngleEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function ColorEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function PointEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function LayerIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function MaskIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function CheckboxEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var i,n=t.ef||[];this.effectElements=[];var r,o=n.length;for(i=0;i<o;i+=1)r=new GroupEffect(n[i],e),this.effectElements.push(r)}function GroupEffect(t,e){this.init(t,e)}TextSelectorProp.getTextSelectorProp=function(t,e,i){return 1===e.t?new TextExpressionSelectorPropFactory(t,e,i):propertyGetTextProp(t,e,i)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){var i;this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var n,r=this.data.ef.length,o=this.data.ef;for(i=0;i<r;i+=1){switch(n=null,o[i].ty){case 0:n=new SliderEffect(o[i],e,this);break;case 1:n=new AngleEffect(o[i],e,this);break;case 2:n=new ColorEffect(o[i],e,this);break;case 3:n=new PointEffect(o[i],e,this);break;case 4:case 7:n=new CheckboxEffect(o[i],e,this);break;case 10:n=new LayerIndexEffect(o[i],e,this);break;case 11:n=new MaskIndexEffect(o[i],e,this);break;case 5:n=new EffectsManager(o[i],e,this);break;default:n=new NoValueEffect(o[i],e,this)}n&&this.effectElements.push(n)}};var lottie={};function setLocationHref(t){locationHref=t}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){subframeEnabled=t}function setIDPrefix(t){idPrefix=t}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"===typeof t)switch(t){case"high":defaultCurveSegments=200;break;default:case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(t)&&t>1&&(defaultCurveSegments=t);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!==typeof navigator}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),i=0;i<e.length;i+=1){var n=e[i].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.setIDPrefix=setIDPrefix,lottie.__getFactory=getFactory,lottie.version="5.7.14";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="",queryString;if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src.replace(/^[^\?]+\??/,""),renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottie},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return factory(root)}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},,function(t,e,i){"use strict";i(73);var n=i(2),r=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;r=o("react.element"),e.Fragment=o("react.fragment")}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,i){var n,o={},c=null,u=null;for(n in void 0!==i&&(c=""+i),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,n)&&!l.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===o[n]&&(o[n]=e[n]);return{$$typeof:r,type:t,key:c,ref:u,props:o,_owner:a.current}}e.jsx=c,e.jsxs=c},function(t,e,i){"use strict";var n=i(73),r=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,l=60112;e.Suspense=60113;var c=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function y(t,e,i){this.props=t,this.context=e,this.refs=m,this.updater=i||f}function v(){}function g(t,e,i){this.props=t,this.context=e,this.refs=m,this.updater=i||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var _=g.prototype=new v;_.constructor=g,n(_,y.prototype),_.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,i){var n,o={},a=null,s=null;if(null!=e)for(n in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)x.call(e,n)&&!w.hasOwnProperty(n)&&(o[n]=e[n]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:r,type:t,key:a,ref:s,props:o,_owner:b.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var k=/\/+/g;function P(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function T(t,e,i,n,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case o:l=!0}}if(l)return a=a(l=t),t=""===n?"."+P(l,0):n,Array.isArray(a)?(i="",null!=t&&(i=t.replace(k,"$&/")+"/"),T(a,e,i,"",(function(t){return t}))):null!=a&&(E(a)&&(a=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+t)),e.push(a)),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=n+P(s=t[c],c);l+=T(s,e,i,u,a)}else if("function"===typeof(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t)))for(t=u.call(t),c=0;!(s=t.next()).done;)l+=T(s=s.value,e,i,u=n+P(s,c++),a);else if("object"===s)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function C(t,e,i){if(null==t)return t;var n=[],r=0;return T(t,n,"","",(function(t){return e.call(i,t,r++)})),n}function M(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var A={current:null};function O(){var t=A.current;if(null===t)throw Error(p(321));return t}var I={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:n};e.Children={map:C,forEach:function(t,e,i){C(t,(function(){e.apply(this,arguments)}),i)},count:function(t){var e=0;return C(t,(function(){e++})),e},toArray:function(t){return C(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error(p(143));return t}},e.Component=y,e.PureComponent=g,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error(p(267,t));var o=n({},t.props),a=t.key,s=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,l=b.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)x.call(e,u)&&!w.hasOwnProperty(u)&&(o[u]=void 0===e[u]&&void 0!==c?c[u]:e[u])}var u=arguments.length-2;if(1===u)o.children=i;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:r,type:t.type,key:a,ref:s,props:o,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:u,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return O().useCallback(t,e)},e.useContext=function(t,e){return O().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return O().useEffect(t,e)},e.useImperativeHandle=function(t,e,i){return O().useImperativeHandle(t,e,i)},e.useLayoutEffect=function(t,e){return O().useLayoutEffect(t,e)},e.useMemo=function(t,e){return O().useMemo(t,e)},e.useReducer=function(t,e,i){return O().useReducer(t,e,i)},e.useRef=function(t){return O().useRef(t)},e.useState=function(t){return O().useState(t)},e.version="17.0.1"},function(t,e,i){"use strict";var n=i(2),r=i(73),o=i(138);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(a(227));var s=new Set,l={};function c(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(l[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function y(t,e,i,n,r,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new y(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new y(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new y(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new y(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new y(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new y(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new y(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new y(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new y(t,5,!1,t.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function b(t,e,i,n){var r=v.hasOwnProperty(e)?v[e]:null;(null!==r?0===r.type:!n&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,i,n){if(null===e||"undefined"===typeof e||function(t,e,i,n){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,i,r,n)&&(i=null),n||null===r?function(t){return!!p.call(m,t)||!p.call(f,t)&&(d.test(t)?m[t]=!0:(f[t]=!0,!1))}(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):r.mustUseProperty?t[r.propertyName]=null===i?3!==r.type&&"":i:(e=r.attributeName,n=r.attributeNamespace,null===i?t.removeAttribute(e):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?t.setAttributeNS(n,e,i):t.setAttribute(e,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(g,_);v[e]=new y(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(g,_);v[e]=new y(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(g,_);v[e]=new y(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new y(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new y(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,E=60107,k=60108,P=60114,T=60109,C=60110,M=60112,A=60113,O=60120,I=60115,D=60116,z=60121,L=60128,R=60129,F=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;w=j("react.element"),S=j("react.portal"),E=j("react.fragment"),k=j("react.strict_mode"),P=j("react.profiler"),T=j("react.provider"),C=j("react.context"),M=j("react.forward_ref"),A=j("react.suspense"),O=j("react.suspense_list"),I=j("react.memo"),D=j("react.lazy"),z=j("react.block"),j("react.scope"),L=j("react.opaque.id"),R=j("react.debug_trace_mode"),F=j("react.offscreen"),B=j("react.legacy_hidden")}var N,V="function"===typeof Symbol&&Symbol.iterator;function U(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=V&&t[V]||t["@@iterator"])?t:null}function G(t){if(void 0===N)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);N=e&&e[1]||""}return"\n"+N+t}var q=!1;function Z(t,e){if(!t||q)return"";q=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),o=n.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s])return"\n"+r[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?G(t):""}function H(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=Z(t.type,!1);case 11:return t=Z(t.type.render,!1);case 22:return t=Z(t.type._render,!1);case 1:return t=Z(t.type,!0);default:return""}}function W(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case S:return"Portal";case P:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case I:return W(t.type);case z:return W(t._render);case D:e=t._payload,t=t._init;try{return W(t(e))}catch(i){}}return null}function X(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Y(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function K(t){t._valueTracker||(t._valueTracker=function(t){var e=Y(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){n=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function $(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=Y(t)?t.checked?"true":"false":t.value),(t=n)!==i&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Q(t,e){var i=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function tt(t,e){var i=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;i=X(null!=e.value?e.value:i),t._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function it(t,e){et(t,e);var i=X(e.value),n=e.type;if(null!=i)"number"===n?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?rt(t,e.type,i):e.hasOwnProperty("defaultValue")&&rt(t,e.type,X(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function nt(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function rt(t,e,i){"number"===e&&J(t.ownerDocument)===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}function ot(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return n.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,i,n){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&n&&(t[i].defaultSelected=!0)}else{for(i=""+X(i),e=null,r=0;r<t.length;r++){if(t[r].value===i)return t[r].selected=!0,void(n&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var i=e.value;if(null==i){if(i=e.children,e=e.defaultValue,null!=i){if(null!=e)throw Error(a(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(a(93));i=i[0]}e=i}null==e&&(e=""),i=e}t._wrapperState={initialValue:X(i)}}function ct(t,e){var i=X(e.value),n=X(e.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=n&&(t.defaultValue=""+n)}function ut(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",dt="http://www.w3.org/2000/svg";function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?pt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var mt,yt,vt=(yt=function(t,e){if(t.namespaceURI!==dt||"innerHTML"in t)t.innerHTML=e;else{for((mt=mt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,i,n){MSApp.execUnsafeLocalFunction((function(){return yt(t,e)}))}:yt);function gt(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}var _t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function xt(t,e,i){return null==e||"boolean"===typeof e||""===e?"":i||"number"!==typeof e||0===e||_t.hasOwnProperty(t)&&_t[t]?(""+e).trim():e+"px"}function wt(t,e){for(var i in t=t.style,e)if(e.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=xt(i,e[i],n);"float"===i&&(i="cssFloat"),n?t.setProperty(i,r):t[i]=r}}Object.keys(_t).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_t[e]=_t[t]}))}));var St=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Et(t,e){if(e){if(St[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function kt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Pt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Tt=null,Ct=null,Mt=null;function At(t){if(t=tr(t)){if("function"!==typeof Tt)throw Error(a(280));var e=t.stateNode;e&&(e=ir(e),Tt(t.stateNode,t.type,e))}}function Ot(t){Ct?Mt?Mt.push(t):Mt=[t]:Ct=t}function It(){if(Ct){var t=Ct,e=Mt;if(Mt=Ct=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function Dt(t,e){return t(e)}function zt(t,e,i,n,r){return t(e,i,n,r)}function Lt(){}var Rt=Dt,Ft=!1,Bt=!1;function jt(){null===Ct&&null===Mt||(Lt(),It())}function Nt(t,e){var i=t.stateNode;if(null===i)return null;var n=ir(i);if(null===n)return null;i=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}if(t)return null;if(i&&"function"!==typeof i)throw Error(a(231,e,typeof i));return i}var Vt=!1;if(h)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(yt){Vt=!1}function Gt(t,e,i,n,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(i,c)}catch(u){this.onError(u)}}var qt=!1,Zt=null,Ht=!1,Wt=null,Xt={onError:function(t){qt=!0,Zt=t}};function Yt(t,e,i,n,r,o,a,s,l){qt=!1,Zt=null,Gt.apply(Xt,arguments)}function Kt(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function $t(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Jt(t){if(Kt(t)!==t)throw Error(a(188))}function Qt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Kt(t)))throw Error(a(188));return e!==t?null:t}for(var i=t,n=e;;){var r=i.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(n=r.return)){i=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===i)return Jt(r),t;if(o===n)return Jt(r),e;o=o.sibling}throw Error(a(188))}if(i.return!==n.return)i=r,n=o;else{for(var s=!1,l=r.child;l;){if(l===i){s=!0,i=r,n=o;break}if(l===n){s=!0,n=r,i=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===i){s=!0,i=o,n=r;break}if(l===n){s=!0,n=o,i=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(i.alternate!==n)throw Error(a(190))}if(3!==i.tag)throw Error(a(188));return i.stateNode.current===i?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var i=t.alternate;null!==e;){if(e===t||e===i)return!0;e=e.return}return!1}var ee,ie,ne,re,oe=!1,ae=[],se=null,le=null,ce=null,ue=new Map,he=new Map,de=[],pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fe(t,e,i,n,r){return{blockedOn:t,domEventName:e,eventSystemFlags:16|i,nativeEvent:r,targetContainers:[n]}}function me(t,e){switch(t){case"focusin":case"focusout":se=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":ce=null;break;case"pointerover":case"pointerout":ue.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function ye(t,e,i,n,r,o){return null===t||t.nativeEvent!==o?(t=fe(e,i,n,r,o),null!==e&&(null!==(e=tr(e))&&ie(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function ve(t){var e=Qn(t.target);if(null!==e){var i=Kt(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=$t(i)))return t.blockedOn=e,void re(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){ne(i)}))}))}else if(3===e&&i.stateNode.hydrate)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function ge(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var i=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==i)return null!==(e=tr(i))&&ie(e),t.blockedOn=i,!1;e.shift()}return!0}function _e(t,e,i){ge(t)&&i.delete(e)}function be(){for(oe=!1;0<ae.length;){var t=ae[0];if(null!==t.blockedOn){null!==(t=tr(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var i=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==i){t.blockedOn=i;break}e.shift()}null===t.blockedOn&&ae.shift()}null!==se&&ge(se)&&(se=null),null!==le&&ge(le)&&(le=null),null!==ce&&ge(ce)&&(ce=null),ue.forEach(_e),he.forEach(_e)}function xe(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,be)))}function we(t){function e(e){return xe(e,t)}if(0<ae.length){xe(ae[0],t);for(var i=1;i<ae.length;i++){var n=ae[i];n.blockedOn===t&&(n.blockedOn=null)}}for(null!==se&&xe(se,t),null!==le&&xe(le,t),null!==ce&&xe(ce,t),ue.forEach(e),he.forEach(e),i=0;i<de.length;i++)(n=de[i]).blockedOn===t&&(n.blockedOn=null);for(;0<de.length&&null===(i=de[0]).blockedOn;)ve(i),null===i.blockedOn&&de.shift()}function Se(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Ee={animationend:Se("Animation","AnimationEnd"),animationiteration:Se("Animation","AnimationIteration"),animationstart:Se("Animation","AnimationStart"),transitionend:Se("Transition","TransitionEnd")},ke={},Pe={};function Te(t){if(ke[t])return ke[t];if(!Ee[t])return t;var e,i=Ee[t];for(e in i)if(i.hasOwnProperty(e)&&e in Pe)return ke[t]=i[e];return t}h&&(Pe=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);var Ce=Te("animationend"),Me=Te("animationiteration"),Ae=Te("animationstart"),Oe=Te("transitionend"),Ie=new Map,De=new Map,ze=["abort","abort",Ce,"animationEnd",Me,"animationIteration",Ae,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Oe,"transitionEnd","waiting","waiting"];function Le(t,e){for(var i=0;i<t.length;i+=2){var n=t[i],r=t[i+1];r="on"+(r[0].toUpperCase()+r.slice(1)),De.set(n,e),Ie.set(n,r),c(r,[n])}}(0,o.unstable_now)();var Re=8;function Fe(t){if(0!==(1&t))return Re=15,1;if(0!==(2&t))return Re=14,2;if(0!==(4&t))return Re=13,4;var e=24&t;return 0!==e?(Re=12,e):0!==(32&t)?(Re=11,32):0!==(e=192&t)?(Re=10,e):0!==(256&t)?(Re=9,256):0!==(e=3584&t)?(Re=8,e):0!==(4096&t)?(Re=7,4096):0!==(e=4186112&t)?(Re=6,e):0!==(e=62914560&t)?(Re=5,e):67108864&t?(Re=4,67108864):0!==(134217728&t)?(Re=3,134217728):0!==(e=805306368&t)?(Re=2,e):0!==(1073741824&t)?(Re=1,1073741824):(Re=8,t)}function Be(t,e){var i=t.pendingLanes;if(0===i)return Re=0;var n=0,r=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)n=o,r=Re=15;else if(0!==(o=134217727&i)){var l=o&~a;0!==l?(n=Fe(l),r=Re):0!==(s&=o)&&(n=Fe(s),r=Re)}else 0!==(o=i&~a)?(n=Fe(o),r=Re):0!==s&&(n=Fe(s),r=Re);if(0===n)return 0;if(n=i&((0>(n=31-qe(n))?0:1<<n)<<1)-1,0!==e&&e!==n&&0===(e&a)){if(Fe(e),r<=Re)return e;Re=r}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=n;0<e;)r=1<<(i=31-qe(e)),n|=t[i],e&=~r;return n}function je(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ne(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Ve(24&~e))?Ne(10,e):t;case 10:return 0===(t=Ve(192&~e))?Ne(8,e):t;case 8:return 0===(t=Ve(3584&~e))&&(0===(t=Ve(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Ve(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function Ve(t){return t&-t}function Ue(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function Ge(t,e,i){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,(t=t.eventTimes)[e=31-qe(e)]=i}var qe=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(Ze(t)/He|0)|0},Ze=Math.log,He=Math.LN2;var We=o.unstable_UserBlockingPriority,Xe=o.unstable_runWithPriority,Ye=!0;function Ke(t,e,i,n){Ft||Lt();var r=Je,o=Ft;Ft=!0;try{zt(r,t,e,i,n)}finally{(Ft=o)||jt()}}function $e(t,e,i,n){Xe(We,Je.bind(null,t,e,i,n))}function Je(t,e,i,n){var r;if(Ye)if((r=0===(4&e))&&0<ae.length&&-1<pe.indexOf(t))t=fe(null,t,e,i,n),ae.push(t);else{var o=Qe(t,e,i,n);if(null===o)r&&me(t,n);else{if(r){if(-1<pe.indexOf(t))return t=fe(o,t,e,i,n),void ae.push(t);if(function(t,e,i,n,r){switch(e){case"focusin":return se=ye(se,t,e,i,n,r),!0;case"dragenter":return le=ye(le,t,e,i,n,r),!0;case"mouseover":return ce=ye(ce,t,e,i,n,r),!0;case"pointerover":var o=r.pointerId;return ue.set(o,ye(ue.get(o)||null,t,e,i,n,r)),!0;case"gotpointercapture":return o=r.pointerId,he.set(o,ye(he.get(o)||null,t,e,i,n,r)),!0}return!1}(o,t,e,i,n))return;me(t,n)}In(t,e,n,null,i)}}}function Qe(t,e,i,n){var r=Pt(n);if(null!==(r=Qn(r))){var o=Kt(r);if(null===o)r=null;else{var a=o.tag;if(13===a){if(null!==(r=$t(o)))return r;r=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return In(t,e,n,r,i),null}var ti=null,ei=null,ii=null;function ni(){if(ii)return ii;var t,e,i=ei,n=i.length,r="value"in ti?ti.value:ti.textContent,o=r.length;for(t=0;t<n&&i[t]===r[t];t++);var a=n-t;for(e=1;e<=a&&i[n-e]===r[o-e];e++);return ii=r.slice(t,1<e?1-e:void 0)}function ri(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function oi(){return!0}function ai(){return!1}function si(t){function e(e,i,n,r,o){for(var a in this._reactName=e,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?oi:ai,this.isPropagationStopped=ai,this}return r(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),e}var li,ci,ui,hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=si(hi),pi=r({},hi,{view:0,detail:0}),fi=si(pi),mi=r({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pi,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&"mousemove"===t.type?(li=t.screenX-ui.screenX,ci=t.screenY-ui.screenY):ci=li=0,ui=t),li)},movementY:function(t){return"movementY"in t?t.movementY:ci}}),yi=si(mi),vi=si(r({},mi,{dataTransfer:0})),gi=si(r({},pi,{relatedTarget:0})),_i=si(r({},hi,{animationName:0,elapsedTime:0,pseudoElement:0})),bi=si(r({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),xi=si(r({},hi,{data:0})),wi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ei={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ki(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ei[t])&&!!e[t]}function Pi(){return ki}var Ti=si(r({},pi,{key:function(t){if(t.key){var e=wi[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ri(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Si[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pi,charCode:function(t){return"keypress"===t.type?ri(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ri(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Ci=si(r({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mi=si(r({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pi})),Ai=si(r({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0})),Oi=si(r({},mi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Ii=[9,13,27,32],Di=h&&"CompositionEvent"in window,zi=null;h&&"documentMode"in document&&(zi=document.documentMode);var Li=h&&"TextEvent"in window&&!zi,Ri=h&&(!Di||zi&&8<zi&&11>=zi),Fi=String.fromCharCode(32),Bi=!1;function ji(t,e){switch(t){case"keyup":return-1!==Ii.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ni(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vi=!1;var Ui={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ui[t.type]:"textarea"===e}function qi(t,e,i,n){Ot(n),0<(e=zn(e,"onChange")).length&&(i=new di("onChange","change",null,i,n),t.push({event:i,listeners:e}))}var Zi=null,Hi=null;function Wi(t){Pn(t,0)}function Xi(t){if($(er(t)))return t}function Yi(t,e){if("change"===t)return e}var Ki=!1;if(h){var $i;if(h){var Ji="oninput"in document;if(!Ji){var Qi=document.createElement("div");Qi.setAttribute("oninput","return;"),Ji="function"===typeof Qi.oninput}$i=Ji}else $i=!1;Ki=$i&&(!document.documentMode||9<document.documentMode)}function tn(){Zi&&(Zi.detachEvent("onpropertychange",en),Hi=Zi=null)}function en(t){if("value"===t.propertyName&&Xi(Hi)){var e=[];if(qi(e,Hi,t,Pt(t)),t=Wi,Ft)t(e);else{Ft=!0;try{Dt(t,e)}finally{Ft=!1,jt()}}}}function nn(t,e,i){"focusin"===t?(tn(),Hi=i,(Zi=e).attachEvent("onpropertychange",en)):"focusout"===t&&tn()}function rn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xi(Hi)}function on(t,e){if("click"===t)return Xi(e)}function an(t,e){if("input"===t||"change"===t)return Xi(e)}var sn="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},ln=Object.prototype.hasOwnProperty;function cn(t,e){if(sn(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!ln.call(e,i[n])||!sn(t[i[n]],e[i[n]]))return!1;return!0}function un(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hn(t,e){var i,n=un(t);for(t=0;n;){if(3===n.nodeType){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=un(n)}}function dn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?dn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pn(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var i="string"===typeof e.contentWindow.location.href}catch(n){i=!1}if(!i)break;e=J((t=e.contentWindow).document)}return e}function fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var mn=h&&"documentMode"in document&&11>=document.documentMode,yn=null,vn=null,gn=null,_n=!1;function bn(t,e,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;_n||null==yn||yn!==J(n)||("selectionStart"in(n=yn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},gn&&cn(gn,n)||(gn=n,0<(n=zn(vn,"onSelect")).length&&(e=new di("onSelect","select",null,e,i),t.push({event:e,listeners:n}),e.target=yn)))}Le("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Le("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Le(ze,2);for(var xn="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wn=0;wn<xn.length;wn++)De.set(xn[wn],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),En=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sn));function kn(t,e,i){var n=t.type||"unknown-event";t.currentTarget=i,function(t,e,i,n,r,o,s,l,c){if(Yt.apply(this,arguments),qt){if(!qt)throw Error(a(198));var u=Zt;qt=!1,Zt=null,Ht||(Ht=!0,Wt=u)}}(n,e,void 0,t),t.currentTarget=null}function Pn(t,e){e=0!==(4&e);for(var i=0;i<t.length;i++){var n=t[i],r=n.event;n=n.listeners;t:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break t;kn(r,s,c),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break t;kn(r,s,c),o=l}}}if(Ht)throw t=Wt,Ht=!1,Wt=null,t}function Tn(t,e){var i=nr(e),n=t+"__bubble";i.has(n)||(On(e,t,2,!1),i.add(n))}var Cn="_reactListening"+Math.random().toString(36).slice(2);function Mn(t){t[Cn]||(t[Cn]=!0,s.forEach((function(e){En.has(e)||An(e,!1,t,null),An(e,!0,t,null)})))}function An(t,e,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=i;if("selectionchange"===t&&9!==i.nodeType&&(o=i.ownerDocument),null!==n&&!e&&En.has(t)){if("scroll"!==t)return;r|=2,o=n}var a=nr(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(r|=4),On(o,t,r,e),a.add(s))}function On(t,e,i,n){var r=De.get(e);switch(void 0===r?2:r){case 0:r=Ke;break;case 1:r=$e;break;default:r=Je}i=r.bind(null,e,i,t),r=void 0,!Vt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),n?void 0!==r?t.addEventListener(e,i,{capture:!0,passive:r}):t.addEventListener(e,i,!0):void 0!==r?t.addEventListener(e,i,{passive:r}):t.addEventListener(e,i,!1)}function In(t,e,i,n,r){var o=n;if(0===(1&e)&&0===(2&e)&&null!==n)t:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=Qn(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue t}s=s.parentNode}}n=n.return}!function(t,e,i){if(Bt)return t(e,i);Bt=!0;try{Rt(t,e,i)}finally{Bt=!1,jt()}}((function(){var n=o,r=Pt(i),a=[];t:{var s=Ie.get(t);if(void 0!==s){var l=di,c=t;switch(t){case"keypress":if(0===ri(i))break t;case"keydown":case"keyup":l=Ti;break;case"focusin":c="focus",l=gi;break;case"focusout":c="blur",l=gi;break;case"beforeblur":case"afterblur":l=gi;break;case"click":if(2===i.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mi;break;case Ce:case Me:case Ae:l=_i;break;case Oe:l=Ai;break;case"scroll":l=fi;break;case"wheel":l=Oi;break;case"copy":case"cut":case"paste":l=bi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ci}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Nt(f,d))&&u.push(Dn(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,i,r),a.push({event:s,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(c=i.relatedTarget||i.fromElement)||!Qn(c)&&!c[$n])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?Qn(c):null)&&(c!==(h=Kt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=yi,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(u=Ci,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:er(l),p=null==c?s:er(c),(s=new u(m,f+"leave",l,i,r)).target=h,s.relatedTarget=p,m=null,Qn(r)===n&&((u=new u(d,f+"enter",c,i,r)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)t:{for(d=c,f=0,p=u=l;p;p=Ln(p))f++;for(p=0,m=d;m;m=Ln(m))p++;for(;0<f-p;)u=Ln(u),f--;for(;0<p-f;)d=Ln(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break t;u=Ln(u),d=Ln(d)}u=null}else u=null;null!==l&&Rn(a,s,l,u,!1),null!==c&&null!==h&&Rn(a,h,c,u,!0)}if("select"===(l=(s=n?er(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var y=Yi;else if(Gi(s))if(Ki)y=an;else{y=rn;var v=nn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=on);switch(y&&(y=y(t,n))?qi(a,y,i,r):(v&&v(t,s,n),"focusout"===t&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&rt(s,"number",s.value)),v=n?er(n):window,t){case"focusin":(Gi(v)||"true"===v.contentEditable)&&(yn=v,vn=n,gn=null);break;case"focusout":gn=vn=yn=null;break;case"mousedown":_n=!0;break;case"contextmenu":case"mouseup":case"dragend":_n=!1,bn(a,i,r);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":bn(a,i,r)}var g;if(Di)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Vi?ji(t,i)&&(_="onCompositionEnd"):"keydown"===t&&229===i.keyCode&&(_="onCompositionStart");_&&(Ri&&"ko"!==i.locale&&(Vi||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vi&&(g=ni()):(ei="value"in(ti=r)?ti.value:ti.textContent,Vi=!0)),0<(v=zn(n,_)).length&&(_=new xi(_,t,null,i,r),a.push({event:_,listeners:v}),g?_.data=g:null!==(g=Ni(i))&&(_.data=g))),(g=Li?function(t,e){switch(t){case"compositionend":return Ni(e);case"keypress":return 32!==e.which?null:(Bi=!0,Fi);case"textInput":return(t=e.data)===Fi&&Bi?null:t;default:return null}}(t,i):function(t,e){if(Vi)return"compositionend"===t||!Di&&ji(t,e)?(t=ni(),ii=ei=ti=null,Vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ri&&"ko"!==e.locale?null:e.data;default:return null}}(t,i))&&(0<(n=zn(n,"onBeforeInput")).length&&(r=new xi("onBeforeInput","beforeinput",null,i,r),a.push({event:r,listeners:n}),r.data=g))}Pn(a,e)}))}function Dn(t,e,i){return{instance:t,listener:e,currentTarget:i}}function zn(t,e){for(var i=e+"Capture",n=[];null!==t;){var r=t,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Nt(t,i))&&n.unshift(Dn(t,o,r)),null!=(o=Nt(t,e))&&n.push(Dn(t,o,r))),t=t.return}return n}function Ln(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Rn(t,e,i,n,r){for(var o=e._reactName,a=[];null!==i&&i!==n;){var s=i,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Nt(i,o))&&a.unshift(Dn(i,l,s)):r||null!=(l=Nt(i,o))&&a.push(Dn(i,l,s))),i=i.return}0!==a.length&&t.push({event:e,listeners:a})}function Fn(){}var Bn=null,jn=null;function Nn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Vn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Un="function"===typeof setTimeout?setTimeout:void 0,Gn="function"===typeof clearTimeout?clearTimeout:void 0;function qn(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Zn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Hn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===e)return t;e--}else"/$"===i&&e++}t=t.previousSibling}return null}var Wn=0;var Xn=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Xn,Kn="__reactProps$"+Xn,$n="__reactContainer$"+Xn,Jn="__reactEvents$"+Xn;function Qn(t){var e=t[Yn];if(e)return e;for(var i=t.parentNode;i;){if(e=i[$n]||i[Yn]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=Hn(t);null!==t;){if(i=t[Yn])return i;t=Hn(t)}return e}i=(t=i).parentNode}return null}function tr(t){return!(t=t[Yn]||t[$n])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function er(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function ir(t){return t[Kn]||null}function nr(t){var e=t[Jn];return void 0===e&&(e=t[Jn]=new Set),e}var rr=[],or=-1;function ar(t){return{current:t}}function sr(t){0>or||(t.current=rr[or],rr[or]=null,or--)}function lr(t,e){or++,rr[or]=t.current,t.current=e}var cr={},ur=ar(cr),hr=ar(!1),dr=cr;function pr(t,e){var i=t.type.contextTypes;if(!i)return cr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=e[r];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function fr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function mr(){sr(hr),sr(ur)}function yr(t,e,i){if(ur.current!==cr)throw Error(a(168));lr(ur,e),lr(hr,i)}function vr(t,e,i){var n=t.stateNode;if(t=e.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var o in n=n.getChildContext())if(!(o in t))throw Error(a(108,W(e)||"Unknown",o));return r({},i,n)}function gr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cr,dr=ur.current,lr(ur,t),lr(hr,hr.current),!0}function _r(t,e,i){var n=t.stateNode;if(!n)throw Error(a(169));i?(t=vr(t,e,dr),n.__reactInternalMemoizedMergedChildContext=t,sr(hr),sr(ur),lr(ur,t)):sr(hr),lr(hr,i)}var br=null,xr=null,wr=o.unstable_runWithPriority,Sr=o.unstable_scheduleCallback,Er=o.unstable_cancelCallback,kr=o.unstable_shouldYield,Pr=o.unstable_requestPaint,Tr=o.unstable_now,Cr=o.unstable_getCurrentPriorityLevel,Mr=o.unstable_ImmediatePriority,Ar=o.unstable_UserBlockingPriority,Or=o.unstable_NormalPriority,Ir=o.unstable_LowPriority,Dr=o.unstable_IdlePriority,zr={},Lr=void 0!==Pr?Pr:function(){},Rr=null,Fr=null,Br=!1,jr=Tr(),Nr=1e4>jr?Tr:function(){return Tr()-jr};function Vr(){switch(Cr()){case Mr:return 99;case Ar:return 98;case Or:return 97;case Ir:return 96;case Dr:return 95;default:throw Error(a(332))}}function Ur(t){switch(t){case 99:return Mr;case 98:return Ar;case 97:return Or;case 96:return Ir;case 95:return Dr;default:throw Error(a(332))}}function Gr(t,e){return t=Ur(t),wr(t,e)}function qr(t,e,i){return t=Ur(t),Sr(t,e,i)}function Zr(){if(null!==Fr){var t=Fr;Fr=null,Er(t)}Hr()}function Hr(){if(!Br&&null!==Rr){Br=!0;var t=0;try{var e=Rr;Gr(99,(function(){for(;t<e.length;t++){var i=e[t];do{i=i(!0)}while(null!==i)}})),Rr=null}catch(i){throw null!==Rr&&(Rr=Rr.slice(t+1)),Sr(Mr,Zr),i}finally{Br=!1}}}var Wr=x.ReactCurrentBatchConfig;function Xr(t,e){if(t&&t.defaultProps){for(var i in e=r({},e),t=t.defaultProps)void 0===e[i]&&(e[i]=t[i]);return e}return e}var Yr=ar(null),Kr=null,$r=null,Jr=null;function Qr(){Jr=$r=Kr=null}function to(t){var e=Yr.current;sr(Yr),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)===e){if(null===i||(i.childLanes&e)===e)break;i.childLanes|=e}else t.childLanes|=e,null!==i&&(i.childLanes|=e);t=t.return}}function io(t,e){Kr=t,Jr=$r=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(za=!0),t.firstContext=null)}function no(t,e){if(Jr!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Jr=t,e=1073741823),e={context:t,observedBits:e,next:null},null===$r){if(null===Kr)throw Error(a(308));$r=e,Kr.dependencies={lanes:0,firstContext:e,responders:null}}else $r=$r.next=e;return t._currentValue}var ro=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function so(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lo(t,e){if(null!==(t=t.updateQueue)){var i=(t=t.shared).pending;null===i?e.next=e:(e.next=i.next,i.next=e),t.pending=e}}function co(t,e){var i=t.updateQueue,n=t.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?r=o=a:o=o.next=a,i=i.next}while(null!==i);null===o?r=o=e:o=o.next=e}else r=o=e;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(t.updateQueue=i)}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function uo(t,e,i,n){var o=t.updateQueue;ro=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?a=u:s.next=u,s=c;var h=t.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==a){for(d=o.baseState,s=0,h=u=c=null;;){l=a.lane;var p=a.eventTime;if((n&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=t,m=a;switch(l=e,p=i,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,l);break t}d=f;break t;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(l="function"===typeof(f=m.payload)?f.call(p,d,l):f)||void 0===l)break t;d=r({},d,l);break t;case 2:ro=!0}}null!==a.callback&&(t.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else p={eventTime:p,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(c=d),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=h,Bs|=s,t.lanes=s,t.memoizedState=d}}function ho(t,e,i){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!==typeof r)throw Error(a(191,r));r.call(n)}}}var po=(new n.Component).refs;function fo(t,e,i,n){i=null===(i=i(n,e=t.memoizedState))||void 0===i?e:r({},e,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var mo={isMounted:function(t){return!!(t=t._reactInternals)&&Kt(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternals;var n=cl(),r=ul(t),o=so(n,r);o.payload=e,void 0!==i&&null!==i&&(o.callback=i),lo(t,o),hl(t,r,n)},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var n=cl(),r=ul(t),o=so(n,r);o.tag=1,o.payload=e,void 0!==i&&null!==i&&(o.callback=i),lo(t,o),hl(t,r,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=cl(),n=ul(t),r=so(i,n);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),lo(t,r),hl(t,n,i)}};function yo(t,e,i,n,r,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!cn(i,n)||!cn(r,o))}function vo(t,e,i){var n=!1,r=cr,o=e.contextType;return"object"===typeof o&&null!==o?o=no(o):(r=fr(e)?dr:ur.current,o=(n=null!==(n=e.contextTypes)&&void 0!==n)?pr(t,r):cr),e=new e(i,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=mo,t.stateNode=e,e._reactInternals=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function go(t,e,i,n){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,n),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&mo.enqueueReplaceState(e,e.state,null)}function _o(t,e,i,n){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs=po,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=no(o):(o=fr(e)?dr:ur.current,r.context=pr(t,o)),uo(t,i,r,n),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(fo(t,e,o,i),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&mo.enqueueReplaceState(r,r.state,null),uo(t,i,r,n),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4)}var bo=Array.isArray;function xo(t,e,i){if(null!==(t=i.ref)&&"function"!==typeof t&&"object"!==typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(a(309));var n=i.stateNode}if(!n)throw Error(a(147,t));var r=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=n.refs;e===po&&(e=n.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!==typeof t)throw Error(a(284));if(!i._owner)throw Error(a(290,t))}return t}function wo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function So(t){function e(e,i){if(t){var n=e.lastEffect;null!==n?(n.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i,i.nextEffect=null,i.flags=8}}function i(i,n){if(!t)return null;for(;null!==n;)e(i,n),n=n.sibling;return null}function n(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Gl(t,e)).index=0,t.sibling=null,t}function o(e,i,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index)<i?(e.flags=2,i):n:(e.flags=2,i):i}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,i,n){return null===e||6!==e.tag?((e=Wl(i,t.mode,n)).return=t,e):((e=r(e,i)).return=t,e)}function c(t,e,i,n){return null!==e&&e.elementType===i.type?((n=r(e,i.props)).ref=xo(t,e,i),n.return=t,n):((n=ql(i.type,i.key,i.props,null,t.mode,n)).ref=xo(t,e,i),n.return=t,n)}function u(t,e,i,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Xl(i,t.mode,n)).return=t,e):((e=r(e,i.children||[])).return=t,e)}function h(t,e,i,n,o){return null===e||7!==e.tag?((e=Zl(i,t.mode,n,o)).return=t,e):((e=r(e,i)).return=t,e)}function d(t,e,i){if("string"===typeof e||"number"===typeof e)return(e=Wl(""+e,t.mode,i)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(i=ql(e.type,e.key,e.props,null,t.mode,i)).ref=xo(t,null,e),i.return=t,i;case S:return(e=Xl(e,t.mode,i)).return=t,e}if(bo(e)||U(e))return(e=Zl(e,t.mode,i,null)).return=t,e;wo(t,e)}return null}function p(t,e,i,n){var r=null!==e?e.key:null;if("string"===typeof i||"number"===typeof i)return null!==r?null:l(t,e,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return i.key===r?i.type===E?h(t,e,i.props.children,n,r):c(t,e,i,n):null;case S:return i.key===r?u(t,e,i,n):null}if(bo(i)||U(i))return null!==r?null:h(t,e,i,n,null);wo(t,i)}return null}function f(t,e,i,n,r){if("string"===typeof n||"number"===typeof n)return l(e,t=t.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return t=t.get(null===n.key?i:n.key)||null,n.type===E?h(e,t,n.props.children,r,n.key):c(e,t,n,r);case S:return u(e,t=t.get(null===n.key?i:n.key)||null,n,r)}if(bo(n)||U(n))return h(e,t=t.get(i)||null,n,r,null);wo(e,n)}return null}function m(r,a,s,l){for(var c=null,u=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var v=p(r,h,s[m],l);if(null===v){null===h&&(h=y);break}t&&h&&null===v.alternate&&e(r,h),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v,h=y}if(m===s.length)return i(r,h),c;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],l))&&(a=o(h,a,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=n(r,h);m<s.length;m++)null!==(y=f(h,r,m,s[m],l))&&(t&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===u?c=y:u.sibling=y,u=y);return t&&h.forEach((function(t){return e(r,t)})),c}function y(r,s,l,c){var u=U(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=s,y=s=0,v=null,g=l.next();null!==m&&!g.done;y++,g=l.next()){m.index>y?(v=m,m=null):v=m.sibling;var _=p(r,m,g.value,c);if(null===_){null===m&&(m=v);break}t&&m&&null===_.alternate&&e(r,m),s=o(_,s,y),null===h?u=_:h.sibling=_,h=_,m=v}if(g.done)return i(r,m),u;if(null===m){for(;!g.done;y++,g=l.next())null!==(g=d(r,g.value,c))&&(s=o(g,s,y),null===h?u=g:h.sibling=g,h=g);return u}for(m=n(r,m);!g.done;y++,g=l.next())null!==(g=f(m,r,y,g.value,c))&&(t&&null!==g.alternate&&m.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?u=g:h.sibling=g,h=g);return t&&m.forEach((function(t){return e(r,t)})),u}return function(t,n,o,l){var c="object"===typeof o&&null!==o&&o.type===E&&null===o.key;c&&(o=o.props.children);var u="object"===typeof o&&null!==o;if(u)switch(o.$$typeof){case w:t:{for(u=o.key,c=n;null!==c;){if(c.key===u){switch(c.tag){case 7:if(o.type===E){i(t,c.sibling),(n=r(c,o.props.children)).return=t,t=n;break t}break;default:if(c.elementType===o.type){i(t,c.sibling),(n=r(c,o.props)).ref=xo(t,c,o),n.return=t,t=n;break t}}i(t,c);break}e(t,c),c=c.sibling}o.type===E?((n=Zl(o.props.children,t.mode,l,o.key)).return=t,t=n):((l=ql(o.type,o.key,o.props,null,t.mode,l)).ref=xo(t,n,o),l.return=t,t=l)}return s(t);case S:t:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){i(t,n.sibling),(n=r(n,o.children||[])).return=t,t=n;break t}i(t,n);break}e(t,n),n=n.sibling}(n=Xl(o,t.mode,l)).return=t,t=n}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==n&&6===n.tag?(i(t,n.sibling),(n=r(n,o)).return=t,t=n):(i(t,n),(n=Wl(o,t.mode,l)).return=t,t=n),s(t);if(bo(o))return m(t,n,o,l);if(U(o))return y(t,n,o,l);if(u&&wo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,W(t.type)||"Component"))}return i(t,n)}}var Eo=So(!0),ko=So(!1),Po={},To=ar(Po),Co=ar(Po),Mo=ar(Po);function Ao(t){if(t===Po)throw Error(a(174));return t}function Oo(t,e){switch(lr(Mo,e),lr(Co,t),lr(To,Po),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ft(null,"");break;default:e=ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}sr(To),lr(To,e)}function Io(){sr(To),sr(Co),sr(Mo)}function Do(t){Ao(Mo.current);var e=Ao(To.current),i=ft(e,t.type);e!==i&&(lr(Co,t),lr(To,i))}function zo(t){Co.current===t&&(sr(To),sr(Co))}var Lo=ar(0);function Ro(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fo=null,Bo=null,jo=!1;function No(t,e){var i=Vl(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=e,i.return=t,i.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i}function Vo(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Uo(t){if(jo){var e=Bo;if(e){var i=e;if(!Vo(t,e)){if(!(e=Zn(i.nextSibling))||!Vo(t,e))return t.flags=-1025&t.flags|2,jo=!1,void(Fo=t);No(Fo,i)}Fo=t,Bo=Zn(e.firstChild)}else t.flags=-1025&t.flags|2,jo=!1,Fo=t}}function Go(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Fo=t}function qo(t){if(t!==Fo)return!1;if(!jo)return Go(t),jo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Vn(e,t.memoizedProps))for(e=Bo;e;)No(t,e),e=Zn(e.nextSibling);if(Go(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if("/$"===i){if(0===e){Bo=Zn(t.nextSibling);break t}e--}else"$"!==i&&"$!"!==i&&"$?"!==i||e++}t=t.nextSibling}Bo=null}}else Bo=Fo?Zn(t.stateNode.nextSibling):null;return!0}function Zo(){Bo=Fo=null,jo=!1}var Ho=[];function Wo(){for(var t=0;t<Ho.length;t++)Ho[t]._workInProgressVersionPrimary=null;Ho.length=0}var Xo=x.ReactCurrentDispatcher,Yo=x.ReactCurrentBatchConfig,Ko=0,$o=null,Jo=null,Qo=null,ta=!1,ea=!1;function ia(){throw Error(a(321))}function na(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!sn(t[i],e[i]))return!1;return!0}function ra(t,e,i,n,r,o){if(Ko=o,$o=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xo.current=null===t||null===t.memoizedState?Aa:Oa,t=i(n,r),ea){o=0;do{if(ea=!1,!(25>o))throw Error(a(301));o+=1,Qo=Jo=null,e.updateQueue=null,Xo.current=Ia,t=i(n,r)}while(ea)}if(Xo.current=Ma,e=null!==Jo&&null!==Jo.next,Ko=0,Qo=Jo=$o=null,ta=!1,e)throw Error(a(300));return t}function oa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qo?$o.memoizedState=Qo=t:Qo=Qo.next=t,Qo}function aa(){if(null===Jo){var t=$o.alternate;t=null!==t?t.memoizedState:null}else t=Jo.next;var e=null===Qo?$o.memoizedState:Qo.next;if(null!==e)Qo=e,Jo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Jo=t).memoizedState,baseState:Jo.baseState,baseQueue:Jo.baseQueue,queue:Jo.queue,next:null},null===Qo?$o.memoizedState=Qo=t:Qo=Qo.next=t}return Qo}function sa(t,e){return"function"===typeof e?e(t):e}function la(t){var e=aa(),i=e.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=t;var n=Jo,r=n.baseQueue,o=i.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}n.baseQueue=r=o,i.pending=null}if(null!==r){r=r.next,n=n.baseState;var l=s=o=null,c=r;do{var u=c.lane;if((Ko&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),n=c.eagerReducer===t?c.eagerState:t(n,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=h,o=n):l=l.next=h,$o.lanes|=u,Bs|=u}c=c.next}while(null!==c&&c!==r);null===l?o=n:l.next=s,sn(n,e.memoizedState)||(za=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,i.lastRenderedState=n}return[e.memoizedState,i.dispatch]}function ca(t){var e=aa(),i=e.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=t;var n=i.dispatch,r=i.pending,o=e.memoizedState;if(null!==r){i.pending=null;var s=r=r.next;do{o=t(o,s.action),s=s.next}while(s!==r);sn(o,e.memoizedState)||(za=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),i.lastRenderedState=o}return[o,n]}function ua(t,e,i){var n=e._getVersion;n=n(e._source);var r=e._workInProgressVersionPrimary;if(null!==r?t=r===n:(t=t.mutableReadLanes,(t=(Ko&t)===t)&&(e._workInProgressVersionPrimary=n,Ho.push(e))),t)return i(e._source);throw Ho.push(e),Error(a(350))}function ha(t,e,i,n){var r=As;if(null===r)throw Error(a(349));var o=e._getVersion,s=o(e._source),l=Xo.current,c=l.useState((function(){return ua(r,e,i)})),u=c[1],h=c[0];c=Qo;var d=t.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var y=$o;return t.memoizedState={refs:p,source:e,subscribe:n},l.useEffect((function(){p.getSnapshot=i,p.setSnapshot=u;var t=o(e._source);if(!sn(s,t)){t=i(e._source),sn(h,t)||(u(t),t=ul(y),r.mutableReadLanes|=t&r.pendingLanes),t=r.mutableReadLanes,r.entangledLanes|=t;for(var n=r.entanglements,a=t;0<a;){var l=31-qe(a),c=1<<l;n[l]|=t,a&=~c}}}),[i,e,n]),l.useEffect((function(){return n(e._source,(function(){var t=p.getSnapshot,i=p.setSnapshot;try{i(t(e._source));var n=ul(y);r.mutableReadLanes|=n&r.pendingLanes}catch(o){i((function(){throw o}))}}))}),[e,n]),sn(f,i)&&sn(m,e)&&sn(d,n)||((t={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:h}).dispatch=u=Ca.bind(null,$o,t),c.queue=t,c.baseQueue=null,h=ua(r,e,i),c.memoizedState=c.baseState=h),h}function da(t,e,i){return ha(aa(),t,e,i)}function pa(t){var e=oa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t}).dispatch=Ca.bind(null,$o,t),[e.memoizedState,t]}function fa(t,e,i,n){return t={tag:t,create:e,destroy:i,deps:n,next:null},null===(e=$o.updateQueue)?(e={lastEffect:null},$o.updateQueue=e,e.lastEffect=t.next=t):null===(i=e.lastEffect)?e.lastEffect=t.next=t:(n=i.next,i.next=t,t.next=n,e.lastEffect=t),t}function ma(t){return t={current:t},oa().memoizedState=t}function ya(){return aa().memoizedState}function va(t,e,i,n){var r=oa();$o.flags|=t,r.memoizedState=fa(1|e,i,void 0,void 0===n?null:n)}function ga(t,e,i,n){var r=aa();n=void 0===n?null:n;var o=void 0;if(null!==Jo){var a=Jo.memoizedState;if(o=a.destroy,null!==n&&na(n,a.deps))return void fa(e,i,o,n)}$o.flags|=t,r.memoizedState=fa(1|e,i,o,n)}function _a(t,e){return va(516,4,t,e)}function ba(t,e){return ga(516,4,t,e)}function xa(t,e){return ga(4,2,t,e)}function wa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Sa(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,ga(4,2,wa.bind(null,e,t),i)}function Ea(){}function ka(t,e){var i=aa();e=void 0===e?null:e;var n=i.memoizedState;return null!==n&&null!==e&&na(e,n[1])?n[0]:(i.memoizedState=[t,e],t)}function Pa(t,e){var i=aa();e=void 0===e?null:e;var n=i.memoizedState;return null!==n&&null!==e&&na(e,n[1])?n[0]:(t=t(),i.memoizedState=[t,e],t)}function Ta(t,e){var i=Vr();Gr(98>i?98:i,(function(){t(!0)})),Gr(97<i?97:i,(function(){var i=Yo.transition;Yo.transition=1;try{t(!1),e()}finally{Yo.transition=i}}))}function Ca(t,e,i){var n=cl(),r=ul(t),o={lane:r,action:i,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===$o||null!==a&&a===$o)ea=ta=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,l=a(s,i);if(o.eagerReducer=a,o.eagerState=l,sn(l,s))return}catch(c){}hl(t,r,n)}}var Ma={readContext:no,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useMutableSource:ia,useOpaqueIdentifier:ia,unstable_isNewReconciler:!1},Aa={readContext:no,useCallback:function(t,e){return oa().memoizedState=[t,void 0===e?null:e],t},useContext:no,useEffect:_a,useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,va(4,2,wa.bind(null,e,t),i)},useLayoutEffect:function(t,e){return va(4,2,t,e)},useMemo:function(t,e){var i=oa();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var n=oa();return e=void 0!==i?i(e):e,n.memoizedState=n.baseState=e,t=(t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Ca.bind(null,$o,t),[n.memoizedState,t]},useRef:ma,useState:pa,useDebugValue:Ea,useDeferredValue:function(t){var e=pa(t),i=e[0],n=e[1];return _a((function(){var e=Yo.transition;Yo.transition=1;try{n(t)}finally{Yo.transition=e}}),[t]),i},useTransition:function(){var t=pa(!1),e=t[0];return ma(t=Ta.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,i){var n=oa();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:i},ha(n,t,e,i)},useOpaqueIdentifier:function(){if(jo){var t=!1,e=function(t){return{$$typeof:L,toString:t,valueOf:t}}((function(){throw t||(t=!0,i("r:"+(Wn++).toString(36))),Error(a(355))})),i=pa(e)[1];return 0===(2&$o.mode)&&($o.flags|=516,fa(5,(function(){i("r:"+(Wn++).toString(36))}),void 0,null)),e}return pa(e="r:"+(Wn++).toString(36)),e},unstable_isNewReconciler:!1},Oa={readContext:no,useCallback:ka,useContext:no,useEffect:ba,useImperativeHandle:Sa,useLayoutEffect:xa,useMemo:Pa,useReducer:la,useRef:ya,useState:function(){return la(sa)},useDebugValue:Ea,useDeferredValue:function(t){var e=la(sa),i=e[0],n=e[1];return ba((function(){var e=Yo.transition;Yo.transition=1;try{n(t)}finally{Yo.transition=e}}),[t]),i},useTransition:function(){var t=la(sa)[0];return[ya().current,t]},useMutableSource:da,useOpaqueIdentifier:function(){return la(sa)[0]},unstable_isNewReconciler:!1},Ia={readContext:no,useCallback:ka,useContext:no,useEffect:ba,useImperativeHandle:Sa,useLayoutEffect:xa,useMemo:Pa,useReducer:ca,useRef:ya,useState:function(){return ca(sa)},useDebugValue:Ea,useDeferredValue:function(t){var e=ca(sa),i=e[0],n=e[1];return ba((function(){var e=Yo.transition;Yo.transition=1;try{n(t)}finally{Yo.transition=e}}),[t]),i},useTransition:function(){var t=ca(sa)[0];return[ya().current,t]},useMutableSource:da,useOpaqueIdentifier:function(){return ca(sa)[0]},unstable_isNewReconciler:!1},Da=x.ReactCurrentOwner,za=!1;function La(t,e,i,n){e.child=null===t?ko(e,null,i,n):Eo(e,t.child,i,n)}function Ra(t,e,i,n,r){i=i.render;var o=e.ref;return io(e,r),n=ra(t,e,i,n,o,r),null===t||za?(e.flags|=1,La(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,is(t,e,r))}function Fa(t,e,i,n,r,o){if(null===t){var a=i.type;return"function"!==typeof a||Ul(a)||void 0!==a.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=ql(i.type,null,n,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ba(t,e,a,n,r,o))}return a=t.child,0===(r&o)&&(r=a.memoizedProps,(i=null!==(i=i.compare)?i:cn)(r,n)&&t.ref===e.ref)?is(t,e,o):(e.flags|=1,(t=Gl(a,n)).ref=e.ref,t.return=e,e.child=t)}function Ba(t,e,i,n,r,o){if(null!==t&&cn(t.memoizedProps,n)&&t.ref===e.ref){if(za=!1,0===(o&r))return e.lanes=t.lanes,is(t,e,o);0!==(16384&t.flags)&&(za=!0)}return Va(t,e,i,n,o)}function ja(t,e,i){var n=e.pendingProps,r=n.children,o=null!==t?t.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},_l(e,i);else{if(0===(1073741824&i))return t=null!==o?o.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},_l(e,t),null;e.memoizedState={baseLanes:0},_l(e,null!==o?o.baseLanes:i)}else null!==o?(n=o.baseLanes|i,e.memoizedState=null):n=i,_l(e,n);return La(t,e,r,i),e.child}function Na(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.flags|=128)}function Va(t,e,i,n,r){var o=fr(i)?dr:ur.current;return o=pr(e,o),io(e,r),i=ra(t,e,i,n,o,r),null===t||za?(e.flags|=1,La(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,is(t,e,r))}function Ua(t,e,i,n,r){if(fr(i)){var o=!0;gr(e)}else o=!1;if(io(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),vo(e,i,n),_o(e,i,n,r),n=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=i.contextType;"object"===typeof c&&null!==c?c=no(c):c=pr(e,c=fr(i)?dr:ur.current);var u=i.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&go(e,a,n,c),ro=!1;var d=e.memoizedState;a.state=d,uo(e,n,a,r),l=e.memoizedState,s!==n||d!==l||hr.current||ro?("function"===typeof u&&(fo(e,i,u,n),l=e.memoizedState),(s=ro||yo(e,i,s,n,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4)):("function"===typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"===typeof a.componentDidMount&&(e.flags|=4),n=!1)}else{a=e.stateNode,ao(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Xr(e.type,s),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=i.contextType)&&null!==l?l=no(l):l=pr(e,l=fr(i)?dr:ur.current);var p=i.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&go(e,a,n,l),ro=!1,d=e.memoizedState,a.state=d,uo(e,n,a,r);var f=e.memoizedState;s!==h||d!==f||hr.current||ro?("function"===typeof p&&(fo(e,i,p,n),f=e.memoizedState),(c=ro||yo(e,i,c,n,d,f,l))?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=f),a.props=n,a.state=f,a.context=l,n=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),n=!1)}return Ga(t,e,i,n,o,r)}function Ga(t,e,i,n,r,o){Na(t,e);var a=0!==(64&e.flags);if(!n&&!a)return r&&_r(e,i,!1),is(t,e,o);n=e.stateNode,Da.current=e;var s=a&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return e.flags|=1,null!==t&&a?(e.child=Eo(e,t.child,null,o),e.child=Eo(e,null,s,o)):La(t,e,s,o),e.memoizedState=n.state,r&&_r(e,i,!0),e.child}function qa(t){var e=t.stateNode;e.pendingContext?yr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&yr(0,e.context,!1),Oo(t,e.containerInfo)}var Za,Ha,Wa,Xa={dehydrated:null,retryLane:0};function Ya(t,e,i){var n,r=e.pendingProps,o=Lo.current,a=!1;return(n=0!==(64&e.flags))||(n=(null===t||null!==t.memoizedState)&&0!==(2&o)),n?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(o|=1),lr(Lo,1&o),null===t?(void 0!==r.fallback&&Uo(e),t=r.children,o=r.fallback,a?(t=Ka(e,t,o,i),e.child.memoizedState={baseLanes:i},e.memoizedState=Xa,t):"number"===typeof r.unstable_expectedLoadTime?(t=Ka(e,t,o,i),e.child.memoizedState={baseLanes:i},e.memoizedState=Xa,e.lanes=33554432,t):((i=Hl({mode:"visible",children:t},e.mode,i,null)).return=e,e.child=i)):(t.memoizedState,a?(r=Ja(t,e,r.children,r.fallback,i),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:i}:{baseLanes:o.baseLanes|i},a.childLanes=t.childLanes&~i,e.memoizedState=Xa,r):(i=$a(t,e,r.children,i),e.memoizedState=null,i))}function Ka(t,e,i,n){var r=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&r)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Hl(e,r,0,null),i=Zl(i,r,n,null),o.return=t,i.return=t,o.sibling=i,t.child=o,i}function $a(t,e,i,n){var r=t.child;return t=r.sibling,i=Gl(r,{mode:"visible",children:i}),0===(2&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=i}function Ja(t,e,i,n,r){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:i};return 0===(2&o)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=s,null!==(a=i.lastEffect)?(e.firstEffect=i.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):i=Gl(a,s),null!==t?n=Gl(t,n):(n=Zl(n,o,r,null)).flags|=2,n.return=e,i.return=e,i.sibling=n,e.child=i,n}function Qa(t,e){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),eo(t.return,e)}function ts(t,e,i,n,r,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=i,a.tailMode=r,a.lastEffect=o)}function es(t,e,i){var n=e.pendingProps,r=n.revealOrder,o=n.tail;if(La(t,e,n.children,i),0!==(2&(n=Lo.current)))n=1&n|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Qa(t,i);else if(19===t.tag)Qa(t,i);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(lr(Lo,n),0===(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(i=e.child,r=null;null!==i;)null!==(t=i.alternate)&&null===Ro(t)&&(r=i),i=i.sibling;null===(i=r)?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),ts(e,!1,r,i,o,e.lastEffect);break;case"backwards":for(i=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===Ro(t)){e.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}ts(e,!0,i,null,o,e.lastEffect);break;case"together":ts(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function is(t,e,i){if(null!==t&&(e.dependencies=t.dependencies),Bs|=e.lanes,0!==(i&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(i=Gl(t=e.child,t.pendingProps),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=Gl(t,t.pendingProps)).return=e;i.sibling=null}return e.child}return null}function ns(t,e){if(!jo)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?e||null===t.tail?t.tail=null:t.tail.sibling=null:n.sibling=null}}function rs(t,e,i){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fr(e.type)&&mr(),null;case 3:return Io(),sr(hr),sr(ur),Wo(),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(qo(e)?e.flags|=4:n.hydrate||(e.flags|=256)),null;case 5:zo(e);var o=Ao(Mo.current);if(i=e.type,null!==t&&null!=e.stateNode)Ha(t,e,i,n),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(null===e.stateNode)throw Error(a(166));return null}if(t=Ao(To.current),qo(e)){n=e.stateNode,i=e.type;var s=e.memoizedProps;switch(n[Yn]=e,n[Kn]=s,i){case"dialog":Tn("cancel",n),Tn("close",n);break;case"iframe":case"object":case"embed":Tn("load",n);break;case"video":case"audio":for(t=0;t<Sn.length;t++)Tn(Sn[t],n);break;case"source":Tn("error",n);break;case"img":case"image":case"link":Tn("error",n),Tn("load",n);break;case"details":Tn("toggle",n);break;case"input":tt(n,s),Tn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Tn("invalid",n);break;case"textarea":lt(n,s),Tn("invalid",n)}for(var c in Et(i,s),t=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?n.textContent!==o&&(t=["children",o]):"number"===typeof o&&n.textContent!==""+o&&(t=["children",""+o]):l.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Tn("scroll",n));switch(i){case"input":K(n),nt(n,s,!0);break;case"textarea":K(n),ut(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Fn)}n=t,e.updateQueue=n,null!==n&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=pt(i)),t===ht?"script"===i?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof n.is?t=c.createElement(i,{is:n.is}):(t=c.createElement(i),"select"===i&&(c=t,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):t=c.createElementNS(t,i),t[Yn]=e,t[Kn]=n,Za(t,e),e.stateNode=t,c=kt(i,n),i){case"dialog":Tn("cancel",t),Tn("close",t),o=n;break;case"iframe":case"object":case"embed":Tn("load",t),o=n;break;case"video":case"audio":for(o=0;o<Sn.length;o++)Tn(Sn[o],t);o=n;break;case"source":Tn("error",t),o=n;break;case"img":case"image":case"link":Tn("error",t),Tn("load",t),o=n;break;case"details":Tn("toggle",t),o=n;break;case"input":tt(t,n),o=Q(t,n),Tn("invalid",t);break;case"option":o=ot(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=r({},n,{value:void 0}),Tn("invalid",t);break;case"textarea":lt(t,n),o=st(t,n),Tn("invalid",t);break;default:o=n}Et(i,o);var u=o;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?wt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&vt(t,h):"children"===s?"string"===typeof h?("textarea"!==i||""!==h)&&gt(t,h):"number"===typeof h&&gt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Tn("scroll",t):null!=h&&b(t,s,h,c))}switch(i){case"input":K(t),nt(t,n,!1);break;case"textarea":K(t),ut(t);break;case"option":null!=n.value&&t.setAttribute("value",""+X(n.value));break;case"select":t.multiple=!!n.multiple,null!=(s=n.value)?at(t,!!n.multiple,s,!1):null!=n.defaultValue&&at(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Fn)}Nn(i,n)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Wa(0,e,t.memoizedProps,n);else{if("string"!==typeof n&&null===e.stateNode)throw Error(a(166));i=Ao(Mo.current),Ao(To.current),qo(e)?(n=e.stateNode,i=e.memoizedProps,n[Yn]=e,n.nodeValue!==i&&(e.flags|=4)):((n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[Yn]=e,e.stateNode=n)}return null;case 13:return sr(Lo),n=e.memoizedState,0!==(64&e.flags)?(e.lanes=i,e):(n=null!==n,i=!1,null===t?void 0!==e.memoizedProps.fallback&&qo(e):i=null!==t.memoizedState,n&&!i&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Lo.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===As||0===(134217727&Bs)&&0===(134217727&js)||ml(As,Is))),(n||i)&&(e.flags|=4),null);case 4:return Io(),null===t&&Mn(e.stateNode.containerInfo),null;case 10:return to(e),null;case 17:return fr(e.type)&&mr(),null;case 19:if(sr(Lo),null===(n=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(c=n.rendering))if(s)ns(n,!1);else{if(0!==Ls||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=Ro(t))){for(e.flags|=64,ns(n,!1),null!==(s=c.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===n.lastEffect&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=i,i=e.child;null!==i;)t=n,(s=i).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,t=c.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return lr(Lo,1&Lo.current|2),e.child}t=t.sibling}null!==n.tail&&Nr()>Gs&&(e.flags|=64,s=!0,ns(n,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=Ro(c))){if(e.flags|=64,s=!0,null!==(i=t.updateQueue)&&(e.updateQueue=i,e.flags|=4),ns(n,!0),null===n.tail&&"hidden"===n.tailMode&&!c.alternate&&!jo)return null!==(e=e.lastEffect=n.lastEffect)&&(e.nextEffect=null),null}else 2*Nr()-n.renderingStartTime>Gs&&1073741824!==i&&(e.flags|=64,s=!0,ns(n,!1),e.lanes=33554432);n.isBackwards?(c.sibling=e.child,e.child=c):(null!==(i=n.last)?i.sibling=c:e.child=c,n.last=c)}return null!==n.tail?(i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=Nr(),i.sibling=null,e=Lo.current,lr(Lo,s?1&e|2:1&e),i):null;case 23:case 24:return bl(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function os(t){switch(t.tag){case 1:fr(t.type)&&mr();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Io(),sr(hr),sr(ur),Wo(),0!==(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return zo(t),null;case 13:return sr(Lo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return sr(Lo),null;case 4:return Io(),null;case 10:return to(t),null;case 23:case 24:return bl(),null;default:return null}}function as(t,e){try{var i="",n=e;do{i+=H(n),n=n.return}while(n);var r=i}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:r}}function ss(t,e){try{console.error(e.value)}catch(i){setTimeout((function(){throw i}))}}Za=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ha=function(t,e,i,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,Ao(To.current);var a,s=null;switch(i){case"input":o=Q(t,o),n=Q(t,n),s=[];break;case"option":o=ot(t,o),n=ot(t,n),s=[];break;case"select":o=r({},o,{value:void 0}),n=r({},n,{value:void 0}),s=[];break;case"textarea":o=st(t,o),n=st(t,n),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(t.onclick=Fn)}for(h in Et(i,n),i=null,o)if(!n.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var u=n[h];if(c=null!=o?o[h]:void 0,n.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(i||(i={}),i[a]=u[a])}else i||(s||(s=[]),s.push(h,i)),i=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Tn("scroll",t),s||c===u||(s=[])):"object"===typeof u&&null!==u&&u.$$typeof===L?u.toString():(s=s||[]).push(h,u))}i&&(s=s||[]).push("style",i);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Wa=function(t,e,i,n){i!==n&&(e.flags|=4)};var ls="function"===typeof WeakMap?WeakMap:Map;function cs(t,e,i){(i=so(-1,i)).tag=3,i.payload={element:null};var n=e.value;return i.callback=function(){Ws||(Ws=!0,Xs=n),ss(0,e)},i}function us(t,e,i){(i=so(-1,i)).tag=3;var n=t.type.getDerivedStateFromError;if("function"===typeof n){var r=e.value;i.payload=function(){return ss(0,e),n(r)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){"function"!==typeof n&&(null===Ys?Ys=new Set([this]):Ys.add(this),ss(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),i}var hs="function"===typeof WeakSet?WeakSet:Set;function ds(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(i){Fl(t,i)}else e.current=null}function ps(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var i=t.memoizedProps,n=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?i:Xr(e.type,i),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&qn(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function fs(t,e,i){switch(i.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=i.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=i.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var r=t;n=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(zl(i,t),Dl(i,t)),t=n}while(t!==e)}return;case 1:return t=i.stateNode,4&i.flags&&(null===e?t.componentDidMount():(n=i.elementType===i.type?e.memoizedProps:Xr(i.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=i.updateQueue)&&ho(i,e,t));case 3:if(null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}ho(i,e,t)}return;case 5:return t=i.stateNode,void(null===e&&4&i.flags&&Nn(i.type,i.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&we(i)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function ms(t,e){for(var i=t;;){if(5===i.tag){var n=i.stateNode;if(e)"function"===typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=i.stateNode;var r=i.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,n.style.display=xt("display",r)}}else if(6===i.tag)i.stateNode.nodeValue=e?"":i.memoizedProps;else if((23!==i.tag&&24!==i.tag||null===i.memoizedState||i===t)&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ys(t,e){if(xr&&"function"===typeof xr.onCommitFiberUnmount)try{xr.onCommitFiberUnmount(br,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var i=t=t.next;do{var n=i,r=n.destroy;if(n=n.tag,void 0!==r)if(0!==(4&n))zl(e,i);else{n=e;try{r()}catch(o){Fl(n,o)}}i=i.next}while(i!==t)}break;case 1:if(ds(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Fl(e,o)}break;case 5:ds(e);break;case 4:ws(t,e)}}function vs(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function gs(t){return 5===t.tag||3===t.tag||4===t.tag}function _s(t){t:{for(var e=t.return;null!==e;){if(gs(e))break t;e=e.return}throw Error(a(160))}var i=e;switch(e=i.stateNode,i.tag){case 5:var n=!1;break;case 3:case 4:e=e.containerInfo,n=!0;break;default:throw Error(a(161))}16&i.flags&&(gt(e,""),i.flags&=-17);t:e:for(i=t;;){for(;null===i.sibling;){if(null===i.return||gs(i.return)){i=null;break t}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags)continue e;if(null===i.child||4===i.tag)continue e;i.child.return=i,i=i.child}if(!(2&i.flags)){i=i.stateNode;break t}}n?bs(t,i,e):xs(t,i,e)}function bs(t,e,i){var n=t.tag,r=5===n||6===n;if(r)t=r?t.stateNode:t.stateNode.instance,e?8===i.nodeType?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(8===i.nodeType?(e=i.parentNode).insertBefore(t,i):(e=i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==e.onclick||(e.onclick=Fn));else if(4!==n&&null!==(t=t.child))for(bs(t,e,i),t=t.sibling;null!==t;)bs(t,e,i),t=t.sibling}function xs(t,e,i){var n=t.tag,r=5===n||6===n;if(r)t=r?t.stateNode:t.stateNode.instance,e?i.insertBefore(t,e):i.appendChild(t);else if(4!==n&&null!==(t=t.child))for(xs(t,e,i),t=t.sibling;null!==t;)xs(t,e,i),t=t.sibling}function ws(t,e){for(var i,n,r=e,o=!1;;){if(!o){o=r.return;t:for(;;){if(null===o)throw Error(a(160));switch(i=o.stateNode,o.tag){case 5:n=!1;break t;case 3:case 4:i=i.containerInfo,n=!0;break t}o=o.return}o=!0}if(5===r.tag||6===r.tag){t:for(var s=t,l=r,c=l;;)if(ys(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break t;for(;null===c.sibling;){if(null===c.return||c.return===l)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n?(s=i,l=r.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):i.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){i=r.stateNode.containerInfo,n=!0,r.child.return=r,r=r.child;continue}}else if(ys(t,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function Ss(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var n=i=i.next;do{3===(3&n.tag)&&(t=n.destroy,n.destroy=void 0,void 0!==t&&t()),n=n.next}while(n!==i)}return;case 1:return;case 5:if(null!=(i=e.stateNode)){n=e.memoizedProps;var r=null!==t?t.memoizedProps:n;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(i[Kn]=n,"input"===t&&"radio"===n.type&&null!=n.name&&et(i,n),kt(t,r),e=kt(t,n),r=0;r<o.length;r+=2){var s=o[r],l=o[r+1];"style"===s?wt(i,l):"dangerouslySetInnerHTML"===s?vt(i,l):"children"===s?gt(i,l):b(i,s,l,e)}switch(t){case"input":it(i,n);break;case"textarea":ct(i,n);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,null!=(o=n.value)?at(i,!!n.multiple,o,!1):t!==!!n.multiple&&(null!=n.defaultValue?at(i,!!n.multiple,n.defaultValue,!0):at(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((i=e.stateNode).hydrate&&(i.hydrate=!1,we(i.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Us=Nr(),ms(e.child,!0)),void Es(e);case 19:return void Es(e);case 17:return;case 23:case 24:return void ms(e,null!==e.memoizedState)}throw Error(a(163))}function Es(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new hs),e.forEach((function(e){var n=jl.bind(null,t,e);i.has(e)||(i.add(e),e.then(n,n))}))}}function ks(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ps=Math.ceil,Ts=x.ReactCurrentDispatcher,Cs=x.ReactCurrentOwner,Ms=0,As=null,Os=null,Is=0,Ds=0,zs=ar(0),Ls=0,Rs=null,Fs=0,Bs=0,js=0,Ns=0,Vs=null,Us=0,Gs=1/0;function qs(){Gs=Nr()+500}var Zs,Hs=null,Ws=!1,Xs=null,Ys=null,Ks=!1,$s=null,Js=90,Qs=[],tl=[],el=null,il=0,nl=null,rl=-1,ol=0,al=0,sl=null,ll=!1;function cl(){return 0!==(48&Ms)?Nr():-1!==rl?rl:rl=Nr()}function ul(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===Vr()?1:2;if(0===ol&&(ol=Fs),0!==Wr.transition){0!==al&&(al=null!==Vs?Vs.pendingLanes:0),t=ol;var e=4186112&~al;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=Vr(),0!==(4&Ms)&&98===t?t=Ne(12,ol):t=Ne(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ol),t}function hl(t,e,i){if(50<il)throw il=0,nl=null,Error(a(185));if(null===(t=dl(t,e)))return null;Ge(t,e,i),t===As&&(js|=e,4===Ls&&ml(t,Is));var n=Vr();1===e?0!==(8&Ms)&&0===(48&Ms)?yl(t):(pl(t,i),0===Ms&&(qs(),Zr())):(0===(4&Ms)||98!==n&&99!==n||(null===el?el=new Set([t]):el.add(t)),pl(t,i)),Vs=t}function dl(t,e){t.lanes|=e;var i=t.alternate;for(null!==i&&(i.lanes|=e),i=t,t=t.return;null!==t;)t.childLanes|=e,null!==(i=t.alternate)&&(i.childLanes|=e),i=t,t=t.return;return 3===i.tag?i.stateNode:null}function pl(t,e){for(var i=t.callbackNode,n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-qe(s),c=1<<l,u=o[l];if(-1===u){if(0===(c&n)||0!==(c&r)){u=e,Fe(c);var h=Re;o[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=e&&(t.expiredLanes|=c);s&=~c}if(n=Be(t,t===As?Is:0),e=Re,0===n)null!==i&&(i!==zr&&Er(i),t.callbackNode=null,t.callbackPriority=0);else{if(null!==i){if(t.callbackPriority===e)return;i!==zr&&Er(i)}15===e?(i=yl.bind(null,t),null===Rr?(Rr=[i],Fr=Sr(Mr,Hr)):Rr.push(i),i=zr):14===e?i=qr(99,yl.bind(null,t)):i=qr(i=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),fl.bind(null,t)),t.callbackPriority=e,t.callbackNode=i}}function fl(t){if(rl=-1,al=ol=0,0!==(48&Ms))throw Error(a(327));var e=t.callbackNode;if(Il()&&t.callbackNode!==e)return null;var i=Be(t,t===As?Is:0);if(0===i)return null;var n=i,r=Ms;Ms|=16;var o=Sl();for(As===t&&Is===n||(qs(),xl(t,n));;)try{Pl();break}catch(l){wl(t,l)}if(Qr(),Ts.current=o,Ms=r,null!==Os?n=0:(As=null,Is=0,n=Ls),0!==(Fs&js))xl(t,0);else if(0!==n){if(2===n&&(Ms|=64,t.hydrate&&(t.hydrate=!1,qn(t.containerInfo)),0!==(i=je(t))&&(n=El(t,i))),1===n)throw e=Rs,xl(t,0),ml(t,i),pl(t,Nr()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=i,n){case 0:case 1:throw Error(a(345));case 2:Ml(t);break;case 3:if(ml(t,i),(62914560&i)===i&&10<(n=Us+500-Nr())){if(0!==Be(t,0))break;if(((r=t.suspendedLanes)&i)!==i){cl(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Un(Ml.bind(null,t),n);break}Ml(t);break;case 4:if(ml(t,i),(4186112&i)===i)break;for(n=t.eventTimes,r=-1;0<i;){var s=31-qe(i);o=1<<s,(s=n[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=Nr()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ps(i/1960))-i)){t.timeoutHandle=Un(Ml.bind(null,t),i);break}Ml(t);break;case 5:Ml(t);break;default:throw Error(a(329))}}return pl(t,Nr()),t.callbackNode===e?fl.bind(null,t):null}function ml(t,e){for(e&=~Ns,e&=~js,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-qe(e),n=1<<i;t[i]=-1,e&=~n}}function yl(t){if(0!==(48&Ms))throw Error(a(327));if(Il(),t===As&&0!==(t.expiredLanes&Is)){var e=Is,i=El(t,e);0!==(Fs&js)&&(i=El(t,e=Be(t,e)))}else i=El(t,e=Be(t,0));if(0!==t.tag&&2===i&&(Ms|=64,t.hydrate&&(t.hydrate=!1,qn(t.containerInfo)),0!==(e=je(t))&&(i=El(t,e))),1===i)throw i=Rs,xl(t,0),ml(t,e),pl(t,Nr()),i;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ml(t),pl(t,Nr()),null}function vl(t,e){var i=Ms;Ms|=1;try{return t(e)}finally{0===(Ms=i)&&(qs(),Zr())}}function gl(t,e){var i=Ms;Ms&=-2,Ms|=8;try{return t(e)}finally{0===(Ms=i)&&(qs(),Zr())}}function _l(t,e){lr(zs,Ds),Ds|=e,Fs|=e}function bl(){Ds=zs.current,sr(zs)}function xl(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,Gn(i)),null!==Os)for(i=Os.return;null!==i;){var n=i;switch(n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&mr();break;case 3:Io(),sr(hr),sr(ur),Wo();break;case 5:zo(n);break;case 4:Io();break;case 13:case 19:sr(Lo);break;case 10:to(n);break;case 23:case 24:bl()}i=i.return}As=t,Os=Gl(t.current,null),Is=Ds=Fs=e,Ls=0,Rs=null,Ns=js=Bs=0}function wl(t,e){for(;;){var i=Os;try{if(Qr(),Xo.current=Ma,ta){for(var n=$o.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}ta=!1}if(Ko=0,Qo=Jo=$o=null,ea=!1,Cs.current=null,null===i||null===i.return){Ls=1,Rs=e,Os=null;break}t:{var o=t,a=i.return,s=i,l=e;if(e=Is,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l;if(0===(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Lo.current),d=a;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var y=d.updateQueue;if(null===y){var v=new Set;v.add(c),d.updateQueue=v}else y.add(c);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=so(-1,1);g.tag=2,lo(s,g)}s.lanes|=1;break t}l=void 0,s=e;var _=o.pingCache;if(null===_?(_=o.pingCache=new ls,l=new Set,_.set(c,l)):void 0===(l=_.get(c))&&(l=new Set,_.set(c,l)),!l.has(s)){l.add(s);var b=Bl.bind(null,o,c,s);c.then(b,b)}d.flags|=4096,d.lanes=e;break t}d=d.return}while(null!==d);l=Error((W(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),l=as(l,s),d=a;do{switch(d.tag){case 3:o=l,d.flags|=4096,e&=-e,d.lanes|=e,co(d,cs(0,o,e));break t;case 1:o=l;var x=d.type,w=d.stateNode;if(0===(64&d.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ys||!Ys.has(w)))){d.flags|=4096,e&=-e,d.lanes|=e,co(d,us(d,o,e));break t}}d=d.return}while(null!==d)}Cl(i)}catch(S){e=S,Os===i&&null!==i&&(Os=i=i.return);continue}break}}function Sl(){var t=Ts.current;return Ts.current=Ma,null===t?Ma:t}function El(t,e){var i=Ms;Ms|=16;var n=Sl();for(As===t&&Is===e||xl(t,e);;)try{kl();break}catch(r){wl(t,r)}if(Qr(),Ms=i,Ts.current=n,null!==Os)throw Error(a(261));return As=null,Is=0,Ls}function kl(){for(;null!==Os;)Tl(Os)}function Pl(){for(;null!==Os&&!kr();)Tl(Os)}function Tl(t){var e=Zs(t.alternate,t,Ds);t.memoizedProps=t.pendingProps,null===e?Cl(t):Os=e,Cs.current=null}function Cl(t){var e=t;do{var i=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(i=rs(i,e,Ds)))return void(Os=i);if(24!==(i=e).tag&&23!==i.tag||null===i.memoizedState||0!==(1073741824&Ds)||0===(4&i.mode)){for(var n=0,r=i.child;null!==r;)n|=r.lanes|r.childLanes,r=r.sibling;i.childLanes=n}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(i=os(e)))return i.flags&=2047,void(Os=i);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Os=e);Os=e=t}while(null!==e);0===Ls&&(Ls=5)}function Ml(t){var e=Vr();return Gr(99,Al.bind(null,t,e)),null}function Al(t,e){do{Il()}while(null!==$s);if(0!==(48&Ms))throw Error(a(327));var i=t.finishedWork;if(null===i)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(a(177));t.callbackNode=null;var n=i.lanes|i.childLanes,r=n,o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;for(var s=t.eventTimes,l=t.expirationTimes;0<o;){var c=31-qe(o),u=1<<c;r[c]=0,s[c]=-1,l[c]=-1,o&=~u}if(null!==el&&0===(24&n)&&el.has(t)&&el.delete(t),t===As&&(Os=As=null,Is=0),1<i.flags?null!==i.lastEffect?(i.lastEffect.nextEffect=i,n=i.firstEffect):n=i:n=i.firstEffect,null!==n){if(r=Ms,Ms|=32,Cs.current=null,Bn=Ye,fn(s=pn())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else t:if(l=(l=s.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,o=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(P){l=null;break t}var h=0,d=-1,p=-1,f=0,m=0,y=s,v=null;e:for(;;){for(var g;y!==l||0!==o&&3!==y.nodeType||(d=h+o),y!==c||0!==u&&3!==y.nodeType||(p=h+u),3===y.nodeType&&(h+=y.nodeValue.length),null!==(g=y.firstChild);)v=y,y=g;for(;;){if(y===s)break e;if(v===l&&++f===o&&(d=h),v===c&&++m===u&&(p=h),null!==(g=y.nextSibling))break;v=(y=v).parentNode}y=g}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;jn={focusedElem:s,selectionRange:l},Ye=!1,sl=null,ll=!1,Hs=n;do{try{Ol()}catch(P){if(null===Hs)throw Error(a(330));Fl(Hs,P),Hs=Hs.nextEffect}}while(null!==Hs);sl=null,Hs=n;do{try{for(s=t;null!==Hs;){var _=Hs.flags;if(16&_&&gt(Hs.stateNode,""),128&_){var b=Hs.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:_s(Hs),Hs.flags&=-3;break;case 6:_s(Hs),Hs.flags&=-3,Ss(Hs.alternate,Hs);break;case 1024:Hs.flags&=-1025;break;case 1028:Hs.flags&=-1025,Ss(Hs.alternate,Hs);break;case 4:Ss(Hs.alternate,Hs);break;case 8:ws(s,l=Hs);var w=l.alternate;vs(l),null!==w&&vs(w)}Hs=Hs.nextEffect}}catch(P){if(null===Hs)throw Error(a(330));Fl(Hs,P),Hs=Hs.nextEffect}}while(null!==Hs);if(x=jn,b=pn(),_=x.focusedElem,s=x.selectionRange,b!==_&&_&&_.ownerDocument&&dn(_.ownerDocument.documentElement,_)){null!==s&&fn(_)&&(b=s.start,void 0===(x=s.end)&&(x=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(x,_.value.length)):(x=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),l=_.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!x.extend&&w>s&&(l=s,s=w,w=l),l=hn(_,w),o=hn(_,s),l&&o&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),w>s?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=_;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(x=b[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ye=!!Bn,jn=Bn=null,t.current=i,Hs=n;do{try{for(_=t;null!==Hs;){var S=Hs.flags;if(36&S&&fs(_,Hs.alternate,Hs),128&S){b=void 0;var E=Hs.ref;if(null!==E){var k=Hs.stateNode;switch(Hs.tag){case 5:b=k;break;default:b=k}"function"===typeof E?E(b):E.current=b}}Hs=Hs.nextEffect}}catch(P){if(null===Hs)throw Error(a(330));Fl(Hs,P),Hs=Hs.nextEffect}}while(null!==Hs);Hs=null,Lr(),Ms=r}else t.current=i;if(Ks)Ks=!1,$s=t,Js=e;else for(Hs=n;null!==Hs;)e=Hs.nextEffect,Hs.nextEffect=null,8&Hs.flags&&((S=Hs).sibling=null,S.stateNode=null),Hs=e;if(0===(n=t.pendingLanes)&&(Ys=null),1===n?t===nl?il++:(il=0,nl=t):il=0,i=i.stateNode,xr&&"function"===typeof xr.onCommitFiberRoot)try{xr.onCommitFiberRoot(br,i,void 0,64===(64&i.current.flags))}catch(P){}if(pl(t,Nr()),Ws)throw Ws=!1,t=Xs,Xs=null,t;return 0!==(8&Ms)||Zr(),null}function Ol(){for(;null!==Hs;){var t=Hs.alternate;ll||null===sl||(0!==(8&Hs.flags)?te(Hs,sl)&&(ll=!0):13===Hs.tag&&ks(t,Hs)&&te(Hs,sl)&&(ll=!0));var e=Hs.flags;0!==(256&e)&&ps(t,Hs),0===(512&e)||Ks||(Ks=!0,qr(97,(function(){return Il(),null}))),Hs=Hs.nextEffect}}function Il(){if(90!==Js){var t=97<Js?97:Js;return Js=90,Gr(t,Ll)}return!1}function Dl(t,e){Qs.push(e,t),Ks||(Ks=!0,qr(97,(function(){return Il(),null})))}function zl(t,e){tl.push(e,t),Ks||(Ks=!0,qr(97,(function(){return Il(),null})))}function Ll(){if(null===$s)return!1;var t=$s;if($s=null,0!==(48&Ms))throw Error(a(331));var e=Ms;Ms|=32;var i=tl;tl=[];for(var n=0;n<i.length;n+=2){var r=i[n],o=i[n+1],s=r.destroy;if(r.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));Fl(o,c)}}for(i=Qs,Qs=[],n=0;n<i.length;n+=2){r=i[n],o=i[n+1];try{var l=r.create;r.destroy=l()}catch(c){if(null===o)throw Error(a(330));Fl(o,c)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Ms=e,Zr(),!0}function Rl(t,e,i){lo(t,e=cs(0,e=as(i,e),1)),e=cl(),null!==(t=dl(t,1))&&(Ge(t,1,e),pl(t,e))}function Fl(t,e){if(3===t.tag)Rl(t,t,e);else for(var i=t.return;null!==i;){if(3===i.tag){Rl(i,t,e);break}if(1===i.tag){var n=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Ys||!Ys.has(n))){var r=us(i,t=as(e,t),1);if(lo(i,r),r=cl(),null!==(i=dl(i,1)))Ge(i,1,r),pl(i,r);else if("function"===typeof n.componentDidCatch&&(null===Ys||!Ys.has(n)))try{n.componentDidCatch(e,t)}catch(o){}break}}i=i.return}}function Bl(t,e,i){var n=t.pingCache;null!==n&&n.delete(e),e=cl(),t.pingedLanes|=t.suspendedLanes&i,As===t&&(Is&i)===i&&(4===Ls||3===Ls&&(62914560&Is)===Is&&500>Nr()-Us?xl(t,0):Ns|=i),pl(t,e)}function jl(t,e){var i=t.stateNode;null!==i&&i.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===Vr()?1:2:(0===ol&&(ol=Fs),0===(e=Ve(62914560&~ol))&&(e=4194304))),i=cl(),null!==(t=dl(t,e))&&(Ge(t,e,i),pl(t,i))}function Nl(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vl(t,e,i,n){return new Nl(t,e,i,n)}function Ul(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Gl(t,e){var i=t.alternate;return null===i?((i=Vl(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function ql(t,e,i,n,r,o){var s=2;if(n=t,"function"===typeof t)Ul(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case E:return Zl(i.children,r,o,e);case R:s=8,r|=16;break;case k:s=8,r|=1;break;case P:return(t=Vl(12,i,e,8|r)).elementType=P,t.type=P,t.lanes=o,t;case A:return(t=Vl(13,i,e,r)).type=A,t.elementType=A,t.lanes=o,t;case O:return(t=Vl(19,i,e,r)).elementType=O,t.lanes=o,t;case F:return Hl(i,r,o,e);case B:return(t=Vl(24,i,e,r)).elementType=B,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:s=10;break t;case C:s=9;break t;case M:s=11;break t;case I:s=14;break t;case D:s=16,n=null;break t;case z:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Vl(s,i,e,r)).elementType=t,e.type=n,e.lanes=o,e}function Zl(t,e,i,n){return(t=Vl(7,t,n,e)).lanes=i,t}function Hl(t,e,i,n){return(t=Vl(23,t,n,e)).elementType=F,t.lanes=i,t}function Wl(t,e,i){return(t=Vl(6,t,null,e)).lanes=i,t}function Xl(t,e,i){return(e=Vl(4,null!==t.children?t.children:[],t.key,e)).lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yl(t,e,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ue(0),this.expirationTimes=Ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.mutableSourceEagerHydrationData=null}function Kl(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==n?null:""+n,children:t,containerInfo:e,implementation:i}}function $l(t,e,i,n){var r=e.current,o=cl(),s=ul(r);t:if(i){e:{if(Kt(i=i._reactInternals)!==i||1!==i.tag)throw Error(a(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(fr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(a(171))}if(1===i.tag){var c=i.type;if(fr(c)){i=vr(i,c,l);break t}}i=l}else i=cr;return null===e.context?e.context=i:e.pendingContext=i,(e=so(o,s)).payload={element:t},null!==(n=void 0===n?null:n)&&(e.callback=n),lo(r,e),hl(r,s,o),s}function Jl(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Ql(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<e?i:e}}function tc(t,e){Ql(t,e),(t=t.alternate)&&Ql(t,e)}function ec(t,e,i){var n=null!=i&&null!=i.hydrationOptions&&i.hydrationOptions.mutableSources||null;if(i=new Yl(t,e,null!=i&&!0===i.hydrate),e=Vl(3,null,null,2===e?7:1===e?3:0),i.current=e,e.stateNode=i,oo(e),t[$n]=i.current,Mn(8===t.nodeType?t.parentNode:t),n)for(t=0;t<n.length;t++){var r=(e=n[t])._getVersion;r=r(e._source),null==i.mutableSourceEagerHydrationData?i.mutableSourceEagerHydrationData=[e,r]:i.mutableSourceEagerHydrationData.push(e,r)}this._internalRoot=i}function ic(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function nc(t,e,i,n,r){var o=i._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof r){var s=r;r=function(){var t=Jl(a);s.call(t)}}$l(e,a,t,r)}else{if(o=i._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var i;i=t.lastChild;)t.removeChild(i);return new ec(t,0,e?{hydrate:!0}:void 0)}(i,n),a=o._internalRoot,"function"===typeof r){var l=r;r=function(){var t=Jl(a);l.call(t)}}gl((function(){$l(e,a,t,r)}))}return Jl(a)}function rc(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(e))throw Error(a(200));return Kl(t,e,null,i)}Zs=function(t,e,i){var n=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||hr.current)za=!0;else{if(0===(i&n)){switch(za=!1,e.tag){case 3:qa(e),Zo();break;case 5:Do(e);break;case 1:fr(e.type)&&gr(e);break;case 4:Oo(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var r=e.type._context;lr(Yr,r._currentValue),r._currentValue=n;break;case 13:if(null!==e.memoizedState)return 0!==(i&e.child.childLanes)?Ya(t,e,i):(lr(Lo,1&Lo.current),null!==(e=is(t,e,i))?e.sibling:null);lr(Lo,1&Lo.current);break;case 19:if(n=0!==(i&e.childLanes),0!==(64&t.flags)){if(n)return es(t,e,i);e.flags|=64}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),lr(Lo,Lo.current),n)break;return null;case 23:case 24:return e.lanes=0,ja(t,e,i)}return is(t,e,i)}za=0!==(16384&t.flags)}else za=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=pr(e,ur.current),io(e,i),r=ra(null,e,n,t,r,i),e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,fr(n)){var o=!0;gr(e)}else o=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,oo(e);var s=n.getDerivedStateFromProps;"function"===typeof s&&fo(e,n,s,t),r.updater=mo,e.stateNode=r,r._reactInternals=e,_o(e,n,t,i),e=Ga(null,e,n,!0,o,i)}else e.tag=0,La(null,e,r,i),e=e.child;return e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(o=r._init)(r._payload),e.type=r,o=e.tag=function(t){if("function"===typeof t)return Ul(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===I)return 14}return 2}(r),t=Xr(r,t),o){case 0:e=Va(null,e,r,t,i);break t;case 1:e=Ua(null,e,r,t,i);break t;case 11:e=Ra(null,e,r,t,i);break t;case 14:e=Fa(null,e,r,Xr(r.type,t),n,i);break t}throw Error(a(306,r,""))}return e;case 0:return n=e.type,r=e.pendingProps,Va(t,e,n,r=e.elementType===n?r:Xr(n,r),i);case 1:return n=e.type,r=e.pendingProps,Ua(t,e,n,r=e.elementType===n?r:Xr(n,r),i);case 3:if(qa(e),n=e.updateQueue,null===t||null===n)throw Error(a(282));if(n=e.pendingProps,r=null!==(r=e.memoizedState)?r.element:null,ao(t,e),uo(e,n,null,i),(n=e.memoizedState.element)===r)Zo(),e=is(t,e,i);else{if((o=(r=e.stateNode).hydrate)&&(Bo=Zn(e.stateNode.containerInfo.firstChild),Fo=e,o=jo=!0),o){if(null!=(t=r.mutableSourceEagerHydrationData))for(r=0;r<t.length;r+=2)(o=t[r])._workInProgressVersionPrimary=t[r+1],Ho.push(o);for(i=ko(e,null,n,i),e.child=i;i;)i.flags=-3&i.flags|1024,i=i.sibling}else La(t,e,n,i),Zo();e=e.child}return e;case 5:return Do(e),null===t&&Uo(e),n=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,s=r.children,Vn(n,r)?s=null:null!==o&&Vn(n,o)&&(e.flags|=16),Na(t,e),La(t,e,s,i),e.child;case 6:return null===t&&Uo(e),null;case 13:return Ya(t,e,i);case 4:return Oo(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=Eo(e,null,n,i):La(t,e,n,i),e.child;case 11:return n=e.type,r=e.pendingProps,Ra(t,e,n,r=e.elementType===n?r:Xr(n,r),i);case 7:return La(t,e,e.pendingProps,i),e.child;case 8:case 12:return La(t,e,e.pendingProps.children,i),e.child;case 10:t:{n=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value;var l=e.type._context;if(lr(Yr,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=sn(l,o)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(l,o):1073741823))){if(s.children===r.children&&!hr.current){e=is(t,e,i);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===n&&0!==(u.observedBits&o)){1===l.tag&&((u=so(-1,i&-i)).tag=2,lo(l,u)),l.lanes|=i,null!==(u=l.alternate)&&(u.lanes|=i),eo(l.return,i),c.lanes|=i;break}u=u.next}}else s=10===l.tag&&l.type===e.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===e){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}La(t,e,r.children,i),e=e.child}return e;case 9:return r=e.type,n=(o=e.pendingProps).children,io(e,i),n=n(r=no(r,o.unstable_observedBits)),e.flags|=1,La(t,e,n,i),e.child;case 14:return o=Xr(r=e.type,e.pendingProps),Fa(t,e,r,o=Xr(r.type,o),n,i);case 15:return Ba(t,e,e.type,e.pendingProps,n,i);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Xr(n,r),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,fr(n)?(t=!0,gr(e)):t=!1,io(e,i),vo(e,n,r),_o(e,n,r,i),Ga(null,e,n,!0,t,i);case 19:return es(t,e,i);case 23:case 24:return ja(t,e,i)}throw Error(a(156,e.tag))},ec.prototype.render=function(t){$l(t,this._internalRoot,null,null)},ec.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;$l(null,t,null,(function(){e[$n]=null}))},ee=function(t){13===t.tag&&(hl(t,4,cl()),tc(t,4))},ie=function(t){13===t.tag&&(hl(t,67108864,cl()),tc(t,67108864))},ne=function(t){if(13===t.tag){var e=cl(),i=ul(t);hl(t,i,e),tc(t,i)}},re=function(t,e){return e()},Tt=function(t,e,i){switch(e){case"input":if(it(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var n=i[e];if(n!==t&&n.form===t.form){var r=ir(n);if(!r)throw Error(a(90));$(n),it(n,r)}}}break;case"textarea":ct(t,i);break;case"select":null!=(e=i.value)&&at(t,!!i.multiple,e,!1)}},Dt=vl,zt=function(t,e,i,n,r){var o=Ms;Ms|=4;try{return Gr(98,t.bind(null,e,i,n,r))}finally{0===(Ms=o)&&(qs(),Zr())}},Lt=function(){0===(49&Ms)&&(function(){if(null!==el){var t=el;el=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,pl(t,Nr())}))}Zr()}(),Il())},Rt=function(t,e){var i=Ms;Ms|=2;try{return t(e)}finally{0===(Ms=i)&&(qs(),Zr())}};var oc={Events:[tr,er,ir,Ot,It,Il,{current:!1}]},ac={findFiberByHostInstance:Qn,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},sc={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Qt(t))?null:t.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{br=lc.inject(sc),xr=lc}catch(yt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,e.createPortal=rc,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=Qt(e))?null:t.stateNode},e.flushSync=function(t,e){var i=Ms;if(0!==(48&i))return t(e);Ms|=1;try{if(t)return Gr(99,t.bind(null,e))}finally{Ms=i,Zr()}},e.hydrate=function(t,e,i){if(!ic(e))throw Error(a(200));return nc(null,t,e,!0,i)},e.render=function(t,e,i){if(!ic(e))throw Error(a(200));return nc(null,t,e,!1,i)},e.unmountComponentAtNode=function(t){if(!ic(t))throw Error(a(40));return!!t._reactRootContainer&&(gl((function(){nc(null,null,t,!1,(function(){t._reactRootContainer=null,t[$n]=null}))})),!0)},e.unstable_batchedUpdates=vl,e.unstable_createPortal=function(t,e){return rc(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,i,n){if(!ic(i))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return nc(t,e,i,!1,n)},e.version="17.0.1"},function(t,e,i){"use strict";t.exports=i(139)},function(t,e,i){"use strict";var n,r,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,h=null,d=function t(){if(null!==u)try{var i=e.unstable_now();u(!0,i),u=null}catch(n){throw setTimeout(t,0),n}};n=function(t){null!==u?setTimeout(n,0,t):(u=t,setTimeout(d,0))},r=function(t,e){h=setTimeout(t,e)},o=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,v=null,g=-1,_=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();b=t+_;try{v(!0,t)?w.postMessage(null):(y=!1,v=null)}catch(i){throw w.postMessage(null),i}}else y=!1},n=function(t){v=t,y||(y=!0,w.postMessage(null))},r=function(t,i){g=p((function(){t(e.unstable_now())}),i)},o=function(){f(g),g=-1}}function S(t,e){var i=t.length;t.push(e);t:for(;;){var n=i-1>>>1,r=t[n];if(!(void 0!==r&&0<P(r,e)))break t;t[n]=e,t[i]=r,i=n}}function E(t){return void 0===(t=t[0])?null:t}function k(t){var e=t[0];if(void 0!==e){var i=t.pop();if(i!==e){t[0]=i;t:for(var n=0,r=t.length;n<r;){var o=2*(n+1)-1,a=t[o],s=o+1,l=t[s];if(void 0!==a&&0>P(a,i))void 0!==l&&0>P(l,a)?(t[n]=l,t[s]=i,n=s):(t[n]=a,t[o]=i,n=o);else{if(!(void 0!==l&&0>P(l,i)))break t;t[n]=l,t[s]=i,n=s}}}return e}return null}function P(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}var T=[],C=[],M=1,A=null,O=3,I=!1,D=!1,z=!1;function L(t){for(var e=E(C);null!==e;){if(null===e.callback)k(C);else{if(!(e.startTime<=t))break;k(C),e.sortIndex=e.expirationTime,S(T,e)}e=E(C)}}function R(t){if(z=!1,L(t),!D)if(null!==E(T))D=!0,n(F);else{var e=E(C);null!==e&&r(R,e.startTime-t)}}function F(t,i){D=!1,z&&(z=!1,o()),I=!0;var n=O;try{for(L(i),A=E(T);null!==A&&(!(A.expirationTime>i)||t&&!e.unstable_shouldYield());){var a=A.callback;if("function"===typeof a){A.callback=null,O=A.priorityLevel;var s=a(A.expirationTime<=i);i=e.unstable_now(),"function"===typeof s?A.callback=s:A===E(T)&&k(T),L(i)}else k(T);A=E(T)}if(null!==A)var l=!0;else{var c=E(C);null!==c&&r(R,c.startTime-i),l=!1}return l}finally{A=null,O=n,I=!1}}var B=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){D||I||(D=!0,n(F))},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return E(T)},e.unstable_next=function(t){switch(O){case 1:case 2:case 3:var e=3;break;default:e=O}var i=O;O=e;try{return t()}finally{O=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=B,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=O;O=t;try{return e()}finally{O=i}},e.unstable_scheduleCallback=function(t,i,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:M++,callback:i,priorityLevel:t,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(t.sortIndex=a,S(C,t),null===E(T)&&t===E(C)&&(z?o():z=!0,r(R,a-s))):(t.sortIndex=l,S(T,t),D||I||(D=!0,n(F))),t},e.unstable_wrapCallback=function(t){var e=O;return function(){var i=O;O=e;try{return t.apply(this,arguments)}finally{O=i}}}},,,,,function(t,e,i){"use strict";i.r(e);var n={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},r={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},o=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],a={CSS:{},springs:{}};function s(t,e,i){return Math.min(Math.max(t,e),i)}function l(t,e){return t.indexOf(e)>-1}function c(t,e){return t.apply(null,e)}var u={arr:function(t){return Array.isArray(t)},obj:function(t){return l(Object.prototype.toString.call(t),"Object")},pth:function(t){return u.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||u.svg(t)},str:function(t){return"string"===typeof t},fnc:function(t){return"function"===typeof t},und:function(t){return"undefined"===typeof t},nil:function(t){return u.und(t)||null===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return u.hex(t)||u.rgb(t)||u.hsl(t)},key:function(t){return!n.hasOwnProperty(t)&&!r.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function h(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map((function(t){return parseFloat(t)})):[]}function d(t,e){var i=h(t),n=s(u.und(i[0])?1:i[0],.1,100),r=s(u.und(i[1])?100:i[1],.1,100),o=s(u.und(i[2])?10:i[2],.1,100),l=s(u.und(i[3])?0:i[3],.1,100),c=Math.sqrt(r/n),d=o/(2*Math.sqrt(r*n)),p=d<1?c*Math.sqrt(1-d*d):0,f=d<1?(d*c-l)/p:-l+c;function m(t){var i=e?e*t/1e3:t;return i=d<1?Math.exp(-i*d*c)*(1*Math.cos(p*i)+f*Math.sin(p*i)):(1+f*i)*Math.exp(-i*c),0===t||1===t?t:1-i}return e?m:function(){var e=a.springs[t];if(e)return e;for(var i=1/6,n=0,r=0;;)if(1===m(n+=i)){if(++r>=16)break}else r=0;var o=n*i*1e3;return a.springs[t]=o,o}}function p(t){return void 0===t&&(t=10),function(e){return Math.ceil(s(e,1e-6,1)*t)*(1/t)}}var f=function(){var t=.1;function e(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function n(t){return 3*t}function r(t,r,o){return((e(r,o)*t+i(r,o))*t+n(r))*t}function o(t,r,o){return 3*e(r,o)*t*t+2*i(r,o)*t+n(r)}return function(e,i,n,a){if(0<=e&&e<=1&&0<=n&&n<=1){var s=new Float32Array(11);if(e!==i||n!==a)for(var l=0;l<11;++l)s[l]=r(l*t,e,n);return function(t){return e===i&&n===a||0===t||1===t?t:r(c(t),i,a)}}function c(i){for(var a=0,l=1;10!==l&&s[l]<=i;++l)a+=t;--l;var c=a+(i-s[l])/(s[l+1]-s[l])*t,u=o(c,e,n);return u>=.001?function(t,e,i,n){for(var a=0;a<4;++a){var s=o(e,i,n);if(0===s)return e;e-=(r(e,i,n)-t)/s}return e}(i,c,e,n):0===u?c:function(t,e,i,n,o){var a,s,l=0;do{(a=r(s=e+(i-e)/2,n,o)-t)>0?i=s:e=s}while(Math.abs(a)>1e-7&&++l<10);return s}(i,a,a+t,e,n)}}}(),m=function(){var t={linear:function(){return function(t){return t}}},e={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===t&&(t=1),void 0===e&&(e=.5);var i=s(t,1,10),n=s(e,.1,2);return function(t){return 0===t||1===t?t:-i*Math.pow(2,10*(t-1))*Math.sin((t-1-n/(2*Math.PI)*Math.asin(1/i))*(2*Math.PI)/n)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach((function(t,i){e[t]=function(){return function(t){return Math.pow(t,i+2)}}})),Object.keys(e).forEach((function(i){var n=e[i];t["easeIn"+i]=n,t["easeOut"+i]=function(t,e){return function(i){return 1-n(t,e)(1-i)}},t["easeInOut"+i]=function(t,e){return function(i){return i<.5?n(t,e)(2*i)/2:1-n(t,e)(-2*i+2)/2}},t["easeOutIn"+i]=function(t,e){return function(i){return i<.5?(1-n(t,e)(1-2*i))/2:(n(t,e)(2*i-1)+1)/2}}})),t}();function y(t,e){if(u.fnc(t))return t;var i=t.split("(")[0],n=m[i],r=h(t);switch(i){case"spring":return d(t,e);case"cubicBezier":return c(f,r);case"steps":return c(p,r);default:return c(n,r)}}function v(t){try{return document.querySelectorAll(t)}catch(e){return}}function g(t,e){for(var i=t.length,n=arguments.length>=2?arguments[1]:void 0,r=[],o=0;o<i;o++)if(o in t){var a=t[o];e.call(n,a,o,t)&&r.push(a)}return r}function _(t){return t.reduce((function(t,e){return t.concat(u.arr(e)?_(e):e)}),[])}function b(t){return u.arr(t)?t:(u.str(t)&&(t=v(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function x(t,e){return t.some((function(t){return t===e}))}function w(t){var e={};for(var i in t)e[i]=t[i];return e}function S(t,e){var i=w(t);for(var n in t)i[n]=e.hasOwnProperty(n)?e[n]:t[n];return i}function E(t,e){var i=w(t);for(var n in e)i[n]=u.und(t[n])?e[n]:t[n];return i}function k(t){return u.rgb(t)?function(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}(t):u.hex(t)?function(t){var e=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return e+e+i+i+n+n})),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+",1)"}(t):u.hsl(t)?function(t){var e,i,n,r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),o=parseInt(r[1],10)/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100,l=r[4]||1;function c(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(0==a)e=i=n=s;else{var u=s<.5?s*(1+a):s+a-s*a,h=2*s-u;e=c(h,u,o+1/3),i=c(h,u,o),n=c(h,u,o-1/3)}return"rgba("+255*e+","+255*i+","+255*n+","+l+")"}(t):void 0}function P(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function T(t,e){return u.fnc(t)?t(e.target,e.id,e.total):t}function C(t,e){return t.getAttribute(e)}function M(t,e,i){if(x([i,"deg","rad","turn"],P(e)))return e;var n=a.CSS[e+i];if(!u.und(n))return n;var r=document.createElement(t.tagName),o=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;o.appendChild(r),r.style.position="absolute",r.style.width=100+i;var s=100/r.offsetWidth;o.removeChild(r);var l=s*parseFloat(e);return a.CSS[e+i]=l,l}function A(t,e,i){if(e in t.style){var n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.style[e]||getComputedStyle(t).getPropertyValue(n)||"0";return i?M(t,r,i):r}}function O(t,e){return u.dom(t)&&!u.inp(t)&&(!u.nil(C(t,e))||u.svg(t)&&t[e])?"attribute":u.dom(t)&&x(o,e)?"transform":u.dom(t)&&"transform"!==e&&A(t,e)?"css":null!=t[e]?"object":void 0}function I(t){if(u.dom(t)){for(var e,i=t.style.transform||"",n=/(\w+)\(([^)]*)\)/g,r=new Map;e=n.exec(i);)r.set(e[1],e[2]);return r}}function D(t,e,i,n){var r=l(e,"scale")?1:0+function(t){return l(t,"translate")||"perspective"===t?"px":l(t,"rotate")||l(t,"skew")?"deg":void 0}(e),o=I(t).get(e)||r;return i&&(i.transforms.list.set(e,o),i.transforms.last=e),n?M(t,o,n):o}function z(t,e,i,n){switch(O(t,e)){case"transform":return D(t,e,n,i);case"css":return A(t,e,i);case"attribute":return C(t,e);default:return t[e]||0}}function L(t,e){var i=/^(\*=|\+=|-=)/.exec(t);if(!i)return t;var n=P(t)||0,r=parseFloat(e),o=parseFloat(t.replace(i[0],""));switch(i[0][0]){case"+":return r+o+n;case"-":return r-o+n;case"*":return r*o+n}}function R(t,e){if(u.col(t))return k(t);if(/\s/g.test(t))return t;var i=P(t),n=i?t.substr(0,t.length-i.length):t;return e?n+e:n}function F(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function B(t){for(var e,i=t.points,n=0,r=0;r<i.numberOfItems;r++){var o=i.getItem(r);r>0&&(n+=F(e,o)),e=o}return n}function j(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*C(t,"r")}(t);case"rect":return function(t){return 2*C(t,"width")+2*C(t,"height")}(t);case"line":return function(t){return F({x:C(t,"x1"),y:C(t,"y1")},{x:C(t,"x2"),y:C(t,"y2")})}(t);case"polyline":return B(t);case"polygon":return function(t){var e=t.points;return B(t)+F(e.getItem(e.numberOfItems-1),e.getItem(0))}(t)}}function N(t,e){var i=e||{},n=i.el||function(t){for(var e=t.parentNode;u.svg(e)&&u.svg(e.parentNode);)e=e.parentNode;return e}(t),r=n.getBoundingClientRect(),o=C(n,"viewBox"),a=r.width,s=r.height,l=i.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:a,h:s,vW:l[2],vH:l[3]}}function V(t,e,i){function n(i){void 0===i&&(i=0);var n=e+i>=1?e+i:0;return t.el.getPointAtLength(n)}var r=N(t.el,t.svg),o=n(),a=n(-1),s=n(1),l=i?1:r.w/r.vW,c=i?1:r.h/r.vH;switch(t.property){case"x":return(o.x-r.x)*l;case"y":return(o.y-r.y)*c;case"angle":return 180*Math.atan2(s.y-a.y,s.x-a.x)/Math.PI}}function U(t,e){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=R(u.pth(t)?t.totalLength:t,e)+"";return{original:n,numbers:n.match(i)?n.match(i).map(Number):[0],strings:u.str(t)||e?n.split(i):[]}}function G(t){return g(t?_(u.arr(t)?t.map(b):b(t)):[],(function(t,e,i){return i.indexOf(t)===e}))}function q(t){var e=G(t);return e.map((function(t,i){return{target:t,id:i,total:e.length,transforms:{list:I(t)}}}))}function Z(t,e){var i=w(e);if(/^spring/.test(i.easing)&&(i.duration=d(i.easing)),u.arr(t)){var n=t.length;2===n&&!u.obj(t[0])?t={value:t}:u.fnc(e.duration)||(i.duration=e.duration/n)}var r=u.arr(t)?t:[t];return r.map((function(t,i){var n=u.obj(t)&&!u.pth(t)?t:{value:t};return u.und(n.delay)&&(n.delay=i?0:e.delay),u.und(n.endDelay)&&(n.endDelay=i===r.length-1?e.endDelay:0),n})).map((function(t){return E(t,i)}))}function H(t,e){var i=[],n=e.keyframes;for(var r in n&&(e=E(function(t){for(var e=g(_(t.map((function(t){return Object.keys(t)}))),(function(t){return u.key(t)})).reduce((function(t,e){return t.indexOf(e)<0&&t.push(e),t}),[]),i={},n=function(n){var r=e[n];i[r]=t.map((function(t){var e={};for(var i in t)u.key(i)?i==r&&(e.value=t[i]):e[i]=t[i];return e}))},r=0;r<e.length;r++)n(r);return i}(n),e)),e)u.key(r)&&i.push({name:r,tweens:Z(e[r],t)});return i}function W(t,e){var i;return t.tweens.map((function(n){var r=function(t,e){var i={};for(var n in t){var r=T(t[n],e);u.arr(r)&&1===(r=r.map((function(t){return T(t,e)}))).length&&(r=r[0]),i[n]=r}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}(n,e),o=r.value,a=u.arr(o)?o[1]:o,s=P(a),l=z(e.target,t.name,s,e),c=i?i.to.original:l,h=u.arr(o)?o[0]:c,d=P(h)||P(l),p=s||d;return u.und(a)&&(a=c),r.from=U(h,p),r.to=U(L(a,h),p),r.start=i?i.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=y(r.easing,r.duration),r.isPath=u.pth(o),r.isPathTargetInsideSVG=r.isPath&&u.svg(e.target),r.isColor=u.col(r.from.original),r.isColor&&(r.round=1),i=r,r}))}var X={css:function(t,e,i){return t.style[e]=i},attribute:function(t,e,i){return t.setAttribute(e,i)},object:function(t,e,i){return t[e]=i},transform:function(t,e,i,n,r){if(n.list.set(e,i),e===n.last||r){var o="";n.list.forEach((function(t,e){o+=e+"("+t+") "})),t.style.transform=o}}};function Y(t,e){q(t).forEach((function(t){for(var i in e){var n=T(e[i],t),r=t.target,o=P(n),a=z(r,i,o,t),s=L(R(n,o||P(a)),a),l=O(r,i);X[l](r,i,s,t.transforms,!0)}}))}function K(t,e){return g(_(t.map((function(t){return e.map((function(e){return function(t,e){var i=O(t.target,e.name);if(i){var n=W(e,t),r=n[n.length-1];return{type:i,property:e.name,animatable:t,tweens:n,duration:r.end,delay:n[0].delay,endDelay:r.endDelay}}}(t,e)}))}))),(function(t){return!u.und(t)}))}function $(t,e){var i=t.length,n=function(t){return t.timelineOffset?t.timelineOffset:0},r={};return r.duration=i?Math.max.apply(Math,t.map((function(t){return n(t)+t.duration}))):e.duration,r.delay=i?Math.min.apply(Math,t.map((function(t){return n(t)+t.delay}))):e.delay,r.endDelay=i?r.duration-Math.max.apply(Math,t.map((function(t){return n(t)+t.duration-t.endDelay}))):e.endDelay,r}var J=0;var Q=[],tt=function(){var t;function e(i){for(var n=Q.length,r=0;r<n;){var o=Q[r];o.paused?(Q.splice(r,1),n--):(o.tick(i),r++)}t=r>0?requestAnimationFrame(e):void 0}return"undefined"!==typeof document&&document.addEventListener("visibilitychange",(function(){it.suspendWhenDocumentHidden&&(et()?t=cancelAnimationFrame(t):(Q.forEach((function(t){return t._onDocumentVisibility()})),tt()))})),function(){t||et()&&it.suspendWhenDocumentHidden||!(Q.length>0)||(t=requestAnimationFrame(e))}}();function et(){return!!document&&document.hidden}function it(t){void 0===t&&(t={});var e,i=0,o=0,a=0,l=0,c=null;function u(t){var e=window.Promise&&new Promise((function(t){return c=t}));return t.finished=e,e}var h=function(t){var e=S(n,t),i=S(r,t),o=H(i,t),a=q(t.targets),s=K(a,o),l=$(s,i),c=J;return J++,E(e,{id:c,children:[],animatables:a,animations:s,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}(t);u(h);function d(){var t=h.direction;"alternate"!==t&&(h.direction="normal"!==t?"normal":"reverse"),h.reversed=!h.reversed,e.forEach((function(t){return t.reversed=h.reversed}))}function p(t){return h.reversed?h.duration-t:t}function f(){i=0,o=p(h.currentTime)*(1/it.speed)}function m(t,e){e&&e.seek(t-e.timelineOffset)}function y(t){for(var e=0,i=h.animations,n=i.length;e<n;){var r=i[e],o=r.animatable,a=r.tweens,l=a.length-1,c=a[l];l&&(c=g(a,(function(e){return t<e.end}))[0]||c);for(var u=s(t-c.start-c.delay,0,c.duration)/c.duration,d=isNaN(u)?1:c.easing(u),p=c.to.strings,f=c.round,m=[],y=c.to.numbers.length,v=void 0,_=0;_<y;_++){var b=void 0,x=c.to.numbers[_],w=c.from.numbers[_]||0;b=c.isPath?V(c.value,d*x,c.isPathTargetInsideSVG):w+d*(x-w),f&&(c.isColor&&_>2||(b=Math.round(b*f)/f)),m.push(b)}var S=p.length;if(S){v=p[0];for(var E=0;E<S;E++){p[E];var k=p[E+1],P=m[E];isNaN(P)||(v+=k?P+k:P+" ")}}else v=m[0];X[r.type](o.target,r.property,v,o.transforms),r.currentValue=v,e++}}function v(t){h[t]&&!h.passThrough&&h[t](h)}function _(t){var n=h.duration,r=h.delay,f=n-h.endDelay,g=p(t);h.progress=s(g/n*100,0,100),h.reversePlayback=g<h.currentTime,e&&function(t){if(h.reversePlayback)for(var i=l;i--;)m(t,e[i]);else for(var n=0;n<l;n++)m(t,e[n])}(g),!h.began&&h.currentTime>0&&(h.began=!0,v("begin")),!h.loopBegan&&h.currentTime>0&&(h.loopBegan=!0,v("loopBegin")),g<=r&&0!==h.currentTime&&y(0),(g>=f&&h.currentTime!==n||!n)&&y(n),g>r&&g<f?(h.changeBegan||(h.changeBegan=!0,h.changeCompleted=!1,v("changeBegin")),v("change"),y(g)):h.changeBegan&&(h.changeCompleted=!0,h.changeBegan=!1,v("changeComplete")),h.currentTime=s(g,0,n),h.began&&v("update"),t>=n&&(o=0,h.remaining&&!0!==h.remaining&&h.remaining--,h.remaining?(i=a,v("loopComplete"),h.loopBegan=!1,"alternate"===h.direction&&d()):(h.paused=!0,h.completed||(h.completed=!0,v("loopComplete"),v("complete"),!h.passThrough&&"Promise"in window&&(c(),u(h)))))}return h.reset=function(){var t=h.direction;h.passThrough=!1,h.currentTime=0,h.progress=0,h.paused=!0,h.began=!1,h.loopBegan=!1,h.changeBegan=!1,h.completed=!1,h.changeCompleted=!1,h.reversePlayback=!1,h.reversed="reverse"===t,h.remaining=h.loop,e=h.children;for(var i=l=e.length;i--;)h.children[i].reset();(h.reversed&&!0!==h.loop||"alternate"===t&&1===h.loop)&&h.remaining++,y(h.reversed?h.duration:0)},h._onDocumentVisibility=f,h.set=function(t,e){return Y(t,e),h},h.tick=function(t){a=t,i||(i=a),_((a+(o-i))*it.speed)},h.seek=function(t){_(p(t))},h.pause=function(){h.paused=!0,f()},h.play=function(){h.paused&&(h.completed&&h.reset(),h.paused=!1,Q.push(h),f(),tt())},h.reverse=function(){d(),h.completed=!h.reversed,f()},h.restart=function(){h.reset(),h.play()},h.remove=function(t){rt(G(t),h)},h.reset(),h.autoplay&&h.play(),h}function nt(t,e){for(var i=e.length;i--;)x(t,e[i].animatable.target)&&e.splice(i,1)}function rt(t,e){var i=e.animations,n=e.children;nt(t,i);for(var r=n.length;r--;){var o=n[r],a=o.animations;nt(t,a),a.length||o.children.length||n.splice(r,1)}i.length||n.length||e.pause()}it.version="3.2.1",it.speed=1,it.suspendWhenDocumentHidden=!0,it.running=Q,it.remove=function(t){for(var e=G(t),i=Q.length;i--;){rt(e,Q[i])}},it.get=z,it.set=Y,it.convertPx=M,it.path=function(t,e){var i=u.str(t)?v(t)[0]:t,n=e||100;return function(t){return{property:t,el:i,svg:N(i),totalLength:j(i)*(n/100)}}},it.setDashoffset=function(t){var e=j(t);return t.setAttribute("stroke-dasharray",e),e},it.stagger=function(t,e){void 0===e&&(e={});var i=e.direction||"normal",n=e.easing?y(e.easing):null,r=e.grid,o=e.axis,a=e.from||0,s="first"===a,l="center"===a,c="last"===a,h=u.arr(t),d=h?parseFloat(t[0]):parseFloat(t),p=h?parseFloat(t[1]):0,f=P(h?t[1]:t)||0,m=e.start||0+(h?d:0),v=[],g=0;return function(t,e,u){if(s&&(a=0),l&&(a=(u-1)/2),c&&(a=u-1),!v.length){for(var y=0;y<u;y++){if(r){var _=l?(r[0]-1)/2:a%r[0],b=l?(r[1]-1)/2:Math.floor(a/r[0]),x=_-y%r[0],w=b-Math.floor(y/r[0]),S=Math.sqrt(x*x+w*w);"x"===o&&(S=-x),"y"===o&&(S=-w),v.push(S)}else v.push(Math.abs(a-y));g=Math.max.apply(Math,v)}n&&(v=v.map((function(t){return n(t/g)*g}))),"reverse"===i&&(v=v.map((function(t){return o?t<0?-1*t:-t:Math.abs(g-t)})))}return m+(h?(p-d)/g:d)*(Math.round(100*v[e])/100)+f}},it.timeline=function(t){void 0===t&&(t={});var e=it(t);return e.duration=0,e.add=function(i,n){var o=Q.indexOf(e),a=e.children;function s(t){t.passThrough=!0}o>-1&&Q.splice(o,1);for(var l=0;l<a.length;l++)s(a[l]);var c=E(i,S(r,t));c.targets=c.targets||t.targets;var h=e.duration;c.autoplay=!1,c.direction=e.direction,c.timelineOffset=u.und(n)?h:L(n,h),s(e),e.seek(c.timelineOffset);var d=it(c);s(d),a.push(d);var p=$(a,t);return e.delay=p.delay,e.endDelay=p.endDelay,e.duration=p.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},it.easing=y,it.penner=m,it.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.default=it},function(t,e,i){!function(t,e){for(var i in e)t[i]=e[i]}(e,function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=i(2)},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||n(e,t,i)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Particles=void 0;var a=o(i(2));e.Particles=a.default,r(i(10),e),r(i(11),e),r(i(12),e),r(i(13),e),r(i(14),e),r(i(15),e),r(i(16),e),r(i(17),e),r(i(18),e),r(i(19),e),r(i(20),e),r(i(21),e),e.default=a.default},function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=u(t);if(e){var r=u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l(this,i)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),d=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),p=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&h(e,t,i);return d(e,t),e},f=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var m=p(i(0)),y=i(0),v=f(i(3)),g=i(4),_=i(5),b=i(6),x=i(9),w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(l,t);var e,i,n=s(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=n.call(this,t)).state={canvas:void 0,library:void 0},e.loadCanvas=e.loadCanvas.bind(c(e)),e}return e=l,(i=[{key:"buildParticlesLibrary",value:function(t,e){try{if(void 0===window)return null}catch(t){return null}x.tsParticles.init();var i=new g.Options;i.load(b.defaultParams),i.load(e);var n=new _.Container(t,i);return this.props.particlesRef&&(this.props.particlesRef.current=n),n}},{key:"refresh",value:function(t){var e=this,i=this.state.canvas;i&&(this.destroy(),this.setState({library:this.buildParticlesLibrary(t.id,t.params)},(function(){e.loadCanvas(i)})))}},{key:"destroy",value:function(){this.state.library&&this.state.library.destroy()}},{key:"loadCanvas",value:function(t){var e=this;t&&this.setState({canvas:t},(function(){var i=e.state.library;i&&(i.canvas.loadCanvas(t),i.start())}))}},{key:"shouldComponentUpdate",value:function(t){return!v.default(t,this.props)}},{key:"componentDidUpdate",value:function(){this.refresh(this.props)}},{key:"forceUpdate",value:function(){this.refresh(this.props),o(u(l.prototype),"forceUpdate",this).call(this)}},{key:"componentDidMount",value:function(){this.setState({library:this.buildParticlesLibrary(this.props.id,this.props.params)})}},{key:"componentWillUnmount",value:function(){this.destroy(),this.setState({library:void 0})}},{key:"render",value:function(){var t=this.props,e=t.width,i=t.height,n=t.className,r=t.canvasClassName,o=t.id;return m.createElement("div",{className:n,id:o},m.createElement("canvas",{ref:this.loadCanvas,className:r,style:Object.assign(Object.assign({},this.props.style),{width:e,height:i})}))}}])&&r(e.prototype,i),l}(y.Component);e.default=w,w.defaultProps={width:"100%",height:"100%",params:b.defaultParams,style:{},id:"tsparticles"}},function(t,e){t.exports=i(146)},function(t,e){t.exports=i(101)},function(t,e){t.exports=i(81)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultParams=void 0;var n=i(7),r=i(8);e.defaultParams={particles:{number:{value:40,max:-1,density:{enable:!1,area:1200}},color:{value:"#FFF"},shape:{type:n.ShapeType.circle,polygon:{sides:5},image:{src:"",width:100,height:100}},stroke:{width:0,color:"#000000"},opacity:{value:.5,random:!1,anim:{enable:!0,speed:1,minimumValue:.1,sync:!1}},size:{value:1,random:!1,anim:{enable:!1,speed:40,minimumValue:0,sync:!1}},links:{enable:!0,distance:150,color:"#FFF",opacity:.6,width:1,shadow:{enable:!1,blur:5,color:"lime"}},move:{enable:!0,speed:3,direction:n.MoveDirection.none,random:!1,straight:!1,outMode:n.OutMode.bounce,bounce:!0,attract:{enable:!1,rotateX:3e3,rotateY:3e3}}},interactivity:{detectsOn:n.InteractivityDetect.canvas,events:{onHover:{enable:!1,mode:n.HoverMode.grab},onClick:{enable:!1,mode:n.ClickMode.repulse},resize:!0},modes:{grab:{distance:180,links:{opacity:.35}},bubble:{distance:200,size:80,duration:.4},repulse:{distance:100,duration:5},push:{quantity:4},remove:{quantity:2}}},detectRetina:!0,fpsLimit:999,polygon:{enable:!1,scale:1,type:r.Type.inline,inline:{arrangement:r.InlineArrangement.onePerPoint},draw:{enable:!1,stroke:{width:.5,color:"rgba(255, 255, 255, .1)"}},move:{radius:10,type:r.MoveType.path},url:""}}},function(t,e){t.exports=i(11)},function(t,e){t.exports=i(117)},function(t,e){t.exports=i(339)},function(t,e){t.exports=i(106)},function(t,e){t.exports=i(368)},function(t,e){t.exports=i(369)},function(t,e){t.exports=i(370)},function(t,e){t.exports=i(371)},function(t,e){t.exports=i(372)},function(t,e){t.exports=i(373)},function(t,e){t.exports=i(374)},function(t,e){t.exports=i(375)},function(t,e){t.exports=i(103)},function(t,e){t.exports=i(104)},function(t,e){t.exports=i(105)}]))},function(t,e,i){var n=i(147);t.exports=function(t,e){return n(t,e)}},function(t,e,i){var n=i(148),r=i(63);t.exports=function t(e,i,o,a,s){return e===i||(null==e||null==i||!r(e)&&!r(i)?e!==e&&i!==i:n(e,i,o,a,t,s))}},function(t,e,i){var n=i(149),r=i(96),o=i(183),a=i(187),s=i(209),l=i(76),c=i(97),u=i(99),h="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,i,m,y,v){var g=l(t),_=l(e),b=g?d:s(t),x=_?d:s(e),w=(b=b==h?p:b)==p,S=(x=x==h?p:x)==p,E=b==x;if(E&&c(t)){if(!c(e))return!1;g=!0,w=!1}if(E&&!w)return v||(v=new n),g||u(t)?r(t,e,i,m,y,v):o(t,e,b,i,m,y,v);if(!(1&i)){var k=w&&f.call(t,"__wrapped__"),P=S&&f.call(e,"__wrapped__");if(k||P){var T=k?t.value():t,C=P?e.value():e;return v||(v=new n),y(T,C,i,m,v)}}return!!E&&(v||(v=new n),a(t,e,i,m,y,v))}},function(t,e,i){var n=i(58),r=i(155),o=i(156),a=i(157),s=i(158),l=i(159);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,i){var n=i(59),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,i=n(e,t);return!(i<0)&&(i==e.length-1?e.pop():r.call(e,i,1),--this.size,!0)}},function(t,e,i){var n=i(59);t.exports=function(t){var e=this.__data__,i=n(e,t);return i<0?void 0:e[i][1]}},function(t,e,i){var n=i(59);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,i){var n=i(59);t.exports=function(t,e){var i=this.__data__,r=n(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}},function(t,e,i){var n=i(58);t.exports=function(){this.__data__=new n,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,i){var n=i(58),r=i(74),o=i(95);t.exports=function(t,e){var i=this.__data__;if(i instanceof n){var a=i.__data__;if(!r||a.length<199)return a.push([t,e]),this.size=++i.size,this;i=this.__data__=new o(a)}return i.set(t,e),this.size=i.size,this}},function(t,e,i){var n=i(91),r=i(163),o=i(93),a=i(94),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(n(t)?d:s).test(a(t))}},function(t,e,i){var n=i(75),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),i=t[s];try{t[s]=void 0;var n=!0}catch(l){}var r=a.call(t);return n&&(e?t[s]=i:delete t[s]),r}},function(t,e){var i=Object.prototype.toString;t.exports=function(t){return i.call(t)}},function(t,e,i){var n=i(164),r=function(){var t=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!r&&r in t}},function(t,e,i){var n=i(34)["__core-js_shared__"];t.exports=n},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,i){var n=i(167),r=i(58),o=i(74);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||r),string:new n}}},function(t,e,i){var n=i(168),r=i(169),o=i(170),a=i(171),s=i(172);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(61);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,i){var n=i(61),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(e,t)?e[t]:void 0}},function(t,e,i){var n=i(61),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:r.call(e,t)}},function(t,e,i){var n=i(61);t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,i){var n=i(62);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,i){var n=i(62);t.exports=function(t){return n(this,t).get(t)}},function(t,e,i){var n=i(62);t.exports=function(t){return n(this,t).has(t)}},function(t,e,i){var n=i(62);t.exports=function(t,e){var i=n(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}},function(t,e,i){var n=i(95),r=i(179),o=i(180);function a(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new n;++e<i;)this.add(t[e])}a.prototype.add=a.prototype.push=r,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,i){var n=i(75),r=i(184),o=i(90),a=i(96),s=i(185),l=i(186),c=n?n.prototype:void 0,u=c?c.valueOf:void 0;t.exports=function(t,e,i,n,c,h,d){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var f=1&n;if(p||(p=l),t.size!=e.size&&!f)return!1;var m=d.get(t);if(m)return m==e;n|=2,d.set(t,e);var y=a(p(t),p(e),n,c,h,d);return d.delete(t),y;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},function(t,e,i){var n=i(34).Uint8Array;t.exports=n},function(t,e){t.exports=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}},function(t,e){t.exports=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}},function(t,e,i){var n=i(188),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,i,o,a,s){var l=1&i,c=n(t),u=c.length;if(u!=n(e).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in e:r.call(e,d)))return!1}var p=s.get(t),f=s.get(e);if(p&&f)return p==e&&f==t;var m=!0;s.set(t,e),s.set(e,t);for(var y=l;++h<u;){var v=t[d=c[h]],g=e[d];if(o)var _=l?o(g,v,d,e,t,s):o(v,g,d,t,e,s);if(!(void 0===_?v===g||a(v,g,i,o,s):_)){m=!1;break}y||(y="constructor"==d)}if(m&&!y){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(t),s.delete(e),m}},function(t,e,i){var n=i(189),r=i(191),o=i(194);t.exports=function(t){return n(t,o,r)}},function(t,e,i){var n=i(190),r=i(76);t.exports=function(t,e,i){var o=e(t);return r(t)?o:n(o,i(t))}},function(t,e){t.exports=function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}},function(t,e,i){var n=i(192),r=i(193),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),n(a(t),(function(e){return o.call(t,e)})))}:r;t.exports=s},function(t,e){t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var a=t[i];e(a,i,t)&&(o[r++]=a)}return o}},function(t,e){t.exports=function(){return[]}},function(t,e,i){var n=i(195),r=i(204),o=i(208);t.exports=function(t){return o(t)?n(t):r(t)}},function(t,e,i){var n=i(196),r=i(197),o=i(76),a=i(97),s=i(200),l=i(99),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i=o(t),u=!i&&r(t),h=!i&&!u&&a(t),d=!i&&!u&&!h&&l(t),p=i||u||h||d,f=p?n(t.length,String):[],m=f.length;for(var y in t)!e&&!c.call(t,y)||p&&("length"==y||h&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,m))||f.push(y);return f}},function(t,e){t.exports=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}},function(t,e,i){var n=i(198),r=i(63),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e,i){var n=i(60),r=i(63);t.exports=function(t){return r(t)&&"[object Arguments]"==n(t)}},function(t,e){t.exports=function(){return!1}},function(t,e){var i=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,i){var n=i(60),r=i(100),o=i(63),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!a[n(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,i){(function(t){var n=i(92),r=e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===r&&n.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s}).call(this,i(98)(t))},function(t,e,i){var n=i(205),r=i(206),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return r(t);var e=[];for(var i in Object(t))o.call(t,i)&&"constructor"!=i&&e.push(i);return e}},function(t,e){var i=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},function(t,e,i){var n=i(207)(Object.keys,Object);t.exports=n},function(t,e){t.exports=function(t,e){return function(i){return t(e(i))}}},function(t,e,i){var n=i(91),r=i(100);t.exports=function(t){return null!=t&&r(t.length)&&!n(t)}},function(t,e,i){var n=i(210),r=i(74),o=i(211),a=i(212),s=i(213),l=i(60),c=i(94),u="[object Map]",h="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",m=c(n),y=c(r),v=c(o),g=c(a),_=c(s),b=l;(n&&b(new n(new ArrayBuffer(1)))!=f||r&&b(new r)!=u||o&&b(o.resolve())!=h||a&&b(new a)!=d||s&&b(new s)!=p)&&(b=function(t){var e=l(t),i="[object Object]"==e?t.constructor:void 0,n=i?c(i):"";if(n)switch(n){case m:return f;case y:return u;case v:return h;case g:return d;case _:return p}return e}),t.exports=b},function(t,e,i){var n=i(43)(i(34),"DataView");t.exports=n},function(t,e,i){var n=i(43)(i(34),"Promise");t.exports=n},function(t,e,i){var n=i(43)(i(34),"Set");t.exports=n},function(t,e,i){var n=i(43)(i(34),"WeakMap");t.exports=n},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Interactivity=void 0;var o=i(11),a=i(228),s=i(233),l=function(){function t(){n(this,t),this.detectsOn=o.InteractivityDetect.canvas,this.events=new a.Events,this.modes=new s.Modes}return r(t,[{key:"load",value:function(t){var e,i,n;if(void 0!==t){var r=null!==(e=t.detectsOn)&&void 0!==e?e:t.detect_on;void 0!==r&&(this.detectsOn=r),this.events.load(t.events),this.modes.load(t.modes),!0===(null===(n=null===(i=t.modes)||void 0===i?void 0:i.slow)||void 0===n?void 0:n.active)&&(this.events.onHover.mode instanceof Array?this.events.onHover.mode.indexOf(o.HoverMode.slow)<0&&this.events.onHover.mode.push(o.HoverMode.slow):this.events.onHover.mode!==o.HoverMode.slow&&(this.events.onHover.mode=[this.events.onHover.mode,o.HoverMode.slow]))}}},{key:"detect_on",get:function(){return this.detectsOn},set:function(t){this.detectsOn=t}}]),t}();e.Interactivity=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoveDirection=void 0,function(t){t.bottom="bottom",t.bottomLeft="bottom-left",t.bottomRight="bottom-right",t.left="left",t.none="none",t.right="right",t.top="top",t.topLeft="top-left",t.topRight="top-right"}(e.MoveDirection||(e.MoveDirection={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RotateDirection=void 0,function(t){t.clockwise="clockwise",t.counterClockwise="counter-clockwise",t.random="random"}(e.RotateDirection||(e.RotateDirection={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionMode=void 0,function(t){t.absorb="absorb",t.bounce="bounce",t.destroy="destroy"}(e.CollisionMode||(e.CollisionMode={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OutMode=void 0,function(t){t.bounce="bounce",t.bounceHorizontal="bounce-horizontal",t.bounceVertical="bounce-vertical",t.none="none",t.out="out",t.destroy="destroy"}(e.OutMode||(e.OutMode={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeMode=void 0,function(t){t.precise="precise",t.percent="percent"}(e.SizeMode||(e.SizeMode={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeMode=void 0,function(t){t.any="any",t.dark="dark",t.light="light"}(e.ThemeMode||(e.ThemeMode={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationStatus=void 0,function(t){t[t.increasing=0]="increasing",t[t.decreasing=1]="decreasing"}(e.AnimationStatus||(e.AnimationStatus={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DestroyType=void 0,function(t){t.none="none",t.max="max",t.min="min"}(e.DestroyType||(e.DestroyType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProcessBubbleType=void 0,function(t){t.color="color",t.opacity="opacity",t.size="size"}(e.ProcessBubbleType||(e.ProcessBubbleType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeType=void 0,function(t){t.char="char",t.character="character",t.circle="circle",t.edge="edge",t.image="image",t.images="images",t.line="line",t.polygon="polygon",t.square="square",t.star="star",t.triangle="triangle"}(e.ShapeType||(e.ShapeType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StartValueType=void 0,function(t){t.max="max",t.min="min",t.random="random"}(e.StartValueType||(e.StartValueType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DivType=void 0,function(t){t.circle="circle",t.rectangle="rectangle"}(e.DivType||(e.DivType={}))},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Events=void 0;var o=i(229),a=i(230),s=i(231),l=function(){function t(){n(this,t),this.onClick=new o.ClickEvent,this.onDiv=new a.DivEvent,this.onHover=new s.HoverEvent,this.resize=!0}return r(t,[{key:"load",value:function(t){var e,i,n;if(void 0!==t){this.onClick.load(null!==(e=t.onClick)&&void 0!==e?e:t.onclick);var r=null!==(i=t.onDiv)&&void 0!==i?i:t.ondiv;void 0!==r&&(r instanceof Array?this.onDiv=r.map((function(t){var e=new a.DivEvent;return e.load(t),e})):(this.onDiv=new a.DivEvent,this.onDiv.load(r))),this.onHover.load(null!==(n=t.onHover)&&void 0!==n?n:t.onhover),void 0!==t.resize&&(this.resize=t.resize)}}},{key:"onclick",get:function(){return this.onClick},set:function(t){this.onClick=t}},{key:"ondiv",get:function(){return this.onDiv},set:function(t){this.onDiv=t}},{key:"onhover",get:function(){return this.onHover},set:function(t){this.onHover=t}}]),t}();e.Events=l},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.ClickEvent=void 0;var o=function(){function t(){n(this,t),this.enable=!1,this.mode=[]}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.enable&&(this.enable=t.enable),void 0!==t.mode&&(this.mode=t.mode))}}]),t}();e.ClickEvent=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.DivEvent=void 0;var o=i(11),a=function(){function t(){n(this,t),this.selectors=[],this.enable=!1,this.mode=[],this.type=o.DivType.circle}return r(t,[{key:"load",value:function(t){var e,i;if(void 0!==t){var n=null!==(i=null!==(e=t.ids)&&void 0!==e?e:t.elementId)&&void 0!==i?i:t.el;void 0!==n&&(this.ids=n),void 0!==t.selectors&&(this.selectors=t.selectors),void 0!==t.enable&&(this.enable=t.enable),void 0!==t.mode&&(this.mode=t.mode),void 0!==t.type&&(this.type=t.type)}}},{key:"elementId",get:function(){return this.ids},set:function(t){this.ids=t}},{key:"el",get:function(){return this.elementId},set:function(t){this.elementId=t}},{key:"ids",get:function(){return this.selectors instanceof Array?this.selectors.map((function(t){return t.replace("#","")})):this.selectors.replace("#","")},set:function(t){this.selectors=t instanceof Array?t.map((function(t){return"#".concat(t)})):"#".concat(t)}}]),t}();e.DivEvent=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.HoverEvent=void 0;var o=i(232),a=function(){function t(){n(this,t),this.enable=!1,this.mode=[],this.parallax=new o.Parallax}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.enable&&(this.enable=t.enable),void 0!==t.mode&&(this.mode=t.mode),this.parallax.load(t.parallax))}}]),t}();e.HoverEvent=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Parallax=void 0;var o=function(){function t(){n(this,t),this.enable=!1,this.force=2,this.smooth=10}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.enable&&(this.enable=t.enable),void 0!==t.force&&(this.force=t.force),void 0!==t.smooth&&(this.smooth=t.smooth))}}]),t}();e.Parallax=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Modes=void 0;var o=i(234),a=i(242),s=i(244),l=i(246),c=i(247),u=i(248),h=i(250),d=i(251),p=i(261),f=i(262),m=i(266),y=function(){function t(){n(this,t),this.attract=new p.Attract,this.bounce=new m.Bounce,this.bubble=new o.Bubble,this.connect=new a.Connect,this.grab=new s.Grab,this.light=new f.Light,this.push=new c.Push,this.remove=new l.Remove,this.repulse=new u.Repulse,this.slow=new h.Slow,this.trail=new d.Trail}return r(t,[{key:"load",value:function(t){void 0!==t&&(this.attract.load(t.attract),this.bubble.load(t.bubble),this.connect.load(t.connect),this.grab.load(t.grab),this.light.load(t.light),this.push.load(t.push),this.remove.load(t.remove),this.repulse.load(t.repulse),this.slow.load(t.slow),this.trail.load(t.trail))}}]),t}();e.Modes=y},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.Bubble=void 0;var c=i(241),u=function(t){s(i,t);var e=l(i);function i(){return n(this,i),e.apply(this,arguments)}return r(i,[{key:"load",value:function(t){o(a(i.prototype),"load",this).call(this,t),void 0!==t&&void 0!==t.divs&&(t.divs instanceof Array?this.divs=t.divs.map((function(t){var e=new c.BubbleDiv;return e.load(t),e})):((this.divs instanceof Array||!this.divs)&&(this.divs=new c.BubbleDiv),this.divs.load(t.divs)))}}]),i}(i(107).BubbleBase);e.Bubble=u},function(t,e,i){var n=i(22);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},function(t,e){function i(e,n){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,n)}t.exports=i},function(t,e){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,i){var n=i(239),r=i(240);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!==typeof e?r(t):e}},function(t,e){function i(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=i=function(t){return typeof t}:t.exports=i=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(e)}t.exports=i},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.BubbleDiv=void 0;var c=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).selectors=[],t}return r(i,[{key:"load",value:function(t){o(a(i.prototype),"load",this).call(this,t),void 0!==t&&(void 0!==t.ids&&(this.ids=t.ids),void 0!==t.selectors&&(this.selectors=t.selectors))}},{key:"ids",get:function(){return this.selectors instanceof Array?this.selectors.map((function(t){return t.replace("#","")})):this.selectors.replace("#","")},set:function(t){this.selectors=t instanceof Array?t.map((function(t){return"#".concat(t)})):"#".concat(t)}}]),i}(i(107).BubbleBase);e.BubbleDiv=c},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Connect=void 0;var o=i(243),a=function(){function t(){n(this,t),this.distance=80,this.links=new o.ConnectLinks,this.radius=60}return r(t,[{key:"load",value:function(t){var e,i;void 0!==t&&(void 0!==t.distance&&(this.distance=t.distance),this.links.load(null!==(i=null!==(e=t.links)&&void 0!==e?e:t.lineLinked)&&void 0!==i?i:t.line_linked),void 0!==t.radius&&(this.radius=t.radius))}},{key:"line_linked",get:function(){return this.links},set:function(t){this.links=t}},{key:"lineLinked",get:function(){return this.links},set:function(t){this.links=t}}]),t}();e.Connect=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectLinks=void 0;var o=function(){function t(){n(this,t),this.opacity=.5}return r(t,[{key:"load",value:function(t){void 0!==t&&void 0!==t.opacity&&(this.opacity=t.opacity)}}]),t}();e.ConnectLinks=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Grab=void 0;var o=i(245),a=function(){function t(){n(this,t),this.distance=100,this.links=new o.GrabLinks}return r(t,[{key:"load",value:function(t){var e,i;void 0!==t&&(void 0!==t.distance&&(this.distance=t.distance),this.links.load(null!==(i=null!==(e=t.links)&&void 0!==e?e:t.lineLinked)&&void 0!==i?i:t.line_linked))}},{key:"line_linked",get:function(){return this.links},set:function(t){this.links=t}},{key:"lineLinked",get:function(){return this.links},set:function(t){this.links=t}}]),t}();e.Grab=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.GrabLinks=void 0;var o=i(18),a=function(){function t(){n(this,t),this.blink=!1,this.consent=!1,this.opacity=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.blink&&(this.blink=t.blink),void 0!==t.color&&(this.color=o.OptionsColor.create(this.color,t.color)),void 0!==t.consent&&(this.consent=t.consent),void 0!==t.opacity&&(this.opacity=t.opacity))}}]),t}();e.GrabLinks=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Remove=void 0;var o=function(){function t(){n(this,t),this.quantity=2}return r(t,[{key:"load",value:function(t){var e;if(void 0!==t){var i=null!==(e=t.quantity)&&void 0!==e?e:t.particles_nb;void 0!==i&&(this.quantity=i)}}},{key:"particles_nb",get:function(){return this.quantity},set:function(t){this.quantity=t}}]),t}();e.Remove=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Push=void 0;var o=function(){function t(){n(this,t),this.quantity=4}return r(t,[{key:"load",value:function(t){var e;if(void 0!==t){var i=null!==(e=t.quantity)&&void 0!==e?e:t.particles_nb;void 0!==i&&(this.quantity=i)}}},{key:"particles_nb",get:function(){return this.quantity},set:function(t){this.quantity=t}}]),t}();e.Push=o},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.Repulse=void 0;var c=i(249),u=function(t){s(i,t);var e=l(i);function i(){return n(this,i),e.apply(this,arguments)}return r(i,[{key:"load",value:function(t){o(a(i.prototype),"load",this).call(this,t),void 0!==(null===t||void 0===t?void 0:t.divs)&&(t.divs instanceof Array?this.divs=t.divs.map((function(t){var e=new c.RepulseDiv;return e.load(t),e})):((this.divs instanceof Array||!this.divs)&&(this.divs=new c.RepulseDiv),this.divs.load(t.divs)))}}]),i}(i(108).RepulseBase);e.Repulse=u},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.RepulseDiv=void 0;var c=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).selectors=[],t}return r(i,[{key:"load",value:function(t){o(a(i.prototype),"load",this).call(this,t),void 0!==t&&(void 0!==t.ids&&(this.ids=t.ids),void 0!==t.selectors&&(this.selectors=t.selectors))}},{key:"ids",get:function(){return this.selectors instanceof Array?this.selectors.map((function(t){return t.replace("#","")})):this.selectors.replace("#","")},set:function(t){this.selectors=t instanceof Array?t.map((function(){return"#".concat(t)})):"#".concat(t)}}]),i}(i(108).RepulseBase);e.RepulseDiv=c},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Slow=void 0;var o=function(){function t(){n(this,t),this.factor=3,this.radius=200}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.factor&&(this.factor=t.factor),void 0!==t.radius&&(this.radius=t.radius))}},{key:"active",get:function(){return!1},set:function(t){}}]),t}();e.Slow=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Trail=void 0;var o=i(8),a=function(){function t(){n(this,t),this.delay=1,this.quantity=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.delay&&(this.delay=t.delay),void 0!==t.quantity&&(this.quantity=t.quantity),void 0!==t.particles&&(this.particles=o.Utils.deepExtend({},t.particles)))}}]),t}();e.Trail=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasUtils=void 0;var o=i(109),a=i(65);function s(t,e,i){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.closePath()}var l=function(){function t(){n(this,t)}return r(t,null,[{key:"paintBase",value:function(t,e,i){t.save(),t.fillStyle=null!==i&&void 0!==i?i:"rgba(0,0,0,0)",t.fillRect(0,0,e.width,e.height),t.restore()}},{key:"clear",value:function(t,e){t.clearRect(0,0,e.width,e.height)}},{key:"drawLinkLine",value:function(t,e,i,n,r,l,c,u,h,d,p,f){var m=!1;if(a.NumberUtils.getDistance(i,n)<=r)s(t,i,n),m=!0;else if(c){var y,v,g={x:n.x-l.width,y:n.y},_=a.NumberUtils.getDistances(i,g);if(_.distance<=r){var b=i.y-_.dy/_.dx*i.x;y={x:0,y:b},v={x:l.width,y:b}}else{var x={x:n.x,y:n.y-l.height},w=a.NumberUtils.getDistances(i,x);if(w.distance<=r){var S=-(i.y-w.dy/w.dx*i.x)/(w.dy/w.dx);y={x:S,y:0},v={x:S,y:l.height}}else{var E={x:n.x-l.width,y:n.y-l.height},k=a.NumberUtils.getDistances(i,E);if(k.distance<=r){var P=i.y-k.dy/k.dx*i.x;v={x:(y={x:-P/(k.dy/k.dx),y:P}).x+l.width,y:y.y+l.height}}}}y&&v&&(s(t,i,y),s(t,n,v),m=!0)}if(m){if(t.lineWidth=e,u&&(t.globalCompositeOperation=h),t.strokeStyle=o.ColorUtils.getStyleFromRgb(d,p),f.enable){var T=o.ColorUtils.colorToRgb(f.color);T&&(t.shadowBlur=f.blur,t.shadowColor=o.ColorUtils.getStyleFromRgb(T))}t.stroke()}}},{key:"drawLinkTriangle",value:function(t,e,i,n,r,a,s,l){!function(t,e,i,n){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.lineTo(n.x,n.y),t.closePath()}(t,e,i,n),r&&(t.globalCompositeOperation=a),t.fillStyle=o.ColorUtils.getStyleFromRgb(s,l),t.fill()}},{key:"drawConnectLine",value:function(t,e,i,n,r){t.save(),s(t,n,r),t.lineWidth=e,t.strokeStyle=i,t.stroke(),t.restore()}},{key:"gradient",value:function(t,e,i,n){var r=Math.floor(i.getRadius()/e.getRadius()),a=e.getFillColor(),s=i.getFillColor();if(a&&s){var l=e.getPosition(),c=i.getPosition(),u=o.ColorUtils.mix(a,s,e.getRadius(),i.getRadius()),h=t.createLinearGradient(l.x,l.y,c.x,c.y);return h.addColorStop(0,o.ColorUtils.getStyleFromHsl(a,n)),h.addColorStop(r>1?1:r,o.ColorUtils.getStyleFromRgb(u,n)),h.addColorStop(1,o.ColorUtils.getStyleFromHsl(s,n)),h}}},{key:"drawGrabLine",value:function(t,e,i,n,r,a){t.save(),s(t,i,n),t.strokeStyle=o.ColorUtils.getStyleFromRgb(r,a),t.lineWidth=e,t.stroke(),t.restore()}},{key:"drawLight",value:function(t,e,i){var n=t.options.interactivity.modes.light.area;e.beginPath(),e.arc(i.x,i.y,n.radius,0,2*Math.PI);var r=e.createRadialGradient(i.x,i.y,0,i.x,i.y,n.radius),a=n.gradient,s={start:o.ColorUtils.colorToRgb(a.start),stop:o.ColorUtils.colorToRgb(a.stop)};s.start&&s.stop&&(r.addColorStop(0,o.ColorUtils.getStyleFromRgb(s.start)),r.addColorStop(1,o.ColorUtils.getStyleFromRgb(s.stop)),e.fillStyle=r,e.fill())}},{key:"drawParticleShadow",value:function(t,e,i,n){var r=i.getPosition(),a=t.options.interactivity.modes.light.shadow;e.save();for(var s=i.getRadius(),l=i.sides,c=2*Math.PI/l,u=-i.rotate.value+Math.PI/4,h=[],d=0;d<l;d++)h.push({x:r.x+s*Math.sin(u+c*d)*1,y:r.y+s*Math.cos(u+c*d)*1});for(var p=[],f=a.length,m=0,y=h;m<y.length;m++){var v=y[m],g=Math.atan2(n.y-v.y,n.x-v.x),_=v.x+f*Math.sin(-g-Math.PI/2),b=v.y+f*Math.cos(-g-Math.PI/2);p.push({endX:_,endY:b,startX:v.x,startY:v.y})}var x=o.ColorUtils.colorToRgb(a.color);if(x){for(var w=o.ColorUtils.getStyleFromRgb(x),S=p.length-1;S>=0;S--){var E=S==p.length-1?0:S+1;e.beginPath(),e.moveTo(p[S].startX,p[S].startY),e.lineTo(p[E].startX,p[E].startY),e.lineTo(p[E].endX,p[E].endY),e.lineTo(p[S].endX,p[S].endY),e.fillStyle=w,e.fill()}e.restore()}}},{key:"drawParticle",value:function(e,i,n,r,a,s,l,c,u,h,d){var p=n.getPosition();i.save(),i.translate(p.x,p.y),i.beginPath();var f=n.rotate.value+(n.particlesOptions.rotate.path?n.pathAngle:0);0!==f&&i.rotate(f),l&&(i.globalCompositeOperation=c);var m=n.shadowColor;d.enable&&m&&(i.shadowBlur=d.blur,i.shadowColor=o.ColorUtils.getStyleFromRgb(m),i.shadowOffsetX=d.offset.x,i.shadowOffsetY=d.offset.y),a&&(i.fillStyle=a);var y=n.stroke;i.lineWidth=n.strokeWidth,s&&(i.strokeStyle=s),t.drawShape(e,i,n,u,h,r),y.width>0&&i.stroke(),n.close&&i.closePath(),n.fill&&i.fill(),i.restore(),i.save(),i.translate(p.x,p.y),0!==f&&i.rotate(f),l&&(i.globalCompositeOperation=c),t.drawShapeAfterEffect(e,i,n,u,h,r),i.restore()}},{key:"drawShape",value:function(t,e,i,n,r,o){if(i.shape){var a=t.drawers.get(i.shape);a&&a.draw(e,i,n,r,o.value,t.retina.pixelRatio)}}},{key:"drawShapeAfterEffect",value:function(t,e,i,n,r,o){if(i.shape){var a=t.drawers.get(i.shape);(null===a||void 0===a?void 0:a.afterEffect)&&a.afterEffect(e,i,n,r,o.value,t.retina.pixelRatio)}}},{key:"drawPlugin",value:function(t,e,i){void 0!==e.draw&&(t.save(),e.draw(t,i),t.restore())}}]),t}();e.CanvasUtils=l},function(t,e,i){var n=function(t){"use strict";var e,i=Object.prototype,n=i.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(O){l=function(t,e,i){return t[e]=i}}function c(t,e,i,n){var r=e&&e.prototype instanceof y?e:y,o=Object.create(r.prototype),a=new C(n||[]);return o._invoke=function(t,e,i){var n=h;return function(r,o){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===r)throw o;return A()}for(i.method=r,i.arg=o;;){var a=i.delegate;if(a){var s=k(a,i);if(s){if(s===m)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var l=u(t,e,i);if("normal"===l.type){if(n=i.done?f:d,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=f,i.method="throw",i.arg=l.arg)}}}(t,i,a),o}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(O){return{type:"throw",arg:O}}}t.wrap=c;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function y(){}function v(){}function g(){}var _={};_[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(M([])));x&&x!==i&&n.call(x,o)&&(_=x);var w=g.prototype=y.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function i(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var r;this._invoke=function(t,n){function o(){return new e((function(e,r){i(t,n,e,r)}))}return r=r?r.then(o,o):o()}}function k(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,k(t,i),"throw"===i.method))return m;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,m;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,m):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(t){if(t){var i=t[o];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}return{next:A}}function A(){return{value:e,done:!0}}return v.prototype=w.constructor=g,g.constructor=v,v.displayName=l(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,i,n,r,o){void 0===o&&(o=Promise);var a=new E(c(e,i,n,r),o);return t.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(w),l(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=M,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return s.type="throw",s.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:M(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=n}catch(r){Function("r","regeneratorRuntime = r")(n)}},function(t,e,i){"use strict";var n=i(41),r=i(10),o=i(4),a=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.EventListeners=void 0;var s=i(11),l=i(77);function c(t,e,i,n,r){if(n){var o={passive:!0};"boolean"===typeof r?o.capture=r:void 0!==r&&(o=r),t.addEventListener(e,i,o)}else{var a=r;t.removeEventListener(e,i,a)}}var u=function(){function t(e){var i=this;o(this,t),this.container=e,this.canPush=!0,this.mouseMoveHandler=function(t){return i.mouseTouchMove(t)},this.touchStartHandler=function(t){return i.mouseTouchMove(t)},this.touchMoveHandler=function(t){return i.mouseTouchMove(t)},this.touchEndHandler=function(){return i.mouseTouchFinish()},this.mouseLeaveHandler=function(){return i.mouseTouchFinish()},this.touchCancelHandler=function(){return i.mouseTouchFinish()},this.touchEndClickHandler=function(t){return i.mouseTouchClick(t)},this.mouseUpHandler=function(t){return i.mouseTouchClick(t)},this.mouseDownHandler=function(){return i.mouseDown()},this.visibilityChangeHandler=function(){return i.handleVisibilityChange()},this.resizeHandler=function(){return i.handleWindowResize()}}return a(t,[{key:"addListeners",value:function(){this.manageListeners(!0)}},{key:"removeListeners",value:function(){this.manageListeners(!1)}},{key:"manageListeners",value:function(t){var e,i=this.container,n=i.options,r=n.interactivity.detectsOn,o=l.Constants.mouseLeaveEvent;if(r===s.InteractivityDetect.window)i.interactivity.element=window,o=l.Constants.mouseOutEvent;else if(r===s.InteractivityDetect.parent&&i.canvas.element){var a=i.canvas.element;i.interactivity.element=null!==(e=a.parentElement)&&void 0!==e?e:a.parentNode}else i.interactivity.element=i.canvas.element;var u=i.interactivity.element;if(u){var h=u;(n.interactivity.events.onHover.enable||n.interactivity.events.onClick.enable)&&(c(u,l.Constants.mouseMoveEvent,this.mouseMoveHandler,t),c(u,l.Constants.touchStartEvent,this.touchStartHandler,t),c(u,l.Constants.touchMoveEvent,this.touchMoveHandler,t),n.interactivity.events.onClick.enable?(c(u,l.Constants.touchEndEvent,this.touchEndClickHandler,t),c(u,l.Constants.mouseUpEvent,this.mouseUpHandler,t),c(u,l.Constants.mouseDownEvent,this.mouseDownHandler,t)):c(u,l.Constants.touchEndEvent,this.touchEndHandler,t),c(u,o,this.mouseLeaveHandler,t),c(u,l.Constants.touchCancelEvent,this.touchCancelHandler,t)),i.canvas.element&&(i.canvas.element.style.pointerEvents=h===i.canvas.element?"initial":"none"),n.interactivity.events.resize&&c(window,l.Constants.resizeEvent,this.resizeHandler,t),document&&c(document,l.Constants.visibilityChangeEvent,this.visibilityChangeHandler,t,!1)}}},{key:"handleWindowResize",value:function(){var t;null===(t=this.container.canvas)||void 0===t||t.windowResize()}},{key:"handleVisibilityChange",value:function(){var t=this.container,e=t.options;this.mouseTouchFinish(),e.pauseOnBlur&&((null===document||void 0===document?void 0:document.hidden)?(t.pageHidden=!0,t.pause()):(t.pageHidden=!1,t.getAnimationStatus()?t.play(!0):t.draw()))}},{key:"mouseDown",value:function(){var t=this.container.interactivity;if(t){var e=t.mouse;e.clicking=!0,e.downPosition=e.position}}},{key:"mouseTouchMove",value:function(t){var e,i,n,r,o,a,c,u=this.container,h=u.options;if(void 0!==(null===(e=u.interactivity)||void 0===e?void 0:e.element)){var d;u.interactivity.mouse.inside=!0;var p=u.canvas.element;if(t.type.startsWith("mouse")){this.canPush=!0;var f=t;if(u.interactivity.element===window){if(p){var m=p.getBoundingClientRect();d={x:f.clientX-m.left,y:f.clientY-m.top}}}else if(h.interactivity.detectsOn===s.InteractivityDetect.parent){var y=f.target,v=f.currentTarget,g=u.canvas.element;if(y&&v&&g){var _=y.getBoundingClientRect(),b=v.getBoundingClientRect(),x=g.getBoundingClientRect();d={x:f.offsetX+2*_.left-(b.left+x.left),y:f.offsetY+2*_.top-(b.top+x.top)}}else d={x:null!==(i=f.offsetX)&&void 0!==i?i:f.clientX,y:null!==(n=f.offsetY)&&void 0!==n?n:f.clientY}}else f.target===u.canvas.element&&(d={x:null!==(r=f.offsetX)&&void 0!==r?r:f.clientX,y:null!==(o=f.offsetY)&&void 0!==o?o:f.clientY})}else{this.canPush="touchmove"!==t.type;var w=t,S=w.touches[w.touches.length-1],E=null===p||void 0===p?void 0:p.getBoundingClientRect();d={x:S.clientX-(null!==(a=null===E||void 0===E?void 0:E.left)&&void 0!==a?a:0),y:S.clientY-(null!==(c=null===E||void 0===E?void 0:E.top)&&void 0!==c?c:0)}}var k=u.retina.pixelRatio;d&&(d.x*=k,d.y*=k),u.interactivity.mouse.position=d,u.interactivity.status=l.Constants.mouseMoveEvent}}},{key:"mouseTouchFinish",value:function(){var t=this.container.interactivity;if(void 0!==t){var e=t.mouse;delete e.position,delete e.clickPosition,delete e.downPosition,t.status=l.Constants.mouseLeaveEvent,e.inside=!1,e.clicking=!1}}},{key:"mouseTouchClick",value:function(t){var e=this.container,i=e.options,o=e.interactivity.mouse;o.inside=!0;var a=!1,s=o.position;if(void 0!==s&&i.interactivity.events.onClick.enable){var l,c=r(e.plugins);try{for(c.s();!(l=c.n()).done;){var u=n(l.value,2)[1];if(void 0!==u.clickPositionValid&&(a=u.clickPositionValid(s)))break}}catch(h){c.e(h)}finally{c.f()}a||this.doMouseTouchClick(t),o.clicking=!1}}},{key:"doMouseTouchClick",value:function(t){var e=this,i=this.container,n=i.options;if(this.canPush){var o=i.interactivity.mouse.position;if(!o)return;i.interactivity.mouse.clickPosition={x:o.x,y:o.y},i.interactivity.mouse.clickTime=(new Date).getTime();var a=n.interactivity.events.onClick;if(a.mode instanceof Array){var s,l=r(a.mode);try{for(l.s();!(s=l.n()).done;){var c=s.value;this.handleClickMode(c)}}catch(u){l.e(u)}finally{l.f()}}else this.handleClickMode(a.mode)}"touchend"===t.type&&setTimeout((function(){return e.mouseTouchFinish()}),500)}},{key:"handleClickMode",value:function(t){var e=this.container,i=e.options,o=i.interactivity.modes.push.quantity,a=i.interactivity.modes.remove.quantity;switch(t){case s.ClickMode.push:o>0&&e.particles.push(o,e.interactivity.mouse);break;case s.ClickMode.remove:e.particles.removeQuantity(a);break;case s.ClickMode.bubble:e.bubble.clicking=!0;break;case s.ClickMode.repulse:e.repulse.clicking=!0,e.repulse.count=0;var l,c=r(e.repulse.particles);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.velocity.horizontal=u.initialVelocity.horizontal,u.velocity.vertical=u.initialVelocity.vertical}}catch(v){c.e(v)}finally{c.f()}e.repulse.particles=[],e.repulse.finish=!1,setTimeout((function(){e.destroyed||(e.repulse.clicking=!1)}),1e3*i.interactivity.modes.repulse.duration);break;case s.ClickMode.attract:e.attract.clicking=!0,e.attract.count=0;var h,d=r(e.attract.particles);try{for(d.s();!(h=d.n()).done;){var p=h.value;p.velocity.horizontal=p.initialVelocity.horizontal,p.velocity.vertical=p.initialVelocity.vertical}}catch(v){d.e(v)}finally{d.f()}e.attract.particles=[],e.attract.finish=!1,setTimeout((function(){e.destroyed||(e.attract.clicking=!1)}),1e3*i.interactivity.modes.attract.duration);break;case s.ClickMode.pause:e.getAnimationStatus()?e.pause():e.play()}var f,m=r(e.plugins);try{for(m.s();!(f=m.n()).done;){var y=n(f.value,2)[1];y.handleClickMode&&y.handleClickMode(t)}}catch(v){m.e(v)}finally{m.f()}}}]),t}();e.EventListeners=u},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Plugins=void 0;var a=[],s=new Map,l=new Map,c=function(){function t(){r(this,t)}return o(t,null,[{key:"getPlugin",value:function(t){return a.find((function(e){return e.id===t}))}},{key:"addPlugin",value:function(e){t.getPlugin(e.id)||a.push(e)}},{key:"getAvailablePlugins",value:function(t){var e,i=new Map,r=n(a);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.needsPlugin(t.options)&&i.set(o.id,o.getPlugin(t))}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"loadOptions",value:function(t,e){var i,r=n(a);try{for(r.s();!(i=r.n()).done;){i.value.loadOptions(t,e)}}catch(o){r.e(o)}finally{r.f()}}},{key:"getPreset",value:function(t){return s.get(t)}},{key:"addPreset",value:function(e,i){t.getPreset(e)||s.set(e,i)}},{key:"addShapeDrawer",value:function(e,i){t.getShapeDrawer(e)||l.set(e,i)}},{key:"getShapeDrawer",value:function(t){return l.get(t)}},{key:"getSupportedShapes",value:function(){return l.keys()}}]),t}();e.Plugins=c},function(t,e,i){"use strict";var n=i(4);Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;e.Point=function t(e,i){n(this,t),this.position=e,this.particle=i}},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.QuadTree=void 0;var a=i(80),s=i(78),l=i(112),c=function(){function t(e,i){r(this,t),this.rectangle=e,this.capacity=i,this.points=[],this.divided=!1}return o(t,[{key:"subdivide",value:function(){var e=this.rectangle.position.x,i=this.rectangle.position.y,n=this.rectangle.size.width,r=this.rectangle.size.height,o=this.capacity;this.northEast=new t(new a.Rectangle(e,i,n/2,r/2),o),this.northWest=new t(new a.Rectangle(e+n/2,i,n/2,r/2),o),this.southEast=new t(new a.Rectangle(e,i+r/2,n/2,r/2),o),this.southWest=new t(new a.Rectangle(e+n/2,i+r/2,n/2,r/2),o),this.divided=!0}},{key:"insert",value:function(t){var e,i,n,r,o;return!!this.rectangle.contains(t.position)&&(this.points.length<this.capacity?(this.points.push(t),!0):(this.divided||this.subdivide(),null!==(o=(null===(e=this.northEast)||void 0===e?void 0:e.insert(t))||(null===(i=this.northWest)||void 0===i?void 0:i.insert(t))||(null===(n=this.southEast)||void 0===n?void 0:n.insert(t))||(null===(r=this.southWest)||void 0===r?void 0:r.insert(t)))&&void 0!==o&&o))}},{key:"queryCircle",value:function(t,e){return this.query(new s.Circle(t.x,t.y,e))}},{key:"queryCircleWarp",value:function(t,e,i){var n=i,r=i;return this.query(new l.CircleWarp(t.x,t.y,e,void 0!==n.canvas?n.canvas.size:r))}},{key:"queryRectangle",value:function(t,e){return this.query(new a.Rectangle(t.x,t.y,e.width,e.height))}},{key:"query",value:function(t,e){var i,r,o,a,s=null!==e&&void 0!==e?e:[];if(!t.intersects(this.rectangle))return[];var l,c=n(this.points);try{for(c.s();!(l=c.n()).done;){var u=l.value;t.contains(u.position)&&s.push(u.particle)}}catch(h){c.e(h)}finally{c.f()}return this.divided&&(null===(i=this.northEast)||void 0===i||i.query(t,s),null===(r=this.northWest)||void 0===r||r.query(t,s),null===(o=this.southEast)||void 0===o||o.query(t,s),null===(a=this.southWest)||void 0===a||a.query(t,s)),s}}]),t}();e.QuadTree=c},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Attract=void 0;var o=function(){function t(){n(this,t),this.distance=200,this.duration=.4,this.speed=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.distance&&(this.distance=t.distance),void 0!==t.duration&&(this.duration=t.duration),void 0!==t.speed&&(this.speed=t.speed))}}]),t}();e.Attract=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Light=void 0;var o=i(263),a=i(265),s=function(){function t(){n(this,t),this.area=new o.LightArea,this.shadow=new a.LightShadow}return r(t,[{key:"load",value:function(t){void 0!==t&&(this.area.load(t.area),this.shadow.load(t.shadow))}}]),t}();e.Light=s},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.LightArea=void 0;var o=i(264),a=function(){function t(){n(this,t),this.gradient=new o.LightGradient,this.radius=1e3}return r(t,[{key:"load",value:function(t){void 0!==t&&(this.gradient.load(t.gradient),void 0!==t.radius&&(this.radius=t.radius))}}]),t}();e.LightArea=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.LightGradient=void 0;var o=i(18),a=function(){function t(){n(this,t),this.start=new o.OptionsColor,this.stop=new o.OptionsColor,this.start.value="#ffffff",this.stop.value="#000000"}return r(t,[{key:"load",value:function(t){void 0!==t&&(this.start=o.OptionsColor.create(this.start,t.start),this.stop=o.OptionsColor.create(this.stop,t.stop))}}]),t}();e.LightGradient=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.LightShadow=void 0;var o=i(18),a=function(){function t(){n(this,t),this.color=new o.OptionsColor,this.color.value="#000000",this.length=2e3}return r(t,[{key:"load",value:function(t){void 0!==t&&(this.color=o.OptionsColor.create(this.color,t.color),void 0!==t.length&&(this.length=t.length))}}]),t}();e.LightShadow=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Bounce=void 0;var o=function(){function t(){n(this,t),this.distance=200}return r(t,[{key:"load",value:function(t){t&&void 0!==t.distance&&(this.distance=t.distance)}}]),t}();e.Bounce=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Links=void 0;var o=i(268),a=i(269),s=i(18),l=function(){function t(){n(this,t),this.blink=!1,this.color=new s.OptionsColor,this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new o.LinksShadow,this.triangles=new a.LinksTriangle,this.width=1,this.warp=!1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.id&&(this.id=t.id),void 0!==t.blink&&(this.blink=t.blink),this.color=s.OptionsColor.create(this.color,t.color),void 0!==t.consent&&(this.consent=t.consent),void 0!==t.distance&&(this.distance=t.distance),void 0!==t.enable&&(this.enable=t.enable),void 0!==t.frequency&&(this.frequency=t.frequency),void 0!==t.opacity&&(this.opacity=t.opacity),this.shadow.load(t.shadow),this.triangles.load(t.triangles),void 0!==t.width&&(this.width=t.width),void 0!==t.warp&&(this.warp=t.warp))}}]),t}();e.Links=l},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.LinksShadow=void 0;var o=i(18),a=function(){function t(){n(this,t),this.blur=5,this.color=new o.OptionsColor,this.enable=!1,this.color.value="#00ff00"}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.blur&&(this.blur=t.blur),this.color=o.OptionsColor.create(this.color,t.color),void 0!==t.enable&&(this.enable=t.enable))}}]),t}();e.LinksShadow=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.LinksTriangle=void 0;var o=i(18),a=function(){function t(){n(this,t),this.enable=!1,this.frequency=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.color&&(this.color=o.OptionsColor.create(this.color,t.color)),void 0!==t.enable&&(this.enable=t.enable),void 0!==t.frequency&&(this.frequency=t.frequency),void 0!==t.opacity&&(this.opacity=t.opacity))}}]),t}();e.LinksTriangle=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Move=void 0;var o=i(271),a=i(11),s=i(272),l=i(273),c=i(276),u=i(277),h=i(278),d=function(){function t(){n(this,t),this.angle=new c.MoveAngle,this.attract=new o.Attract,this.direction=a.MoveDirection.none,this.distance=0,this.enable=!1,this.gravity=new u.MoveGravity,this.noise=new l.Noise,this.outModes=new h.OutModes,this.random=!1,this.size=!1,this.speed=2,this.straight=!1,this.trail=new s.Trail,this.vibrate=!1,this.warp=!1}return r(t,[{key:"load",value:function(t){var e,i;if(void 0!==t){void 0!==t.angle&&("number"===typeof t.angle?this.angle.value=t.angle:this.angle.load(t.angle)),this.attract.load(t.attract),void 0!==t.direction&&(this.direction=t.direction),void 0!==t.distance&&(this.distance=t.distance),void 0!==t.enable&&(this.enable=t.enable),this.gravity.load(t.gravity),this.noise.load(t.noise);var n=null!==(e=t.outMode)&&void 0!==e?e:t.out_mode;void 0===t.outModes&&void 0===n||("string"===typeof t.outModes||void 0===t.outModes&&void 0!==n?this.outModes.load({default:null!==(i=t.outModes)&&void 0!==i?i:n}):this.outModes.load(t.outModes)),void 0!==t.random&&(this.random=t.random),void 0!==t.size&&(this.size=t.size),void 0!==t.speed&&(this.speed=t.speed),void 0!==t.straight&&(this.straight=t.straight),this.trail.load(t.trail),void 0!==t.vibrate&&(this.vibrate=t.vibrate),void 0!==t.warp&&(this.warp=t.warp)}}},{key:"collisions",get:function(){return!1},set:function(t){}},{key:"bounce",get:function(){return this.collisions},set:function(t){this.collisions=t}},{key:"out_mode",get:function(){return this.outMode},set:function(t){this.outMode=t}},{key:"outMode",get:function(){return this.outModes.default},set:function(t){this.outModes.default=t}}]),t}();e.Move=d},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Attract=void 0;var o=function(){function t(){n(this,t),this.enable=!1,this.rotate={x:3e3,y:3e3}}return r(t,[{key:"load",value:function(t){var e,i,n,r;if(void 0!==t){void 0!==t.enable&&(this.enable=t.enable);var o=null!==(i=null===(e=t.rotate)||void 0===e?void 0:e.x)&&void 0!==i?i:t.rotateX;void 0!==o&&(this.rotate.x=o);var a=null!==(r=null===(n=t.rotate)||void 0===n?void 0:n.y)&&void 0!==r?r:t.rotateY;void 0!==a&&(this.rotate.y=a)}}},{key:"rotateX",get:function(){return this.rotate.x},set:function(t){this.rotate.x=t}},{key:"rotateY",get:function(){return this.rotate.y},set:function(t){this.rotate.y=t}}]),t}();e.Attract=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Trail=void 0;var o=i(18),a=function(){function t(){n(this,t),this.enable=!1,this.length=10,this.fillColor=new o.OptionsColor,this.fillColor.value="#000000"}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.enable&&(this.enable=t.enable),this.fillColor=o.OptionsColor.create(this.fillColor,t.fillColor),void 0!==t.length&&(this.length=t.length))}}]),t}();e.Trail=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;var o=i(274),a=function(){function t(){n(this,t),this.delay=new o.NoiseDelay,this.enable=!1}return r(t,[{key:"load",value:function(t){void 0!==t&&(this.delay.load(t.delay),void 0!==t.enable&&(this.enable=t.enable))}}]),t}();e.Noise=a},function(t,e,i){"use strict";var n=i(4),r=i(16),o=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.NoiseDelay=void 0;var a=function(t){r(i,t);var e=o(i);function i(){return n(this,i),e.call(this)}return i}(i(37).ValueWithRandom);e.NoiseDelay=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Random=void 0;var o=function(){function t(){n(this,t),this.enable=!1,this.minimumValue=0}return r(t,[{key:"load",value:function(t){t&&(void 0!==t.enable&&(this.enable=t.enable),void 0!==t.minimumValue&&(this.minimumValue=t.minimumValue))}}]),t}();e.Random=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.MoveAngle=void 0;var o=function(){function t(){n(this,t),this.offset=45,this.value=90}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.offset&&(this.offset=t.offset),void 0!==t.value&&(this.value=t.value))}}]),t}();e.MoveAngle=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.MoveGravity=void 0;var o=function(){function t(){n(this,t),this.acceleration=9.81,this.enable=!1,this.maxSpeed=50}return r(t,[{key:"load",value:function(t){t&&(void 0!==t.acceleration&&(this.acceleration=t.acceleration),void 0!==t.enable&&(this.enable=t.enable),void 0!==t.maxSpeed&&(this.maxSpeed=t.maxSpeed))}}]),t}();e.MoveGravity=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.OutModes=void 0;var o=i(26),a=function(){function t(){n(this,t),this.default=o.OutMode.out}return r(t,[{key:"load",value:function(t){var e,i,n,r;t&&(void 0!==t.default&&(this.default=t.default),this.bottom=null!==(e=t.bottom)&&void 0!==e?e:t.default,this.left=null!==(i=t.left)&&void 0!==i?i:t.default,this.right=null!==(n=t.right)&&void 0!==n?n:t.default,this.top=null!==(r=t.top)&&void 0!==r?r:t.default)}}]),t}();e.OutModes=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.ParticlesNumber=void 0;var o=i(280),a=function(){function t(){n(this,t),this.density=new o.Density,this.limit=0,this.value=100}return r(t,[{key:"load",value:function(t){var e;if(void 0!==t){this.density.load(t.density);var i=null!==(e=t.limit)&&void 0!==e?e:t.max;void 0!==i&&(this.limit=i),void 0!==t.value&&(this.value=t.value)}}},{key:"max",get:function(){return this.limit},set:function(t){this.limit=t}}]),t}();e.ParticlesNumber=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Density=void 0;var o=function(){function t(){n(this,t),this.enable=!1,this.area=800,this.factor=1e3}return r(t,[{key:"load",value:function(t){var e;if(void 0!==t){void 0!==t.enable&&(this.enable=t.enable);var i=null!==(e=t.area)&&void 0!==e?e:t.value_area;void 0!==i&&(this.area=i),void 0!==t.factor&&(this.factor=t.factor)}}},{key:"value_area",get:function(){return this.area},set:function(t){this.area=t}}]),t}();e.Density=o},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.Opacity=void 0;var c=i(282),u=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).animation=new c.OpacityAnimation,t.random.minimumValue=.1,t.value=1,t}return r(i,[{key:"load",value:function(t){var e;t&&(o(a(i.prototype),"load",this).call(this,t),this.animation.load(null!==(e=t.animation)&&void 0!==e?e:t.anim))}},{key:"anim",get:function(){return this.animation},set:function(t){this.animation=t}}]),i}(i(37).ValueWithRandom);e.Opacity=u},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.OpacityAnimation=void 0;var o=i(45),a=function(){function t(){n(this,t),this.destroy=o.DestroyType.none,this.enable=!1,this.minimumValue=0,this.speed=2,this.startValue=o.StartValueType.random,this.sync=!1}return r(t,[{key:"load",value:function(t){var e;if(void 0!==t){void 0!==t.destroy&&(this.destroy=t.destroy),void 0!==t.enable&&(this.enable=t.enable);var i=null!==(e=t.minimumValue)&&void 0!==e?e:t.opacity_min;void 0!==i&&(this.minimumValue=i),void 0!==t.speed&&(this.speed=t.speed),void 0!==t.startValue&&(this.startValue=t.startValue),void 0!==t.sync&&(this.sync=t.sync)}}},{key:"opacity_min",get:function(){return this.minimumValue},set:function(t){this.minimumValue=t}}]),t}();e.OpacityAnimation=a},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.Size=void 0;var c=i(284),u=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).animation=new c.SizeAnimation,t.random.minimumValue=1,t.value=3,t}return r(i,[{key:"load",value:function(t){var e;if(t){o(a(i.prototype),"load",this).call(this,t);var n=null!==(e=t.animation)&&void 0!==e?e:t.anim;void 0!==n&&this.animation.load(n)}}},{key:"anim",get:function(){return this.animation},set:function(t){this.animation=t}}]),i}(i(37).ValueWithRandom);e.Size=u},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.SizeAnimation=void 0;var o=i(11),a=function(){function t(){n(this,t),this.destroy=o.DestroyType.none,this.enable=!1,this.minimumValue=0,this.speed=5,this.startValue=o.StartValueType.random,this.sync=!1}return r(t,[{key:"load",value:function(t){var e;if(void 0!==t){void 0!==t.destroy&&(this.destroy=t.destroy),void 0!==t.enable&&(this.enable=t.enable);var i=null!==(e=t.minimumValue)&&void 0!==e?e:t.size_min;void 0!==i&&(this.minimumValue=i),void 0!==t.speed&&(this.speed=t.speed),void 0!==t.startValue&&(this.startValue=t.startValue),void 0!==t.sync&&(this.sync=t.sync)}}},{key:"size_min",get:function(){return this.minimumValue},set:function(t){this.minimumValue=t}}]),t}();e.SizeAnimation=a},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.Rotate=void 0;var c=i(286),u=i(11),h=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).animation=new c.RotateAnimation,t.direction=u.RotateDirection.clockwise,t.path=!1,t}return r(i,[{key:"load",value:function(t){t&&(o(a(i.prototype),"load",this).call(this,t),void 0!==t.direction&&(this.direction=t.direction),this.animation.load(t.animation),void 0!==t.path&&(this.path=t.path))}}]),i}(i(37).ValueWithRandom);e.Rotate=h},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.RotateAnimation=void 0;var o=function(){function t(){n(this,t),this.enable=!1,this.speed=0,this.sync=!1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.enable&&(this.enable=t.enable),void 0!==t.speed&&(this.speed=t.speed),void 0!==t.sync&&(this.sync=t.sync))}}]),t}();e.RotateAnimation=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Shadow=void 0;var o=i(18),a=function(){function t(){n(this,t),this.blur=0,this.color=new o.OptionsColor,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000000"}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.blur&&(this.blur=t.blur),this.color=o.OptionsColor.create(this.color,t.color),void 0!==t.enable&&(this.enable=t.enable),void 0!==t.offset&&(void 0!==t.offset.x&&(this.offset.x=t.offset.x),void 0!==t.offset.y&&(this.offset.y=t.offset.y)))}}]),t}();e.Shadow=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Stroke=void 0;var o=i(115),a=function(){function t(){n(this,t),this.width=0}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.color&&(this.color=o.AnimatableColor.create(this.color,t.color)),void 0!==t.width&&(this.width=t.width),void 0!==t.opacity&&(this.opacity=t.opacity))}}]),t}();e.Stroke=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.ColorAnimation=void 0;var o=function(){function t(){n(this,t),this.enable=!1,this.speed=1,this.sync=!0}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.enable&&(this.enable=t.enable),void 0!==t.speed&&(this.speed=t.speed),void 0!==t.sync&&(this.sync=t.sync))}}]),t}();e.ColorAnimation=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Collisions=void 0;var o=i(11),a=i(116),s=function(){function t(){n(this,t),this.bounce=new a.Bounce,this.enable=!1,this.mode=o.CollisionMode.bounce}return r(t,[{key:"load",value:function(t){void 0!==t&&(this.bounce.load(t.bounce),void 0!==t.enable&&(this.enable=t.enable),void 0!==t.mode&&(this.mode=t.mode))}}]),t}();e.Collisions=s},function(t,e,i){"use strict";var n=i(4),r=i(16),o=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.BounceFactor=void 0;var a=function(t){r(i,t);var e=o(i);function i(){var t;return n(this,i),(t=e.call(this)).random.minimumValue=.1,t.value=1,t}return i}(i(37).ValueWithRandom);e.BounceFactor=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Twinkle=void 0;var o=i(293),a=function(){function t(){n(this,t),this.lines=new o.TwinkleValues,this.particles=new o.TwinkleValues}return r(t,[{key:"load",value:function(t){void 0!==t&&(this.lines.load(t.lines),this.particles.load(t.particles))}}]),t}();e.Twinkle=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.TwinkleValues=void 0;var o=i(18),a=function(){function t(){n(this,t),this.enable=!1,this.frequency=.05,this.opacity=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.color&&(this.color=o.OptionsColor.create(this.color,t.color)),void 0!==t.enable&&(this.enable=t.enable),void 0!==t.frequency&&(this.frequency=t.frequency),void 0!==t.opacity&&(this.opacity=t.opacity))}}]),t}();e.TwinkleValues=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Life=void 0;var o=i(295),a=i(296),s=function(){function t(){n(this,t),this.count=0,this.delay=new o.LifeDelay,this.duration=new a.LifeDuration}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.count&&(this.count=t.count),this.delay.load(t.delay),this.duration.load(t.duration))}}]),t}();e.Life=s},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.LifeDelay=void 0;var c=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).sync=!1,t}return r(i,[{key:"load",value:function(t){t&&(o(a(i.prototype),"load",this).call(this,t),void 0!==t.sync&&(this.sync=t.sync))}}]),i}(i(37).ValueWithRandom);e.LifeDelay=c},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.LifeDuration=void 0;var c=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).random.minimumValue=1e-4,t.sync=!1,t}return r(i,[{key:"load",value:function(t){void 0!==t&&(o(a(i.prototype),"load",this).call(this,t),void 0!==t.sync&&(this.sync=t.sync))}}]),i}(i(37).ValueWithRandom);e.LifeDuration=c},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundMask=void 0;var o=i(298),a=function(){function t(){n(this,t),this.composite="destination-out",this.cover=new o.BackgroundMaskCover,this.enable=!1}return r(t,[{key:"load",value:function(t){if(void 0!==t){if(void 0!==t.composite&&(this.composite=t.composite),void 0!==t.cover){var e=t.cover,i="string"===typeof t.cover?{color:t.cover}:t.cover;this.cover.load(void 0!==e.color?e:{color:i})}void 0!==t.enable&&(this.enable=t.enable)}}}]),t}();e.BackgroundMask=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundMaskCover=void 0;var o=i(18),a=function(){function t(){n(this,t),this.color=new o.OptionsColor,this.opacity=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.color&&(this.color=o.OptionsColor.create(this.color,t.color)),void 0!==t.opacity&&(this.opacity=t.opacity))}}]),t}();e.BackgroundMaskCover=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Background=void 0;var o=i(18),a=function(){function t(){n(this,t),this.color=new o.OptionsColor,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.color&&(this.color=o.OptionsColor.create(this.color,t.color)),void 0!==t.image&&(this.image=t.image),void 0!==t.position&&(this.position=t.position),void 0!==t.repeat&&(this.repeat=t.repeat),void 0!==t.size&&(this.size=t.size),void 0!==t.opacity&&(this.opacity=t.opacity))}}]),t}();e.Background=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Infection=void 0;var o=i(301),a=function(){function t(){n(this,t),this.cure=!1,this.delay=0,this.enable=!1,this.infections=0,this.stages=[]}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.cure&&(this.cure=t.cure),void 0!==t.delay&&(this.delay=t.delay),void 0!==t.enable&&(this.enable=t.enable),void 0!==t.infections&&(this.infections=t.infections),void 0!==t.stages&&(this.stages=t.stages.map((function(t){var e=new o.InfectionStage;return e.load(t),e}))))}}]),t}();e.Infection=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.InfectionStage=void 0;var o=i(18),a=function(){function t(){n(this,t),this.color=new o.OptionsColor,this.color.value="#ff0000",this.radius=0,this.rate=1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.color&&(this.color=o.OptionsColor.create(this.color,t.color)),this.duration=t.duration,this.infectedStage=t.infectedStage,void 0!==t.radius&&(this.radius=t.radius),void 0!==t.rate&&(this.rate=t.rate))}}]),t}();e.InfectionStage=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var o=i(8),a=i(303),s=function(){function t(){n(this,t),this.name="",this.default=new a.ThemeDefault}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.name&&(this.name=t.name),this.default.load(t.default),void 0!==t.options&&(this.options=o.Utils.deepExtend({},t.options)))}}]),t}();e.Theme=s},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeDefault=void 0;var o=i(26),a=function(){function t(){n(this,t),this.mode=o.ThemeMode.any,this.value=!1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.mode&&(this.mode=t.mode),void 0!==t.value&&(this.value=t.value))}}]),t}();e.ThemeDefault=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundMode=void 0;var o=function(){function t(){n(this,t),this.enable=!1,this.zIndex=-1}return r(t,[{key:"load",value:function(t){t&&(void 0!==t.enable&&(this.enable=t.enable),void 0!==t.zIndex&&(this.zIndex=t.zIndex))}}]),t}();e.BackgroundMode=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Motion=void 0;var o=i(306),a=function(){function t(){n(this,t),this.disable=!1,this.reduce=new o.MotionReduce}return r(t,[{key:"load",value:function(t){t&&(void 0!==t.disable&&(this.disable=t.disable),this.reduce.load(t.reduce))}}]),t}();e.Motion=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.MotionReduce=void 0;var o=function(){function t(){n(this,t),this.factor=4,this.value=!1}return r(t,[{key:"load",value:function(t){t&&(void 0!==t.factor&&(this.factor=t.factor),void 0!==t.value&&(this.value=t.value))}}]),t}();e.MotionReduce=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.ManualParticle=void 0;var o=i(8),a=function(){function t(){n(this,t)}return r(t,[{key:"load",value:function(t){var e,i;t&&(void 0!==t.position&&(this.position={x:null!==(e=t.position.x)&&void 0!==e?e:50,y:null!==(i=t.position.y)&&void 0!==i?i:50}),void 0!==t.options&&(this.options=o.Utils.deepExtend({},t.options)))}}]),t}();e.ManualParticle=a},function(t,e,i){"use strict";var n=i(41),r=i(10),o=i(4),a=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var s=i(8),l=function(){function t(e){o(this,t),this.container=e,this.size={height:0,width:0},this.context=null,this.generatedCanvas=!1}return a(t,[{key:"init",value:function(){var t,e,i,n,r,o,a,l,c,u,h,d;this.resize();var p=this.container.options,f=this.element;f&&(p.backgroundMode.enable?(this.originalStyle=s.Utils.deepExtend({},f.style),f.style.position="fixed",f.style.zIndex=p.backgroundMode.zIndex.toString(10),f.style.top="0",f.style.left="0",f.style.width="100%",f.style.height="100%"):(f.style.position=null!==(e=null===(t=this.originalStyle)||void 0===t?void 0:t.position)&&void 0!==e?e:"",f.style.zIndex=null!==(n=null===(i=this.originalStyle)||void 0===i?void 0:i.zIndex)&&void 0!==n?n:"",f.style.top=null!==(o=null===(r=this.originalStyle)||void 0===r?void 0:r.top)&&void 0!==o?o:"",f.style.left=null!==(l=null===(a=this.originalStyle)||void 0===a?void 0:a.left)&&void 0!==l?l:"",f.style.width=null!==(u=null===(c=this.originalStyle)||void 0===c?void 0:c.width)&&void 0!==u?u:"",f.style.height=null!==(d=null===(h=this.originalStyle)||void 0===h?void 0:h.height)&&void 0!==d?d:""));var m=p.backgroundMask.cover,y=m.color,v=p.particles.move.trail,g=s.ColorUtils.colorToRgb(y);this.coverColor=void 0!==g?{r:g.r,g:g.g,b:g.b,a:m.opacity}:void 0,this.trailFillColor=s.ColorUtils.colorToRgb(v.fillColor),this.initBackground(),this.paint()}},{key:"loadCanvas",value:function(t,e){var i;t.className||(t.className=s.Constants.canvasClass),this.generatedCanvas&&(null===(i=this.element)||void 0===i||i.remove()),this.generatedCanvas=null!==e&&void 0!==e?e:this.generatedCanvas,this.element=t,this.originalStyle=s.Utils.deepExtend({},this.element.style),this.size.height=t.offsetHeight,this.size.width=t.offsetWidth,this.context=this.element.getContext("2d"),this.container.retina.init(),this.initBackground()}},{key:"destroy",value:function(){var t;this.generatedCanvas&&(null===(t=this.element)||void 0===t||t.remove()),this.context&&s.CanvasUtils.clear(this.context,this.size)}},{key:"resize",value:function(){this.element&&(this.element.width=this.size.width,this.element.height=this.size.height)}},{key:"paint",value:function(){var t=this.container.options;this.context&&(t.backgroundMask.enable&&t.backgroundMask.cover&&this.coverColor?(s.CanvasUtils.clear(this.context,this.size),this.paintBase(s.ColorUtils.getStyleFromRgb(this.coverColor,this.coverColor.a))):this.paintBase())}},{key:"clear",value:function(){var t=this.container.options,e=t.particles.move.trail;t.backgroundMask.enable?this.paint():e.enable&&e.length>0&&this.trailFillColor?this.paintBase(s.ColorUtils.getStyleFromRgb(this.trailFillColor,1/e.length)):this.context&&s.CanvasUtils.clear(this.context,this.size)}},{key:"windowResize",value:function(){if(this.element){var t=this.container;t.canvas.initSize(),t.particles.setDensity();var e,i=r(t.plugins);try{for(i.s();!(e=i.n()).done;){var o=n(e.value,2)[1];void 0!==o.resize&&o.resize()}}catch(a){i.e(a)}finally{i.f()}}}},{key:"initSize",value:function(){if(this.element){var t=this.container,e=t.retina.pixelRatio;t.canvas.size.width=this.element.offsetWidth*e,t.canvas.size.height=this.element.offsetHeight*e,this.element.width=t.canvas.size.width,this.element.height=t.canvas.size.height}}},{key:"drawConnectLine",value:function(t,e){var i,n=this.lineStyle(t,e);if(n){var r=this.context;if(r){var o=t.getPosition(),a=e.getPosition();s.CanvasUtils.drawConnectLine(r,null!==(i=t.linksWidth)&&void 0!==i?i:this.container.retina.linksWidth,n,o,a)}}}},{key:"drawGrabLine",value:function(t,e,i,n){var r,o=this.container,a=o.canvas.context;if(a){var l=t.getPosition();s.CanvasUtils.drawGrabLine(a,null!==(r=t.linksWidth)&&void 0!==r?r:o.retina.linksWidth,l,n,e,i)}}},{key:"drawParticleShadow",value:function(t,e){this.context&&s.CanvasUtils.drawParticleShadow(this.container,this.context,t,e)}},{key:"drawLinkTriangle",value:function(t,e,i){var n,r=this.container,o=r.options,a=e.destination,l=i.destination,c=t.particlesOptions.links.triangles,u=null!==(n=c.opacity)&&void 0!==n?n:(e.opacity+i.opacity)/2;if(!(u<=0)){var h=t.getPosition(),d=a.getPosition(),p=l.getPosition(),f=this.context;if(f&&!(s.NumberUtils.getDistance(h,d)>r.retina.linksDistance||s.NumberUtils.getDistance(p,d)>r.retina.linksDistance||s.NumberUtils.getDistance(p,h)>r.retina.linksDistance)){var m=s.ColorUtils.colorToRgb(c.color);if(!m){var y=t.particlesOptions.links,v=void 0!==y.id?r.particles.linksColors.get(y.id):r.particles.linksColor;m=s.ColorUtils.getLinkColor(t,a,v)}m&&s.CanvasUtils.drawLinkTriangle(f,h,d,p,o.backgroundMask.enable,o.backgroundMask.composite,m,u)}}}},{key:"drawLinkLine",value:function(t,e){var i,n,r=this.container,o=r.options,a=e.destination,l=e.opacity,c=t.getPosition(),u=a.getPosition(),h=this.context;if(h){var d,p=t.particlesOptions.twinkle.lines;if(p.enable){var f=p.frequency,m=s.ColorUtils.colorToRgb(p.color);Math.random()<f&&void 0!==m&&(d=m,l=p.opacity)}if(!d){var y=t.particlesOptions.links,v=void 0!==y.id?r.particles.linksColors.get(y.id):r.particles.linksColor;d=s.ColorUtils.getLinkColor(t,a,v)}if(d){var g=null!==(i=t.linksWidth)&&void 0!==i?i:r.retina.linksWidth,_=null!==(n=t.linksDistance)&&void 0!==n?n:r.retina.linksDistance;s.CanvasUtils.drawLinkLine(h,g,c,u,_,r.canvas.size,t.particlesOptions.links.warp,o.backgroundMask.enable,o.backgroundMask.composite,d,l,t.particlesOptions.links.shadow)}}}},{key:"drawParticle",value:function(t,e){var i,n,r,o;if(!1!==(null===(i=t.image)||void 0===i?void 0:i.loaded)&&!t.spawning&&!t.destroyed){var a=t.getFillColor(),l=null!==(n=t.getStrokeColor())&&void 0!==n?n:a;if(a||l){var c=this.container.options,u=t.particlesOptions.twinkle.particles,h=u.frequency,d=s.ColorUtils.colorToRgb(u.color),p=u.enable&&Math.random()<h,f=t.getRadius(),m=p?u.opacity:null!==(r=t.bubble.opacity)&&void 0!==r?r:t.opacity.value,y=t.infecter.infectionStage,v=c.infection.stages,g=void 0!==y?v[y].color:void 0,_=s.ColorUtils.colorToRgb(g),b=p&&void 0!==d?d:null!==_&&void 0!==_?_:a?s.ColorUtils.hslToRgb(a):void 0,x=p&&void 0!==d?d:null!==_&&void 0!==_?_:l?s.ColorUtils.hslToRgb(l):void 0,w=void 0!==b?s.ColorUtils.getStyleFromRgb(b,m):void 0;if(this.context&&(w||x)){var S=void 0!==x?s.ColorUtils.getStyleFromRgb(x,null!==(o=t.stroke.opacity)&&void 0!==o?o:m):w;this.drawParticleLinks(t),f>0&&s.CanvasUtils.drawParticle(this.container,this.context,t,e,w,S,c.backgroundMask.enable,c.backgroundMask.composite,f,m,t.particlesOptions.shadow)}}}}},{key:"drawParticleLinks",value:function(t){var e=this;if(this.context){var i=this.container,n=i.particles,o=t.particlesOptions;if(t.links.length>0){this.context.save();var a,s=t.links.filter((function(e){return i.particles.getLinkFrequency(t,e.destination)<=o.links.frequency})),l=r(s);try{var c=function(){var l=a.value,c=l.destination;if(o.links.triangles.enable){var u=s.map((function(t){return t.destination})),h=c.links.filter((function(t){return i.particles.getLinkFrequency(c,t.destination)<=c.particlesOptions.links.frequency&&u.indexOf(t.destination)>=0}));if(h.length){var d,p=r(h);try{for(p.s();!(d=p.n()).done;){var f=d.value,m=f.destination;n.getTriangleFrequency(t,c,m)>o.links.triangles.frequency||e.drawLinkTriangle(t,l,f)}}catch(y){p.e(y)}finally{p.f()}}}l.opacity>0&&i.retina.linksWidth>0&&e.drawLinkLine(t,l)};for(l.s();!(a=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}this.context.restore()}}}},{key:"drawPlugin",value:function(t,e){this.context&&s.CanvasUtils.drawPlugin(this.context,t,e)}},{key:"drawLight",value:function(t){this.context&&s.CanvasUtils.drawLight(this.container,this.context,t)}},{key:"paintBase",value:function(t){this.context&&s.CanvasUtils.paintBase(this.context,this.size,t)}},{key:"lineStyle",value:function(t,e){var i=this.container.options.interactivity.modes.connect;if(this.context)return s.CanvasUtils.gradient(this.context,t,e,i.links.opacity)}},{key:"initBackground",value:function(){var t=this.container.options.background,e=this.element;if(e){var i=e.style;if(t.color){var n=s.ColorUtils.colorToRgb(t.color);n&&(i.backgroundColor=s.ColorUtils.getStyleFromRgb(n,t.opacity))}t.image&&(i.backgroundImage=t.image),t.position&&(i.backgroundPosition=t.position),t.repeat&&(i.backgroundRepeat=t.repeat),t.size&&(i.backgroundSize=t.size)}}}]),t}();e.Canvas=l},function(t,e,i){"use strict";var n=i(41),r=i(10),o=i(4),a=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Particles=void 0;var s=i(310),l=i(8),c=i(314),u=function(){function t(e){o(this,t),this.container=e,this.nextId=0,this.array=[],this.limit=0,this.linksFreq=new Map,this.trianglesFreq=new Map,this.interactionManager=new c.InteractionManager(e);var i=this.container.canvas.size;this.linksColors=new Map,this.quadTree=new l.QuadTree(new l.Rectangle(-i.width/4,-i.height/4,3*i.width/2,3*i.height/2),4)}return a(t,[{key:"init",value:function(){var t=this.container,e=t.options;this.linksFreq=new Map,this.trianglesFreq=new Map;var i,o=!1,a=r(e.manualParticles);try{for(a.s();!(i=a.n()).done;){var s=i.value,c=s.position?{x:s.position.x*t.canvas.size.width/100,y:s.position.y*t.canvas.size.height/100}:void 0;this.addParticle(c,s.options)}}catch(y){a.e(y)}finally{a.f()}var u,h=r(t.plugins);try{for(h.s();!(u=h.n()).done;){var d=n(u.value,2)[1];if(void 0!==d.particlesInitialization&&(o=d.particlesInitialization()),o)break}}catch(y){h.e(y)}finally{h.f()}if(!o)for(var p=this.count;p<e.particles.number.value;p++)this.addParticle();if(e.infection.enable)for(var f=0;f<e.infection.infections;f++){var m=this.array.filter((function(t){return void 0===t.infecter.infectionStage}));l.Utils.itemFromArray(m).infecter.startInfection(0)}this.interactionManager.init(),t.noise.init()}},{key:"redraw",value:function(){this.clear(),this.init(),this.draw({value:0,factor:0})}},{key:"removeAt",value:function(t,e){if(t>=0&&t<=this.count){var i,n=r(this.array.splice(t,null!==e&&void 0!==e?e:1));try{for(n.s();!(i=n.n()).done;){i.value.destroy()}}catch(o){n.e(o)}finally{n.f()}}}},{key:"remove",value:function(t){this.removeAt(this.array.indexOf(t))}},{key:"update",value:function(t){var e=[];this.container.noise.update();var i,n=r(this.array);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.move(t),o.destroyed?e.push(o):this.quadTree.insert(new l.Point(o.getPosition(),o))}}catch(p){n.e(p)}finally{n.f()}for(var a=0,s=e;a<s.length;a++){var c=s[a];this.remove(c)}this.interactionManager.externalInteract(t);var u,h=r(this.container.particles.array);try{for(h.s();!(u=h.n()).done;){var d=u.value;d.update(t),d.destroyed||d.spawning||this.interactionManager.particlesInteract(d,t)}}catch(p){h.e(p)}finally{h.f()}}},{key:"draw",value:function(t){var e=this.container;e.canvas.clear();var i=this.container.canvas.size;this.quadTree=new l.QuadTree(new l.Rectangle(-i.width/4,-i.height/4,3*i.width/2,3*i.height/2),4),this.update(t);var o,a=r(e.plugins);try{for(a.s();!(o=a.n()).done;){var s=n(o.value,2)[1];e.canvas.drawPlugin(s,t)}}catch(h){a.e(h)}finally{a.f()}var c,u=r(this.array);try{for(u.s();!(c=u.n()).done;){c.value.draw(t)}}catch(h){u.e(h)}finally{u.f()}}},{key:"clear",value:function(){this.array=[]}},{key:"push",value:function(t,e,i){var n=this.container,r=n.options.particles.number.limit*n.density;if(this.pushing=!0,r>0){var o=this.count+t-r;o>0&&this.removeQuantity(o)}for(var a=0;a<t;a++)this.addParticle(null===e||void 0===e?void 0:e.position,i);this.pushing=!1}},{key:"addParticle",value:function(t,e){try{var i=new s.Particle(this.nextId,this.container,t,e);return this.array.push(i),this.nextId++,i}catch(n){return void console.warn("error adding particle")}}},{key:"removeQuantity",value:function(t){this.removeAt(0,t)}},{key:"getLinkFrequency",value:function(t,e){var i="".concat(Math.min(t.id,e.id),"_").concat(Math.max(t.id,e.id)),n=this.linksFreq.get(i);return void 0===n&&(n=Math.random(),this.linksFreq.set(i,n)),n}},{key:"getTriangleFrequency",value:function(t,e,i){var n=[t.id,e.id,i.id],r=n[0],o=n[1],a=n[2];if(r>o){var s=[r,o];o=s[0],r=s[1]}if(o>a){var l=[o,a];a=l[0],o=l[1]}if(r>a){var c=[r,a];a=c[0],r=c[1]}var u="".concat(r,"_").concat(o,"_").concat(a),h=this.trianglesFreq.get(u);return void 0===h&&(h=Math.random(),this.trianglesFreq.set(u,h)),h}},{key:"setDensity",value:function(){var t=this.container.options;this.applyDensity(t.particles)}},{key:"applyDensity",value:function(t){var e;if(null===(e=t.number.density)||void 0===e?void 0:e.enable){var i=t.number,n=this.initDensityFactor(i.density),r=i.value,o=i.limit>0?i.limit:r,a=Math.min(r,o)*n,s=this.count;this.limit=i.limit*n,s<a?this.push(Math.abs(a-s),void 0,t):s>a&&this.removeQuantity(s-a)}}},{key:"initDensityFactor",value:function(t){var e=this.container;if(!e.canvas.element||!t.enable)return 1;var i=e.canvas.element,n=e.retina.pixelRatio;return i.width*i.height/(t.factor*n*n*t.area)}},{key:"count",get:function(){return this.array.length}}]),t}();e.Particles=u},function(t,e,i){"use strict";var n=i(41),r=i(10),o=i(4),a=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Particle=void 0;var s=i(311),l=i(113),c=i(114),u=i(11),h=i(8),d=i(312),p=i(313),f=function(){function t(e,i,n,r){var a,f,m,y,v,g,_,b,x;o(this,t),this.id=e,this.container=i,this.links=[],this.fill=!0,this.close=!0,this.lastNoiseTime=0,this.destroyed=!1,this.misplaced=!1;var w=i.retina.pixelRatio,S=i.options,E=new l.Particles;E.load(S.particles);var k=E.shape.type,P=E.reduceDuplicates;if(this.shape=k instanceof Array?h.Utils.itemFromArray(k,this.id,P):k,null===r||void 0===r?void 0:r.shape){if(r.shape.type){var T=r.shape.type;this.shape=T instanceof Array?h.Utils.itemFromArray(T,this.id,P):T}var C=new c.Shape;if(C.load(r.shape),this.shape){var M=C.options[this.shape];M&&(this.shapeData=h.Utils.deepExtend({},M instanceof Array?h.Utils.itemFromArray(M,this.id,P):M))}}else{var A=E.shape.options[this.shape];A&&(this.shapeData=h.Utils.deepExtend({},A instanceof Array?h.Utils.itemFromArray(A,this.id,P):A))}void 0!==r&&E.load(r),void 0!==(null===(a=this.shapeData)||void 0===a?void 0:a.particles)&&E.load(null===(f=this.shapeData)||void 0===f?void 0:f.particles),this.fill=null!==(y=null===(m=this.shapeData)||void 0===m?void 0:m.fill)&&void 0!==y?y:this.fill,this.close=null!==(g=null===(v=this.shapeData)||void 0===v?void 0:v.close)&&void 0!==g?g:this.close,this.particlesOptions=E,this.noiseDelay=1e3*h.NumberUtils.getValue(this.particlesOptions.move.noise.delay),i.retina.initParticle(this);var O=this.particlesOptions.color,I=this.particlesOptions.size,D=h.NumberUtils.getValue(I)*i.retina.pixelRatio,z="boolean"===typeof I.random?I.random:I.random.enable;this.size={value:D},this.direction=this.particlesOptions.move.direction,this.bubble={inRange:!1},this.initialVelocity=this.calculateVelocity(),this.velocity={horizontal:this.initialVelocity.horizontal,vertical:this.initialVelocity.vertical},this.pathAngle=Math.atan2(this.initialVelocity.vertical,this.initialVelocity.horizontal);var L=this.particlesOptions.rotate;this.rotate={value:(L.random.enable?360*Math.random():L.value)*Math.PI/180};var R=L.direction;R===u.RotateDirection.random&&(R=Math.floor(2*Math.random())>0?u.RotateDirection.counterClockwise:u.RotateDirection.clockwise);switch(R){case u.RotateDirection.counterClockwise:case"counterClockwise":this.rotate.status=u.AnimationStatus.decreasing;break;case u.RotateDirection.clockwise:this.rotate.status=u.AnimationStatus.increasing}var F=this.particlesOptions.rotate.animation;F.enable&&(this.rotate.velocity=F.speed/360*i.retina.reduceFactor,F.sync||(this.rotate.velocity*=Math.random()));var B=this.particlesOptions.size.animation;if(B.enable){if(this.size.status=u.AnimationStatus.increasing,!z)switch(B.startValue){case u.StartValueType.min:this.size.value=B.minimumValue*w;break;case u.StartValueType.random:this.size.value=h.NumberUtils.randomInRange(B.minimumValue*w,this.size.value);break;case u.StartValueType.max:default:this.size.status=u.AnimationStatus.decreasing}this.size.velocity=(null!==(_=this.sizeAnimationSpeed)&&void 0!==_?_:i.retina.sizeAnimationSpeed)/100*i.retina.reduceFactor,B.sync||(this.size.velocity*=Math.random())}this.color={value:h.ColorUtils.colorToHsl(O,this.id,P)};var j=this.particlesOptions.color.animation;j.enable&&(this.color.velocity=j.speed/100*i.retina.reduceFactor,j.sync||(this.color.velocity*=Math.random())),this.position=this.calcPosition(this.container,n),this.initialPosition={x:this.position.x,y:this.position.y},this.offset={x:0,y:0};var N=this.particlesOptions.opacity,V="boolean"===typeof N.random?N.random:N.random.enable;this.opacity={value:h.NumberUtils.getValue(N)};var U=N.animation;if(U.enable){if(this.opacity.status=u.AnimationStatus.increasing,!V)switch(U.startValue){case u.StartValueType.min:this.opacity.value=U.minimumValue;break;case u.StartValueType.random:this.opacity.value=h.NumberUtils.randomInRange(U.minimumValue,this.opacity.value);break;case u.StartValueType.max:default:this.opacity.status=u.AnimationStatus.decreasing}this.opacity.velocity=U.speed/100*i.retina.reduceFactor,U.sync||(this.opacity.velocity*=Math.random())}this.sides=24;var G=i.drawers.get(this.shape);G||(G=h.Plugins.getShapeDrawer(this.shape))&&i.drawers.set(this.shape,G);var q=null===G||void 0===G?void 0:G.getSidesCount;q&&(this.sides=q(this));var Z=this.loadImageShape(i,G);if(Z&&(this.image=Z.image,this.fill=Z.fill,this.close=Z.close),this.stroke=this.particlesOptions.stroke instanceof Array?h.Utils.itemFromArray(this.particlesOptions.stroke,this.id,P):this.particlesOptions.stroke,this.strokeWidth=this.stroke.width*i.retina.pixelRatio,this.strokeColor={value:null!==(b=h.ColorUtils.colorToHsl(this.stroke.color))&&void 0!==b?b:this.color.value},"string"!==typeof this.stroke.color){var H=null===(x=this.stroke.color)||void 0===x?void 0:x.animation;H&&this.strokeColor&&(H.enable?(this.strokeColor.velocity=H.speed/100*i.retina.reduceFactor,H.sync||(this.strokeColor.velocity=this.strokeColor.velocity*Math.random())):this.strokeColor.velocity=0,H.enable&&!H.sync&&this.strokeColor.value&&(this.strokeColor.value.h=360*Math.random()))}var W=E.life;this.lifeDelay=i.retina.reduceFactor?h.NumberUtils.getValue(W.delay)*(W.delay.sync?1:Math.random())/i.retina.reduceFactor*1e3:0,this.lifeDelayTime=0,this.lifeDuration=i.retina.reduceFactor?h.NumberUtils.getValue(W.duration)*(W.duration.sync?1:Math.random())/i.retina.reduceFactor*1e3:0,this.lifeTime=0,this.livesRemaining=E.life.count,this.spawning=this.lifeDelay>0,this.lifeDuration<=0&&(this.lifeDuration=-1),this.livesRemaining<=0&&(this.livesRemaining=-1),this.shadowColor=h.ColorUtils.colorToRgb(this.particlesOptions.shadow.color),this.updater=new s.Updater(i,this),this.infecter=new d.Infecter(i),this.mover=new p.Mover(i,this)}return a(t,[{key:"move",value:function(t){this.mover.move(t)}},{key:"update",value:function(t){this.updater.update(t)}},{key:"draw",value:function(t){this.container.canvas.drawParticle(this,t)}},{key:"getPosition",value:function(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y}}},{key:"getRadius",value:function(){return this.bubble.radius||this.size.value}},{key:"getFillColor",value:function(){var t;return null!==(t=this.bubble.color)&&void 0!==t?t:this.color.value}},{key:"getStrokeColor",value:function(){var t,e;return null!==(e=null!==(t=this.bubble.color)&&void 0!==t?t:this.strokeColor.value)&&void 0!==e?e:this.color.value}},{key:"destroy",value:function(){this.destroyed=!0,this.bubble.inRange=!1,this.links=[]}},{key:"calcPosition",value:function(t,e){var i,o,a,s=r(t.plugins);try{for(s.s();!(a=s.n()).done;){var l=n(a.value,2)[1],c=void 0!==l.particlePosition?l.particlePosition(e,this):void 0;if(void 0!==c)return h.Utils.deepExtend({},c)}}catch(f){s.e(f)}finally{s.f()}var d={x:null!==(i=null===e||void 0===e?void 0:e.x)&&void 0!==i?i:Math.random()*t.canvas.size.width,y:null!==(o=null===e||void 0===e?void 0:e.y)&&void 0!==o?o:Math.random()*t.canvas.size.height},p=this.particlesOptions.move.outMode;return(h.Utils.isInArray(p,u.OutMode.bounce)||h.Utils.isInArray(p,u.OutMode.bounceHorizontal))&&(d.x>t.canvas.size.width-2*this.size.value?d.x-=this.size.value:d.x<2*this.size.value&&(d.x+=this.size.value)),(h.Utils.isInArray(p,u.OutMode.bounce)||h.Utils.isInArray(p,u.OutMode.bounceVertical))&&(d.y>t.canvas.size.height-2*this.size.value?d.y-=this.size.value:d.y<2*this.size.value&&(d.y+=this.size.value)),d}},{key:"calculateVelocity",value:function(){var t,e=h.NumberUtils.getParticleBaseVelocity(this),i={horizontal:0,vertical:0},n=this.particlesOptions.move,r=Math.PI/4;"number"===typeof n.angle?t=Math.PI/180*n.angle:(t=Math.PI/180*n.angle.value,r=Math.PI/180*n.angle.offset);var o={left:Math.sin(r+t/2)-Math.sin(r-t/2),right:Math.cos(r+t/2)-Math.cos(r-t/2)};return n.straight?(i.horizontal=e.x,i.vertical=e.y,n.random&&(i.horizontal+=h.NumberUtils.randomInRange(o.left,o.right)/2,i.vertical+=h.NumberUtils.randomInRange(o.left,o.right)/2)):(i.horizontal=e.x+h.NumberUtils.randomInRange(o.left,o.right)/2,i.vertical=e.y+h.NumberUtils.randomInRange(o.left,o.right)/2),i}},{key:"loadImageShape",value:function(t,e){var i,n,r,o,a,s=this;if(this.shape===u.ShapeType.image||this.shape===u.ShapeType.images){var l,c=e.getImages(t).images,d=this.shapeData,p=null!==(i=c.find((function(t){return t.source===d.src})))&&void 0!==i?i:c[0],f=this.getFillColor();if(p){if(void 0!==p.svgData&&d.replaceColor&&f){var m=h.ColorUtils.replaceColorSvg(p,f,this.opacity.value),y=new Blob([m],{type:"image/svg+xml"}),v=URL||window.URL||window.webkitURL||window,g=v.createObjectURL(y),_=new Image;l={data:p,loaded:!1,ratio:d.width/d.height,replaceColor:null!==(n=d.replaceColor)&&void 0!==n?n:d.replace_color,source:d.src},_.addEventListener("load",(function(){s.image&&(s.image.loaded=!0,p.element=_),v.revokeObjectURL(g)})),_.addEventListener("error",(function(){v.revokeObjectURL(g),h.Utils.loadImage(d.src).then((function(t){s.image&&(p.element=t.element,s.image.loaded=!0)}))})),_.src=g}else l={data:p,loaded:!0,ratio:d.width/d.height,replaceColor:null!==(r=d.replaceColor)&&void 0!==r?r:d.replace_color,source:d.src};return l.ratio||(l.ratio=1),{image:l,fill:null!==(o=d.fill)&&void 0!==o?o:this.fill,close:null!==(a=d.close)&&void 0!==a?a:this.close}}}}}]),t}();e.Particle=f},function(t,e,i){"use strict";var n=i(41),r=i(10),o=i(4),a=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Updater=void 0;var s=i(8),l=i(11),c=i(111);function u(t,e,i,n,r){switch(e){case l.DestroyType.max:i>=r&&t.destroy();break;case l.DestroyType.min:i<=n&&t.destroy()}}var h=function(){function t(e,i){o(this,t),this.container=e,this.particle=i}return a(t,[{key:"update",value:function(t){this.particle.destroyed||(this.updateLife(t),this.particle.destroyed||this.particle.spawning||(this.updateOpacity(t),this.updateSize(t),this.updateAngle(t),this.updateColor(t),this.updateStrokeColor(t),this.updateOutModes(t)))}},{key:"updateLife",value:function(t){var e=this.particle,i=!1;if(e.spawning&&(e.lifeDelayTime+=t.value,e.lifeDelayTime>=e.lifeDelay&&(i=!0,e.spawning=!1,e.lifeDelayTime=0,e.lifeTime=0)),-1!==e.lifeDuration&&!e.spawning&&(i?e.lifeTime=0:e.lifeTime+=t.value,e.lifeTime>=e.lifeDuration)){if(e.lifeTime=0,e.livesRemaining>0&&e.livesRemaining--,0===e.livesRemaining)return void e.destroy();var n=this.container.canvas.size;e.position.x=s.NumberUtils.randomInRange(0,n.width),e.position.y=s.NumberUtils.randomInRange(0,n.height),e.spawning=!0,e.lifeDelayTime=0,e.lifeTime=0;var r=e.particlesOptions.life;e.lifeDelay=1e3*s.NumberUtils.getValue(r.delay),e.lifeDuration=1e3*s.NumberUtils.getValue(r.duration)}}},{key:"updateOpacity",value:function(t){var e,i,n=this.particle,r=n.particlesOptions.opacity.anim,o=r.minimumValue,a=n.particlesOptions.opacity.value;if(r.enable){switch(n.opacity.status){case l.AnimationStatus.increasing:n.opacity.value>=a?n.opacity.status=l.AnimationStatus.decreasing:n.opacity.value+=(null!==(e=n.opacity.velocity)&&void 0!==e?e:0)*t.factor;break;case l.AnimationStatus.decreasing:n.opacity.value<=o?n.opacity.status=l.AnimationStatus.increasing:n.opacity.value-=(null!==(i=n.opacity.velocity)&&void 0!==i?i:0)*t.factor}u(n,r.destroy,n.opacity.value,o,a),n.destroyed||(n.opacity.value=s.NumberUtils.clamp(n.opacity.value,o,a))}}},{key:"updateSize",value:function(t){var e,i,n=this.container,r=this.particle,o=r.particlesOptions.size.animation,a=(null!==(e=r.size.velocity)&&void 0!==e?e:0)*t.factor,c=null!==(i=r.sizeValue)&&void 0!==i?i:n.retina.sizeValue,h=o.minimumValue*n.retina.pixelRatio;if(o.enable){switch(r.size.status){case l.AnimationStatus.increasing:r.size.value>=c?r.size.status=l.AnimationStatus.decreasing:r.size.value+=a;break;case l.AnimationStatus.decreasing:r.size.value<=h?r.size.status=l.AnimationStatus.increasing:r.size.value-=a}u(r,o.destroy,r.size.value,h,c),r.destroyed||(r.size.value=s.NumberUtils.clamp(r.size.value,h,c))}}},{key:"updateAngle",value:function(t){var e,i=this.particle,n=i.particlesOptions.rotate,r=n.animation,o=(null!==(e=i.rotate.velocity)&&void 0!==e?e:0)*t.factor,a=2*Math.PI;if(n.path)i.pathAngle=Math.atan2(i.velocity.vertical,i.velocity.horizontal);else if(r.enable)switch(i.rotate.status){case l.AnimationStatus.increasing:i.rotate.value+=o,i.rotate.value>a&&(i.rotate.value-=a);break;case l.AnimationStatus.decreasing:default:i.rotate.value-=o,i.rotate.value<0&&(i.rotate.value+=a)}}},{key:"updateColor",value:function(t){var e,i=this.particle;void 0!==i.color.value&&i.particlesOptions.color.animation.enable&&(i.color.value.h+=(null!==(e=i.color.velocity)&&void 0!==e?e:0)*t.factor,i.color.value.h>360&&(i.color.value.h-=360))}},{key:"updateStrokeColor",value:function(t){var e,i,n=this.particle,r=n.stroke.color;"string"!==typeof r&&void 0!==r&&void 0!==n.strokeColor.value&&r.animation.enable&&(n.strokeColor.value.h+=(null!==(i=null!==(e=n.strokeColor.velocity)&&void 0!==e?e:n.color.velocity)&&void 0!==i?i:0)*t.factor,n.strokeColor.value.h>360&&(n.strokeColor.value.h-=360))}},{key:"updateOutModes",value:function(t){var e,i,n,r,o=this.particle.particlesOptions.move.outModes;this.updateOutMode(t,null!==(e=o.bottom)&&void 0!==e?e:o.default,c.OutModeDirection.bottom),this.updateOutMode(t,null!==(i=o.left)&&void 0!==i?i:o.default,c.OutModeDirection.left),this.updateOutMode(t,null!==(n=o.right)&&void 0!==n?n:o.default,c.OutModeDirection.right),this.updateOutMode(t,null!==(r=o.top)&&void 0!==r?r:o.default,c.OutModeDirection.top)}},{key:"updateOutMode",value:function(t,e,i){var n=this.container,r=this.particle;switch(e){case l.OutMode.bounce:case l.OutMode.bounceVertical:case l.OutMode.bounceHorizontal:case"bounceVertical":case"bounceHorizontal":this.updateBounce(t,i,e);break;case l.OutMode.destroy:s.Utils.isPointInside(r.position,n.canvas.size,r.getRadius(),i)||n.particles.remove(r);break;case l.OutMode.out:s.Utils.isPointInside(r.position,n.canvas.size,r.getRadius(),i)||this.fixOutOfCanvasPosition(i);break;case l.OutMode.none:this.bounceNone(i)}}},{key:"fixOutOfCanvasPosition",value:function(t){var e=this.container,i=this.particle,n=i.particlesOptions.move.warp,r=e.canvas.size,o={bottom:r.height+i.getRadius()-i.offset.y,left:-i.getRadius()-i.offset.x,right:r.width+i.getRadius()+i.offset.x,top:-i.getRadius()-i.offset.y},a=i.getRadius(),l=s.Utils.calculateBounds(i.position,a);t===c.OutModeDirection.right&&l.left>r.width-i.offset.x?(i.position.x=o.left,n||(i.position.y=Math.random()*r.height)):t===c.OutModeDirection.left&&l.right<-i.offset.x&&(i.position.x=o.right,n||(i.position.y=Math.random()*r.height)),t===c.OutModeDirection.bottom&&l.top>r.height-i.offset.y?(n||(i.position.x=Math.random()*r.width),i.position.y=o.top):t===c.OutModeDirection.top&&l.bottom<-i.offset.y&&(n||(i.position.x=Math.random()*r.width),i.position.y=o.bottom)}},{key:"updateBounce",value:function(t,e,i){var o,a=this.container,u=this.particle,h=!1,d=r(a.plugins);try{for(d.s();!(o=d.n()).done;){var p=n(o.value,2)[1];if(void 0!==p.particleBounce&&(h=p.particleBounce(u,t,e)),h)break}}catch(_){d.e(_)}finally{d.f()}if(!h){var f=u.getPosition(),m=u.offset,y=u.getRadius(),v=s.Utils.calculateBounds(f,y),g=a.canvas.size;!function(t){if(t.outMode===l.OutMode.bounce||t.outMode===l.OutMode.bounceHorizontal||"bounceHorizontal"===t.outMode){var e=t.particle.velocity.horizontal,i=!1;if(t.direction===c.OutModeDirection.right&&t.bounds.right>=t.canvasSize.width&&e>0||t.direction===c.OutModeDirection.left&&t.bounds.left<=0&&e<0){var n=s.NumberUtils.getValue(t.particle.particlesOptions.bounce.horizontal);t.particle.velocity.horizontal*=-n,i=!0}if(i){var r=t.offset.x+t.size;t.bounds.right>=t.canvasSize.width?t.particle.position.x=t.canvasSize.width-r:t.bounds.left<=0&&(t.particle.position.x=r)}}}({particle:u,outMode:i,direction:e,bounds:v,canvasSize:g,offset:m,size:y}),function(t){if(t.outMode===l.OutMode.bounce||t.outMode===l.OutMode.bounceVertical||"bounceVertical"===t.outMode){var e=t.particle.velocity.vertical,i=!1;if(t.direction===c.OutModeDirection.bottom&&t.bounds.bottom>=t.canvasSize.height&&e>0||t.direction===c.OutModeDirection.top&&t.bounds.top<=0&&e<0){var n=s.NumberUtils.getValue(t.particle.particlesOptions.bounce.vertical);t.particle.velocity.vertical*=-n,i=!0}if(i){var r=t.offset.y+t.size;t.bounds.bottom>=t.canvasSize.height?t.particle.position.y=t.canvasSize.height-r:t.bounds.top<=0&&(t.particle.position.y=r)}}}({particle:u,outMode:i,direction:e,bounds:v,canvasSize:g,offset:m,size:y})}}},{key:"bounceNone",value:function(t){var e=this.particle;if(!e.particlesOptions.move.distance){var i=e.particlesOptions.move.gravity,n=this.container;if(i.enable){var r=e.position;(i.acceleration>=0&&r.y>n.canvas.size.height&&t===c.OutModeDirection.bottom||i.acceleration<0&&r.y<0&&t===c.OutModeDirection.top)&&n.particles.remove(e)}else s.Utils.isPointInside(e.position,n.canvas.size,e.getRadius(),t)||n.particles.remove(e)}}}]),t}();e.Updater=h},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Infecter=void 0;var o=function(){function t(e){n(this,t),this.container=e}return r(t,[{key:"startInfection",value:function(t){t>this.container.options.infection.stages.length||t<0||(this.infectionDelay=0,this.infectionDelayStage=t)}},{key:"updateInfectionStage",value:function(t){t>this.container.options.infection.stages.length||t<0||void 0!==this.infectionStage&&this.infectionStage>t||(this.infectionStage=t,this.infectionTime=0)}},{key:"updateInfection",value:function(t){var e=this.container.options,i=e.infection,n=e.infection.stages,r=n.length;if(void 0!==this.infectionDelay&&void 0!==this.infectionDelayStage){var o=this.infectionDelayStage;if(o>r||o<0)return;this.infectionDelay>1e3*i.delay?(this.infectionStage=o,this.infectionTime=0,delete this.infectionDelay,delete this.infectionDelayStage):this.infectionDelay+=t}else delete this.infectionDelay,delete this.infectionDelayStage;if(void 0!==this.infectionStage&&void 0!==this.infectionTime){var a=n[this.infectionStage];void 0!==a.duration&&a.duration>=0&&this.infectionTime>1e3*a.duration?this.nextInfectionStage():this.infectionTime+=t}else delete this.infectionStage,delete this.infectionTime}},{key:"nextInfectionStage",value:function(){var t=this.container.options,e=t.infection.stages.length;if(!(e<=0||void 0===this.infectionStage)&&(this.infectionTime=0,e<=++this.infectionStage)){if(t.infection.cure)return delete this.infectionStage,void delete this.infectionTime;this.infectionStage=0,this.infectionTime=0}}}]),t}();e.Infecter=o},function(t,e,i){"use strict";var n=i(41),r=i(10),o=i(4),a=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Mover=void 0;var s=i(8),l=i(11),c=function(){function t(e,i){o(this,t),this.container=e,this.particle=i}return a(t,[{key:"move",value:function(t){var e=this.particle;e.bubble.inRange=!1,e.links=[];var i,o=r(this.container.plugins);try{for(o.s();!(i=o.n()).done;){var a=n(i.value,2)[1];if(e.destroyed)break;a.particleUpdate&&a.particleUpdate(e,t)}}catch(s){o.e(s)}finally{o.f()}e.destroyed||(this.moveParticle(t),this.moveParallax())}},{key:"moveParticle",value:function(t){var e,i,n=this.particle,r=n.particlesOptions;if(r.move.enable){var o=this.container,a=this.getProximitySpeedFactor(),l=(null!==(e=n.moveSpeed)&&void 0!==e?e:o.retina.moveSpeed)*o.retina.reduceFactor,c=null!==(i=n.sizeValue)&&void 0!==i?i:o.retina.sizeValue,u=l/2*(r.move.size?n.getRadius()/c:1)*a*t.factor;this.applyNoise(t);var h=r.move.gravity;h.enable&&(n.velocity.vertical+=h.acceleration*t.factor/(60*u));var d={horizontal:n.velocity.horizontal*u,vertical:n.velocity.vertical*u};h.enable&&d.vertical>=h.maxSpeed&&h.maxSpeed>0&&(d.vertical=h.maxSpeed,n.velocity.vertical=d.vertical/u),n.position.x+=d.horizontal,n.position.y+=d.vertical,r.move.vibrate&&(n.position.x+=Math.sin(n.position.x*Math.cos(n.position.y)),n.position.y+=Math.cos(n.position.y*Math.sin(n.position.x)));var p=n.initialPosition,f=s.NumberUtils.getDistance(p,n.position);n.maxDistance&&(f>=n.maxDistance&&!n.misplaced?(n.misplaced=f>n.maxDistance,n.velocity.horizontal=n.velocity.vertical/2-n.velocity.horizontal,n.velocity.vertical=n.velocity.horizontal/2-n.velocity.vertical):f<n.maxDistance&&n.misplaced?n.misplaced=!1:n.misplaced&&((n.position.x<p.x&&n.velocity.horizontal<0||n.position.x>p.x&&n.velocity.horizontal>0)&&(n.velocity.horizontal*=-Math.random()),(n.position.y<p.y&&n.velocity.vertical<0||n.position.y>p.y&&n.velocity.vertical>0)&&(n.velocity.vertical*=-Math.random())))}}},{key:"applyNoise",value:function(t){var e=this.particle;if(e.particlesOptions.move.noise.enable){var i=this.container;if(e.lastNoiseTime<=e.noiseDelay)e.lastNoiseTime+=t.value;else{var n=i.noise.generate(e);e.velocity.horizontal+=Math.cos(n.angle)*n.length,e.velocity.horizontal=s.NumberUtils.clamp(e.velocity.horizontal,-1,1),e.velocity.vertical+=Math.sin(n.angle)*n.length,e.velocity.vertical=s.NumberUtils.clamp(e.velocity.vertical,-1,1),e.lastNoiseTime-=e.noiseDelay}}}},{key:"moveParallax",value:function(){var t=this.container,e=t.options;if(!s.Utils.isSsr()&&e.interactivity.events.onHover.parallax.enable){var i=this.particle,n=e.interactivity.events.onHover.parallax.force,r=t.interactivity.mouse.position;if(r){var o=t.canvas.size.width/2,a=t.canvas.size.height/2,l=e.interactivity.events.onHover.parallax.smooth,c=i.getRadius()/n,u=(r.x-o)*c,h=(r.y-a)*c;i.offset.x+=(u-i.offset.x)/l,i.offset.y+=(h-i.offset.y)/l}}}},{key:"getProximitySpeedFactor",value:function(){var t=this.container,e=t.options;if(!s.Utils.isInArray(l.HoverMode.slow,e.interactivity.events.onHover.mode))return 1;var i=this.container.interactivity.mouse.position;if(!i)return 1;var n=this.particle.getPosition(),r=s.NumberUtils.getDistance(i,n),o=t.retina.slowModeRadius;return r>o?1:(r/o||0)/e.interactivity.modes.slow.factor}}]),t}();e.Mover=c},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.InteractionManager=void 0;var a=i(315),s=i(316),l=i(317),c=i(318),u=i(319),h=i(320),d=i(321),p=i(322),f=i(323),m=i(324),y=i(325),v=i(326),g=i(327),_=function(){function t(e){r(this,t),this.container=e,this.externalInteractors=[new g.Bouncer(e),new l.Bubbler(e),new c.Connector(e),new a.Grabber(e),new v.Lighter(e),new m.Attractor(e),new s.Repulser(e),new f.TrailMaker(e)],this.particleInteractors=[new h.Attractor(e),new y.Lighter(e),new d.Collider(e),new p.Infecter(e),new u.Linker(e)]}return o(t,[{key:"init",value:function(){}},{key:"externalInteract",value:function(t){var e,i=n(this.externalInteractors);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.isEnabled()&&r.interact(t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"particlesInteract",value:function(t,e){var i,r=n(this.externalInteractors);try{for(r.s();!(i=r.n()).done;){i.value.reset(t)}}catch(l){r.e(l)}finally{r.f()}var o,a=n(this.particleInteractors);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.isEnabled(t)&&s.interact(t,e)}}catch(l){a.e(l)}finally{a.f()}}}]),t}();e.InteractionManager=_},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Grabber=void 0;var a=i(8),s=i(26),l=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(){var t=this.container,e=t.interactivity.mouse,i=t.options.interactivity.events;if(!i.onHover.enable||!e.position)return!1;var n=i.onHover.mode;return a.Utils.isInArray(s.HoverMode.grab,n)}},{key:"reset",value:function(){}},{key:"interact",value:function(){var t,e=this.container,i=e.options.interactivity;if(i.events.onHover.enable&&e.interactivity.status===a.Constants.mouseMoveEvent){var r=e.interactivity.mouse.position;if(void 0===r)return;var o,s=e.retina.grabModeDistance,l=e.particles.quadTree.queryCircle(r,s),c=n(l);try{for(c.s();!(o=c.n()).done;){var u=o.value,h=u.getPosition(),d=a.NumberUtils.getDistance(h,r);if(d<=s){var p=i.modes.grab.links,f=p.opacity,m=f-d*f/s;if(m>0){var y=null!==(t=p.color)&&void 0!==t?t:u.particlesOptions.links.color;if(!e.particles.grabLineColor){var v=e.options.interactivity.modes.grab.links;e.particles.grabLineColor=a.ColorUtils.getLinkRandomColor(y,v.blink,v.consent)}var g=a.ColorUtils.getLinkColor(u,void 0,e.particles.grabLineColor);if(void 0===g)return;e.canvas.drawGrabLine(u,g,m,r)}}}}catch(_){c.e(_)}finally{c.f()}}}}]),t}();e.Grabber=l},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Repulser=void 0;var a=i(11),s=i(8),l=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(){var t=this.container,e=t.options,i=t.interactivity.mouse,n=e.interactivity.events,r=n.onDiv,o=s.Utils.isDivModeEnabled(a.DivMode.repulse,r);if(!(o||n.onHover.enable&&i.position||n.onClick.enable&&i.clickPosition))return!1;var l=n.onHover.mode,c=n.onClick.mode;return s.Utils.isInArray(a.HoverMode.repulse,l)||s.Utils.isInArray(a.ClickMode.repulse,c)||o}},{key:"reset",value:function(){}},{key:"interact",value:function(){var t=this,e=this.container,i=e.options,n=e.interactivity.status===s.Constants.mouseMoveEvent,r=i.interactivity.events,o=r.onHover.enable,l=r.onHover.mode,c=r.onClick.enable,u=r.onClick.mode,h=r.onDiv;n&&o&&s.Utils.isInArray(a.HoverMode.repulse,l)?this.hoverRepulse():c&&s.Utils.isInArray(a.ClickMode.repulse,u)?this.clickRepulse():s.Utils.divModeExecute(a.DivMode.repulse,h,(function(e,i){return t.singleSelectorRepulse(e,i)}))}},{key:"singleSelectorRepulse",value:function(t,e){var i=this,n=this.container,r=document.querySelectorAll(t);r.length&&r.forEach((function(t){var r=t,o=n.retina.pixelRatio,l={x:(r.offsetLeft+r.offsetWidth/2)*o,y:(r.offsetTop+r.offsetHeight/2)*o},c=r.offsetWidth/2*o,u=e.type===a.DivType.circle?new s.Circle(l.x,l.y,c):new s.Rectangle(r.offsetLeft*o,r.offsetTop*o,r.offsetWidth*o,r.offsetHeight*o),h=n.options.interactivity.modes.repulse.divs,d=s.Utils.divMode(h,r);i.processRepulse(l,c,u,d)}))}},{key:"hoverRepulse",value:function(){var t=this.container,e=t.interactivity.mouse.position;if(e){var i=t.retina.repulseModeDistance;this.processRepulse(e,i,new s.Circle(e.x,e.y,i))}}},{key:"processRepulse",value:function(t,e,i,r){var o,a,l=this.container,c=l.particles.quadTree.query(i),u=n(c);try{for(u.s();!(a=u.n()).done;){var h=a.value,d=s.NumberUtils.getDistances(h.position,t),p=d.dx,f=d.dy,m=d.distance,y={x:p/m,y:f/m},v=100*(null!==(o=null===r||void 0===r?void 0:r.speed)&&void 0!==o?o:l.options.interactivity.modes.repulse.speed),g=s.NumberUtils.clamp((1-Math.pow(m/e,2))*v,0,50);h.position.x=h.position.x+y.x*g,h.position.y=h.position.y+y.y*g}}catch(_){u.e(_)}finally{u.f()}}},{key:"clickRepulse",value:function(){var t=this.container;if(t.repulse.finish||(t.repulse.count||(t.repulse.count=0),t.repulse.count++,t.repulse.count===t.particles.count&&(t.repulse.finish=!0)),t.repulse.clicking){var e=t.retina.repulseModeDistance,i=Math.pow(e/6,3),r=t.interactivity.mouse.clickPosition;if(void 0===r)return;var o,a=new s.Circle(r.x,r.y,i),l=t.particles.quadTree.query(a),c=n(l);try{for(c.s();!(o=c.n()).done;){var u=o.value,h=s.NumberUtils.getDistances(r,u.position),d=h.dx,p=h.dy,f=h.distance,m=f*f,y=-i*t.options.interactivity.modes.repulse.speed/m;if(m<=i){t.repulse.particles.push(u);var v=Math.atan2(p,d);u.velocity.horizontal=y*Math.cos(v),u.velocity.vertical=y*Math.sin(v)}}}catch(x){c.e(x)}finally{c.f()}}else if(!1===t.repulse.clicking){var g,_=n(t.repulse.particles);try{for(_.s();!(g=_.n()).done;){var b=g.value;b.velocity.horizontal=b.initialVelocity.horizontal,b.velocity.vertical=b.initialVelocity.vertical}}catch(x){_.e(x)}finally{_.f()}t.repulse.particles=[]}}}]),t}();e.Repulser=l},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Bubbler=void 0;var a=i(8),s=i(11);function l(t,e,i,n){if(e>i){var r=t+(e-i)*n;return a.NumberUtils.clamp(r,t,e)}if(e<i){var o=t-(i-e)*n;return a.NumberUtils.clamp(o,e,t)}}var c=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(){var t=this.container,e=t.options,i=t.interactivity.mouse,n=e.interactivity.events,r=n.onDiv,o=a.Utils.isDivModeEnabled(s.DivMode.bubble,r);if(!(o||n.onHover.enable&&i.position||n.onClick.enable&&i.clickPosition))return!1;var l=n.onHover.mode,c=n.onClick.mode;return a.Utils.isInArray(s.HoverMode.bubble,l)||a.Utils.isInArray(s.ClickMode.bubble,c)||o}},{key:"reset",value:function(t,e){t.bubble.inRange&&!e||(delete t.bubble.div,delete t.bubble.opacity,delete t.bubble.radius,delete t.bubble.color)}},{key:"interact",value:function(){var t=this,e=this.container.options.interactivity.events,i=e.onHover,n=e.onClick,r=i.enable,o=i.mode,l=n.enable,c=n.mode,u=e.onDiv;r&&a.Utils.isInArray(s.HoverMode.bubble,o)?this.hoverBubble():l&&a.Utils.isInArray(s.ClickMode.bubble,c)?this.clickBubble():a.Utils.divModeExecute(s.DivMode.bubble,u,(function(e,i){return t.singleSelectorHover(e,i)}))}},{key:"singleSelectorHover",value:function(t,e){var i=this,r=this.container,o=document.querySelectorAll(t);o.length&&o.forEach((function(t){var o,l=t,c=r.retina.pixelRatio,u={x:(l.offsetLeft+l.offsetWidth/2)*c,y:(l.offsetTop+l.offsetHeight/2)*c},h=l.offsetWidth/2*c,d=e.type===s.DivType.circle?new a.Circle(u.x,u.y,h):new a.Rectangle(l.offsetLeft*c,l.offsetTop*c,l.offsetWidth*c,l.offsetHeight*c),p=r.particles.quadTree.query(d),f=n(p);try{for(f.s();!(o=f.n()).done;){var m=o.value;if(d.contains(m.getPosition())){m.bubble.inRange=!0;var y=r.options.interactivity.modes.bubble.divs,v=a.Utils.divMode(y,l);m.bubble.div&&m.bubble.div===l||(i.reset(m,!0),m.bubble.div=l),i.hoverBubbleSize(m,1,v),i.hoverBubbleOpacity(m,1,v),i.hoverBubbleColor(m,v)}}}catch(g){f.e(g)}finally{f.f()}}))}},{key:"process",value:function(t,e,i,n){var r=this.container,o=n.bubbleObj.optValue;if(void 0!==o){var a=r.options.interactivity.modes.bubble.duration,l=r.retina.bubbleModeDistance,c=n.particlesObj.optValue,u=n.bubbleObj.value,h=n.particlesObj.value||0,d=n.type;if(o!==c)if(r.bubble.durationEnd)u&&(d===s.ProcessBubbleType.size&&delete t.bubble.radius,d===s.ProcessBubbleType.opacity&&delete t.bubble.opacity);else if(e<=l){if((null!==u&&void 0!==u?u:h)!==o){var p=h-i*(h-o)/a;d===s.ProcessBubbleType.size&&(t.bubble.radius=p),d===s.ProcessBubbleType.opacity&&(t.bubble.opacity=p)}}else d===s.ProcessBubbleType.size&&delete t.bubble.radius,d===s.ProcessBubbleType.opacity&&delete t.bubble.opacity}}},{key:"clickBubble",value:function(){var t,e=this.container,i=e.options,r=e.interactivity.mouse.clickPosition;if(void 0!==r){var o,l=e.retina.bubbleModeDistance,c=e.particles.quadTree.queryCircle(r,l),u=n(c);try{for(u.s();!(o=u.n()).done;){var h=o.value;if(e.bubble.clicking){h.bubble.inRange=!e.bubble.durationEnd;var d=h.getPosition(),p=a.NumberUtils.getDistance(d,r),f=((new Date).getTime()-(e.interactivity.mouse.clickTime||0))/1e3;f>i.interactivity.modes.bubble.duration&&(e.bubble.durationEnd=!0),f>2*i.interactivity.modes.bubble.duration&&(e.bubble.clicking=!1,e.bubble.durationEnd=!1);var m={bubbleObj:{optValue:e.retina.bubbleModeSize,value:h.bubble.radius},particlesObj:{optValue:null!==(t=h.sizeValue)&&void 0!==t?t:e.retina.sizeValue,value:h.size.value},type:s.ProcessBubbleType.size};this.process(h,p,f,m);var y={bubbleObj:{optValue:i.interactivity.modes.bubble.opacity,value:h.bubble.opacity},particlesObj:{optValue:h.particlesOptions.opacity.value,value:h.opacity.value},type:s.ProcessBubbleType.opacity};this.process(h,p,f,y),e.bubble.durationEnd?delete h.bubble.color:p<=e.retina.bubbleModeDistance?this.hoverBubbleColor(h):delete h.bubble.color}}}catch(v){u.e(v)}finally{u.f()}}}},{key:"hoverBubble",value:function(){var t=this.container,e=t.interactivity.mouse.position;if(void 0!==e){var i,r=t.retina.bubbleModeDistance,o=t.particles.quadTree.queryCircle(e,r),s=n(o);try{for(s.s();!(i=s.n()).done;){var l=i.value;l.bubble.inRange=!0;var c=l.getPosition(),u=a.NumberUtils.getDistance(c,e),h=1-u/r;u<=r?h>=0&&t.interactivity.status===a.Constants.mouseMoveEvent&&(this.hoverBubbleSize(l,h),this.hoverBubbleOpacity(l,h),this.hoverBubbleColor(l)):this.reset(l),t.interactivity.status===a.Constants.mouseLeaveEvent&&this.reset(l)}}catch(d){s.e(d)}finally{s.f()}}}},{key:"hoverBubbleSize",value:function(t,e,i){var n,r=this.container,o=(null===i||void 0===i?void 0:i.size)?i.size*r.retina.pixelRatio:r.retina.bubbleModeSize;if(void 0!==o){var a=null!==(n=t.sizeValue)&&void 0!==n?n:r.retina.sizeValue,s=l(t.size.value,o,a,e);void 0!==s&&(t.bubble.radius=s)}}},{key:"hoverBubbleOpacity",value:function(t,e,i){var n,r=this.container.options,o=null!==(n=null===i||void 0===i?void 0:i.opacity)&&void 0!==n?n:r.interactivity.modes.bubble.opacity;if(void 0!==o){var a=t.particlesOptions.opacity.value,s=l(t.opacity.value,o,a,e);void 0!==s&&(t.bubble.opacity=s)}}},{key:"hoverBubbleColor",value:function(t,e){var i,n=this.container.options;if(void 0===t.bubble.color){var r=null!==(i=null===e||void 0===e?void 0:e.color)&&void 0!==i?i:n.interactivity.modes.bubble.color;if(void 0===r)return;var o=r instanceof Array?a.Utils.itemFromArray(r):r;t.bubble.color=a.ColorUtils.colorToHsl(o)}}}]),t}();e.Bubbler=c},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Connector=void 0;var a=i(8),s=i(26),l=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(){var t=this.container,e=t.interactivity.mouse,i=t.options.interactivity.events;if(!i.onHover.enable||!e.position)return!1;var n=i.onHover.mode;return a.Utils.isInArray(s.HoverMode.connect,n)}},{key:"reset",value:function(){}},{key:"interact",value:function(){var t=this.container;if(t.options.interactivity.events.onHover.enable&&"mousemove"===t.interactivity.status){var e=t.interactivity.mouse.position;if(!e)return;var i,r=Math.abs(t.retina.connectModeRadius),o=t.particles.quadTree.queryCircle(e,r),a=0,s=n(o);try{for(s.s();!(i=s.n()).done;){var l,c=i.value,u=c.getPosition(),h=n(o.slice(a+1));try{for(h.s();!(l=h.n()).done;){var d=l.value,p=d.getPosition(),f=Math.abs(t.retina.connectModeDistance),m=Math.abs(u.x-p.x),y=Math.abs(u.y-p.y);m<f&&y<f&&t.canvas.drawConnectLine(c,d)}}catch(v){h.e(v)}finally{h.f()}++a}}catch(v){s.e(v)}finally{s.f()}}}}]),t}();e.Connector=l},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Linker=void 0;var a=i(8),s=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(t){return t.particlesOptions.links.enable}},{key:"reset",value:function(){}},{key:"interact",value:function(t){var e,i,r=this.container,o=t.particlesOptions.links,s=o.opacity,l=null!==(e=t.linksDistance)&&void 0!==e?e:r.retina.linksDistance,c=r.canvas.size,u=o.warp,h=t.getPosition(),d=u?new a.CircleWarp(h.x,h.y,l,c):new a.Circle(h.x,h.y,l),p=r.particles.quadTree.query(d),f=n(p);try{for(f.s();!(i=f.n()).done;){var m=i.value,y=m.particlesOptions.links;if(t!==m&&y.enable&&o.id===y.id&&!m.spawning&&!m.destroyed){var v=m.getPosition(),g=a.NumberUtils.getDistance(h,v);if(u&&g>l){var _={x:v.x-c.width,y:v.y};if((g=a.NumberUtils.getDistance(h,_))>l){var b={x:v.x-c.width,y:v.y-c.height};if((g=a.NumberUtils.getDistance(h,b))>l){var x={x:v.x,y:v.y-c.height};g=a.NumberUtils.getDistance(h,x)}}}if(g>l)return;var w=(1-g/l)*s,S=t.particlesOptions.links,E=void 0!==S.id?r.particles.linksColors.get(S.id):r.particles.linksColor;if(!E){var k=S.color;E=a.ColorUtils.getLinkRandomColor(k,S.blink,S.consent),void 0!==S.id?r.particles.linksColors.set(S.id,E):r.particles.linksColor=E}-1===m.links.map((function(t){return t.destination})).indexOf(t)&&-1===t.links.map((function(t){return t.destination})).indexOf(m)&&t.links.push({destination:m,opacity:w})}}}catch(P){f.e(P)}finally{f.f()}}}]),t}();e.Linker=s},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Attractor=void 0;var a=i(8),s=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"interact",value:function(t){var e,i,r=this.container,o=null!==(e=t.linksDistance)&&void 0!==e?e:r.retina.linksDistance,s=t.getPosition(),l=r.particles.quadTree.queryCircle(s,o),c=n(l);try{for(c.s();!(i=c.n()).done;){var u=i.value;if(t!==u&&u.particlesOptions.move.attract.enable&&!u.destroyed&&!u.spawning){var h=u.getPosition(),d=a.NumberUtils.getDistances(s,h),p=d.dx,f=d.dy,m=t.particlesOptions.move.attract.rotate,y=p/(1e3*m.x),v=f/(1e3*m.y);t.velocity.horizontal-=y,t.velocity.vertical-=v,u.velocity.horizontal+=y,u.velocity.vertical+=v}}}catch(g){c.e(g)}finally{c.f()}}},{key:"isEnabled",value:function(t){return t.particlesOptions.move.attract.enable}},{key:"reset",value:function(){}}]),t}();e.Attractor=s},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Collider=void 0;var a=i(11),s=i(8);var l=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(t){return t.particlesOptions.collisions.enable}},{key:"reset",value:function(){}},{key:"interact",value:function(t){var e,i=this.container,r=t.getPosition(),o=i.particles.quadTree.queryCircle(r,2*t.getRadius()),a=n(o);try{for(a.s();!(e=a.n()).done;){var l=e.value;if(t!==l&&l.particlesOptions.collisions.enable&&t.particlesOptions.collisions.mode===l.particlesOptions.collisions.mode&&!l.destroyed&&!l.spawning){var c=l.getPosition();s.NumberUtils.getDistance(r,c)<=t.getRadius()+l.getRadius()&&this.resolveCollision(t,l)}}}catch(u){a.e(u)}finally{a.f()}}},{key:"resolveCollision",value:function(t,e){switch(t.particlesOptions.collisions.mode){case a.CollisionMode.absorb:this.absorb(t,e);break;case a.CollisionMode.bounce:!function(t,e){s.Utils.circleBounce(s.Utils.circleBounceDataFromParticle(t),s.Utils.circleBounceDataFromParticle(e))}(t,e);break;case a.CollisionMode.destroy:!function(t,e){void 0===t.getRadius()&&void 0!==e.getRadius()?t.destroy():void 0!==t.getRadius()&&void 0===e.getRadius()?e.destroy():void 0!==t.getRadius()&&void 0!==e.getRadius()&&(t.getRadius()>=e.getRadius()?e.destroy():t.destroy())}(t,e)}}},{key:"absorb",value:function(t,e){var i=this.container,n=i.options.fpsLimit/1e3;if(void 0===t.getRadius()&&void 0!==e.getRadius())t.destroy();else if(void 0!==t.getRadius()&&void 0===e.getRadius())e.destroy();else if(void 0!==t.getRadius()&&void 0!==e.getRadius())if(t.getRadius()>=e.getRadius()){var r=s.NumberUtils.clamp(t.getRadius()/e.getRadius(),0,e.getRadius())*n;t.size.value+=r,e.size.value-=r,e.getRadius()<=i.retina.pixelRatio&&(e.size.value=0,e.destroy())}else{var o=s.NumberUtils.clamp(e.getRadius()/t.getRadius(),0,t.getRadius())*n;t.size.value-=o,e.size.value+=o,t.getRadius()<=i.retina.pixelRatio&&(t.size.value=0,t.destroy())}}}]),t}();e.Collider=l},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Infecter=void 0;var a=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(){return this.container.options.infection.enable}},{key:"reset",value:function(){}},{key:"interact",value:function(t,e){var i,r,o=t.infecter;if(o.updateInfection(e.value),void 0!==o.infectionStage){var a=this.container,s=a.options.infection;if(s.enable&&!(s.stages.length<1)){var l,c=s.stages[o.infectionStage],u=a.retina.pixelRatio,h=2*t.getRadius()+c.radius*u,d=t.getPosition(),p=null!==(i=c.infectedStage)&&void 0!==i?i:o.infectionStage,f=a.particles.quadTree.queryCircle(d,h),m=c.rate,y=f.length,v=n(f);try{for(v.s();!(l=v.n()).done;){var g=l.value;if(!(g===t||g.destroyed||g.spawning||void 0!==g.infecter.infectionStage&&g.infecter.infectionStage===o.infectionStage)){var _=g.infecter;if(Math.random()<m/y)if(void 0===_.infectionStage)_.startInfection(p);else if(_.infectionStage<o.infectionStage)_.updateInfectionStage(p);else if(_.infectionStage>o.infectionStage){var b=s.stages[_.infectionStage],x=null!==(r=null===b||void 0===b?void 0:b.infectedStage)&&void 0!==r?r:_.infectionStage;o.updateInfectionStage(x)}}}}catch(w){v.e(w)}finally{v.f()}}}}}]),t}();e.Infecter=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.TrailMaker=void 0;var o=i(8),a=i(26),s=function(){function t(e){n(this,t),this.container=e,this.delay=0}return r(t,[{key:"interact",value:function(t){if(this.container.retina.reduceFactor){var e=this.container,i=e.options.interactivity.modes.trail,n=1e3*i.delay/this.container.retina.reduceFactor;this.delay<n&&(this.delay+=t.value),this.delay>=n&&(e.particles.push(i.quantity,e.interactivity.mouse,i.particles),this.delay-=n)}}},{key:"isEnabled",value:function(){var t=this.container,e=t.options,i=t.interactivity.mouse,n=e.interactivity.events;return i.clicking&&i.inside&&!!i.position&&o.Utils.isInArray(a.ClickMode.trail,n.onClick.mode)||i.inside&&!!i.position&&o.Utils.isInArray(a.HoverMode.trail,n.onHover.mode)}},{key:"reset",value:function(){}}]),t}();e.TrailMaker=s},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Attractor=void 0;var a=i(11),s=i(8),l=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(){var t=this.container,e=t.options,i=t.interactivity.mouse,n=e.interactivity.events;if(!(n.onHover.enable&&i.position||n.onClick.enable&&i.clickPosition))return!1;var r=n.onHover.mode,o=n.onClick.mode;return s.Utils.isInArray(a.HoverMode.attract,r)||s.Utils.isInArray(a.ClickMode.attract,o)}},{key:"reset",value:function(){}},{key:"interact",value:function(){var t=this.container,e=t.options,i=t.interactivity.status===s.Constants.mouseMoveEvent,n=e.interactivity.events,r=n.onHover.enable,o=n.onHover.mode,l=n.onClick.enable,c=n.onClick.mode;i&&r&&s.Utils.isInArray(a.HoverMode.attract,o)?this.hoverAttract():l&&s.Utils.isInArray(a.ClickMode.attract,c)&&this.clickAttract()}},{key:"hoverAttract",value:function(){var t=this.container,e=t.interactivity.mouse.position;if(e){var i=t.retina.attractModeDistance;this.processAttract(e,i,new s.Circle(e.x,e.y,i))}}},{key:"processAttract",value:function(t,e,i){var r,o=this.container,a=o.particles.quadTree.query(i),l=n(a);try{for(l.s();!(r=l.n()).done;){var c=r.value,u=s.NumberUtils.getDistances(c.position,t),h=u.dx,d=u.dy,p=u.distance,f={x:h/p,y:d/p},m=o.options.interactivity.modes.attract.speed,y=s.NumberUtils.clamp((1-Math.pow(p/e,2))*m,0,50);c.position.x=c.position.x-f.x*y,c.position.y=c.position.y-f.y*y}}catch(v){l.e(v)}finally{l.f()}}},{key:"clickAttract",value:function(){var t=this.container;if(t.attract.finish||(t.attract.count||(t.attract.count=0),t.attract.count++,t.attract.count===t.particles.count&&(t.attract.finish=!0)),t.attract.clicking){var e=t.interactivity.mouse.clickPosition;if(!e)return;var i=t.retina.attractModeDistance;this.processAttract(e,i,new s.Circle(e.x,e.y,i))}else!1===t.attract.clicking&&(t.attract.particles=[])}}]),t}();e.Attractor=l},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Lighter=void 0;var o=i(8),a=i(26),s=function(){function t(e){n(this,t),this.container=e}return r(t,[{key:"interact",value:function(t){var e=this.container;if(e.options.interactivity.events.onHover.enable&&"mousemove"===e.interactivity.status){var i=this.container.interactivity.mouse.position;i&&e.canvas.drawParticleShadow(t,i)}}},{key:"isEnabled",value:function(){var t=this.container,e=t.interactivity.mouse,i=t.options.interactivity.events;if(!i.onHover.enable||!e.position)return!1;var n=i.onHover.mode;return o.Utils.isInArray(a.HoverMode.light,n)}},{key:"reset",value:function(){}}]),t}();e.Lighter=s},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Lighter=void 0;var o=i(8),a=i(26),s=function(){function t(e){n(this,t),this.container=e}return r(t,[{key:"interact",value:function(){var t=this.container;if(t.options.interactivity.events.onHover.enable&&"mousemove"===t.interactivity.status){var e=t.interactivity.mouse.position;if(!e)return;t.canvas.drawLight(e)}}},{key:"isEnabled",value:function(){var t=this.container,e=t.interactivity.mouse,i=t.options.interactivity.events;if(!i.onHover.enable||!e.position)return!1;var n=i.onHover.mode;return o.Utils.isInArray(a.HoverMode.light,n)}},{key:"reset",value:function(){}}]),t}();e.Lighter=s},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Bouncer=void 0;var a=i(8),s=i(26),l=i(8),c=i(26),u=i(45),h=function(){function t(e){r(this,t),this.container=e}return o(t,[{key:"isEnabled",value:function(){var t=this.container,e=t.options,i=t.interactivity.mouse,n=e.interactivity.events,r=n.onDiv;return i.position&&n.onHover.enable&&l.Utils.isInArray(s.HoverMode.bounce,n.onHover.mode)||l.Utils.isDivModeEnabled(c.DivMode.bounce,r)}},{key:"interact",value:function(){var t=this,e=this.container,i=e.options.interactivity.events,n=e.interactivity.status===a.Constants.mouseMoveEvent,r=i.onHover.enable,o=i.onHover.mode,u=i.onDiv;n&&r&&l.Utils.isInArray(s.HoverMode.bounce,o)?this.processMouseBounce():l.Utils.divModeExecute(c.DivMode.bounce,u,(function(e,i){return t.singleSelectorBounce(e,i)}))}},{key:"reset",value:function(){}},{key:"processMouseBounce",value:function(){var t=this.container,e=10*t.retina.pixelRatio,i=t.interactivity.mouse.position,n=t.retina.bounceModeDistance;i&&this.processBounce(i,n,new l.Circle(i.x,i.y,n+e))}},{key:"singleSelectorBounce",value:function(t,e){var i=this,n=this.container,r=document.querySelectorAll(t);r.length&&r.forEach((function(t){var r=t,o=n.retina.pixelRatio,a={x:(r.offsetLeft+r.offsetWidth/2)*o,y:(r.offsetTop+r.offsetHeight/2)*o},s=r.offsetWidth/2*o,c=10*o,h=e.type===u.DivType.circle?new l.Circle(a.x,a.y,s+c):new l.Rectangle(r.offsetLeft*o-c,r.offsetTop*o-c,r.offsetWidth*o+2*c,r.offsetHeight*o+2*c);i.processBounce(a,s,h)}))}},{key:"processBounce",value:function(t,e,i){var r,o=this.container.particles.quadTree.query(i),a=n(o);try{for(a.s();!(r=a.n()).done;){var s=r.value;i instanceof l.Circle?l.Utils.circleBounce(l.Utils.circleBounceDataFromParticle(s),{position:t,radius:e,velocity:{horizontal:0,vertical:0},factor:{horizontal:0,vertical:0}}):i instanceof l.Rectangle&&l.Utils.rectBounce(s,l.Utils.calculateBounds(t,e))}}catch(c){a.e(c)}finally{a.f()}}}]),t}();e.Bouncer=h},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Retina=void 0;var o=i(8),a=function(){function t(e){n(this,t),this.container=e}return r(t,[{key:"init",value:function(){var t=this,e=this.container,i=e.options;i.detectRetina?this.pixelRatio=o.Utils.isSsr()?1:window.devicePixelRatio:this.pixelRatio=1;var n=this.container.options.motion;if(n&&(n.disable||n.reduce.value))if(o.Utils.isSsr()||"undefined"===typeof matchMedia||!matchMedia)this.reduceFactor=1;else{var r=matchMedia("(prefers-reduced-motion: reduce)");if(r){this.handleMotionChange(r);var a=function(){t.handleMotionChange(r),e.refresh().catch((function(){}))};void 0!==r.addEventListener?r.addEventListener("change",a):void 0!==r.addListener&&r.addListener(a)}}else this.reduceFactor=1;var s=this.pixelRatio;if(e.canvas.element){var l=e.canvas.element;e.canvas.size.width=l.offsetWidth*s,e.canvas.size.height=l.offsetHeight*s}var c=i.particles;this.linksDistance=c.links.distance*s,this.linksWidth=c.links.width*s,this.moveSpeed=c.move.speed*s,this.sizeValue=c.size.value*s,this.sizeAnimationSpeed=c.size.animation.speed*s;var u=i.interactivity.modes;this.connectModeDistance=u.connect.distance*s,this.connectModeRadius=u.connect.radius*s,this.grabModeDistance=u.grab.distance*s,this.repulseModeDistance=u.repulse.distance*s,this.bounceModeDistance=u.bounce.distance*s,this.attractModeDistance=u.attract.distance*s,this.slowModeRadius=u.slow.radius*s,this.bubbleModeDistance=u.bubble.distance*s,u.bubble.size&&(this.bubbleModeSize=u.bubble.size*s)}},{key:"initParticle",value:function(t){var e=t.particlesOptions,i=this.pixelRatio;t.linksDistance=e.links.distance*i,t.linksWidth=e.links.width*i,t.moveSpeed=e.move.speed*i,t.sizeValue=e.size.value*i,t.sizeAnimationSpeed=e.size.animation.speed*i,t.maxDistance=e.move.distance*i}},{key:"handleMotionChange",value:function(t){var e=this.container.options;if(t.matches){var i=e.motion;this.reduceFactor=i.disable?0:i.reduce.value?1/i.reduce.factor:1}else this.reduceFactor=1}}]),t}();e.Retina=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.FrameManager=void 0;var o=function(){function t(e){n(this,t),this.container=e}return r(t,[{key:"nextFrame",value:function(t){try{var e=this.container;if(void 0!==e.lastFrameTime&&t<e.lastFrameTime+1e3/e.fpsLimit)return void e.draw();var i=t-e.lastFrameTime,n={value:i,factor:60*i/1e3};e.lastFrameTime=t,e.particles.draw(n),e.getAnimationStatus()&&e.draw()}catch(r){console.error("tsParticles error in animation loop",r)}}}]),t}();e.FrameManager=o},function(t,e,i){"use strict";var n=i(40),r=i(4),o=i(5),a=i(10),s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{l(n.next(t))}catch(e){o(e)}}function s(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonMaskInstance=void 0;var l=i(32),c=i(8),u=i(118);function h(t){t.velocity.horizontal=t.velocity.vertical/2-t.velocity.horizontal,t.velocity.vertical=t.velocity.horizontal/2-t.velocity.vertical}function d(t,e,i){var n=c.ColorUtils.colorToRgb(i.color);if(n){t.beginPath(),t.moveTo(e[0].x,e[0].y);var r,o=a(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.lineTo(s.x,s.y)}}catch(l){o.e(l)}finally{o.f()}t.closePath(),t.strokeStyle=c.ColorUtils.getStyleFromRgb(n),t.lineWidth=i.width,t.stroke()}}function p(t,e,i,n){t.translate(n.x,n.y);var r=c.ColorUtils.colorToRgb(i.color);r&&(t.strokeStyle=c.ColorUtils.getStyleFromRgb(r,i.opacity),t.lineWidth=i.width,t.stroke(e))}var f=function(){function t(e){r(this,t),this.container=e,this.dimension={height:0,width:0},this.path2DSupported=!!window.Path2D,this.options=new u.PolygonMask,this.polygonMaskMoveRadius=this.options.move.radius*e.retina.pixelRatio}return o(t,[{key:"initAsync",value:function(t){return s(this,void 0,void 0,n.mark((function e(){var i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.load(null===t||void 0===t?void 0:t.polygon),i=this.options,this.polygonMaskMoveRadius=i.move.radius*this.container.retina.pixelRatio,!i.enable){e.next=6;break}return e.next=6,this.initRawData();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"resize",value:function(){var t=this,e=this.container,i=this.options;i.enable&&i.type!==l.Type.none&&(this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.redrawTimeout=window.setTimeout((function(){return s(t,void 0,void 0,n.mark((function t(){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initRawData(!0);case 2:e.particles.redraw();case 3:case"end":return t.stop()}}),t,this)})))}),250))}},{key:"stop",value:function(){delete this.raw,delete this.paths}},{key:"particlesInitialization",value:function(){var t=this.options;return!(!t.enable||t.type!==l.Type.inline||t.inline.arrangement!==l.InlineArrangement.onePerPoint&&t.inline.arrangement!==l.InlineArrangement.perPoint)&&(this.drawPoints(),!0)}},{key:"particlePosition",value:function(t){var e,i;if(this.options.enable&&(null!==(i=null===(e=this.raw)||void 0===e?void 0:e.length)&&void 0!==i?i:0)>0)return c.Utils.deepExtend({},t||this.randomPoint())}},{key:"particleBounce",value:function(t){var e=this.options;if(e.enable&&e.type!==l.Type.none&&e.type!==l.Type.inline){if(!this.checkInsidePolygon(t.getPosition()))return h(t),!0}else if(e.enable&&e.type===l.Type.inline&&t.initialPosition){if(c.NumberUtils.getDistance(t.initialPosition,t.getPosition())>this.polygonMaskMoveRadius)return h(t),!0}return!1}},{key:"clickPositionValid",value:function(t){var e=this.options;return e.enable&&e.type!==l.Type.none&&e.type!==l.Type.inline&&this.checkInsidePolygon(t)}},{key:"draw",value:function(t){var e;if(null===(e=this.paths)||void 0===e?void 0:e.length){var i=this.options,n=i.draw;if(i.enable&&n.enable){var r,o=this.raw,s=a(this.paths);try{for(s.s();!(r=s.n()).done;){var l=r.value.path2d,c=this.path2DSupported;t&&(c&&l&&this.offset?p(t,l,n.stroke,this.offset):o&&d(t,o,n.stroke))}}catch(u){s.e(u)}finally{s.f()}}}}},{key:"checkInsidePolygon",value:function(t){var e,i,n=this.container,r=this.options;if(!r.enable||r.type===l.Type.none||r.type===l.Type.inline)return!0;if(!this.raw)throw new Error(c.Constants.noPolygonFound);for(var o=n.canvas.size,a=null!==(e=null===t||void 0===t?void 0:t.x)&&void 0!==e?e:Math.random()*o.width,s=null!==(i=null===t||void 0===t?void 0:t.y)&&void 0!==i?i:Math.random()*o.height,u=!1,h=0,d=this.raw.length-1;h<this.raw.length;d=h++){var p=this.raw[h],f=this.raw[d];p.y>s!==f.y>s&&a<(f.x-p.x)*(s-p.y)/(f.y-p.y)+p.x&&(u=!u)}return r.type===l.Type.inside?u:r.type===l.Type.outside&&!u}},{key:"parseSvgPath",value:function(t,e){var i,n,r,o=null!==e&&void 0!==e&&e;if(void 0!==this.paths&&!o)return this.raw;var s=this.container,l=this.options,c=(new DOMParser).parseFromString(t,"image/svg+xml"),u=c.getElementsByTagName("svg")[0],h=u.getElementsByTagName("path");h.length||(h=c.getElementsByTagName("path")),this.paths=[];for(var d=0;d<h.length;d++){var p=h.item(d);p&&this.paths.push({element:p,length:p.getTotalLength()})}var f=s.retina.pixelRatio,m=l.scale/f;this.dimension.width=parseFloat(null!==(i=u.getAttribute("width"))&&void 0!==i?i:"0")*m,this.dimension.height=parseFloat(null!==(n=u.getAttribute("height"))&&void 0!==n?n:"0")*m;var y=null!==(r=l.position)&&void 0!==r?r:{x:50,y:50};return this.offset={x:s.canvas.size.width*y.x/(100*f)-this.dimension.width/2,y:s.canvas.size.height*y.y/(100*f)-this.dimension.height/2},function(t,e,i){var n,r=[],o=a(t);try{for(o.s();!(n=o.n()).done;)for(var s=n.value.element.pathSegList,l=s.numberOfItems,c={x:0,y:0},u=0;u<l;u++){var h=s.getItem(u),d=window.SVGPathSeg;switch(h.pathSegType){case d.PATHSEG_MOVETO_ABS:case d.PATHSEG_LINETO_ABS:case d.PATHSEG_CURVETO_CUBIC_ABS:case d.PATHSEG_CURVETO_QUADRATIC_ABS:case d.PATHSEG_ARC_ABS:case d.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:case d.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:var p=h;c.x=p.x,c.y=p.y;break;case d.PATHSEG_LINETO_HORIZONTAL_ABS:c.x=h.x;break;case d.PATHSEG_LINETO_VERTICAL_ABS:c.y=h.y;break;case d.PATHSEG_LINETO_REL:case d.PATHSEG_MOVETO_REL:case d.PATHSEG_CURVETO_CUBIC_REL:case d.PATHSEG_CURVETO_QUADRATIC_REL:case d.PATHSEG_ARC_REL:case d.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:case d.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:var f=h;c.x+=f.x,c.y+=f.y;break;case d.PATHSEG_LINETO_HORIZONTAL_REL:c.x+=h.x;break;case d.PATHSEG_LINETO_VERTICAL_REL:c.y+=h.y;break;case d.PATHSEG_UNKNOWN:case d.PATHSEG_CLOSEPATH:continue}r.push({x:c.x*e+i.x,y:c.y*e+i.y})}}catch(m){o.e(m)}finally{o.f()}return r}(this.paths,m,this.offset)}},{key:"downloadSvgPath",value:function(t,e){return s(this,void 0,void 0,n.mark((function i(){var r,o,a,s;return n.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=this.options,o=t||r.url,a=null!==e&&void 0!==e&&e,o&&(void 0===this.paths||a)){i.next=5;break}return i.abrupt("return",this.raw);case 5:return i.next=7,fetch(o);case 7:if((s=i.sent).ok){i.next=10;break}throw new Error("tsParticles Error - Error occurred during polygon mask download");case 10:return i.t0=this,i.next=13,s.text();case 13:return i.t1=i.sent,i.t2=e,i.abrupt("return",i.t0.parseSvgPath.call(i.t0,i.t1,i.t2));case 16:case"end":return i.stop()}}),i,this)})))}},{key:"drawPoints",value:function(){if(this.raw){var t,e=a(this.raw);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.container.particles.addParticle({x:i.x,y:i.y})}}catch(n){e.e(n)}finally{e.f()}}}},{key:"randomPoint",value:function(){var t,e=this.container,i=this.options;if(i.type===l.Type.inline)switch(i.inline.arrangement){case l.InlineArrangement.randomPoint:t=this.getRandomPoint();break;case l.InlineArrangement.randomLength:t=this.getRandomPointByLength();break;case l.InlineArrangement.equidistant:t=this.getEquidistantPointByIndex(e.particles.count);break;case l.InlineArrangement.onePerPoint:case l.InlineArrangement.perPoint:default:t=this.getPointByIndex(e.particles.count)}else t={x:Math.random()*e.canvas.size.width,y:Math.random()*e.canvas.size.height};return this.checkInsidePolygon(t)?t:this.randomPoint()}},{key:"getRandomPoint",value:function(){if(!this.raw||!this.raw.length)throw new Error(c.Constants.noPolygonDataLoaded);var t=c.Utils.itemFromArray(this.raw);return{x:t.x,y:t.y}}},{key:"getRandomPointByLength",value:function(){var t,e,i,n=this.options;if(!this.raw||!this.raw.length||!(null===(t=this.paths)||void 0===t?void 0:t.length))throw new Error(c.Constants.noPolygonDataLoaded);var r=c.Utils.itemFromArray(this.paths),o=Math.floor(Math.random()*r.length)+1,a=r.element.getPointAtLength(o);return{x:a.x*n.scale+((null===(e=this.offset)||void 0===e?void 0:e.x)||0),y:a.y*n.scale+((null===(i=this.offset)||void 0===i?void 0:i.y)||0)}}},{key:"getEquidistantPointByIndex",value:function(t){var e,i,n,r,o,s,l,u=this.container.options,h=this.options;if(!this.raw||!this.raw.length||!(null===(e=this.paths)||void 0===e?void 0:e.length))throw new Error(c.Constants.noPolygonDataLoaded);var d,p,f=0,m=this.paths.reduce((function(t,e){return t+e.length}),0)/u.particles.number.value,y=a(this.paths);try{for(y.s();!(p=y.n()).done;){var v=p.value,g=m*t-f;if(g<=v.length){d=v.element.getPointAtLength(g);break}f+=v.length}}catch(_){y.e(_)}finally{y.f()}return{x:(null!==(i=null===d||void 0===d?void 0:d.x)&&void 0!==i?i:0)*h.scale+(null!==(r=null===(n=this.offset)||void 0===n?void 0:n.x)&&void 0!==r?r:0),y:(null!==(o=null===d||void 0===d?void 0:d.y)&&void 0!==o?o:0)*h.scale+(null!==(l=null===(s=this.offset)||void 0===s?void 0:s.y)&&void 0!==l?l:0)}}},{key:"getPointByIndex",value:function(t){if(!this.raw||!this.raw.length)throw new Error(c.Constants.noPolygonDataLoaded);var e=this.raw[t%this.raw.length];return{x:e.x,y:e.y}}},{key:"createPath2D",value:function(){var t,e,i=this,n=this.options;if(this.path2DSupported&&(null===(t=this.paths)||void 0===t?void 0:t.length)){var r,o=a(this.paths);try{var s=function(){var t=r.value,o=null===(e=t.element)||void 0===e?void 0:e.getAttribute("d");if(o){var a=new Path2D(o),s=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),l=new Path2D,c=s.scale(n.scale);l.addPath?(l.addPath(a,c),t.path2d=l):delete t.path2d}else delete t.path2d;if(t.path2d||!i.raw)return"continue";t.path2d=new Path2D,t.path2d.moveTo(i.raw[0].x,i.raw[0].y),i.raw.forEach((function(e,i){var n;i>0&&(null===(n=t.path2d)||void 0===n||n.lineTo(e.x,e.y))})),t.path2d.closePath()};for(o.s();!(r=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}}}},{key:"initRawData",value:function(t){return s(this,void 0,void 0,n.mark((function e(){var i,r,o,a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=this.options).url){e.next=7;break}return e.next=4,this.downloadSvgPath(i.url,t);case 4:this.raw=e.sent,e.next=8;break;case 7:i.data&&("string"!==typeof(r=i.data)?(a=r.path instanceof Array?r.path.map((function(t){return'<path d="'.concat(t,'" />')})).join(""):'<path d="'.concat(r.path,'" />'),'xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"',o="<svg ".concat('xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"',' width="').concat(r.size.width,'" height="').concat(r.size.height,'">').concat(a,"</svg>")):o=r,this.raw=this.parseSvgPath(o,t));case 8:this.createPath2D();case 9:case"end":return e.stop()}}),e,this)})))}}]),t}();e.PolygonMaskInstance=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineArrangement=void 0,function(t){t.equidistant="equidistant",t.onePerPoint="one-per-point",t.perPoint="per-point",t.randomLength="random-length",t.randomPoint="random-point"}(e.InlineArrangement||(e.InlineArrangement={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoveType=void 0,function(t){t.path="path",t.radius="radius"}(e.MoveType||(e.MoveType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Type=void 0,function(t){t.inline="inline",t.inside="inside",t.outside="outside",t.none="none"}(e.Type||(e.Type={}))},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Draw=void 0;var o=i(335),a=i(18),s=function(){function t(){n(this,t),this.enable=!1,this.stroke=new o.DrawStroke}return r(t,[{key:"load",value:function(t){var e;if(void 0!==t){void 0!==t.enable&&(this.enable=t.enable);var i=null!==(e=t.stroke)&&void 0!==e?e:{color:t.lineColor,width:t.lineWidth};this.stroke.load(i)}}},{key:"lineWidth",get:function(){return this.stroke.width},set:function(t){this.stroke.width=t}},{key:"lineColor",get:function(){return this.stroke.color},set:function(t){this.stroke.color=a.OptionsColor.create(this.stroke.color,t)}}]),t}();e.Draw=s},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.DrawStroke=void 0;var o=i(18),a=i(8),s=function(){function t(){n(this,t),this.color=new o.OptionsColor,this.width=.5,this.opacity=1}return r(t,[{key:"load",value:function(t){var e;void 0!==t&&(this.color=o.OptionsColor.create(this.color,t.color),"string"===typeof this.color.value&&(this.opacity=null!==(e=a.ColorUtils.stringToAlpha(this.color.value))&&void 0!==e?e:this.opacity),void 0!==t.opacity&&(this.opacity=t.opacity),void 0!==t.width&&(this.width=t.width))}}]),t}();e.DrawStroke=s},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Move=void 0;var o=i(32),a=function(){function t(){n(this,t),this.radius=10,this.type=o.MoveType.path}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.radius&&(this.radius=t.radius),void 0!==t.type&&(this.type=t.type))}}]),t}();e.Move=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Inline=void 0;var o=i(32),a=function(){function t(){n(this,t),this.arrangement=o.InlineArrangement.onePerPoint}return r(t,[{key:"load",value:function(t){void 0!==t&&void 0!==t.arrangement&&(this.arrangement=t.arrangement)}}]),t}();e.Inline=a},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.LocalSvg=void 0;var o=function(){function t(){n(this,t),this.path=[],this.size={height:0,width:0}}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.path&&(this.path=t.path),void 0!==t.size&&(void 0!==t.size.width&&(this.size.width=t.size.width),void 0!==t.size.height&&(this.size.height=t.size.height)))}}]),t}();e.LocalSvg=o},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.tsParticles=e.pJSDom=e.particlesJS=e.Utils=e.Constants=e.ColorUtils=e.CanvasUtils=void 0;var o=i(340),a=i(341),s=i(8);Object.defineProperty(e,"CanvasUtils",{enumerable:!0,get:function(){return s.CanvasUtils}}),Object.defineProperty(e,"ColorUtils",{enumerable:!0,get:function(){return s.ColorUtils}}),Object.defineProperty(e,"Constants",{enumerable:!0,get:function(){return s.Constants}}),Object.defineProperty(e,"Utils",{enumerable:!0,get:function(){return s.Utils}});var l=new a.Main;e.tsParticles=l,l.init();var c=o.initPjs(l),u=c.particlesJS,h=c.pJSDom;e.particlesJS=u,e.pJSDom=h,r(i(81),e),r(i(11),e),r(i(66),e),r(i(67),e),r(i(32),e),r(i(363),e)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPjs=void 0;e.initPjs=function(t){var e=function(e,i){return t.load(e,i)};return e.load=function(e,i,n){t.loadJSON(e,i).then((function(t){t&&n(t)}))},e.setOnClickHandler=function(e){t.setOnClickHandler(e)},{particlesJS:e,pJSDom:t.dom()}}},function(t,e,i){"use strict";var n=i(4),r=i(16),o=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.Main=void 0;var a=i(342),s=i(352),l=i(357),c=i(117),u=function(t){r(i,t);var e=o(i);function i(){var t;return n(this,i),(t=e.call(this)).addPlugin(s.AbsorbersPlugin),t.addPlugin(l.EmittersPlugin),t.addPlugin(c.PolygonMaskPlugin),t}return i}(a.MainSlim);e.Main=u},function(t,e,i){"use strict";var n=i(40),r=i(4),o=i(5),a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{l(n.next(t))}catch(e){o(e)}}function s(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.MainSlim=void 0;var s=i(343),l=i(344),c=i(345),u=i(8),h=i(45),d=i(346),p=i(347),f=i(348),m=i(349),y=i(350),v=i(351),g=function(){function t(){r(this,t),this.initialized=!1;var e=new s.SquareDrawer,i=new l.TextDrawer,n=new c.ImageDrawer;u.Plugins.addShapeDrawer(h.ShapeType.line,new d.LineDrawer),u.Plugins.addShapeDrawer(h.ShapeType.circle,new p.CircleDrawer),u.Plugins.addShapeDrawer(h.ShapeType.edge,e),u.Plugins.addShapeDrawer(h.ShapeType.square,e),u.Plugins.addShapeDrawer(h.ShapeType.triangle,new f.TriangleDrawer),u.Plugins.addShapeDrawer(h.ShapeType.star,new m.StarDrawer),u.Plugins.addShapeDrawer(h.ShapeType.polygon,new y.PolygonDrawer),u.Plugins.addShapeDrawer(h.ShapeType.char,i),u.Plugins.addShapeDrawer(h.ShapeType.character,i),u.Plugins.addShapeDrawer(h.ShapeType.image,n),u.Plugins.addShapeDrawer(h.ShapeType.images,n)}return o(t,[{key:"init",value:function(){this.initialized||(this.initialized=!0)}},{key:"loadFromArray",value:function(t,e,i){return a(this,void 0,void 0,n.mark((function r(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",v.Loader.load(t,e,i));case 1:case"end":return n.stop()}}),r)})))}},{key:"load",value:function(t,e){return a(this,void 0,void 0,n.mark((function i(){return n.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",v.Loader.load(t,e));case 1:case"end":return i.stop()}}),i)})))}},{key:"set",value:function(t,e,i){return a(this,void 0,void 0,n.mark((function r(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",v.Loader.set(t,e,i));case 1:case"end":return n.stop()}}),r)})))}},{key:"loadJSON",value:function(t,e,i){return v.Loader.loadJSON(t,e,i)}},{key:"setOnClickHandler",value:function(t){v.Loader.setOnClickHandler(t)}},{key:"dom",value:function(){return v.Loader.dom()}},{key:"domItem",value:function(t){return v.Loader.domItem(t)}},{key:"addShape",value:function(t,e,i,n,r){var o;o="function"===typeof e?{afterEffect:n,destroy:r,draw:e,init:i}:e,u.Plugins.addShapeDrawer(t,o)}},{key:"addPreset",value:function(t,e){u.Plugins.addPreset(t,e)}},{key:"addPlugin",value:function(t){u.Plugins.addPlugin(t)}}]),t}();e.MainSlim=g},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.SquareDrawer=void 0;var o=function(){function t(){n(this,t)}return r(t,[{key:"getSidesCount",value:function(){return 4}},{key:"draw",value:function(t,e,i){t.rect(-i,-i,2*i,2*i)}}]),t}();e.SquareDrawer=o},function(t,e,i){"use strict";var n=i(40),r=i(10),o=i(4),a=i(5),s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{l(n.next(t))}catch(e){o(e)}}function s(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.TextDrawer=void 0;var l=i(8),c=i(11),u=function(){function t(){o(this,t)}return a(t,[{key:"getSidesCount",value:function(){return 12}},{key:"init",value:function(t){var e;return s(this,void 0,void 0,n.mark((function i(){var o,a,s,u,h;return n.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=t.options,!l.Utils.isInArray(c.ShapeType.char,o.particles.shape.type)&&!l.Utils.isInArray(c.ShapeType.character,o.particles.shape.type)){i.next=26;break}if(!((a=null!==(e=o.particles.shape.options[c.ShapeType.character])&&void 0!==e?e:o.particles.shape.options[c.ShapeType.char])instanceof Array)){i.next=23;break}s=r(a),i.prev=5,s.s();case 7:if((u=s.n()).done){i.next=13;break}return h=u.value,i.next=11,l.Utils.loadFont(h);case 11:i.next=7;break;case 13:i.next=18;break;case 15:i.prev=15,i.t0=i.catch(5),s.e(i.t0);case 18:return i.prev=18,s.f(),i.finish(18);case 21:i.next=26;break;case 23:if(void 0===a){i.next=26;break}return i.next=26,l.Utils.loadFont(a);case 26:case"end":return i.stop()}}),i,null,[[5,15,18,21]])})))}},{key:"draw",value:function(t,e,i){var n=e.shapeData;if(void 0!==n){var r=n.value;if(void 0!==r){var o=e;void 0===o.text&&(o.text=r instanceof Array?l.Utils.itemFromArray(r,e.randomIndexData):r);var a=o.text,s=n.style,c=n.weight,u=2*Math.round(i),h=n.font,d=e.fill,p=a.length*i/2;t.font="".concat(s," ").concat(c," ").concat(u,'px "').concat(h,'"');var f={x:-p,y:i/2};d?t.fillText(a,f.x,f.y):t.strokeText(a,f.x,f.y)}}}}]),t}();e.TextDrawer=u},function(t,e,i){"use strict";var n=i(40),r=i(10),o=i(4),a=i(5),s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{l(n.next(t))}catch(e){o(e)}}function s(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ImageDrawer=void 0;var l=i(8),c=i(11),u=function(){function t(){o(this,t),this.images=[]}return a(t,[{key:"getSidesCount",value:function(){return 12}},{key:"getImages",value:function(t){var e=this.images.filter((function(e){return e.id===t.id}));return e.length?e[0]:(this.images.push({id:t.id,images:[]}),this.getImages(t))}},{key:"addImage",value:function(t,e){var i=this.getImages(t);null===i||void 0===i||i.images.push(e)}},{key:"init",value:function(t){var e;return s(this,void 0,void 0,n.mark((function i(){var o,a,s,u,h,d;return n.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=t.options,a=o.particles.shape,l.Utils.isInArray(c.ShapeType.image,a.type)||l.Utils.isInArray(c.ShapeType.images,a.type)){i.next=4;break}return i.abrupt("return");case 4:if(!((s=null!==(e=a.options[c.ShapeType.images])&&void 0!==e?e:a.options[c.ShapeType.image])instanceof Array)){i.next=25;break}u=r(s),i.prev=7,u.s();case 9:if((h=u.n()).done){i.next=15;break}return d=h.value,i.next=13,this.loadImageShape(t,d);case 13:i.next=9;break;case 15:i.next=20;break;case 17:i.prev=17,i.t0=i.catch(7),u.e(i.t0);case 20:return i.prev=20,u.f(),i.finish(20);case 23:i.next=27;break;case 25:return i.next=27,this.loadImageShape(t,s);case 27:case"end":return i.stop()}}),i,this,[[7,17,20,23]])})))}},{key:"destroy",value:function(){this.images=[]}},{key:"loadImageShape",value:function(t,e){return s(this,void 0,void 0,n.mark((function i(){var r;return n.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!e.replaceColor){i.next=7;break}return i.next=4,l.Utils.downloadSvgImage(e.src);case 4:i.t0=i.sent,i.next=10;break;case 7:return i.next=9,l.Utils.loadImage(e.src);case 9:i.t0=i.sent;case 10:r=i.t0,this.addImage(t,r),i.next=17;break;case 14:i.prev=14,i.t1=i.catch(0),console.warn("tsParticles error - ".concat(e.src," not found"));case 17:case"end":return i.stop()}}),i,this,[[0,14]])})))}},{key:"draw",value:function(t,e,i,n){var r,o;if(t){var a=e.image,s=null===(r=null===a||void 0===a?void 0:a.data)||void 0===r?void 0:r.element;if(s){var l=null!==(o=null===a||void 0===a?void 0:a.ratio)&&void 0!==o?o:1,c={x:-i,y:-i};(null===a||void 0===a?void 0:a.data.svgData)&&(null===a||void 0===a?void 0:a.replaceColor)||(t.globalAlpha=n),t.drawImage(s,c.x,c.y,2*i,2*i/l),(null===a||void 0===a?void 0:a.data.svgData)&&(null===a||void 0===a?void 0:a.replaceColor)||(t.globalAlpha=1)}}}}]),t}();e.ImageDrawer=u},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.LineDrawer=void 0;var o=function(){function t(){n(this,t)}return r(t,[{key:"getSidesCount",value:function(){return 1}},{key:"draw",value:function(t,e,i){t.moveTo(0,-i/2),t.lineTo(0,i/2)}}]),t}();e.LineDrawer=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.CircleDrawer=void 0;var o=function(){function t(){n(this,t)}return r(t,[{key:"getSidesCount",value:function(){return 12}},{key:"draw",value:function(t,e,i){t.arc(0,0,i,0,2*Math.PI,!1)}}]),t}();e.CircleDrawer=o},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(16),a=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.TriangleDrawer=void 0;var s=function(t){o(i,t);var e=a(i);function i(){return n(this,i),e.apply(this,arguments)}return r(i,[{key:"getSidesCount",value:function(){return 3}},{key:"getSidesData",value:function(t,e){return{count:{denominator:2,numerator:3},length:2*e}}},{key:"getCenter",value:function(t,e){return{x:-e,y:e/1.66}}}]),i}(i(119).PolygonDrawerBase);e.TriangleDrawer=s},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.StarDrawer=void 0;var o=function(){function t(){n(this,t)}return r(t,[{key:"getSidesCount",value:function(t){var e,i,n=t.shapeData;return null!==(i=null!==(e=null===n||void 0===n?void 0:n.sides)&&void 0!==e?e:null===n||void 0===n?void 0:n.nb_sides)&&void 0!==i?i:5}},{key:"draw",value:function(t,e,i){var n,r=e.shapeData,o=this.getSidesCount(e),a=null!==(n=null===r||void 0===r?void 0:r.inset)&&void 0!==n?n:2;t.moveTo(0,0-i);for(var s=0;s<o;s++)t.rotate(Math.PI/o),t.lineTo(0,0-i*a),t.rotate(Math.PI/o),t.lineTo(0,0-i)}}]),t}();e.StarDrawer=o},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(16),a=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonDrawer=void 0;var s=function(t){o(i,t);var e=a(i);function i(){return n(this,i),e.apply(this,arguments)}return r(i,[{key:"getSidesData",value:function(t,e){var i,n,r=t.shapeData,o=null!==(n=null!==(i=null===r||void 0===r?void 0:r.sides)&&void 0!==i?i:null===r||void 0===r?void 0:r.nb_sides)&&void 0!==n?n:5;return{count:{denominator:1,numerator:o},length:2.66*e/(o/3)}}},{key:"getCenter",value:function(t,e){return{x:-e/(this.getSidesCount(t)/3.5),y:-e/.76}}}]),i}(i(119).PolygonDrawerBase);e.PolygonDrawer=s},function(t,e,i){"use strict";var n=i(10),r=i(40),o=i(4),a=i(5),s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{l(n.next(t))}catch(e){o(e)}}function s(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;var l=i(81),c=i(8),u=[];function h(t){console.error("Error tsParticles - fetch status: ".concat(t)),console.error("Error tsParticles - File config not found")}var d=function(){function t(){o(this,t)}return a(t,null,[{key:"dom",value:function(){return u}},{key:"domItem",value:function(e){var i=t.dom(),n=i[e];if(n&&!n.destroyed)return n;i.splice(e,1)}},{key:"load",value:function(e,i,n){return s(this,void 0,void 0,r.mark((function o(){var a;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=document.getElementById(e)){r.next=3;break}return r.abrupt("return");case 3:return r.abrupt("return",t.set(e,a,i,n));case 4:case"end":return r.stop()}}),o)})))}},{key:"set",value:function(e,i,n,o){return s(this,void 0,void 0,r.mark((function a(){var s,u,h,d,p,f,m,y;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=n instanceof Array?c.Utils.itemFromArray(n,o):n,u=t.dom(),(h=u.findIndex((function(t){return t.id===e})))>=0&&(d=t.domItem(h))&&!d.destroyed&&(d.destroy(),u.splice(h,1)),"canvas"===i.tagName.toLowerCase()?(p=i,f=!1):(m=i.getElementsByTagName("canvas")).length?((p=m[0]).className||(p.className=c.Constants.canvasClass),f=!1):(f=!0,(p=document.createElement("canvas")).className=c.Constants.canvasClass,p.style.width="100%",p.style.height="100%",i.appendChild(p)),y=new l.Container(e,s),h>=0?u.splice(h,0,y):u.push(y),y.canvas.loadCanvas(p,f),r.next=10,y.start();case 10:return r.abrupt("return",y);case 11:case"end":return r.stop()}}),a)})))}},{key:"loadJSON",value:function(e,i,n){return s(this,void 0,void 0,r.mark((function o(){var a,s;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=i instanceof Array?c.Utils.itemFromArray(i,n):i,r.next=3,fetch(a);case 3:if(!(s=r.sent).ok){r.next=13;break}return r.t0=t,r.t1=e,r.next=9,s.json();case 9:return r.t2=r.sent,r.abrupt("return",r.t0.load.call(r.t0,r.t1,r.t2));case 13:h(s.status);case 14:case"end":return r.stop()}}),o)})))}},{key:"setJSON",value:function(e,i,n){return s(this,void 0,void 0,r.mark((function o(){var a,s;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(n);case 2:if(!(a=r.sent).ok){r.next=10;break}return r.next=6,a.json();case 6:return s=r.sent,r.abrupt("return",t.set(e,i,s));case 10:h(a.status);case 11:case"end":return r.stop()}}),o)})))}},{key:"setOnClickHandler",value:function(e){var i=t.dom();if(0===i.length)throw new Error("Can only set click handlers after calling tsParticles.load() or tsParticles.loadJSON()");var r,o=n(i);try{var a=function(){var t=r.value,i=t.interactivity.element;if(!i)return"continue";var n=function(i,n){if(!t.destroyed){var r=t.retina.pixelRatio,o={x:n.x*r,y:n.y*r},a=t.particles.quadTree.queryCircle(o,t.retina.sizeValue);e(i,a)}},o=!1,a=!1;i.addEventListener("click",(function(e){if(!t.destroyed){var i=e,r={x:i.offsetX||i.clientX,y:i.offsetY||i.clientY};n(e,r)}})),i.addEventListener("touchstart",(function(){t.destroyed||(o=!0,a=!1)})),i.addEventListener("touchmove",(function(){t.destroyed||(a=!0)})),i.addEventListener("touchend",(function(e){var i,r,s;if(!t.destroyed){if(o&&!a){var l=e,c=l.touches[l.touches.length-1],u=null===(i=t.canvas.element)||void 0===i?void 0:i.getBoundingClientRect(),h={x:c.clientX-(null!==(r=null===u||void 0===u?void 0:u.left)&&void 0!==r?r:0),y:c.clientY-(null!==(s=null===u||void 0===u?void 0:u.top)&&void 0!==s?s:0)};n(e,h)}o=!1,a=!1}})),i.addEventListener("touchcancel",(function(){t.destroyed||(o=!1,a=!1)}))};for(o.s();!(r=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}}}]),t}();e.Loader=d},function(t,e,i){"use strict";var n=i(4),r=i(5),o=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),a=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||o(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.AbsorbersPlugin=void 0;var s=i(353),l=i(8),c=i(66),u=i(120),h=new(function(){function t(){n(this,t),this.id="absorbers"}return r(t,[{key:"getPlugin",value:function(t){return new s.Absorbers(t)}},{key:"needsPlugin",value:function(t){var e,i,n;if(void 0===t)return!1;var r=t.absorbers,o=!1;return r instanceof Array?r.length&&(o=!0):(void 0!==r||(null===(n=null===(i=null===(e=t.interactivity)||void 0===e?void 0:e.events)||void 0===i?void 0:i.onClick)||void 0===n?void 0:n.mode)&&l.Utils.isInArray(c.AbsorberClickMode.absorber,t.interactivity.events.onClick.mode))&&(o=!0),o}},{key:"loadOptions",value:function(t,e){var i,n;if(this.needsPlugin(t)||this.needsPlugin(e)){var r=t;if(null===e||void 0===e?void 0:e.absorbers)if((null===e||void 0===e?void 0:e.absorbers)instanceof Array)r.absorbers=null===e||void 0===e?void 0:e.absorbers.map((function(t){var e=new u.Absorber;return e.load(t),e}));else{var o=r.absorbers;void 0===(null===o||void 0===o?void 0:o.load)&&(r.absorbers=o=new u.Absorber),o.load(null===e||void 0===e?void 0:e.absorbers)}var a=null===(n=null===(i=null===e||void 0===e?void 0:e.interactivity)||void 0===i?void 0:i.modes)||void 0===n?void 0:n.absorbers;if(a)if(a instanceof Array)r.interactivity.modes.absorbers=a.map((function(t){var e=new u.Absorber;return e.load(t),e}));else{var s=r.interactivity.modes.absorbers;void 0===(null===s||void 0===s?void 0:s.load)&&(r.interactivity.modes.absorbers=s=new u.Absorber),s.load(a)}}}}]),t}());e.AbsorbersPlugin=h,a(i(66),e)},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Absorbers=void 0;var a=i(354),s=i(8),l=i(120),c=i(66),u=function(){function t(e){var i=this;r(this,t),this.container=e,this.array=[],this.absorbers=[],this.interactivityAbsorbers=[],e.addAbsorber=function(t,e){return i.addAbsorber(t,e)}}return o(t,[{key:"init",value:function(t){var e,i;if(t){t.absorbers&&(t.absorbers instanceof Array?this.absorbers=t.absorbers.map((function(t){var e=new l.Absorber;return e.load(t),e})):(this.absorbers instanceof Array&&(this.absorbers=new l.Absorber),this.absorbers.load(t.absorbers)));var r=null===(i=null===(e=t.interactivity)||void 0===e?void 0:e.modes)||void 0===i?void 0:i.absorbers;if(r&&(r instanceof Array?this.interactivityAbsorbers=r.map((function(t){var e=new l.Absorber;return e.load(t),e})):(this.interactivityAbsorbers instanceof Array&&(this.interactivityAbsorbers=new l.Absorber),this.interactivityAbsorbers.load(r))),this.absorbers instanceof Array){var o,a=n(this.absorbers);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.addAbsorber(s)}}catch(c){a.e(c)}finally{a.f()}}else this.addAbsorber(this.absorbers)}}},{key:"particleUpdate",value:function(t){var e,i=n(this.array);try{for(i.s();!(e=i.n()).done;){if(e.value.attract(t),t.destroyed)break}}catch(r){i.e(r)}finally{i.f()}}},{key:"draw",value:function(t){var e,i=n(this.array);try{for(i.s();!(e=i.n()).done;){var r=e.value;t.save(),r.draw(t),t.restore()}}catch(o){i.e(o)}finally{i.f()}}},{key:"stop",value:function(){this.array=[]}},{key:"resize",value:function(){var t,e=n(this.array);try{for(e.s();!(t=e.n()).done;){t.value.resize()}}catch(i){e.e(i)}finally{e.f()}}},{key:"handleClickMode",value:function(t){var e=this.container,i=this.absorbers,n=this.interactivityAbsorbers;if(t===c.AbsorberClickMode.absorber){var r;n instanceof Array?n.length>0&&(r=s.Utils.itemFromArray(n)):r=n;var o=null!==r&&void 0!==r?r:i instanceof Array?s.Utils.itemFromArray(i):i,a=e.interactivity.mouse.clickPosition;this.addAbsorber(o,a)}}},{key:"addAbsorber",value:function(t,e){var i=new a.AbsorberInstance(this,this.container,t,e);return this.array.push(i),i}},{key:"removeAbsorber",value:function(t){var e=this.array.indexOf(t);e>=0&&this.array.splice(e,1)}}]),t}();e.Absorbers=u},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.AbsorberInstance=void 0;var o=i(8),a=function(){function t(e,i,r,a){var s,l;n(this,t),this.absorbers=e,this.container=i,this.initialPosition=a,this.options=r,this.dragging=!1,this.opacity=this.options.opacity,this.size=o.NumberUtils.getValue(r.size)*i.retina.pixelRatio,this.mass=this.size*r.size.density*i.retina.reduceFactor;var c=r.size.limit;this.limit=void 0!==c?c*i.retina.pixelRatio*i.retina.reduceFactor:c;var u="string"===typeof r.color?{value:r.color}:r.color;this.color=null!==(s=o.ColorUtils.colorToRgb(u))&&void 0!==s?s:{b:0,g:0,r:0},this.position=null!==(l=this.initialPosition)&&void 0!==l?l:this.calcPosition()}return r(t,[{key:"attract",value:function(t){var e=this.options;if(e.draggable){var i=this.container.interactivity.mouse;if(i.clicking&&i.downPosition)o.NumberUtils.getDistance(this.position,i.downPosition)<=this.size&&(this.dragging=!0);else this.dragging=!1;this.dragging&&i.position&&(this.position.x=i.position.x,this.position.y=i.position.y)}var n=t.getPosition(),r=o.NumberUtils.getDistances(this.position,n),a=r.dx,s=r.dy,l=r.distance,c=Math.atan2(a,s),u=this.mass/Math.pow(l,2)*this.container.retina.reduceFactor;if(l<this.size+t.getRadius()){var h=.033*t.getRadius()*this.container.retina.pixelRatio;this.size>t.getRadius()&&l<this.size-t.getRadius()?e.destroy?t.destroy():(t.needsNewPosition=!0,this.updateParticlePosition(t,c,u)):(e.destroy&&(t.size.value-=h),this.updateParticlePosition(t,c,u)),(void 0===this.limit||this.size<this.limit)&&(this.size+=h),this.mass+=h*this.options.size.density*this.container.retina.reduceFactor}else this.updateParticlePosition(t,c,u)}},{key:"resize",value:function(){var t=this.initialPosition;this.position=t&&o.Utils.isPointInside(t,this.container.canvas.size)?t:this.calcPosition()}},{key:"draw",value:function(t){t.translate(this.position.x,this.position.y),t.beginPath(),t.arc(0,0,this.size,0,2*Math.PI,!1),t.closePath(),t.fillStyle=o.ColorUtils.getStyleFromRgb(this.color,this.opacity),t.fill()}},{key:"calcPosition",value:function(){var t,e,i=this.container,n=this.options.position;return{x:(null!==(t=null===n||void 0===n?void 0:n.x)&&void 0!==t?t:100*Math.random())/100*i.canvas.size.width,y:(null!==(e=null===n||void 0===n?void 0:n.y)&&void 0!==e?e:100*Math.random())/100*i.canvas.size.height}}},{key:"updateParticlePosition",value:function(t,e,i){var n;if(!t.destroyed){var r=this.container.canvas.size;if(t.needsNewPosition){var a=t.getRadius();t.position.x=Math.random()*(r.width-2*a)+a,t.position.y=Math.random()*(r.height-2*a)+a,t.needsNewPosition=!1}if(this.options.orbits){void 0===t.orbitRadius&&(t.orbitRadius=o.NumberUtils.getDistance(t.getPosition(),this.position)),t.orbitRadius<=this.size&&!this.options.destroy&&(t.orbitRadius=Math.random()*Math.max(r.width,r.height)),void 0===t.orbitAngle&&(t.orbitAngle=Math.random()*Math.PI*2);var s=t.orbitRadius,l=t.orbitAngle;t.velocity.horizontal=0,t.velocity.vertical=0,t.position.x=this.position.x+s*Math.cos(l),t.position.y=this.position.y+s*Math.sin(l),t.orbitRadius-=i,t.orbitAngle+=(null!==(n=t.moveSpeed)&&void 0!==n?n:this.container.retina.moveSpeed)/100*this.container.retina.reduceFactor}else t.velocity.horizontal+=Math.sin(e)*i,t.velocity.vertical+=Math.cos(e)*i}}}]),t}();e.AbsorberInstance=a},function(t,e,i){"use strict";var n=i(4),r=i(5),o=i(27),a=i(22),s=i(16),l=i(17);Object.defineProperty(e,"__esModule",{value:!0}),e.AbsorberSize=void 0;var c=function(t){s(i,t);var e=l(i);function i(){var t;return n(this,i),(t=e.call(this)).density=5,t.random.minimumValue=1,t.value=50,t}return r(i,[{key:"load",value:function(t){t&&(o(a(i.prototype),"load",this).call(this,t),void 0!==t.density&&(this.density=t.density),void 0!==t.limit&&(this.limit=t.limit),void 0!==t.limit&&(this.limit=t.limit))}}]),i}(i(37).ValueWithRandom);e.AbsorberSize=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbsorberClickMode=void 0,function(t){t.absorber="absorber"}(e.AbsorberClickMode||(e.AbsorberClickMode={}))},function(t,e,i){"use strict";var n=i(4),r=i(5),o=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),a=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||o(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.EmittersPlugin=void 0;var s=i(8),l=i(358),c=i(67),u=i(122),h=new(function(){function t(){n(this,t),this.id="emitters"}return r(t,[{key:"getPlugin",value:function(t){return new l.Emitters(t)}},{key:"needsPlugin",value:function(t){var e,i,n;if(void 0===t)return!1;var r=t.emitters,o=!1;return r instanceof Array?r.length&&(o=!0):(void 0!==r||(null===(n=null===(i=null===(e=t.interactivity)||void 0===e?void 0:e.events)||void 0===i?void 0:i.onClick)||void 0===n?void 0:n.mode)&&s.Utils.isInArray(c.EmitterClickMode.emitter,t.interactivity.events.onClick.mode))&&(o=!0),o}},{key:"loadOptions",value:function(t,e){var i,n;if(this.needsPlugin(t)||this.needsPlugin(e)){var r=t;if(null===e||void 0===e?void 0:e.emitters)if((null===e||void 0===e?void 0:e.emitters)instanceof Array)r.emitters=null===e||void 0===e?void 0:e.emitters.map((function(t){var e=new u.Emitter;return e.load(t),e}));else{var o=r.emitters;void 0===(null===o||void 0===o?void 0:o.load)&&(r.emitters=o=new u.Emitter),o.load(null===e||void 0===e?void 0:e.emitters)}var a=null===(n=null===(i=null===e||void 0===e?void 0:e.interactivity)||void 0===i?void 0:i.modes)||void 0===n?void 0:n.emitters;if(a)if(a instanceof Array)r.interactivity.modes.emitters=a.map((function(t){var e=new u.Emitter;return e.load(t),e}));else{var s=r.interactivity.modes.emitters;void 0===(null===s||void 0===s?void 0:s.load)&&(r.interactivity.modes.emitters=s=new u.Emitter),s.load(a)}}}}]),t}());e.EmittersPlugin=h,a(i(67),e)},function(t,e,i){"use strict";var n=i(10),r=i(4),o=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Emitters=void 0;var a=i(359),s=i(8),l=i(122),c=i(67),u=function(){function t(e){var i=this;r(this,t),this.container=e,this.array=[],this.emitters=[],this.interactivityEmitters=[],e.addEmitter=function(t,e){return i.addEmitter(t,e)}}return o(t,[{key:"init",value:function(t){var e,i;if(t){t.emitters&&(t.emitters instanceof Array?this.emitters=t.emitters.map((function(t){var e=new l.Emitter;return e.load(t),e})):(this.emitters instanceof Array&&(this.emitters=new l.Emitter),this.emitters.load(t.emitters)));var r=null===(i=null===(e=t.interactivity)||void 0===e?void 0:e.modes)||void 0===i?void 0:i.emitters;if(r&&(r instanceof Array?this.interactivityEmitters=r.map((function(t){var e=new l.Emitter;return e.load(t),e})):(this.interactivityEmitters instanceof Array&&(this.interactivityEmitters=new l.Emitter),this.interactivityEmitters.load(r))),this.emitters instanceof Array){var o,a=n(this.emitters);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.addEmitter(s)}}catch(c){a.e(c)}finally{a.f()}}else this.addEmitter(this.emitters)}}},{key:"play",value:function(){var t,e=n(this.array);try{for(e.s();!(t=e.n()).done;){t.value.play()}}catch(i){e.e(i)}finally{e.f()}}},{key:"pause",value:function(){var t,e=n(this.array);try{for(e.s();!(t=e.n()).done;){t.value.pause()}}catch(i){e.e(i)}finally{e.f()}}},{key:"stop",value:function(){this.array=[]}},{key:"handleClickMode",value:function(t){var e=this.container,i=this.emitters,n=this.interactivityEmitters;if(t===c.EmitterClickMode.emitter){var r;n instanceof Array?n.length>0&&(r=s.Utils.itemFromArray(n)):r=n;var o=null!==r&&void 0!==r?r:i instanceof Array?s.Utils.itemFromArray(i):i,a=e.interactivity.mouse.clickPosition;this.addEmitter(s.Utils.deepExtend({},o),a)}}},{key:"resize",value:function(){var t,e=n(this.array);try{for(e.s();!(t=e.n()).done;){t.value.resize()}}catch(i){e.e(i)}finally{e.f()}}},{key:"addEmitter",value:function(t,e){var i=new a.EmitterInstance(this,this.container,t,e);return this.array.push(i),i}},{key:"removeEmitter",value:function(t){var e=this.array.indexOf(t);e>=0&&this.array.splice(e,1)}}]),t}();e.Emitters=u},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.EmitterInstance=void 0;var o=i(8),a=i(11),s=i(121);function l(t,e){return t+e*(Math.random()-.5)}function c(t,e){return{x:l(t.x,e.x),y:l(t.y,e.y)}}var u=function(){function t(e,i,r,l){var c,u,h;n(this,t),this.emitters=e,this.container=i,this.initialPosition=l,this.emitterOptions=o.Utils.deepExtend({},r),this.position=null!==(c=this.initialPosition)&&void 0!==c?c:this.calcPosition();var d=o.Utils.deepExtend({},this.emitterOptions.particles);void 0===d&&(d={}),void 0===d.move&&(d.move={}),void 0===d.move.direction&&(d.move.direction=this.emitterOptions.direction),this.particlesOptions=d,this.size=null!==(u=this.emitterOptions.size)&&void 0!==u?u:function(){var t=new s.EmitterSize;return t.load({height:0,mode:a.SizeMode.percent,width:0}),t}(),this.lifeCount=null!==(h=this.emitterOptions.life.count)&&void 0!==h?h:-1,this.immortal=this.lifeCount<=0,this.play()}return r(t,[{key:"play",value:function(){var t=this;if(this.container.retina.reduceFactor&&(this.lifeCount>0||this.immortal||!this.emitterOptions.life.count)){if(void 0===this.startInterval){var e=1e3*this.emitterOptions.rate.delay/this.container.retina.reduceFactor;this.startInterval=window.setInterval((function(){t.emit()}),e)}(this.lifeCount>0||this.immortal)&&this.prepareToDie()}}},{key:"pause",value:function(){var t=this.startInterval;void 0!==t&&(clearInterval(t),delete this.startInterval)}},{key:"resize",value:function(){var t=this.initialPosition;this.position=t&&o.Utils.isPointInside(t,this.container.canvas.size)?t:this.calcPosition()}},{key:"prepareToDie",value:function(){var t,e=this,i=null===(t=this.emitterOptions.life)||void 0===t?void 0:t.duration;this.container.retina.reduceFactor&&(this.lifeCount>0||this.immortal)&&void 0!==i&&i>0&&setTimeout((function(){var t;e.pause(),e.immortal||e.lifeCount--,e.lifeCount>0||e.immortal?(e.position=e.calcPosition(),setTimeout((function(){e.play()}),1e3*(null!==(t=e.emitterOptions.life.delay)&&void 0!==t?t:0)/e.container.retina.reduceFactor)):e.destroy()}),1e3*i)}},{key:"destroy",value:function(){this.emitters.removeEmitter(this)}},{key:"calcPosition",value:function(){var t,e,i=this.container,n=this.emitterOptions.position;return{x:(null!==(t=null===n||void 0===n?void 0:n.x)&&void 0!==t?t:100*Math.random())/100*i.canvas.size.width,y:(null!==(e=null===n||void 0===n?void 0:n.y)&&void 0!==e?e:100*Math.random())/100*i.canvas.size.height}}},{key:"emit",value:function(){for(var t=this.container,e=this.position,i={x:this.size.mode===a.SizeMode.percent?t.canvas.size.width*this.size.width/100:this.size.width,y:this.size.mode===a.SizeMode.percent?t.canvas.size.height*this.size.height/100:this.size.height},n=0;n<this.emitterOptions.rate.quantity;n++)t.particles.addParticle(c(e,i),this.particlesOptions)}}]),t}();e.EmitterInstance=u},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.EmitterRate=void 0;var o=function(){function t(){n(this,t),this.quantity=1,this.delay=.1}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.quantity&&(this.quantity=t.quantity),void 0!==t.delay&&(this.delay=t.delay))}}]),t}();e.EmitterRate=o},function(t,e,i){"use strict";var n=i(4),r=i(5);Object.defineProperty(e,"__esModule",{value:!0}),e.EmitterLife=void 0;var o=function(){function t(){n(this,t)}return r(t,[{key:"load",value:function(t){void 0!==t&&(void 0!==t.count&&(this.count=t.count),void 0!==t.delay&&(this.delay=t.delay),void 0!==t.duration&&(this.duration=t.duration))}}]),t}();e.EmitterLife=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmitterClickMode=void 0,function(t){t.emitter="emitter"}(e.EmitterClickMode||(e.EmitterClickMode={}))},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(364),e),r(i(365),e),r(i(366),e),r(i(367),e)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(64),e)},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(26),e)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonMaskInlineArrangement=void 0;var n=i(32);Object.defineProperty(e,"PolygonMaskInlineArrangement",{enumerable:!0,get:function(){return n.InlineArrangement}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonMaskMoveType=void 0;var n=i(32);Object.defineProperty(e,"PolygonMaskMoveType",{enumerable:!0,get:function(){return n.MoveType}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonMaskType=void 0;var n=i(32);Object.defineProperty(e,"PolygonMaskType",{enumerable:!0,get:function(){return n.Type}})},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(45),e)},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(64),e)},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(i(45),e)},,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(i(2)),r=i(381),o=l(i(387)),a=l(i(389)),s=i(53);function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){_(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=g(t);if(e){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return y(this,i)}}function y(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var b=(0,s.canUseDOM)()&&i(390),x=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,i,l,c=m(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),_(v(e=c.call(this,t)),"innerSliderRefHandler",(function(t){return e.innerSlider=t})),_(v(e),"slickPrev",(function(){return e.innerSlider.slickPrev()})),_(v(e),"slickNext",(function(){return e.innerSlider.slickNext()})),_(v(e),"slickGoTo",(function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.innerSlider.slickGoTo(t,i)})),_(v(e),"slickPause",(function(){return e.innerSlider.pause("paused")})),_(v(e),"slickPlay",(function(){return e.innerSlider.autoPlay("play")})),e.state={breakpoint:null},e._responsiveMediaHandlers=[],e}return e=h,(i=[{key:"media",value:function(t,e){b.register(t,e),this._responsiveMediaHandlers.push({query:t,handler:e})}},{key:"componentDidMount",value:function(){var t=this;if(this.props.responsive){var e=this.props.responsive.map((function(t){return t.breakpoint}));e.sort((function(t,e){return t-e})),e.forEach((function(i,n){var r;r=0===n?(0,o.default)({minWidth:0,maxWidth:i}):(0,o.default)({minWidth:e[n-1]+1,maxWidth:i}),(0,s.canUseDOM)()&&t.media(r,(function(){t.setState({breakpoint:i})}))}));var i=(0,o.default)({minWidth:e.slice(-1)[0]});(0,s.canUseDOM)()&&this.media(i,(function(){t.setState({breakpoint:null})}))}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach((function(t){b.unregister(t.query,t.handler)}))}},{key:"render",value:function(){var t,e,i=this;(t=this.state.breakpoint?"unslick"===(e=this.props.responsive.filter((function(t){return t.breakpoint===i.state.breakpoint})))[0].settings?"unslick":d(d(d({},a.default),this.props),e[0].settings):d(d({},a.default),this.props)).centerMode&&(t.slidesToScroll,t.slidesToScroll=1),t.fade&&(t.slidesToShow,t.slidesToScroll,t.slidesToShow=1,t.slidesToScroll=1);var o=n.default.Children.toArray(this.props.children);o=o.filter((function(t){return"string"===typeof t?!!t.trim():!!t})),t.variableWidth&&(t.rows>1||t.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),t.variableWidth=!1);for(var s=[],l=null,c=0;c<o.length;c+=t.rows*t.slidesPerRow){for(var h=[],p=c;p<c+t.rows*t.slidesPerRow;p+=t.slidesPerRow){for(var f=[],m=p;m<p+t.slidesPerRow&&(t.variableWidth&&o[m].props.style&&(l=o[m].props.style.width),!(m>=o.length));m+=1)f.push(n.default.cloneElement(o[m],{key:100*c+10*p+m,tabIndex:-1,style:{width:"".concat(100/t.slidesPerRow,"%"),display:"inline-block"}}));h.push(n.default.createElement("div",{key:10*c+p},f))}t.variableWidth?s.push(n.default.createElement("div",{key:c,style:{width:l}},h)):s.push(n.default.createElement("div",{key:c},h))}if("unslick"===t){var y="regular slider "+(this.props.className||"");return n.default.createElement("div",{className:y},o)}return s.length<=t.slidesToShow&&(t.unslick=!0),n.default.createElement(r.InnerSlider,u({style:this.props.style,ref:this.innerSliderRefHandler},t),s)}}])&&p(e.prototype,i),l&&p(e,l),h}(n.default.Component);e.default=x},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InnerSlider=void 0;var n=d(i(2)),r=d(i(382)),o=d(i(383)),a=d(i(24)),s=i(53),l=i(384),c=i(385),u=i(386),h=d(i(83));function d(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function m(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){E(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=S(t);if(e){var r=S(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return x(this,i)}}function x(t,e){return!e||"object"!==p(e)&&"function"!==typeof e?w(t):e}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var k=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(x,t);var e,i,d,y=b(x);function x(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,x),E(w(e=y.call(this,t)),"listRefHandler",(function(t){return e.list=t})),E(w(e),"trackRefHandler",(function(t){return e.track=t})),E(w(e),"adaptHeight",(function(){if(e.props.adaptiveHeight&&e.list){var t=e.list.querySelector('[data-index="'.concat(e.state.currentSlide,'"]'));e.list.style.height=(0,s.getHeight)(t)+"px"}})),E(w(e),"componentDidMount",(function(){if(e.props.onInit&&e.props.onInit(),e.props.lazyLoad){var t=(0,s.getOnDemandLazySlides)(v(v({},e.props),e.state));t.length>0&&(e.setState((function(e){return{lazyLoadedList:e.lazyLoadedList.concat(t)}})),e.props.onLazyLoad&&e.props.onLazyLoad(t))}var i=v({listRef:e.list,trackRef:e.track},e.props);e.updateState(i,!0,(function(){e.adaptHeight(),e.props.autoplay&&e.autoPlay("update")})),"progressive"===e.props.lazyLoad&&(e.lazyLoadTimer=setInterval(e.progressiveLazyLoad,1e3)),e.ro=new h.default((function(){e.state.animating?(e.onWindowResized(!1),e.callbackTimers.push(setTimeout((function(){return e.onWindowResized()}),e.props.speed))):e.onWindowResized()})),e.ro.observe(e.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),(function(t){t.onfocus=e.props.pauseOnFocus?e.onSlideFocus:null,t.onblur=e.props.pauseOnFocus?e.onSlideBlur:null})),window.addEventListener?window.addEventListener("resize",e.onWindowResized):window.attachEvent("onresize",e.onWindowResized)})),E(w(e),"componentWillUnmount",(function(){e.animationEndCallback&&clearTimeout(e.animationEndCallback),e.lazyLoadTimer&&clearInterval(e.lazyLoadTimer),e.callbackTimers.length&&(e.callbackTimers.forEach((function(t){return clearTimeout(t)})),e.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",e.onWindowResized):window.detachEvent("onresize",e.onWindowResized),e.autoplayTimer&&clearInterval(e.autoplayTimer),e.ro.disconnect()})),E(w(e),"componentDidUpdate",(function(t){if(e.checkImagesLoad(),e.props.onReInit&&e.props.onReInit(),e.props.lazyLoad){var i=(0,s.getOnDemandLazySlides)(v(v({},e.props),e.state));i.length>0&&(e.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(i)}})),e.props.onLazyLoad&&e.props.onLazyLoad(i))}e.adaptHeight();var r=v(v({listRef:e.list,trackRef:e.track},e.props),e.state),o=e.didPropsChange(t);o&&e.updateState(r,o,(function(){e.state.currentSlide>=n.default.Children.count(e.props.children)&&e.changeSlide({message:"index",index:n.default.Children.count(e.props.children)-e.props.slidesToShow,currentSlide:e.state.currentSlide}),e.props.autoplay?e.autoPlay("update"):e.pause("paused")}))})),E(w(e),"onWindowResized",(function(t){e.debouncedResize&&e.debouncedResize.cancel(),e.debouncedResize=(0,o.default)((function(){return e.resizeWindow(t)}),50),e.debouncedResize()})),E(w(e),"resizeWindow",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=Boolean(e.track&&e.track.node);if(i){var n=v(v({listRef:e.list,trackRef:e.track},e.props),e.state);e.updateState(n,t,(function(){e.props.autoplay?e.autoPlay("update"):e.pause("paused")})),e.setState({animating:!1}),clearTimeout(e.animationEndCallback),delete e.animationEndCallback}})),E(w(e),"updateState",(function(t,i,r){var o=(0,s.initializedState)(t);t=v(v(v({},t),o),{},{slideIndex:o.currentSlide});var a=(0,s.getTrackLeft)(t);t=v(v({},t),{},{left:a});var l=(0,s.getTrackCSS)(t);(i||n.default.Children.count(e.props.children)!==n.default.Children.count(t.children))&&(o.trackStyle=l),e.setState(o,r)})),E(w(e),"ssrInit",(function(){if(e.props.variableWidth){var t=0,i=0,r=[],o=(0,s.getPreClones)(v(v(v({},e.props),e.state),{},{slideCount:e.props.children.length})),a=(0,s.getPostClones)(v(v(v({},e.props),e.state),{},{slideCount:e.props.children.length}));e.props.children.forEach((function(e){r.push(e.props.style.width),t+=e.props.style.width}));for(var l=0;l<o;l++)i+=r[r.length-1-l],t+=r[r.length-1-l];for(var c=0;c<a;c++)t+=r[c];for(var u=0;u<e.state.currentSlide;u++)i+=r[u];var h={width:t+"px",left:-i+"px"};if(e.props.centerMode){var d="".concat(r[e.state.currentSlide],"px");h.left="calc(".concat(h.left," + (100% - ").concat(d,") / 2 ) ")}return{trackStyle:h}}var p=n.default.Children.count(e.props.children),f=v(v(v({},e.props),e.state),{},{slideCount:p}),m=(0,s.getPreClones)(f)+(0,s.getPostClones)(f)+p,y=100/e.props.slidesToShow*m,g=100/m,_=-g*((0,s.getPreClones)(f)+e.state.currentSlide)*y/100;return e.props.centerMode&&(_+=(100-g*y/100)/2),{slideWidth:g+"%",trackStyle:{width:y+"%",left:_+"%"}}})),E(w(e),"checkImagesLoad",(function(){var t=e.list&&e.list.querySelectorAll&&e.list.querySelectorAll(".slick-slide img")||[],i=t.length,n=0;Array.prototype.forEach.call(t,(function(t){var r=function(){return++n&&n>=i&&e.onWindowResized()};if(t.onclick){var o=t.onclick;t.onclick=function(){o(),t.parentNode.focus()}}else t.onclick=function(){return t.parentNode.focus()};t.onload||(e.props.lazyLoad?t.onload=function(){e.adaptHeight(),e.callbackTimers.push(setTimeout(e.onWindowResized,e.props.speed))}:(t.onload=r,t.onerror=function(){r(),e.props.onLazyLoadError&&e.props.onLazyLoadError()}))}))})),E(w(e),"progressiveLazyLoad",(function(){for(var t=[],i=v(v({},e.props),e.state),n=e.state.currentSlide;n<e.state.slideCount+(0,s.getPostClones)(i);n++)if(e.state.lazyLoadedList.indexOf(n)<0){t.push(n);break}for(var r=e.state.currentSlide-1;r>=-(0,s.getPreClones)(i);r--)if(e.state.lazyLoadedList.indexOf(r)<0){t.push(r);break}t.length>0?(e.setState((function(e){return{lazyLoadedList:e.lazyLoadedList.concat(t)}})),e.props.onLazyLoad&&e.props.onLazyLoad(t)):e.lazyLoadTimer&&(clearInterval(e.lazyLoadTimer),delete e.lazyLoadTimer)})),E(w(e),"slideHandler",(function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.props,r=n.asNavFor,o=n.beforeChange,a=n.onLazyLoad,l=n.speed,c=n.afterChange,u=e.state.currentSlide,h=(0,s.slideHandler)(v(v(v({index:t},e.props),e.state),{},{trackRef:e.track,useCSS:e.props.useCSS&&!i})),d=h.state,p=h.nextState;if(d){o&&o(u,d.currentSlide);var f=d.lazyLoadedList.filter((function(t){return e.state.lazyLoadedList.indexOf(t)<0}));a&&f.length>0&&a(f),!e.props.waitForAnimate&&e.animationEndCallback&&(clearTimeout(e.animationEndCallback),c&&c(u),delete e.animationEndCallback),e.setState(d,(function(){r&&e.asNavForIndex!==t&&(e.asNavForIndex=t,r.innerSlider.slideHandler(t)),p&&(e.animationEndCallback=setTimeout((function(){var t=p.animating,i=m(p,["animating"]);e.setState(i,(function(){e.callbackTimers.push(setTimeout((function(){return e.setState({animating:t})}),10)),c&&c(d.currentSlide),delete e.animationEndCallback}))}),l))}))}})),E(w(e),"changeSlide",(function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=v(v({},e.props),e.state),r=(0,s.changeSlide)(n,t);if((0===r||r)&&(!0===i?e.slideHandler(r,i):e.slideHandler(r),e.props.autoplay&&e.autoPlay("update"),e.props.focusOnSelect)){var o=e.list.querySelectorAll(".slick-current");o[0]&&o[0].focus()}})),E(w(e),"clickHandler",(function(t){!1===e.clickable&&(t.stopPropagation(),t.preventDefault()),e.clickable=!0})),E(w(e),"keyHandler",(function(t){var i=(0,s.keyHandler)(t,e.props.accessibility,e.props.rtl);""!==i&&e.changeSlide({message:i})})),E(w(e),"selectHandler",(function(t){e.changeSlide(t)})),E(w(e),"disableBodyScroll",(function(){window.ontouchmove=function(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1}})),E(w(e),"enableBodyScroll",(function(){window.ontouchmove=null})),E(w(e),"swipeStart",(function(t){e.props.verticalSwiping&&e.disableBodyScroll();var i=(0,s.swipeStart)(t,e.props.swipe,e.props.draggable);""!==i&&e.setState(i)})),E(w(e),"swipeMove",(function(t){var i=(0,s.swipeMove)(t,v(v(v({},e.props),e.state),{},{trackRef:e.track,listRef:e.list,slideIndex:e.state.currentSlide}));i&&(i.swiping&&(e.clickable=!1),e.setState(i))})),E(w(e),"swipeEnd",(function(t){var i=(0,s.swipeEnd)(t,v(v(v({},e.props),e.state),{},{trackRef:e.track,listRef:e.list,slideIndex:e.state.currentSlide}));if(i){var n=i.triggerSlideHandler;delete i.triggerSlideHandler,e.setState(i),void 0!==n&&(e.slideHandler(n),e.props.verticalSwiping&&e.enableBodyScroll())}})),E(w(e),"touchEnd",(function(t){e.swipeEnd(t),e.clickable=!0})),E(w(e),"slickPrev",(function(){e.callbackTimers.push(setTimeout((function(){return e.changeSlide({message:"previous"})}),0))})),E(w(e),"slickNext",(function(){e.callbackTimers.push(setTimeout((function(){return e.changeSlide({message:"next"})}),0))})),E(w(e),"slickGoTo",(function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t=Number(t),isNaN(t))return"";e.callbackTimers.push(setTimeout((function(){return e.changeSlide({message:"index",index:t,currentSlide:e.state.currentSlide},i)}),0))})),E(w(e),"play",(function(){var t;if(e.props.rtl)t=e.state.currentSlide-e.props.slidesToScroll;else{if(!(0,s.canGoNext)(v(v({},e.props),e.state)))return!1;t=e.state.currentSlide+e.props.slidesToScroll}e.slideHandler(t)})),E(w(e),"autoPlay",(function(t){e.autoplayTimer&&clearInterval(e.autoplayTimer);var i=e.state.autoplaying;if("update"===t){if("hovered"===i||"focused"===i||"paused"===i)return}else if("leave"===t){if("paused"===i||"focused"===i)return}else if("blur"===t&&("paused"===i||"hovered"===i))return;e.autoplayTimer=setInterval(e.play,e.props.autoplaySpeed+50),e.setState({autoplaying:"playing"})})),E(w(e),"pause",(function(t){e.autoplayTimer&&(clearInterval(e.autoplayTimer),e.autoplayTimer=null);var i=e.state.autoplaying;"paused"===t?e.setState({autoplaying:"paused"}):"focused"===t?"hovered"!==i&&"playing"!==i||e.setState({autoplaying:"focused"}):"playing"===i&&e.setState({autoplaying:"hovered"})})),E(w(e),"onDotsOver",(function(){return e.props.autoplay&&e.pause("hovered")})),E(w(e),"onDotsLeave",(function(){return e.props.autoplay&&"hovered"===e.state.autoplaying&&e.autoPlay("leave")})),E(w(e),"onTrackOver",(function(){return e.props.autoplay&&e.pause("hovered")})),E(w(e),"onTrackLeave",(function(){return e.props.autoplay&&"hovered"===e.state.autoplaying&&e.autoPlay("leave")})),E(w(e),"onSlideFocus",(function(){return e.props.autoplay&&e.pause("focused")})),E(w(e),"onSlideBlur",(function(){return e.props.autoplay&&"focused"===e.state.autoplaying&&e.autoPlay("blur")})),E(w(e),"render",(function(){var t,i,r,o=(0,a.default)("slick-slider",e.props.className,{"slick-vertical":e.props.vertical,"slick-initialized":!0}),h=v(v({},e.props),e.state),d=(0,s.extractObject)(h,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),p=e.props.pauseOnHover;if(d=v(v({},d),{},{onMouseEnter:p?e.onTrackOver:null,onMouseLeave:p?e.onTrackLeave:null,onMouseOver:p?e.onTrackOver:null,focusOnSelect:e.props.focusOnSelect&&e.clickable?e.selectHandler:null}),!0===e.props.dots&&e.state.slideCount>=e.props.slidesToShow){var m=(0,s.extractObject)(h,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),y=e.props.pauseOnDotsHover;m=v(v({},m),{},{clickHandler:e.changeSlide,onMouseEnter:y?e.onDotsLeave:null,onMouseOver:y?e.onDotsOver:null,onMouseLeave:y?e.onDotsLeave:null}),t=n.default.createElement(c.Dots,m)}var g=(0,s.extractObject)(h,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);g.clickHandler=e.changeSlide,e.props.arrows&&(i=n.default.createElement(u.PrevArrow,g),r=n.default.createElement(u.NextArrow,g));var _=null;e.props.vertical&&(_={height:e.state.listHeight});var b=null;!1===e.props.vertical?!0===e.props.centerMode&&(b={padding:"0px "+e.props.centerPadding}):!0===e.props.centerMode&&(b={padding:e.props.centerPadding+" 0px"});var x=v(v({},_),b),w=e.props.touchMove,S={className:"slick-list",style:x,onClick:e.clickHandler,onMouseDown:w?e.swipeStart:null,onMouseMove:e.state.dragging&&w?e.swipeMove:null,onMouseUp:w?e.swipeEnd:null,onMouseLeave:e.state.dragging&&w?e.swipeEnd:null,onTouchStart:w?e.swipeStart:null,onTouchMove:e.state.dragging&&w?e.swipeMove:null,onTouchEnd:w?e.touchEnd:null,onTouchCancel:e.state.dragging&&w?e.swipeEnd:null,onKeyDown:e.props.accessibility?e.keyHandler:null},E={className:o,dir:"ltr",style:e.props.style};return e.props.unslick&&(S={className:"slick-list"},E={className:o}),n.default.createElement("div",E,e.props.unslick?"":i,n.default.createElement("div",f({ref:e.listRefHandler},S),n.default.createElement(l.Track,f({ref:e.trackRefHandler},d),e.props.children)),e.props.unslick?"":r,e.props.unslick?"":t)})),e.list=null,e.track=null,e.state=v(v({},r.default),{},{currentSlide:e.props.initialSlide,slideCount:n.default.Children.count(e.props.children)}),e.callbackTimers=[],e.clickable=!0,e.debouncedResize=null;var i=e.ssrInit();return e.state=v(v({},e.state),i),e}return e=x,(i=[{key:"didPropsChange",value:function(t){for(var e=!1,i=0,r=Object.keys(this.props);i<r.length;i++){var o=r[i];if(!t.hasOwnProperty(o)){e=!0;break}if("object"!==p(t[o])&&"function"!==typeof t[o]&&t[o]!==this.props[o]){e=!0;break}}return e||n.default.Children.count(this.props.children)!==n.default.Children.count(t.children)}}])&&g(e.prototype,i),d&&g(e,d),x}(n.default.Component);e.InnerSlider=k},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};e.default=n},function(t,e,i){(function(e){var i=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")(),u=Object.prototype.toString,h=Math.max,d=Math.min,p=function(){return c.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(f(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=f(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var s=r.test(t);return s||o.test(t)?a(t.slice(2),s?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,i){var n,r,o,a,s,l,c=0,u=!1,y=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var i=n,o=r;return n=r=void 0,c=e,a=t.apply(o,i)}function _(t){return c=t,s=setTimeout(x,e),u?g(t):a}function b(t){var i=t-l;return void 0===l||i>=e||i<0||y&&t-c>=o}function x(){var t=p();if(b(t))return w(t);s=setTimeout(x,function(t){var i=e-(t-l);return y?d(i,o-(t-c)):i}(t))}function w(t){return s=void 0,v&&n?g(t):(n=r=void 0,a)}function S(){var t=p(),i=b(t);if(n=arguments,r=this,l=t,i){if(void 0===s)return _(l);if(y)return s=setTimeout(x,e),g(l)}return void 0===s&&(s=setTimeout(x,e)),a}return e=m(e)||0,f(i)&&(u=!!i.leading,o=(y="maxWait"in i)?h(m(i.maxWait)||0,e):o,v="trailing"in i?!!i.trailing:v),S.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=r=s=void 0},S.flush=function(){return void 0===s?a:w(p())},S}}).call(this,i(44))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var n=a(i(2)),r=a(i(24)),o=i(53);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=m(t);if(e){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function p(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){g(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var _=function(t){var e,i,n,r,o;return n=(o=t.rtl?t.slideCount-1-t.index:t.index)<0||o>=t.slideCount,t.centerMode?(r=Math.floor(t.slidesToShow/2),i=(o-t.currentSlide)%t.slideCount===0,o>t.currentSlide-r-1&&o<=t.currentSlide+r&&(e=!0)):e=t.currentSlide<=o&&o<t.currentSlide+t.slidesToShow,{"slick-slide":!0,"slick-active":e,"slick-center":i,"slick-cloned":n,"slick-current":o===(t.targetSlide<0?t.targetSlide+t.slideCount:t.targetSlide>=t.slideCount?t.targetSlide-t.slideCount:t.targetSlide)}},b=function(t,e){return t.key||e},x=function(t){var e,i=[],a=[],s=[],l=n.default.Children.count(t.children),c=(0,o.lazyStartIndex)(t),u=(0,o.lazyEndIndex)(t);return n.default.Children.forEach(t.children,(function(h,d){var p,f={message:"children",index:d,slidesToScroll:t.slidesToScroll,currentSlide:t.currentSlide};p=!t.lazyLoad||t.lazyLoad&&t.lazyLoadedList.indexOf(d)>=0?h:n.default.createElement("div",null);var m=function(t){var e={};return void 0!==t.variableWidth&&!1!==t.variableWidth||(e.width=t.slideWidth),t.fade&&(e.position="relative",t.vertical?e.top=-t.index*parseInt(t.slideHeight):e.left=-t.index*parseInt(t.slideWidth),e.opacity=t.currentSlide===t.index?1:0,t.useCSS&&(e.transition="opacity "+t.speed+"ms "+t.cssEase+", visibility "+t.speed+"ms "+t.cssEase)),e}(v(v({},t),{},{index:d})),y=p.props.className||"",g=_(v(v({},t),{},{index:d}));if(i.push(n.default.cloneElement(p,{key:"original"+b(p,d),"data-index":d,className:(0,r.default)(g,y),tabIndex:"-1","aria-hidden":!g["slick-active"],style:v(v({outline:"none"},p.props.style||{}),m),onClick:function(e){p.props&&p.props.onClick&&p.props.onClick(e),t.focusOnSelect&&t.focusOnSelect(f)}})),t.infinite&&!1===t.fade){var x=l-d;x<=(0,o.getPreClones)(t)&&l!==t.slidesToShow&&((e=-x)>=c&&(p=h),g=_(v(v({},t),{},{index:e})),a.push(n.default.cloneElement(p,{key:"precloned"+b(p,e),"data-index":e,tabIndex:"-1",className:(0,r.default)(g,y),"aria-hidden":!g["slick-active"],style:v(v({},p.props.style||{}),m),onClick:function(e){p.props&&p.props.onClick&&p.props.onClick(e),t.focusOnSelect&&t.focusOnSelect(f)}}))),l!==t.slidesToShow&&((e=l+d)<u&&(p=h),g=_(v(v({},t),{},{index:e})),s.push(n.default.cloneElement(p,{key:"postcloned"+b(p,e),"data-index":e,tabIndex:"-1",className:(0,r.default)(g,y),"aria-hidden":!g["slick-active"],style:v(v({},p.props.style||{}),m),onClick:function(e){p.props&&p.props.onClick&&p.props.onClick(e),t.focusOnSelect&&t.focusOnSelect(f)}})))}})),t.rtl?a.concat(i,s).reverse():a.concat(i,s)},w=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(a,t);var e,i,r,o=d(a);function a(){var t;c(this,a);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return g(f(t=o.call.apply(o,[this].concat(i))),"node",null),g(f(t),"handleRef",(function(e){t.node=e})),t}return e=a,(i=[{key:"render",value:function(){var t=x(this.props),e=this.props,i={onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave};return n.default.createElement("div",l({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},i),t)}}])&&u(e.prototype,i),r&&u(e,r),a}(n.default.PureComponent);e.Track=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dots=void 0;var n=a(i(2)),r=a(i(24)),o=i(53);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=m(t);if(e){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(f,t);var e,i,a,s=p(f);function f(){return u(this,f),s.apply(this,arguments)}return e=f,(i=[{key:"clickHandler",value:function(t,e){e.preventDefault(),this.props.clickHandler(t)}},{key:"render",value:function(){for(var t,e=this.props,i=e.onMouseEnter,a=e.onMouseOver,s=e.onMouseLeave,u=e.infinite,h=e.slidesToScroll,d=e.slidesToShow,p=e.slideCount,f=e.currentSlide,m=(t={slideCount:p,slidesToScroll:h,slidesToShow:d,infinite:u}).infinite?Math.ceil(t.slideCount/t.slidesToScroll):Math.ceil((t.slideCount-t.slidesToShow)/t.slidesToScroll)+1,y={onMouseEnter:i,onMouseOver:a,onMouseLeave:s},v=[],g=0;g<m;g++){var _=(g+1)*h-1,b=u?_:(0,o.clamp)(_,0,p-1),x=b-(h-1),w=u?x:(0,o.clamp)(x,0,p-1),S=(0,r.default)({"slick-active":u?f>=w&&f<=b:f===w}),E={message:"dots",index:g,slidesToScroll:h,currentSlide:f},k=this.clickHandler.bind(this,E);v=v.concat(n.default.createElement("li",{key:g,className:S},n.default.cloneElement(this.props.customPaging(g),{onClick:k})))}return n.default.cloneElement(this.props.appendDots(v),function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({className:this.props.dotsClass},y))}}])&&h(e.prototype,i),a&&h(e,a),f}(n.default.PureComponent);e.Dots=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NextArrow=e.PrevArrow=void 0;var n=a(i(2)),r=a(i(24)),o=i(53);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,i){return e&&p(t.prototype,e),i&&p(t,i),t}function m(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_(t);if(e){var r=_(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g(this,i)}}function g(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){m(i,t);var e=v(i);function i(){return d(this,i),e.apply(this,arguments)}return f(i,[{key:"clickHandler",value:function(t,e){e&&e.preventDefault(),this.props.clickHandler(t,e)}},{key:"render",value:function(){var t={"slick-arrow":!0,"slick-prev":!0},e=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(t["slick-disabled"]=!0,e=null);var i={key:"0","data-role":"none",className:(0,r.default)(t),style:{display:"block"},onClick:e},o={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.prevArrow?n.default.cloneElement(this.props.prevArrow,u(u({},i),o)):n.default.createElement("button",l({key:"0",type:"button"},i)," ","Previous")}}]),i}(n.default.PureComponent);e.PrevArrow=b;var x=function(t){m(i,t);var e=v(i);function i(){return d(this,i),e.apply(this,arguments)}return f(i,[{key:"clickHandler",value:function(t,e){e&&e.preventDefault(),this.props.clickHandler(t,e)}},{key:"render",value:function(){var t={"slick-arrow":!0,"slick-next":!0},e=this.clickHandler.bind(this,{message:"next"});(0,o.canGoNext)(this.props)||(t["slick-disabled"]=!0,e=null);var i={key:"1","data-role":"none",className:(0,r.default)(t),style:{display:"block"},onClick:e},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.nextArrow?n.default.cloneElement(this.props.nextArrow,u(u({},i),a)):n.default.createElement("button",l({key:"1",type:"button"},i)," ","Next")}}]),i}(n.default.PureComponent);e.NextArrow=x},function(t,e,i){var n=i(388),r=function(t){var e="",i=Object.keys(t);return i.forEach((function(r,o){var a=t[r];(function(t){return/[height|width]$/.test(t)})(r=n(r))&&"number"===typeof a&&(a+="px"),e+=!0===a?r:!1===a?"not "+r:"("+r+": "+a+")",o<i.length-1&&(e+=" and ")})),e};t.exports=function(t){var e="";return"string"===typeof t?t:t instanceof Array?(t.forEach((function(i,n){e+=r(i),n<t.length-1&&(e+=", ")})),e):r(t)}},function(t,e){t.exports=function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})).toLowerCase()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=(n=i(2))&&n.__esModule?n:{default:n};var o={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(t){return r.default.createElement("ul",{style:{display:"block"}},t)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(t){return r.default.createElement("button",null,t+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0};e.default=o},function(t,e,i){var n=i(391);t.exports=new n},function(t,e,i){var n=i(392),r=i(123),o=r.each,a=r.isFunction,s=r.isArray;function l(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}l.prototype={constructor:l,register:function(t,e,i){var r=this.queries,l=i&&this.browserIsIncapable;return r[t]||(r[t]=new n(t,l)),a(e)&&(e={match:e}),s(e)||(e=[e]),o(e,(function(e){a(e)&&(e={match:e}),r[t].addHandler(e)})),this},unregister:function(t,e){var i=this.queries[t];return i&&(e?i.removeHandler(e):(i.clear(),delete this.queries[t])),this}},t.exports=l},function(t,e,i){var n=i(393),r=i(123).each;function o(t,e){this.query=t,this.isUnconditional=e,this.handlers=[],this.mql=window.matchMedia(t);var i=this;this.listener=function(t){i.mql=t.currentTarget||t,i.assess()},this.mql.addListener(this.listener)}o.prototype={constuctor:o,addHandler:function(t){var e=new n(t);this.handlers.push(e),this.matches()&&e.on()},removeHandler:function(t){var e=this.handlers;r(e,(function(i,n){if(i.equals(t))return i.destroy(),!e.splice(n,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,(function(t){t.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";r(this.handlers,(function(e){e[t]()}))}},t.exports=o},function(t,e){function i(t){this.options=t,!t.deferSetup&&this.setup()}i.prototype={constructor:i,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},t.exports=i},,function(t,e,i){"use strict";var n=i(396);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,i,r,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,y=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case h:case d:case a:case l:case s:case f:return t;default:switch(t=t&&t.$$typeof){case u:case p:case v:case y:case c:return t;default:return e}}case o:return e}}}function S(t){return w(t)===d}e.AsyncMode=h,e.ConcurrentMode=d,e.ContextConsumer=u,e.ContextProvider=c,e.Element=r,e.ForwardRef=p,e.Fragment=a,e.Lazy=v,e.Memo=y,e.Portal=o,e.Profiler=l,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return S(t)||w(t)===h},e.isConcurrentMode=S,e.isContextConsumer=function(t){return w(t)===u},e.isContextProvider=function(t){return w(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return w(t)===p},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===v},e.isMemo=function(t){return w(t)===y},e.isPortal=function(t){return w(t)===o},e.isProfiler=function(t){return w(t)===l},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===d||t===l||t===s||t===f||t===m||"object"===typeof t&&null!==t&&(t.$$typeof===v||t.$$typeof===y||t.$$typeof===c||t.$$typeof===u||t.$$typeof===p||t.$$typeof===_||t.$$typeof===b||t.$$typeof===x||t.$$typeof===g)},e.typeOf=w},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bodyOpenClassName=e.portalClassName=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2),a=f(o),s=f(i(54)),l=f(i(3)),c=f(i(401)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(126)),h=i(82),d=f(h),p=i(408);function f(t){return t&&t.__esModule?t:{default:t}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}var v=e.portalClassName="ReactModalPortal",g=e.bodyOpenClassName="ReactModal__Body--open",_=h.canUseDOM&&void 0!==s.default.createPortal,b=function(t){return document.createElement(t)},x=function(){return _?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function w(t){return t()}var S=function(t){function e(){var t,i,r;m(this,e);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return i=r=y(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),r.removePortal=function(){!_&&s.default.unmountComponentAtNode(r.node);var t=w(r.props.parentSelector);t&&t.contains(r.node)?t.removeChild(r.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},r.portalRef=function(t){r.portal=t},r.renderPortal=function(t){var i=x()(r,a.default.createElement(c.default,n({defaultStyles:e.defaultStyles},t)),r.node);r.portalRef(i)},y(r,i)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentDidMount",value:function(){h.canUseDOM&&(_||(this.node=b("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!_&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(t){return{prevParent:w(t.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(t,e,i){if(h.canUseDOM){var n=this.props,r=n.isOpen,o=n.portalClassName;t.portalClassName!==o&&(this.node.className=o);var a=i.prevParent,s=i.nextParent;s!==a&&(a.removeChild(this.node),s.appendChild(this.node)),(t.isOpen||r)&&!_&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(h.canUseDOM&&this.node&&this.portal){var t=this.portal.state,e=Date.now(),i=t.isOpen&&this.props.closeTimeoutMS&&(t.closesAt||e+this.props.closeTimeoutMS);i?(t.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,i-e)):this.removePortal()}}},{key:"render",value:function(){return h.canUseDOM&&_?(!this.node&&_&&(this.node=b("div")),x()(a.default.createElement(c.default,n({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(t){u.setElement(t)}}]),e}(o.Component);S.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.oneOfType([l.default.instanceOf(d.default),l.default.instanceOf(h.SafeHTMLCollection),l.default.instanceOf(h.SafeNodeList),l.default.arrayOf(l.default.instanceOf(d.default))]),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,preventScroll:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,overlayElement:l.default.func,contentElement:l.default.func},S.defaultProps={isOpen:!1,portalClassName:v,bodyOpenClassName:g,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,e){return a.default.createElement("div",t,e)},contentElement:function(t,e){return a.default.createElement("div",t,e)}},S.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,p.polyfill)(S),e.default=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(2),s=y(i(3)),l=m(i(402)),c=y(i(403)),u=m(i(126)),h=m(i(406)),d=i(82),p=y(d),f=y(i(127));function m(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function y(t){return t&&t.__esModule?t:{default:t}}i(407);var v={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},g=0,_=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.setOverlayRef=function(t){i.overlay=t,i.props.overlayRef&&i.props.overlayRef(t)},i.setContentRef=function(t){i.content=t,i.props.contentRef&&i.props.contentRef(t)},i.afterClose=function(){var t=i.props,e=t.appElement,n=t.ariaHideApp,r=t.htmlOpenClassName,o=t.bodyOpenClassName;o&&h.remove(document.body,o),r&&h.remove(document.getElementsByTagName("html")[0],r),n&&g>0&&0===(g-=1)&&u.show(e),i.props.shouldFocusAfterRender&&(i.props.shouldReturnFocusAfterClose?(l.returnFocus(i.props.preventScroll),l.teardownScopedFocus()):l.popWithoutFocus()),i.props.onAfterClose&&i.props.onAfterClose(),f.default.deregister(i)},i.open=function(){i.beforeOpen(),i.state.afterOpen&&i.state.beforeClose?(clearTimeout(i.closeTimer),i.setState({beforeClose:!1})):(i.props.shouldFocusAfterRender&&(l.setupScopedFocus(i.node),l.markForFocusLater()),i.setState({isOpen:!0},(function(){i.openAnimationFrame=requestAnimationFrame((function(){i.setState({afterOpen:!0}),i.props.isOpen&&i.props.onAfterOpen&&i.props.onAfterOpen({overlayEl:i.overlay,contentEl:i.content})}))})))},i.close=function(){i.props.closeTimeoutMS>0?i.closeWithTimeout():i.closeWithoutTimeout()},i.focusContent=function(){return i.content&&!i.contentHasFocus()&&i.content.focus({preventScroll:!0})},i.closeWithTimeout=function(){var t=Date.now()+i.props.closeTimeoutMS;i.setState({beforeClose:!0,closesAt:t},(function(){i.closeTimer=setTimeout(i.closeWithoutTimeout,i.state.closesAt-Date.now())}))},i.closeWithoutTimeout=function(){i.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},i.afterClose)},i.handleKeyDown=function(t){9===t.keyCode&&(0,c.default)(i.content,t),i.props.shouldCloseOnEsc&&27===t.keyCode&&(t.stopPropagation(),i.requestClose(t))},i.handleOverlayOnClick=function(t){null===i.shouldClose&&(i.shouldClose=!0),i.shouldClose&&i.props.shouldCloseOnOverlayClick&&(i.ownerHandlesClose()?i.requestClose(t):i.focusContent()),i.shouldClose=null},i.handleContentOnMouseUp=function(){i.shouldClose=!1},i.handleOverlayOnMouseDown=function(t){i.props.shouldCloseOnOverlayClick||t.target!=i.overlay||t.preventDefault()},i.handleContentOnClick=function(){i.shouldClose=!1},i.handleContentOnMouseDown=function(){i.shouldClose=!1},i.requestClose=function(t){return i.ownerHandlesClose()&&i.props.onRequestClose(t)},i.ownerHandlesClose=function(){return i.props.onRequestClose},i.shouldBeClosed=function(){return!i.state.isOpen&&!i.state.beforeClose},i.contentHasFocus=function(){return document.activeElement===i.content||i.content.contains(document.activeElement)},i.buildClassName=function(t,e){var n="object"===("undefined"===typeof e?"undefined":r(e))?e:{base:v[t],afterOpen:v[t]+"--after-open",beforeClose:v[t]+"--before-close"},o=n.base;return i.state.afterOpen&&(o=o+" "+n.afterOpen),i.state.beforeClose&&(o=o+" "+n.beforeClose),"string"===typeof e&&e?o+" "+e:o},i.attributesFromObject=function(t,e){return Object.keys(e).reduce((function(i,n){return i[t+"-"+n]=e[n],i}),{})},i.state={afterOpen:!1,beforeClose:!1},i.shouldClose=null,i.moveFromContentToOverlay=null,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(t,e){this.props.isOpen&&!t.isOpen?this.open():!this.props.isOpen&&t.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!e.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var t=this.props,e=t.appElement,i=t.ariaHideApp,n=t.htmlOpenClassName,r=t.bodyOpenClassName;r&&h.add(document.body,r),n&&h.add(document.getElementsByTagName("html")[0],n),i&&(g+=1,u.hide(e)),f.default.register(this)}},{key:"render",value:function(){var t=this.props,e=t.id,i=t.className,r=t.overlayClassName,o=t.defaultStyles,a=t.children,s=i?{}:o.content,l=r?{}:o.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",r),style:n({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},u=n({id:e,ref:this.setContentRef,style:n({},s,this.props.style.content),className:this.buildClassName("content",i),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),h=this.props.contentElement(u,a);return this.props.overlayElement(c,h)}}]),e}(a.Component);_.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},_.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(p.default),s.default.instanceOf(d.SafeHTMLCollection),s.default.instanceOf(d.SafeNodeList),s.default.arrayOf(s.default.instanceOf(p.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},e.default=_,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetState=function(){a=[]},e.log=function(){return void 0;console.log("focusManager ----------"),a.forEach((function(t){var e=t||{};console.log(e.nodeName,e.className,e.id)})),console.log("end focusManager ----------")},e.handleBlur=c,e.handleFocus=u,e.markForFocusLater=function(){a.push(document.activeElement)},e.returnFocus=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=null;try{return void(0!==a.length&&(e=a.pop()).focus({preventScroll:t}))}catch(i){console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}},e.popWithoutFocus=function(){a.length>0&&a.pop()},e.setupScopedFocus=function(t){s=t,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",u,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",u))},e.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",u)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",u))};var n,r=i(125),o=(n=r)&&n.__esModule?n:{default:n};var a=[],s=null,l=!1;function c(){l=!0}function u(){if(l){if(l=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,o.default)(s)[0]||s).focus()}),0)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=(0,o.default)(t);if(!i.length)return void e.preventDefault();var n=void 0,r=e.shiftKey,a=i[0],s=i[i.length-1];if(t===document.activeElement){if(!r)return;n=s}s!==document.activeElement||r||(n=a);a===document.activeElement&&r&&(n=s);if(n)return e.preventDefault(),void n.focus();var l=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==l||"Chrome"==l[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var c=i.indexOf(document.activeElement);c>-1&&(c+=r?-1:1);if("undefined"===typeof(n=i[c]))return e.preventDefault(),void(n=r?s:a).focus();e.preventDefault(),n.focus()};var n,r=i(125),o=(n=r)&&n.__esModule?n:{default:n};t.exports=e.default},function(t,e,i){"use strict";var n=function(){};t.exports=n},function(t,e,i){var n;!function(){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(n=function(){return o}.call(e,i,e,t))||(t.exports=n)}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetState=function(){var t=document.getElementsByTagName("html")[0];for(var e in n)o(t,n[e]);var i=document.body;for(var a in r)o(i,r[a]);n={},r={}},e.log=function(){return void 0;var t=document.getElementsByTagName("html")[0].className,e="Show tracked classes:\n\n";for(var i in e+="<html /> ("+t+"):\n",n)e+="  "+i+" "+n[i]+"\n";for(var o in t=document.body.className,e+="\n\ndoc.body ("+t+"):\n",r)e+="  "+o+" "+r[o]+"\n";e+="\n",console.log(e)};var n={},r={};function o(t,e){t.classList.remove(e)}e.add=function(t,e){return i=t.classList,o="html"==t.nodeName.toLowerCase()?n:r,void e.split(" ").forEach((function(t){!function(t,e){t[e]||(t[e]=0),t[e]+=1}(o,t),i.add(t)}));var i,o},e.remove=function(t,e){return i=t.classList,o="html"==t.nodeName.toLowerCase()?n:r,void e.split(" ").forEach((function(t){!function(t,e){t[e]&&(t[e]-=1)}(o,t),0===o[t]&&i.remove(t)}));var i,o}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetState=function(){for(var t=[a,s],e=0;e<t.length;e++){var i=t[e];i&&(i.parentNode&&i.parentNode.removeChild(i))}a=s=null,l=[]},e.log=function(){console.log("bodyTrap ----------"),console.log(l.length);for(var t=[a,s],e=0;e<t.length;e++){var i=t[e]||{};console.log(i.nodeName,i.className,i.id)}console.log("edn bodyTrap ----------")};var n,r=i(127),o=(n=r)&&n.__esModule?n:{default:n};var a=void 0,s=void 0,l=[];function c(){0!==l.length&&l[l.length-1].focusContent()}o.default.subscribe((function(t,e){a||s||((a=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),a.style.position="absolute",a.style.opacity="0",a.setAttribute("tabindex","0"),a.addEventListener("focus",c),(s=a.cloneNode()).addEventListener("focus",c)),(l=e).length>0?(document.body.firstChild!==a&&document.body.insertBefore(a,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(a.parentElement&&a.parentElement.removeChild(a),s.parentElement&&s.parentElement.removeChild(s))}))},function(t,e,i){"use strict";function n(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function r(t){this.setState(function(e){var i=this.constructor.getDerivedStateFromProps(t,e);return null!==i&&void 0!==i?i:null}.bind(this))}function o(t,e){try{var i=this.props,n=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(i,n)}finally{this.props=i,this.state=n}}function a(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate)return t;var i=null,a=null,s=null;if("function"===typeof e.componentWillMount?i="componentWillMount":"function"===typeof e.UNSAFE_componentWillMount&&(i="UNSAFE_componentWillMount"),"function"===typeof e.componentWillReceiveProps?a="componentWillReceiveProps":"function"===typeof e.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"===typeof e.componentWillUpdate?s="componentWillUpdate":"function"===typeof e.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==i||null!==a||null!==s){var l=t.displayName||t.name,c="function"===typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==i?"\n  "+i:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof t.getDerivedStateFromProps&&(e.componentWillMount=n,e.componentWillReceiveProps=r),"function"===typeof e.getSnapshotBeforeUpdate){if("function"!==typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=o;var u=e.componentDidUpdate;e.componentDidUpdate=function(t,e,i){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:i;u.call(this,t,e,n)}}return t}i.r(e),i.d(e,"polyfill",(function(){return a})),n.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},,,,,function(t,e,i){},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.default=function(t,e,i,n){return"in"in t&&(t.when=t.in),o.default.Children.count(n)<2?o.default.createElement(a.default,r({},t,{inEffect:e,outEffect:i,children:n})):(n=o.default.Children.map(n,(function(n){return o.default.createElement(a.default,r({},t,{inEffect:e,outEffect:i,children:n}))})),"Fragment"in o.default?o.default.createElement(o.default.Fragment,null,n):o.default.createElement("span",null,n))};var o=n(i(2)),a=n(i(415));t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(2),c=(n=l)&&n.__esModule?n:{default:n},u=i(3),h=i(128),d=(0,u.shape)({make:u.func,duration:u.number.isRequired,delay:u.number.isRequired,forever:u.bool,count:u.number.isRequired,style:u.object.isRequired,reverse:u.bool}),p={collapse:u.bool,collapseEl:u.element,cascade:u.bool,wait:u.number,force:u.bool,disabled:u.bool,appear:u.bool,enter:u.bool,exit:u.bool,fraction:u.number,refProp:u.string,innerRef:u.func,onReveal:u.func,unmountOnExit:u.bool,mountOnEnter:u.bool,inEffect:d.isRequired,outEffect:(0,u.oneOfType)([d,(0,u.oneOf)([!1])]).isRequired,ssrReveal:u.bool,collapseOnly:u.bool,ssrFadeout:u.bool},f={transitionGroup:u.object},m=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.isOn=void 0===t.when||!!t.when,n.state={collapse:t.collapse?e.getInitialCollapseStyle(t):void 0,style:{opacity:n.isOn&&!t.ssrReveal||!t.outEffect?void 0:0}},n.savedChild=!1,n.isShown=!1,h.observerMode?n.handleObserve=n.handleObserve.bind(n):(n.revealHandler=n.makeHandler(n.reveal),n.resizeHandler=n.makeHandler(n.resize)),n.saveRef=n.saveRef.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),s(e,[{key:"saveRef",value:function(t){this.childRef&&this.childRef(t),this.props.innerRef&&this.props.innerRef(t),this.el!==t&&(this.el=t&&"offsetHeight"in t?t:void 0,this.observe(this.props,!0))}},{key:"invisible",value:function(){this&&this.el&&(this.savedChild=!1,this.isShown||(this.setState({hasExited:!0,collapse:this.props.collapse?a({},this.state.collapse,{visibility:"hidden"}):null,style:{opacity:0}}),!h.observerMode&&this.props.collapse&&window.document.dispatchEvent(h.collapseend)))}},{key:"animationEnd",value:function(t,e,i){var n=this,r=i.forever,o=i.count,a=i.delay,s=i.duration;if(!r){this.animationEndTimeout=window.setTimeout((function(){n&&n.el&&(n.animationEndTimeout=void 0,t.call(n))}),a+(s+(e?s:0)*o))}}},{key:"getDimensionValue",value:function(){return this.el.offsetHeight+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("margin-top"),10)+parseInt(window.getComputedStyle(this.el,null).getPropertyValue("margin-bottom"),10)}},{key:"collapse",value:function(t,e,i){var n=i.duration+(e.cascade?i.duration:0),r=this.isOn?this.getDimensionValue():0,o=void 0,a=void 0;if(e.collapseOnly)o=i.duration/3,a=i.delay;else{var s=n>>2,l=s>>1;o=s,a=i.delay+(this.isOn?0:n-s-l),t.style.animationDuration=n-s+(this.isOn?l:-l)+"ms",t.style.animationDelay=i.delay+(this.isOn?s-l:0)+"ms"}return t.collapse={height:r,transition:"height "+o+"ms ease "+a+"ms",overflow:e.collapseOnly?"hidden":void 0},t}},{key:"animate",value:function(t){if(this&&this.el&&(this.unlisten(),this.isShown!==this.isOn)){this.isShown=this.isOn;var e=!this.isOn&&t.outEffect,i=t[e?"outEffect":"inEffect"],n="style"in i&&i.style.animationName||void 0,r=void 0;t.collapseOnly?r={hasAppeared:!0,hasExited:!1,style:{opacity:1}}:((t.outEffect||this.isOn)&&i.make&&(n=i.make),r={hasAppeared:!0,hasExited:!1,collapse:void 0,style:a({},i.style,{animationDuration:i.duration+"ms",animationDelay:i.delay+"ms",animationIterationCount:i.forever?"infinite":i.count,opacity:1,animationName:n}),className:i.className}),this.setState(t.collapse?this.collapse(r,t,i):r),e?(this.savedChild=c.default.cloneElement(this.getChild()),this.animationEnd(this.invisible,t.cascade,i)):this.savedChild=!1,this.onReveal(t)}}},{key:"onReveal",value:function(t){t.onReveal&&this.isOn&&(this.onRevealTimeout&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)),t.wait?this.onRevealTimeout=window.setTimeout(t.onReveal,t.wait):t.onReveal())}},{key:"componentWillUnmount",value:function(){this.unlisten(),h.ssr&&(0,h.disableSsr)()}},{key:"handleObserve",value:function(t,e){o(t,1)[0].intersectionRatio>0&&(e.disconnect(),this.observer=null,this.reveal(this.props,!0))}},{key:"observe",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.el&&h.observerMode){if(this.observer){if(!e)return;this.observer.disconnect()}else if(e)return;this.observer=new IntersectionObserver(this.handleObserve,{threshold:t.fraction}),this.observer.observe(this.el)}}},{key:"reveal",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.globalHide||(0,h.hideAll)(),this&&this.el&&(t||(t=this.props),h.ssr&&(0,h.disableSsr)(),this.isOn&&this.isShown&&void 0!==t.spy?(this.isShown=!1,this.setState({style:{}}),window.setTimeout((function(){return e.reveal(t)}),200)):i||this.inViewport(t)||t.force?this.animate(t):h.observerMode?this.observe(t):this.listen())}},{key:"componentDidMount",value:function(){var t=this;if(this.el&&!this.props.disabled){this.props.collapseOnly||("make"in this.props.inEffect&&this.props.inEffect.make(!1,this.props),void 0!==this.props.when&&this.props.outEffect&&"make"in this.props.outEffect&&this.props.outEffect.make(!0,this.props));var i=this.context.transitionGroup,n=i&&!i.isMounting?!("enter"in this.props&&!1===this.props.enter):this.props.appear;return this.isOn&&((void 0!==this.props.when||void 0!==this.props.spy)&&!n||h.ssr&&!h.fadeOutEnabled&&!this.props.ssrFadeout&&this.props.outEffect&&!this.props.ssrReveal&&e.getTop(this.el)<window.pageYOffset+window.innerHeight)?(this.isShown=!0,this.setState({hasAppeared:!0,collapse:this.props.collapse?{height:this.getDimensionValue()}:this.state.collapse,style:{opacity:1}}),void this.onReveal(this.props)):h.ssr&&(h.fadeOutEnabled||this.props.ssrFadeout)&&this.props.outEffect&&e.getTop(this.el)<window.pageYOffset+window.innerHeight?(this.setState({style:{opacity:0,transition:"opacity 1000ms 1000ms"}}),void window.setTimeout((function(){return t.reveal(t.props,!0)}),2e3)):void(this.isOn&&(this.props.force?this.animate(this.props):this.reveal(this.props)))}}},{key:"cascade",value:function(t){var e=this,i=void 0;i="string"==typeof t?t.split("").map((function(t,e){return c.default.createElement("span",{key:e,style:{display:"inline-block",whiteSpace:"pre"}},t)})):c.default.Children.toArray(t);var n=this.props[this.isOn||!this.props.outEffect?"inEffect":"outEffect"],o=n.duration,s=n.reverse,l=i.length,u=2*o;this.props.collapse&&(u=parseInt(this.state.style.animationDuration,10),o=u/2);var d=s?l:0;return i.map((function(t){return"object"===(void 0===t?"undefined":r(t))&&t?c.default.cloneElement(t,{style:a({},t.props.style,e.state.style,{animationDuration:Math.round((0,h.cascade)(s?d--:d++,0,l,o,u))+"ms"})}):t}))}},{key:"componentWillReceiveProps",value:function(t){void 0!==t.when&&(this.isOn=!!t.when),t.fraction!==this.props.fraction&&this.observe(t,!0),!this.isOn&&t.onExited&&"exit"in t&&!1===t.exit?t.onExited():t.disabled||(t.collapse&&!this.props.collapse&&(this.setState({style:{},collapse:e.getInitialCollapseStyle(t)}),this.isShown=!1),t.when===this.props.when&&t.spy===this.props.spy||this.reveal(t),this.onRevealTimeout&&!this.isOn&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)))}},{key:"getChild",value:function(){if(this.savedChild&&!this.props.disabled)return this.savedChild;if("object"===r(this.props.children)){var t=c.default.Children.only(this.props.children);return"type"in t&&"string"==typeof t.type||"ref"!==this.props.refProp?t:c.default.createElement("div",null,t)}return c.default.createElement("div",null,this.props.children)}},{key:"render",value:function(){var t;t=this.state.hasAppeared?!this.props.unmountOnExit||!this.state.hasExited||this.isOn:!this.props.mountOnEnter||this.isOn;var e=this.getChild();"function"==typeof e.ref&&(this.childRef=e.ref);var i=!1,n=e.props,r=n.style,o=n.className,s=n.children,l=this.props.disabled?o:(this.props.outEffect?h.namespace:"")+(this.state.className?" "+this.state.className:"")+(o?" "+o:"")||void 0,u=void 0;"function"==typeof this.state.style.animationName&&(this.state.style.animationName=this.state.style.animationName(!this.isOn,this.props)),this.props.cascade&&!this.props.disabled&&s&&this.state.style.animationName?(i=this.cascade(s),u=a({},r,{opacity:1})):u=this.props.disabled?r:a({},r,this.state.style);var d=a({},this.props.props,function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({className:l,style:u},this.props.refProp,this.saveRef)),p=c.default.cloneElement(e,d,t?i||s:void 0);return void 0!==this.props.collapse?this.props.collapseEl?c.default.cloneElement(this.props.collapseEl,{style:a({},this.props.collapseEl.style,this.props.disabled?void 0:this.state.collapse),children:p}):c.default.createElement("div",{style:this.props.disabled?void 0:this.state.collapse,children:p}):p}},{key:"makeHandler",value:function(t){var e=this,i=function(){t.call(e,e.props),e.ticking=!1};return function(){e.ticking||((0,h.raf)(i),e.ticking=!0)}}},{key:"inViewport",value:function(t){if(!this.el||window.document.hidden)return!1;var i=this.el.offsetHeight,n=window.pageYOffset-e.getTop(this.el),r=Math.min(i,window.innerHeight)*(h.globalHide?t.fraction:0);return n>r-window.innerHeight&&n<i-r}},{key:"resize",value:function(t){this&&this.el&&this.isOn&&this.inViewport(t)&&(this.unlisten(),this.isShown=this.isOn,this.setState({hasExited:!this.isOn,hasAppeared:!0,collapse:void 0,style:{opacity:this.isOn||!t.outEffect?1:0}}),this.onReveal(t))}},{key:"listen",value:function(){h.observerMode||this.isListener||(this.isListener=!0,window.addEventListener("scroll",this.revealHandler,{passive:!0}),window.addEventListener("orientationchange",this.revealHandler,{passive:!0}),window.document.addEventListener("visibilitychange",this.revealHandler,{passive:!0}),window.document.addEventListener("collapseend",this.revealHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler,{passive:!0}))}},{key:"unlisten",value:function(){!h.observerMode&&this.isListener&&(window.removeEventListener("scroll",this.revealHandler,{passive:!0}),window.removeEventListener("orientationchange",this.revealHandler,{passive:!0}),window.document.removeEventListener("visibilitychange",this.revealHandler,{passive:!0}),window.document.removeEventListener("collapseend",this.revealHandler,{passive:!0}),window.removeEventListener("resize",this.resizeHandler,{passive:!0}),this.isListener=!1),this.onRevealTimeout&&(this.onRevealTimeout=window.clearTimeout(this.onRevealTimeout)),this.animationEndTimeout&&(this.animationEndTimeout=window.clearTimeout(this.animationEndTimeout))}}],[{key:"getInitialCollapseStyle",value:function(t){return{height:0,visibility:t.when?void 0:"hidden"}}},{key:"getTop",value:function(t){for(;void 0===t.offsetTop;)t=t.parentNode;for(var e=t.offsetTop;t.offsetParent;e+=t.offsetTop)t=t.offsetParent;return e}}]),e}(c.default.Component);m.propTypes=p,m.defaultProps={fraction:.2,refProp:"ref"},m.contextTypes=f,m.displayName="RevealBase",e.default=m,t.exports=e.default},,,function(t,e,i){},function(t,e,i){},,function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"===typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!u){var t=s(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new f(t,e)),1!==c.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},,,function(t,e,i){},,,function(t,e,i){"use strict";i.d(e,"a",(function(){return f})),i.d(e,"b",(function(){return m}));i(56);var n=i(2),r=i.n(n),o=(i(54),i(28));function a(t){function e(e,i){var a=t(e).current,s=a.instance,l=a.context;return Object(n.useImperativeHandle)(i,(function(){return s})),null==e.children?null:r.a.createElement(o.b,{value:l},e.children)}return Object(n.forwardRef)(e)}function s(t){function e(e,i){var r=t(e).current.instance;return Object(n.useImperativeHandle)(i,(function(){return r})),null}return Object(n.forwardRef)(e)}function l(t,e){return null==e?function(e,i){return Object(n.useRef)(t(e,i))}:function(i,r){var o=Object(n.useRef)(t(i,r)),a=Object(n.useRef)(i),s=o.current.instance;return Object(n.useEffect)((function(){a.current!==i&&(e(s,i,a.current),a.current=i)}),[s,i,r]),o}}function c(t,e){var i=Object(n.useRef)(e);Object(n.useEffect)((function(){e!==i.current&&null!=t.attributionControl&&(null!=i.current&&t.attributionControl.removeAttribution(i.current),null!=e&&t.attributionControl.addAttribution(e)),i.current=e}),[t,e])}function u(t,e){var i=Object(n.useRef)();Object(n.useEffect)((function(){return null!=e&&t.instance.on(e),i.current=e,function(){null!=i.current&&t.instance.off(i.current),i.current=null}}),[t,e])}var h=i(48);function d(t,e){Object(n.useEffect)((function(){var i,n=null!=(i=e.layerContainer)?i:e.map;return n.addLayer(t.instance),function(){n.removeLayer(t.instance)}}),[e,t])}function p(t){return function(e){var i=Object(o.c)(),n=t(Object(h.a)(e,i),i);return c(i.map,e.attribution),u(n.current,e.eventHandlers),d(n.current,i),n}}function f(t,e){return a(p(l(t,e)))}function m(t,e){return s(p(l(t,e)))}},,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(6),r=i(14),o=i(24),a=i.n(o),s=i(2),l=i.n(s),c=i(38),u=["xl","lg","md","sm","xs"],h=l.a.forwardRef((function(t,e){var i=t.bsPrefix,o=t.className,s=t.noGutters,h=t.as,d=void 0===h?"div":h,p=Object(r.a)(t,["bsPrefix","className","noGutters","as"]),f=Object(c.a)(i,"row"),m=f+"-cols",y=[];return u.forEach((function(t){var e,i=p[t];delete p[t];var n="xs"!==t?"-"+t:"";null!=(e=null!=i&&"object"===typeof i?i.cols:i)&&y.push(""+m+n+"-"+e)})),l.a.createElement(d,Object(n.a)({ref:e},p,{className:a.a.apply(void 0,[o,f,s&&"no-gutters"].concat(y))}))}));h.displayName="Row",h.defaultProps={noGutters:!1},e.a=h},function(t,e,i){"use strict";var n=i(6),r=i(14),o=i(24),a=i.n(o),s=i(2),l=i.n(s),c=i(38),u=["xl","lg","md","sm","xs"],h=l.a.forwardRef((function(t,e){var i=t.bsPrefix,o=t.className,s=t.as,h=void 0===s?"div":s,d=Object(r.a)(t,["bsPrefix","className","as"]),p=Object(c.a)(i,"col"),f=[],m=[];return u.forEach((function(t){var e,i,n,r=d[t];if(delete d[t],"object"===typeof r&&null!=r){var o=r.span;e=void 0===o||o,i=r.offset,n=r.order}else e=r;var a="xs"!==t?"-"+t:"";e&&f.push(!0===e?""+p+a:""+p+a+"-"+e),null!=n&&m.push("order"+a+"-"+n),null!=i&&m.push("offset"+a+"-"+i)})),f.length||f.push(p),l.a.createElement(h,Object(n.a)({},d,{ref:e,className:a.a.apply(void 0,[o].concat(f,m))}))}));h.displayName="Col",e.a=h},function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(50),r=i(56),o=i(28),a=i(47),s=i(2),l=i.n(s);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function u(t){var e=t.children,i=t.className,u=t.id,h=t.placeholder,d=t.style,p=t.whenCreated,f=Object(n.a)(t,["children","className","id","placeholder","style","whenCreated"]),m=Object(s.useRef)(null),y=function(t,e){var i=Object(s.useState)(null),n=Object(r.a)(i,2),o=n[0],l=n[1];return Object(s.useEffect)((function(){if(null!==t.current&&null===o){var i=new a.Map(t.current,e);null!=e.center&&null!=e.zoom?i.setView(e.center,e.zoom):null!=e.bounds&&i.fitBounds(e.bounds,e.boundsOptions),null!=e.whenReady&&i.whenReady(e.whenReady),l(i)}}),[t,o,e]),o}(m,f),v=Object(s.useRef)(!1);Object(s.useEffect)((function(){null!=y&&!1===v.current&&null!=p&&(v.current=!0,p(y))}),[y,p]);var g=Object(s.useState)({className:i,id:u,style:d}),_=Object(r.a)(g,1)[0],b=Object(s.useMemo)((function(){return y?{__version:o.a,map:y}:null}),[y]),x=b?l.a.createElement(o.b,{value:b},e):null!=h?h:null;return l.a.createElement("div",c({},_,{ref:m}),x)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(51),r=i(50),o=i(427),a=i(47),s=Object(o.a)((function(t,e){var i=t.position,o=Object(r.a)(t,["position"]),s=new a.Marker(i,o);return{instance:s,context:Object(n.a)(Object(n.a)({},e),{},{overlayContainer:s})}}),(function(t,e,i){e.position!==i.position&&t.setLatLng(e.position),null!=e.icon&&e.icon!==i.icon&&t.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==i.opacity&&t.setOpacity(e.opacity),null!=t.dragging&&e.draggable!==i.draggable&&(!0===e.draggable?t.dragging.enable():t.dragging.disable())}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(0);function r(t){return Object(n.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 7h12v2H3v-2zm0 7h18v2H3v-2z"}}]}]})(t)}},function(t,e,i){"use strict";var n=i(6),r=i(14),o=i(24),a=i.n(o),s=i(2),l=i.n(s),c=i(38),u=l.a.forwardRef((function(t,e){var i=t.bsPrefix,o=t.fluid,s=t.as,u=void 0===s?"div":s,h=t.className,d=Object(r.a)(t,["bsPrefix","fluid","as","className"]),p=Object(c.a)(i,"container"),f="string"===typeof o?"-"+o:"-fluid";return l.a.createElement(u,Object(n.a)({ref:e},d,{className:a()(h,o?""+p+f:p)}))}));u.displayName="Container",u.defaultProps={fluid:!1},e.a=u},function(t,e,i){"use strict";var n=i(2),r=i.n(n),o=i(6),a=i(13);i(3);function s(t){var e,i,n="";if("string"===typeof t||"number"===typeof t)n+=t;else if("object"===typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(i=s(t[e]))&&(n&&(n+=" "),n+=i);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}var l=function(){for(var t,e,i=0,n="";i<arguments.length;)(t=arguments[i++])&&(e=s(t))&&(n&&(n+=" "),n+=e);return n},c=i(68),u=i.n(c),h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d="object"===("undefined"===typeof window?"undefined":h(window))&&"object"===("undefined"===typeof document?"undefined":h(document))&&9===document.nodeType,p=(i(35),i(15)),f=i(20),m=i(21),y=i(14),v={}.constructor;function g(t){if(null==t||"object"!==typeof t)return t;if(Array.isArray(t))return t.map(g);if(t.constructor!==v)return t;var e={};for(var i in t)e[i]=g(t[i]);return e}function _(t,e,i){void 0===t&&(t="unnamed");var n=i.jss,r=g(e),o=n.plugins.onCreateRule(t,r,i);return o||(t[0],null)}var b=function(t,e){for(var i="",n=0;n<t.length&&"!important"!==t[n];n++)i&&(i+=e),i+=t[n];return i},x=function(t,e){if(void 0===e&&(e=!1),!Array.isArray(t))return t;var i="";if(Array.isArray(t[0]))for(var n=0;n<t.length&&"!important"!==t[n];n++)i&&(i+=", "),i+=b(t[n]," ");else i=b(t,", ");return e||"!important"!==t[t.length-1]||(i+=" !important"),i};function w(t,e){for(var i="",n=0;n<e;n++)i+="  ";return i+t}function S(t,e,i){void 0===i&&(i={});var n="";if(!e)return n;var r=i.indent,o=void 0===r?0:r,a=e.fallbacks;if(t&&o++,a)if(Array.isArray(a))for(var s=0;s<a.length;s++){var l=a[s];for(var c in l){var u=l[c];null!=u&&(n&&(n+="\n"),n+=""+w(c+": "+x(u)+";",o))}}else for(var h in a){var d=a[h];null!=d&&(n&&(n+="\n"),n+=""+w(h+": "+x(d)+";",o))}for(var p in e){var f=e[p];null!=f&&"fallbacks"!==p&&(n&&(n+="\n"),n+=""+w(p+": "+x(f)+";",o))}return(n||i.allowEmpty)&&t?(n&&(n="\n"+n+"\n"),w(t+" {"+n,--o)+w("}",o)):n}var E=/([[\].#*$><+~=|^:(),"'`\s])/g,k="undefined"!==typeof CSS&&CSS.escape,P=function(t){return k?k(t):t.replace(E,"\\$1")},T=function(){function t(t,e,i){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var n=i.sheet,r=i.Renderer;this.key=t,this.options=i,this.style=e,n?this.renderer=n.renderer:r&&(this.renderer=new r)}return t.prototype.prop=function(t,e,i){if(void 0===e)return this.style[t];var n=!!i&&i.force;if(!n&&this.style[t]===e)return this;var r=e;i&&!1===i.process||(r=this.options.jss.plugins.onChangeValue(e,t,this));var o=null==r||!1===r,a=t in this.style;if(o&&!a&&!n)return this;var s=o&&a;if(s?delete this.style[t]:this.style[t]=r,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,t):this.renderer.setProperty(this.renderable,t,r),this;var l=this.options.sheet;return l&&l.attached,this},t}(),C=function(t){function e(e,i,n){var r;(r=t.call(this,e,i,n)||this).selectorText=void 0,r.id=void 0,r.renderable=void 0;var o=n.selector,a=n.scoped,s=n.sheet,l=n.generateId;return o?r.selectorText=o:!1!==a&&(r.id=l(Object(m.a)(Object(m.a)(r)),s),r.selectorText="."+P(r.id)),r}Object(f.a)(e,t);var i=e.prototype;return i.applyTo=function(t){var e=this.renderer;if(e){var i=this.toJSON();for(var n in i)e.setProperty(t,n,i[n])}return this},i.toJSON=function(){var t={};for(var e in this.style){var i=this.style[e];"object"!==typeof i?t[e]=i:Array.isArray(i)&&(t[e]=x(i))}return t},i.toString=function(t){var e=this.options.sheet,i=!!e&&e.options.link?Object(o.a)({},t,{allowEmpty:!0}):t;return S(this.selectorText,this.style,i)},Object(p.a)(e,[{key:"selector",set:function(t){if(t!==this.selectorText){this.selectorText=t;var e=this.renderer,i=this.renderable;if(i&&e)e.setSelector(i,t)||e.replaceRule(i,this)}},get:function(){return this.selectorText}}]),e}(T),M={onCreateRule:function(t,e,i){return"@"===t[0]||i.parent&&"keyframes"===i.parent.type?null:new C(t,e,i)}},A={indent:1,children:!0},O=/@([\w-]+)/,I=function(){function t(t,e,i){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=t;var n=t.match(O);for(var r in this.at=n?n[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new et(Object(o.a)({},i,{parent:this})),e)this.rules.add(r,e[r]);this.rules.process()}var e=t.prototype;return e.getRule=function(t){return this.rules.get(t)},e.indexOf=function(t){return this.rules.indexOf(t)},e.addRule=function(t,e,i){var n=this.rules.add(t,e,i);return n?(this.options.jss.plugins.onProcessRule(n),n):null},e.toString=function(t){if(void 0===t&&(t=A),null==t.indent&&(t.indent=A.indent),null==t.children&&(t.children=A.children),!1===t.children)return this.query+" {}";var e=this.rules.toString(t);return e?this.query+" {\n"+e+"\n}":""},t}(),D=/@media|@supports\s+/,z={onCreateRule:function(t,e,i){return D.test(t)?new I(t,e,i):null}},L={indent:1,children:!0},R=/@keyframes\s+([\w-]+)/,F=function(){function t(t,e,i){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var n=t.match(R);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var r=i.scoped,a=i.sheet,s=i.generateId;for(var l in this.id=!1===r?this.name:P(s(this,a)),this.rules=new et(Object(o.a)({},i,{parent:this})),e)this.rules.add(l,e[l],Object(o.a)({},i,{parent:this}));this.rules.process()}return t.prototype.toString=function(t){if(void 0===t&&(t=L),null==t.indent&&(t.indent=L.indent),null==t.children&&(t.children=L.children),!1===t.children)return this.at+" "+this.id+" {}";var e=this.rules.toString(t);return e&&(e="\n"+e+"\n"),this.at+" "+this.id+" {"+e+"}"},t}(),B=/@keyframes\s+/,j=/\$([\w-]+)/g,N=function(t,e){return"string"===typeof t?t.replace(j,(function(t,i){return i in e?e[i]:t})):t},V=function(t,e,i){var n=t[e],r=N(n,i);r!==n&&(t[e]=r)},U={onCreateRule:function(t,e,i){return"string"===typeof t&&B.test(t)?new F(t,e,i):null},onProcessStyle:function(t,e,i){return"style"===e.type&&i?("animation-name"in t&&V(t,"animation-name",i.keyframes),"animation"in t&&V(t,"animation",i.keyframes),t):t},onChangeValue:function(t,e,i){var n=i.options.sheet;if(!n)return t;switch(e){case"animation":case"animation-name":return N(t,n.keyframes);default:return t}}},G=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).renderable=void 0,e}return Object(f.a)(e,t),e.prototype.toString=function(t){var e=this.options.sheet,i=!!e&&e.options.link?Object(o.a)({},t,{allowEmpty:!0}):t;return S(this.key,this.style,i)},e}(T),q={onCreateRule:function(t,e,i){return i.parent&&"keyframes"===i.parent.type?new G(t,e,i):null}},Z=function(){function t(t,e,i){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=t,this.style=e,this.options=i}return t.prototype.toString=function(t){if(Array.isArray(this.style)){for(var e="",i=0;i<this.style.length;i++)e+=S(this.at,this.style[i]),this.style[i+1]&&(e+="\n");return e}return S(this.at,this.style,t)},t}(),H=/@font-face/,W={onCreateRule:function(t,e,i){return H.test(t)?new Z(t,e,i):null}},X=function(){function t(t,e,i){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=t,this.style=e,this.options=i}return t.prototype.toString=function(t){return S(this.key,this.style,t)},t}(),Y={onCreateRule:function(t,e,i){return"@viewport"===t||"@-ms-viewport"===t?new X(t,e,i):null}},K=function(){function t(t,e,i){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=t,this.value=e,this.options=i}return t.prototype.toString=function(t){if(Array.isArray(this.value)){for(var e="",i=0;i<this.value.length;i++)e+=this.key+" "+this.value[i]+";",this.value[i+1]&&(e+="\n");return e}return this.key+" "+this.value+";"},t}(),$={"@charset":!0,"@import":!0,"@namespace":!0},J=[M,z,U,q,W,Y,{onCreateRule:function(t,e,i){return t in $?new K(t,e,i):null}}],Q={process:!0},tt={force:!0,process:!0},et=function(){function t(t){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=t,this.classes=t.classes,this.keyframes=t.keyframes}var e=t.prototype;return e.add=function(t,e,i){var n=this.options,r=n.parent,a=n.sheet,s=n.jss,l=n.Renderer,c=n.generateId,u=n.scoped,h=Object(o.a)({classes:this.classes,parent:r,sheet:a,jss:s,Renderer:l,generateId:c,scoped:u,name:t,keyframes:this.keyframes,selector:void 0},i),d=t;t in this.raw&&(d=t+"-d"+this.counter++),this.raw[d]=e,d in this.classes&&(h.selector="."+P(this.classes[d]));var p=_(d,e,h);if(!p)return null;this.register(p);var f=void 0===h.index?this.index.length:h.index;return this.index.splice(f,0,p),p},e.get=function(t){return this.map[t]},e.remove=function(t){this.unregister(t),delete this.raw[t.key],this.index.splice(this.index.indexOf(t),1)},e.indexOf=function(t){return this.index.indexOf(t)},e.process=function(){var t=this.options.jss.plugins;this.index.slice(0).forEach(t.onProcessRule,t)},e.register=function(t){this.map[t.key]=t,t instanceof C?(this.map[t.selector]=t,t.id&&(this.classes[t.key]=t.id)):t instanceof F&&this.keyframes&&(this.keyframes[t.name]=t.id)},e.unregister=function(t){delete this.map[t.key],t instanceof C?(delete this.map[t.selector],delete this.classes[t.key]):t instanceof F&&delete this.keyframes[t.name]},e.update=function(){var t,e,i;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(e=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],t=null),t)this.updateOne(this.map[t],e,i);else for(var n=0;n<this.index.length;n++)this.updateOne(this.index[n],e,i)},e.updateOne=function(e,i,n){void 0===n&&(n=Q);var r=this.options,o=r.jss.plugins,a=r.sheet;if(e.rules instanceof t)e.rules.update(i,n);else{var s=e,l=s.style;if(o.onUpdate(i,e,a,n),n.process&&l&&l!==s.style){for(var c in o.onProcessStyle(s.style,s,a),s.style){var u=s.style[c];u!==l[c]&&s.prop(c,u,tt)}for(var h in l){var d=s.style[h],p=l[h];null==d&&d!==p&&s.prop(h,null,tt)}}}},e.toString=function(t){for(var e="",i=this.options.sheet,n=!!i&&i.options.link,r=0;r<this.index.length;r++){var o=this.index[r].toString(t);(o||n)&&(e&&(e+="\n"),e+=o)}return e},t}(),it=function(){function t(t,e){for(var i in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(o.a)({},e,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),e.Renderer&&(this.renderer=new e.Renderer(this)),this.rules=new et(this.options),t)this.rules.add(i,t[i]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(t,e,i){var n=this.queue;this.attached&&!n&&(this.queue=[]);var r=this.rules.add(t,e,i);return r?(this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(n?n.push(r):(this.insertRule(r),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),r):r:(this.deployed=!1,r)):null},e.insertRule=function(t){this.renderer&&this.renderer.insertRule(t)},e.addRules=function(t,e){var i=[];for(var n in t){var r=this.addRule(n,t[n],e);r&&i.push(r)}return i},e.getRule=function(t){return this.rules.get(t)},e.deleteRule=function(t){var e="object"===typeof t?t:this.rules.get(t);return!(!e||this.attached&&!e.renderable)&&(this.rules.remove(e),!(this.attached&&e.renderable&&this.renderer)||this.renderer.deleteRule(e.renderable))},e.indexOf=function(t){return this.rules.indexOf(t)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var t;return(t=this.rules).update.apply(t,arguments),this},e.updateOne=function(t,e,i){return this.rules.updateOne(t,e,i),this},e.toString=function(t){return this.rules.toString(t)},t}(),nt=function(){function t(){this.plugins={internal:[],external:[]},this.registry=void 0}var e=t.prototype;return e.onCreateRule=function(t,e,i){for(var n=0;n<this.registry.onCreateRule.length;n++){var r=this.registry.onCreateRule[n](t,e,i);if(r)return r}return null},e.onProcessRule=function(t){if(!t.isProcessed){for(var e=t.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](t,e);t.style&&this.onProcessStyle(t.style,t,e),t.isProcessed=!0}},e.onProcessStyle=function(t,e,i){for(var n=0;n<this.registry.onProcessStyle.length;n++)e.style=this.registry.onProcessStyle[n](e.style,e,i)},e.onProcessSheet=function(t){for(var e=0;e<this.registry.onProcessSheet.length;e++)this.registry.onProcessSheet[e](t)},e.onUpdate=function(t,e,i,n){for(var r=0;r<this.registry.onUpdate.length;r++)this.registry.onUpdate[r](t,e,i,n)},e.onChangeValue=function(t,e,i){for(var n=t,r=0;r<this.registry.onChangeValue.length;r++)n=this.registry.onChangeValue[r](n,e,i);return n},e.use=function(t,e){void 0===e&&(e={queue:"external"});var i=this.plugins[e.queue];-1===i.indexOf(t)&&(i.push(t),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(t,e){for(var i in e)i in t&&t[i].push(e[i]);return t}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),rt=new(function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(t){var e=this.registry,i=t.options.index;if(-1===e.indexOf(t))if(0===e.length||i>=this.index)e.push(t);else for(var n=0;n<e.length;n++)if(e[n].options.index>i)return void e.splice(n,0,t)},e.reset=function(){this.registry=[]},e.remove=function(t){var e=this.registry.indexOf(t);this.registry.splice(e,1)},e.toString=function(t){for(var e=void 0===t?{}:t,i=e.attached,n=Object(y.a)(e,["attached"]),r="",o=0;o<this.registry.length;o++){var a=this.registry[o];null!=i&&a.attached!==i||(r&&(r+="\n"),r+=a.toString(n))}return r},Object(p.a)(t,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),t}()),ot="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),at="2f1acc6c3a606b082e5eef5e54414ffb";null==ot[at]&&(ot[at]=0);var st=ot[at]++,lt=function(t){void 0===t&&(t={});var e=0;return function(i,n){e+=1;var r="",o="";return n&&(n.options.classNamePrefix&&(o=n.options.classNamePrefix),null!=n.options.jss.id&&(r=String(n.options.jss.id))),t.minify?""+(o||"c")+st+r+e:o+i.key+"-"+st+(r?"-"+r:"")+"-"+e}},ct=function(t){var e;return function(){return e||(e=t()),e}},ut=function(t,e){try{return t.attributeStyleMap?t.attributeStyleMap.get(e):t.style.getPropertyValue(e)}catch(i){return""}},ht=function(t,e,i){try{var n=i;if(Array.isArray(i)&&(n=x(i,!0),"!important"===i[i.length-1]))return t.style.setProperty(e,n,"important"),!0;t.attributeStyleMap?t.attributeStyleMap.set(e,n):t.style.setProperty(e,n)}catch(r){return!1}return!0},dt=function(t,e){try{t.attributeStyleMap?t.attributeStyleMap.delete(e):t.style.removeProperty(e)}catch(i){}},pt=function(t,e){return t.selectorText=e,t.selectorText===e},ft=ct((function(){return document.querySelector("head")}));function mt(t){var e=rt.registry;if(e.length>0){var i=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(n.attached&&n.options.index>e.index&&n.options.insertionPoint===e.insertionPoint)return n}return null}(e,t);if(i&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element};if((i=function(t,e){for(var i=t.length-1;i>=0;i--){var n=t[i];if(n.attached&&n.options.insertionPoint===e.insertionPoint)return n}return null}(e,t))&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element.nextSibling}}var n=t.insertionPoint;if(n&&"string"===typeof n){var r=function(t){for(var e=ft(),i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(8===n.nodeType&&n.nodeValue.trim()===t)return n}return null}(n);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}var yt=ct((function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null})),vt=function(t,e,i){try{if("insertRule"in t)t.insertRule(e,i);else if("appendRule"in t){t.appendRule(e)}}catch(n){return!1}return t.cssRules[i]},gt=function(t,e){var i=t.cssRules.length;return void 0===e||e>i?i:e},_t=function(){function t(t){this.getPropertyValue=ut,this.setProperty=ht,this.removeProperty=dt,this.setSelector=pt,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,this.cssRules=[],t&&rt.add(t),this.sheet=t;var e=this.sheet?this.sheet.options:{},i=e.media,n=e.meta,r=e.element;this.element=r||function(){var t=document.createElement("style");return t.textContent="\n",t}(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),n&&this.element.setAttribute("data-meta",n);var o=yt();o&&this.element.setAttribute("nonce",o)}var e=t.prototype;return e.attach=function(){if(!this.element.parentNode&&this.sheet){!function(t,e){var i=e.insertionPoint,n=mt(e);if(!1!==n&&n.parent)n.parent.insertBefore(t,n.node);else if(i&&"number"===typeof i.nodeType){var r=i,o=r.parentNode;o&&o.insertBefore(t,r.nextSibling)}else ft().appendChild(t)}(this.element,this.sheet.options);var t=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&t&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var t=this.element.parentNode;t&&t.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},e.deploy=function(){var t=this.sheet;t&&(t.options.link?this.insertRules(t.rules):this.element.textContent="\n"+t.toString()+"\n")},e.insertRules=function(t,e){for(var i=0;i<t.index.length;i++)this.insertRule(t.index[i],i,e)},e.insertRule=function(t,e,i){if(void 0===i&&(i=this.element.sheet),t.rules){var n=t,r=i;if("conditional"===t.type||"keyframes"===t.type){var o=gt(i,e);if(!1===(r=vt(i,n.toString({children:!1}),o)))return!1;this.refCssRule(t,o,r)}return this.insertRules(n.rules,r),r}var a=t.toString();if(!a)return!1;var s=gt(i,e),l=vt(i,a,s);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(t,s,l),l)},e.refCssRule=function(t,e,i){t.renderable=i,t.options.parent instanceof it&&(this.cssRules[e]=i)},e.deleteRule=function(t){var e=this.element.sheet,i=this.indexOf(t);return-1!==i&&(e.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(t){return this.cssRules.indexOf(t)},e.replaceRule=function(t,e){var i=this.indexOf(t);return-1!==i&&(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(e,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),bt=0,xt=function(){function t(t){this.id=bt++,this.version="10.5.0",this.plugins=new nt,this.options={id:{minify:!1},createGenerateId:lt,Renderer:d?_t:null,plugins:[]},this.generateId=lt({minify:!1});for(var e=0;e<J.length;e++)this.plugins.use(J[e],{queue:"internal"});this.setup(t)}var e=t.prototype;return e.setup=function(t){return void 0===t&&(t={}),t.createGenerateId&&(this.options.createGenerateId=t.createGenerateId),t.id&&(this.options.id=Object(o.a)({},this.options.id,t.id)),(t.createGenerateId||t.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=t.insertionPoint&&(this.options.insertionPoint=t.insertionPoint),"Renderer"in t&&(this.options.Renderer=t.Renderer),t.plugins&&this.use.apply(this,t.plugins),this},e.createStyleSheet=function(t,e){void 0===e&&(e={});var i=e.index;"number"!==typeof i&&(i=0===rt.index?0:rt.index+1);var n=new it(t,Object(o.a)({},e,{jss:this,generateId:e.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:i}));return this.plugins.onProcessSheet(n),n},e.removeStyleSheet=function(t){return t.detach(),rt.remove(t),this},e.createRule=function(t,e,i){if(void 0===e&&(e={}),void 0===i&&(i={}),"object"===typeof t)return this.createRule(void 0,t,e);var n=Object(o.a)({},i,{name:t,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var r=_(t,e,n);return r&&this.plugins.onProcessRule(r),r},e.use=function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach((function(e){t.plugins.use(e)})),this},t}();function wt(t){var e=null;for(var i in t){var n=t[i],r=typeof n;if("function"===r)e||(e={}),e[i]=n;else if("object"===r&&null!==n&&!Array.isArray(n)){var o=wt(n);o&&(e||(e={}),e[i]=o)}}return e}var St="object"===typeof CSS&&null!=CSS&&"number"in CSS,Et=function(t){return new xt(t)};Et();function kt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.baseClasses,i=t.newClasses;t.Component;if(!i)return e;var n=Object(o.a)({},e);return Object.keys(i).forEach((function(t){i[t]&&(n[t]="".concat(e[t]," ").concat(i[t]))})),n}var Pt={set:function(t,e,i,n){var r=t.get(e);r||(r=new Map,t.set(e,r)),r.set(i,n)},get:function(t,e,i){var n=t.get(e);return n?n.get(i):void 0},delete:function(t,e,i){t.get(e).delete(i)}};var Tt=r.a.createContext(null);function Ct(){return r.a.useContext(Tt)}var Mt="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",At=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Ot=Date.now(),It="fnValues"+Ot,Dt="fnStyle"+ ++Ot,zt=function(){return{onCreateRule:function(t,e,i){if("function"!==typeof e)return null;var n=_(t,{},i);return n[Dt]=e,n},onProcessStyle:function(t,e){if(It in e||Dt in e)return t;var i={};for(var n in t){var r=t[n];"function"===typeof r&&(delete t[n],i[n]=r)}return e[It]=i,t},onUpdate:function(t,e,i,n){var r=e,o=r[Dt];o&&(r.style=o(t)||{});var a=r[It];if(a)for(var s in a)r.prop(s,a[s](t),n)}}},Lt="@global",Rt="@global ",Ft=function(){function t(t,e,i){for(var n in this.type="global",this.at=Lt,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=t,this.options=i,this.rules=new et(Object(o.a)({},i,{parent:this})),e)this.rules.add(n,e[n]);this.rules.process()}var e=t.prototype;return e.getRule=function(t){return this.rules.get(t)},e.addRule=function(t,e,i){var n=this.rules.add(t,e,i);return n&&this.options.jss.plugins.onProcessRule(n),n},e.indexOf=function(t){return this.rules.indexOf(t)},e.toString=function(){return this.rules.toString()},t}(),Bt=function(){function t(t,e,i){this.type="global",this.at=Lt,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=t,this.options=i;var n=t.substr(Rt.length);this.rule=i.jss.createRule(n,e,Object(o.a)({},i,{parent:this}))}return t.prototype.toString=function(t){return this.rule?this.rule.toString(t):""},t}(),jt=/\s*,\s*/g;function Nt(t,e){for(var i=t.split(jt),n="",r=0;r<i.length;r++)n+=e+" "+i[r].trim(),i[r+1]&&(n+=", ");return n}var Vt=function(){return{onCreateRule:function(t,e,i){if(!t)return null;if(t===Lt)return new Ft(t,e,i);if("@"===t[0]&&t.substr(0,Rt.length)===Rt)return new Bt(t,e,i);var n=i.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(i.scoped=!1),!1===i.scoped&&(i.selector=t),null},onProcessRule:function(t,e){"style"===t.type&&e&&(function(t,e){var i=t.options,n=t.style,r=n?n[Lt]:null;if(r){for(var a in r)e.addRule(a,r[a],Object(o.a)({},i,{selector:Nt(a,t.selector)}));delete n[Lt]}}(t,e),function(t,e){var i=t.options,n=t.style;for(var r in n)if("@"===r[0]&&r.substr(0,Lt.length)===Lt){var a=Nt(r.substr(Lt.length),t.selector);e.addRule(a,n[r],Object(o.a)({},i,{selector:a})),delete n[r]}}(t,e))}}},Ut=/\s*,\s*/g,Gt=/&/g,qt=/\$([\w-]+)/g;var Zt=function(){function t(t,e){return function(i,n){var r=t.getRule(n)||e&&e.getRule(n);return r?(r=r).selector:n}}function e(t,e){for(var i=e.split(Ut),n=t.split(Ut),r="",o=0;o<i.length;o++)for(var a=i[o],s=0;s<n.length;s++){var l=n[s];r&&(r+=", "),r+=-1!==l.indexOf("&")?l.replace(Gt,a):a+" "+l}return r}function i(t,e,i){if(i)return Object(o.a)({},i,{index:i.index+1});var n=t.options.nestingLevel;n=void 0===n?1:n+1;var r=Object(o.a)({},t.options,{nestingLevel:n,index:e.indexOf(t)+1});return delete r.name,r}return{onProcessStyle:function(n,r,a){if("style"!==r.type)return n;var s,l,c=r,u=c.options.parent;for(var h in n){var d=-1!==h.indexOf("&"),p="@"===h[0];if(d||p){if(s=i(c,u,s),d){var f=e(h,c.selector);l||(l=t(u,a)),f=f.replace(qt,l),u.addRule(f,n[h],Object(o.a)({},s,{selector:f}))}else p&&u.addRule(h,{},s).addRule(c.key,n[h],{selector:c.selector});delete n[h]}}return n}}},Ht=/[A-Z]/g,Wt=/^ms-/,Xt={};function Yt(t){return"-"+t.toLowerCase()}var Kt=function(t){if(Xt.hasOwnProperty(t))return Xt[t];var e=t.replace(Ht,Yt);return Xt[t]=Wt.test(e)?"-"+e:e};function $t(t){var e={};for(var i in t){e[0===i.indexOf("--")?i:Kt(i)]=t[i]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map($t):e.fallbacks=$t(t.fallbacks)),e}var Jt=function(){return{onProcessStyle:function(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++)t[e]=$t(t[e]);return t}return $t(t)},onChangeValue:function(t,e,i){if(0===e.indexOf("--"))return t;var n=Kt(e);return e===n?t:(i.prop(n,t),null)}}},Qt=St&&CSS?CSS.px:"px",te=St&&CSS?CSS.ms:"ms",ee=St&&CSS?CSS.percent:"%";function ie(t){var e=/(-[a-z])/g,i=function(t){return t[1].toUpperCase()},n={};for(var r in t)n[r]=t[r],n[r.replace(e,i)]=t[r];return n}var ne=ie({"animation-delay":te,"animation-duration":te,"background-position":Qt,"background-position-x":Qt,"background-position-y":Qt,"background-size":Qt,border:Qt,"border-bottom":Qt,"border-bottom-left-radius":Qt,"border-bottom-right-radius":Qt,"border-bottom-width":Qt,"border-left":Qt,"border-left-width":Qt,"border-radius":Qt,"border-right":Qt,"border-right-width":Qt,"border-top":Qt,"border-top-left-radius":Qt,"border-top-right-radius":Qt,"border-top-width":Qt,"border-width":Qt,"border-block":Qt,"border-block-end":Qt,"border-block-end-width":Qt,"border-block-start":Qt,"border-block-start-width":Qt,"border-block-width":Qt,"border-inline":Qt,"border-inline-end":Qt,"border-inline-end-width":Qt,"border-inline-start":Qt,"border-inline-start-width":Qt,"border-inline-width":Qt,"border-start-start-radius":Qt,"border-start-end-radius":Qt,"border-end-start-radius":Qt,"border-end-end-radius":Qt,margin:Qt,"margin-bottom":Qt,"margin-left":Qt,"margin-right":Qt,"margin-top":Qt,"margin-block":Qt,"margin-block-end":Qt,"margin-block-start":Qt,"margin-inline":Qt,"margin-inline-end":Qt,"margin-inline-start":Qt,padding:Qt,"padding-bottom":Qt,"padding-left":Qt,"padding-right":Qt,"padding-top":Qt,"padding-block":Qt,"padding-block-end":Qt,"padding-block-start":Qt,"padding-inline":Qt,"padding-inline-end":Qt,"padding-inline-start":Qt,"mask-position-x":Qt,"mask-position-y":Qt,"mask-size":Qt,height:Qt,width:Qt,"min-height":Qt,"max-height":Qt,"min-width":Qt,"max-width":Qt,bottom:Qt,left:Qt,top:Qt,right:Qt,inset:Qt,"inset-block":Qt,"inset-block-end":Qt,"inset-block-start":Qt,"inset-inline":Qt,"inset-inline-end":Qt,"inset-inline-start":Qt,"box-shadow":Qt,"text-shadow":Qt,"column-gap":Qt,"column-rule":Qt,"column-rule-width":Qt,"column-width":Qt,"font-size":Qt,"font-size-delta":Qt,"letter-spacing":Qt,"text-indent":Qt,"text-stroke":Qt,"text-stroke-width":Qt,"word-spacing":Qt,motion:Qt,"motion-offset":Qt,outline:Qt,"outline-offset":Qt,"outline-width":Qt,perspective:Qt,"perspective-origin-x":ee,"perspective-origin-y":ee,"transform-origin":ee,"transform-origin-x":ee,"transform-origin-y":ee,"transform-origin-z":ee,"transition-delay":te,"transition-duration":te,"vertical-align":Qt,"flex-basis":Qt,"shape-margin":Qt,size:Qt,gap:Qt,grid:Qt,"grid-gap":Qt,"grid-row-gap":Qt,"grid-column-gap":Qt,"grid-template-rows":Qt,"grid-template-columns":Qt,"grid-auto-rows":Qt,"grid-auto-columns":Qt,"box-shadow-x":Qt,"box-shadow-y":Qt,"box-shadow-blur":Qt,"box-shadow-spread":Qt,"font-line-height":Qt,"text-shadow-x":Qt,"text-shadow-y":Qt,"text-shadow-blur":Qt});function re(t,e,i){if(null==e)return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=re(t,e[n],i);else if("object"===typeof e)if("fallbacks"===t)for(var r in e)e[r]=re(r,e[r],i);else for(var o in e)e[o]=re(t+"-"+o,e[o],i);else if("number"===typeof e){var a=i[t]||ne[t];return!a||0===e&&a===Qt?e.toString():"function"===typeof a?a(e).toString():""+e+a}return e}var oe=function(t){void 0===t&&(t={});var e=ie(t);return{onProcessStyle:function(t,i){if("style"!==i.type)return t;for(var n in t)t[n]=re(n,t[n],e);return t},onChangeValue:function(t,i){return re(i,t,e)}}},ae=i(49),se="",le="",ce="",ue="",he=d&&"ontouchstart"in document.documentElement;if(d){var de={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},pe=document.createElement("p").style;for(var fe in de)if(fe+"Transform"in pe){se=fe,le=de[fe];break}"Webkit"===se&&"msHyphens"in pe&&(se="ms",le=de.ms,ue="edge"),"Webkit"===se&&"-apple-trailing-word"in pe&&(ce="apple")}var me=se,ye=le,ve=ce,ge=ue,_e=he;var be={noPrefill:["appearance"],supportedProperty:function(t){return"appearance"===t&&("ms"===me?"-webkit-"+t:ye+t)}},xe={noPrefill:["color-adjust"],supportedProperty:function(t){return"color-adjust"===t&&("Webkit"===me?ye+"print-"+t:t)}},we=/[-\s]+(.)?/g;function Se(t,e){return e?e.toUpperCase():""}function Ee(t){return t.replace(we,Se)}function ke(t){return Ee("-"+t)}var Pe,Te={noPrefill:["mask"],supportedProperty:function(t,e){if(!/^mask/.test(t))return!1;if("Webkit"===me){var i="mask-image";if(Ee(i)in e)return t;if(me+ke(i)in e)return ye+t}return t}},Ce={noPrefill:["text-orientation"],supportedProperty:function(t){return"text-orientation"===t&&("apple"!==ve||_e?t:ye+t)}},Me={noPrefill:["transform"],supportedProperty:function(t,e,i){return"transform"===t&&(i.transform?t:ye+t)}},Ae={noPrefill:["transition"],supportedProperty:function(t,e,i){return"transition"===t&&(i.transition?t:ye+t)}},Oe={noPrefill:["writing-mode"],supportedProperty:function(t){return"writing-mode"===t&&("Webkit"===me||"ms"===me&&"edge"!==ge?ye+t:t)}},Ie={noPrefill:["user-select"],supportedProperty:function(t){return"user-select"===t&&("Moz"===me||"ms"===me||"apple"===ve?ye+t:t)}},De={supportedProperty:function(t,e){return!!/^break-/.test(t)&&("Webkit"===me?"WebkitColumn"+ke(t)in e&&ye+"column-"+t:"Moz"===me&&("page"+ke(t)in e&&"page-"+t))}},ze={supportedProperty:function(t,e){if(!/^(border|margin|padding)-inline/.test(t))return!1;if("Moz"===me)return t;var i=t.replace("-inline","");return me+ke(i)in e&&ye+i}},Le={supportedProperty:function(t,e){return Ee(t)in e&&t}},Re={supportedProperty:function(t,e){var i=ke(t);return"-"===t[0]||"-"===t[0]&&"-"===t[1]?t:me+i in e?ye+t:"Webkit"!==me&&"Webkit"+i in e&&"-webkit-"+t}},Fe={supportedProperty:function(t){return"scroll-snap"===t.substring(0,11)&&("ms"===me?""+ye+t:t)}},Be={supportedProperty:function(t){return"overscroll-behavior"===t&&("ms"===me?ye+"scroll-chaining":t)}},je={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Ne={supportedProperty:function(t,e){var i=je[t];return!!i&&(me+ke(i)in e&&ye+i)}},Ve={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Ue=Object.keys(Ve),Ge=function(t){return ye+t},qe=[be,xe,Te,Ce,Me,Ae,Oe,Ie,De,ze,Le,Re,Fe,Be,Ne,{supportedProperty:function(t,e,i){var n=i.multiple;if(Ue.indexOf(t)>-1){var r=Ve[t];if(!Array.isArray(r))return me+ke(r)in e&&ye+r;if(!n)return!1;for(var o=0;o<r.length;o++)if(!(me+ke(r[0])in e))return!1;return r.map(Ge)}return!1}}],Ze=qe.filter((function(t){return t.supportedProperty})).map((function(t){return t.supportedProperty})),He=qe.filter((function(t){return t.noPrefill})).reduce((function(t,e){return t.push.apply(t,Object(ae.a)(e.noPrefill)),t}),[]),We={};if(d){Pe=document.createElement("p");var Xe=window.getComputedStyle(document.documentElement,"");for(var Ye in Xe)isNaN(Ye)||(We[Xe[Ye]]=Xe[Ye]);He.forEach((function(t){return delete We[t]}))}function Ke(t,e){if(void 0===e&&(e={}),!Pe)return t;if(null!=We[t])return We[t];"transition"!==t&&"transform"!==t||(e[t]=t in Pe.style);for(var i=0;i<Ze.length&&(We[t]=Ze[i](t,Pe.style,e),!We[t]);i++);try{Pe.style[t]=""}catch(n){return!1}return We[t]}var $e,Je={},Qe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},ti=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function ei(t,e,i){if("var"===e)return"var";if("all"===e)return"all";if("all"===i)return", all";var n=e?Ke(e):", "+Ke(i);return n||(e||i)}function ii(t,e){var i=e;if(!$e||"content"===t)return e;if("string"!==typeof i||!isNaN(parseInt(i,10)))return i;var n=t+i;if(null!=Je[n])return Je[n];try{$e.style[t]=i}catch(r){return Je[n]=!1,!1}if(Qe[t])i=i.replace(ti,ei);else if(""===$e.style[t]&&("-ms-flex"===(i=ye+i)&&($e.style[t]="-ms-flexbox"),$e.style[t]=i,""===$e.style[t]))return Je[n]=!1,!1;return $e.style[t]="",Je[n]=i,Je[n]}d&&($e=document.createElement("p"));var ni=function(){function t(e){for(var i in e){var n=e[i];if("fallbacks"===i&&Array.isArray(n))e[i]=n.map(t);else{var r=!1,o=Ke(i);o&&o!==i&&(r=!0);var a=!1,s=ii(o,x(n));s&&s!==n&&(a=!0),(r||a)&&(r&&delete e[i],e[o||i]=s||n)}}return e}return{onProcessRule:function(t){if("keyframes"===t.type){var e=t;e.at="-"===(i=e.at)[1]||"ms"===me?i:"@"+ye+"keyframes"+i.substr(10)}var i},onProcessStyle:function(e,i){return"style"!==i.type?e:t(e)},onChangeValue:function(t,e){return ii(e,x(t))||t}}};var ri=function(){var t=function(t,e){return t.length===e.length?t>e?1:-1:t.length-e.length};return{onProcessStyle:function(e,i){if("style"!==i.type)return e;for(var n={},r=Object.keys(e).sort(t),o=0;o<r.length;o++)n[r[o]]=e[r[o]];return n}}};function oi(){return{plugins:[zt(),Vt(),Zt(),Jt(),oe(),"undefined"===typeof window?null:ni(),ri()]}}var ai=Et(oi()),si={disableGeneration:!1,generateClassName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.disableGlobal,i=void 0!==e&&e,n=t.productionPrefix,r=void 0===n?"jss":n,o=t.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),l=0,c=function(){return l+=1};return function(t,e){var n=e.options.name;if(n&&0===n.indexOf("Mui")&&!e.options.link&&!i){if(-1!==At.indexOf(t.key))return"Mui-".concat(t.key);var o="".concat(s).concat(n,"-").concat(t.key);return e.options.theme[Mt]&&""===a?"".concat(o,"-").concat(c()):o}return"".concat(s).concat(r).concat(c())}}(),jss:ai,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},li=r.a.createContext(si);var ci=-1e9;function ui(){return ci+=1}var hi=i(33);function di(t){return t&&"object"===Object(hi.a)(t)&&t.constructor===Object}function pi(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},n=i.clone?Object(o.a)({},t):t;return di(t)&&di(e)&&Object.keys(e).forEach((function(r){"__proto__"!==r&&(di(e[r])&&r in t?n[r]=pi(t[r],e[r],i):n[r]=e[r])})),n}function fi(t){var e="function"===typeof t;return{create:function(i,n){var r;try{r=e?t(i):t}catch(l){throw l}if(!n||!i.overrides||!i.overrides[n])return r;var a=i.overrides[n],s=Object(o.a)({},r);return Object.keys(a).forEach((function(t){s[t]=pi(s[t],a[t])})),s},options:{}}}var mi={};function yi(t,e,i){var n=t.state;if(t.stylesOptions.disableGeneration)return e||{};n.cacheClasses||(n.cacheClasses={value:null,lastProp:null,lastJSS:{}});var r=!1;return n.classes!==n.cacheClasses.lastJSS&&(n.cacheClasses.lastJSS=n.classes,r=!0),e!==n.cacheClasses.lastProp&&(n.cacheClasses.lastProp=e,r=!0),r&&(n.cacheClasses.value=kt({baseClasses:n.cacheClasses.lastJSS,newClasses:e,Component:i})),n.cacheClasses.value}function vi(t,e){var i=t.state,n=t.theme,r=t.stylesOptions,a=t.stylesCreator,s=t.name;if(!r.disableGeneration){var l=Pt.get(r.sheetsManager,a,n);l||(l={refs:0,staticSheet:null,dynamicStyles:null},Pt.set(r.sheetsManager,a,n,l));var c=Object(o.a)({},a.options,r,{theme:n,flip:"boolean"===typeof r.flip?r.flip:"rtl"===n.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var u=r.sheetsRegistry;if(0===l.refs){var h;r.sheetsCache&&(h=Pt.get(r.sheetsCache,a,n));var d=a.create(n,s);h||((h=r.jss.createStyleSheet(d,Object(o.a)({link:!1},c))).attach(),r.sheetsCache&&Pt.set(r.sheetsCache,a,n,h)),u&&u.add(h),l.staticSheet=h,l.dynamicStyles=wt(d)}if(l.dynamicStyles){var p=r.jss.createStyleSheet(l.dynamicStyles,Object(o.a)({link:!0},c));p.update(e),p.attach(),i.dynamicSheet=p,i.classes=kt({baseClasses:l.staticSheet.classes,newClasses:p.classes}),u&&u.add(p)}else i.classes=l.staticSheet.classes;l.refs+=1}}function gi(t,e){var i=t.state;i.dynamicSheet&&i.dynamicSheet.update(e)}function _i(t){var e=t.state,i=t.theme,n=t.stylesOptions,r=t.stylesCreator;if(!n.disableGeneration){var o=Pt.get(n.sheetsManager,r,i);o.refs-=1;var a=n.sheetsRegistry;0===o.refs&&(Pt.delete(n.sheetsManager,r,i),n.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),e.dynamicSheet&&(n.jss.removeStyleSheet(e.dynamicSheet),a&&a.remove(e.dynamicSheet))}}function bi(t,e){var i,n=r.a.useRef([]),o=r.a.useMemo((function(){return{}}),e);n.current!==o&&(n.current=o,i=t()),r.a.useEffect((function(){return function(){i&&i()}}),[o])}function xi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.name,n=e.classNamePrefix,s=e.Component,l=e.defaultTheme,c=void 0===l?mi:l,u=Object(a.a)(e,["name","classNamePrefix","Component","defaultTheme"]),h=fi(t),d=i||n||"makeStyles";h.options={index:ui(),name:i,meta:d,classNamePrefix:d};var p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Ct()||c,n=Object(o.a)({},r.a.useContext(li),u),a=r.a.useRef(),l=r.a.useRef();bi((function(){var r={name:i,state:{},stylesCreator:h,stylesOptions:n,theme:e};return vi(r,t),l.current=!1,a.current=r,function(){_i(r)}}),[e,h]),r.a.useEffect((function(){l.current&&gi(a.current,t),l.current=!0}));var d=yi(a.current,t.classes,s);return d};return p}function wi(t){var e=t.theme,i=t.name,n=t.props;if(!e||!e.props||!e.props[i])return n;var r,o=e.props[i];for(r in o)void 0===n[r]&&(n[r]=o[r]);return n}var Si=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i){var n=e.defaultTheme,s=e.withTheme,l=void 0!==s&&s,c=e.name,h=Object(a.a)(e,["defaultTheme","withTheme","name"]);var d=c,p=xi(t,Object(o.a)({defaultTheme:n,Component:i,name:c||i.displayName,classNamePrefix:d},h)),f=r.a.forwardRef((function(t,e){t.classes;var s,u=t.innerRef,h=Object(a.a)(t,["classes","innerRef"]),d=p(Object(o.a)({},i.defaultProps,t)),f=h;return("string"===typeof c||l)&&(s=Ct()||n,c&&(f=wi({theme:s,name:c,props:h})),l&&!f.theme&&(f.theme=s)),r.a.createElement(i,Object(o.a)({ref:u||e,classes:d},f))}));return u()(f,i),f}},Ei=i(7),ki=["xs","sm","md","lg","xl"];function Pi(t){var e=t.values,i=void 0===e?{xs:0,sm:600,md:960,lg:1280,xl:1920}:e,n=t.unit,r=void 0===n?"px":n,s=t.step,l=void 0===s?5:s,c=Object(a.a)(t,["values","unit","step"]);function u(t){var e="number"===typeof i[t]?i[t]:t;return"@media (min-width:".concat(e).concat(r,")")}function h(t,e){var n=ki.indexOf(e);return n===ki.length-1?u(t):"@media (min-width:".concat("number"===typeof i[t]?i[t]:t).concat(r,") and ")+"(max-width:".concat((-1!==n&&"number"===typeof i[ki[n+1]]?i[ki[n+1]]:e)-l/100).concat(r,")")}return Object(o.a)({keys:ki,values:i,up:u,down:function(t){var e=ki.indexOf(t)+1,n=i[ki[e]];return e===ki.length?u("xs"):"@media (max-width:".concat(("number"===typeof n&&e>0?n:t)-l/100).concat(r,")")},between:h,only:function(t){return h(t,t)},width:function(t){return i[t]}},c)}function Ti(t,e,i){var n;return Object(o.a)({gutters:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({paddingLeft:e(2),paddingRight:e(2)},i,Object(Ei.a)({},t.up("sm"),Object(o.a)({paddingLeft:e(3),paddingRight:e(3)},i[t.up("sm")])))},toolbar:(n={minHeight:56},Object(Ei.a)(n,"".concat(t.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(Ei.a)(n,t.up("sm"),{minHeight:64}),n)},i)}function Ci(t){for(var e="https://material-ui.com/production-error/?code="+t,i=1;i<arguments.length;i+=1)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified Material-UI error #"+t+"; visit "+e+" for the full message."}var Mi={black:"#000",white:"#fff"},Ai={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},Oi={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Ii={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Di={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},zi={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Li={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Ri={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Fi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),i)}function Bi(t){if(t.type)return t;if("#"===t.charAt(0))return Bi(function(t){t=t.substr(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),i=t.match(e);return i&&1===i[0].length&&(i=i.map((function(t){return t+t}))),i?"rgb".concat(4===i.length?"a":"","(").concat(i.map((function(t,e){return e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3})).join(", "),")"):""}(t));var e=t.indexOf("("),i=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla"].indexOf(i))throw new Error(Ci(3,t));var n=t.substring(e+1,t.length-1).split(",");return{type:i,values:n=n.map((function(t){return parseFloat(t)}))}}function ji(t){var e=t.type,i=t.values;return-1!==e.indexOf("rgb")?i=i.map((function(t,e){return e<3?parseInt(t,10):t})):-1!==e.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),"".concat(e,"(").concat(i.join(", "),")")}function Ni(t){var e="hsl"===(t=Bi(t)).type?Bi(function(t){var e=(t=Bi(t)).values,i=e[0],n=e[1]/100,r=e[2]/100,o=n*Math.min(r,1-r),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+i/30)%12;return r-o*Math.max(Math.min(e-3,9-e,1),-1)},s="rgb",l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===t.type&&(s+="a",l.push(e[3])),ji({type:s,values:l})}(t)).values:t.values;return e=e.map((function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Vi(t,e){if(t=Bi(t),e=Fi(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb"))for(var i=0;i<3;i+=1)t.values[i]*=1-e;return ji(t)}function Ui(t,e){if(t=Bi(t),e=Fi(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(var i=0;i<3;i+=1)t.values[i]+=(255-t.values[i])*e;return ji(t)}var Gi={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Mi.white,default:Ai[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},qi={text:{primary:Mi.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:Ai[800],default:"#303030"},action:{active:Mi.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Zi(t,e,i,n){var r=n.light||n,o=n.dark||1.5*n;t[e]||(t.hasOwnProperty(i)?t[e]=t[i]:"light"===e?t.light=Ui(t.main,r):"dark"===e&&(t.dark=Vi(t.main,o)))}function Hi(t){var e=t.primary,i=void 0===e?{light:Oi[300],main:Oi[500],dark:Oi[700]}:e,n=t.secondary,r=void 0===n?{light:Ii.A200,main:Ii.A400,dark:Ii.A700}:n,s=t.error,l=void 0===s?{light:Di[300],main:Di[500],dark:Di[700]}:s,c=t.warning,u=void 0===c?{light:zi[300],main:zi[500],dark:zi[700]}:c,h=t.info,d=void 0===h?{light:Li[300],main:Li[500],dark:Li[700]}:h,p=t.success,f=void 0===p?{light:Ri[300],main:Ri[500],dark:Ri[700]}:p,m=t.type,y=void 0===m?"light":m,v=t.contrastThreshold,g=void 0===v?3:v,_=t.tonalOffset,b=void 0===_?.2:_,x=Object(a.a)(t,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function w(t){return function(t,e){var i=Ni(t),n=Ni(e);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}(t,qi.text.primary)>=g?qi.text.primary:Gi.text.primary}var S=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(t=Object(o.a)({},t)).main&&t[e]&&(t.main=t[e]),!t.main)throw new Error(Ci(4,e));if("string"!==typeof t.main)throw new Error(Ci(5,JSON.stringify(t.main)));return Zi(t,"light",i,b),Zi(t,"dark",n,b),t.contrastText||(t.contrastText=w(t.main)),t},E={dark:qi,light:Gi};return pi(Object(o.a)({common:Mi,type:y,primary:S(i),secondary:S(r,"A400","A200","A700"),error:S(l),warning:S(u),info:S(d),success:S(f),grey:Ai,contrastThreshold:g,getContrastText:w,augmentColor:S,tonalOffset:b},E[y]),x)}function Wi(t){return Math.round(1e5*t)/1e5}var Xi={textTransform:"uppercase"},Yi='"Roboto", "Helvetica", "Arial", sans-serif';function Ki(t,e){var i="function"===typeof e?e(t):e,n=i.fontFamily,r=void 0===n?Yi:n,s=i.fontSize,l=void 0===s?14:s,c=i.fontWeightLight,u=void 0===c?300:c,h=i.fontWeightRegular,d=void 0===h?400:h,p=i.fontWeightMedium,f=void 0===p?500:p,m=i.fontWeightBold,y=void 0===m?700:m,v=i.htmlFontSize,g=void 0===v?16:v,_=i.allVariants,b=i.pxToRem,x=Object(a.a)(i,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var w=l/14,S=b||function(t){return"".concat(t/g*w,"rem")},E=function(t,e,i,n,a){return Object(o.a)({fontFamily:r,fontWeight:t,fontSize:S(e),lineHeight:i},r===Yi?{letterSpacing:"".concat(Wi(n/e),"em")}:{},a,_)},k={h1:E(u,96,1.167,-1.5),h2:E(u,60,1.2,-.5),h3:E(d,48,1.167,0),h4:E(d,34,1.235,.25),h5:E(d,24,1.334,0),h6:E(f,20,1.6,.15),subtitle1:E(d,16,1.75,.15),subtitle2:E(f,14,1.57,.1),body1:E(d,16,1.5,.15),body2:E(d,14,1.43,.15),button:E(f,14,1.75,.4,Xi),caption:E(d,12,1.66,.4),overline:E(d,12,2.66,1,Xi)};return pi(Object(o.a)({htmlFontSize:g,pxToRem:S,round:Wi,fontFamily:r,fontSize:l,fontWeightLight:u,fontWeightRegular:d,fontWeightMedium:f,fontWeightBold:y},k),x,{clone:!1})}function $i(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Ji=["none",$i(0,2,1,-1,0,1,1,0,0,1,3,0),$i(0,3,1,-2,0,2,2,0,0,1,5,0),$i(0,3,3,-2,0,3,4,0,0,1,8,0),$i(0,2,4,-1,0,4,5,0,0,1,10,0),$i(0,3,5,-1,0,5,8,0,0,1,14,0),$i(0,3,5,-1,0,6,10,0,0,1,18,0),$i(0,4,5,-2,0,7,10,1,0,2,16,1),$i(0,5,5,-3,0,8,10,1,0,3,14,2),$i(0,5,6,-3,0,9,12,1,0,3,16,2),$i(0,6,6,-3,0,10,14,1,0,4,18,3),$i(0,6,7,-4,0,11,15,1,0,4,20,3),$i(0,7,8,-4,0,12,17,2,0,5,22,4),$i(0,7,8,-4,0,13,19,2,0,5,24,4),$i(0,7,9,-4,0,14,21,2,0,5,26,4),$i(0,8,9,-5,0,15,22,2,0,6,28,5),$i(0,8,10,-5,0,16,24,2,0,6,30,5),$i(0,8,11,-5,0,17,26,2,0,6,32,5),$i(0,9,11,-5,0,18,28,2,0,7,34,6),$i(0,9,12,-6,0,19,29,2,0,7,36,6),$i(0,10,13,-6,0,20,31,3,0,8,38,7),$i(0,10,13,-6,0,21,33,3,0,8,40,7),$i(0,10,14,-6,0,22,35,3,0,8,42,7),$i(0,11,14,-7,0,23,36,3,0,9,44,8),$i(0,11,15,-7,0,24,38,3,0,9,46,8)],Qi={borderRadius:4},tn=i(9);var en=function(t,e){return e?pi(t,e,{clone:!1}):t},nn={xs:0,sm:600,md:960,lg:1280,xl:1920},rn={keys:["xs","sm","md","lg","xl"],up:function(t){return"@media (min-width:".concat(nn[t],"px)")}};var on={m:"margin",p:"padding"},an={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},sn={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ln=function(t){var e={};return function(i){return void 0===e[i]&&(e[i]=t(i)),e[i]}}((function(t){if(t.length>2){if(!sn[t])return[t];t=sn[t]}var e=t.split(""),i=Object(tn.a)(e,2),n=i[0],r=i[1],o=on[n],a=an[r]||"";return Array.isArray(a)?a.map((function(t){return o+t})):[o+a]})),cn=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function un(t){var e=t.spacing||8;return"number"===typeof e?function(t){return e*t}:Array.isArray(e)?function(t){return e[t]}:"function"===typeof e?e:function(){}}function hn(t,e){return function(i){return t.reduce((function(t,n){return t[n]=function(t,e){if("string"===typeof e)return e;var i=t(Math.abs(e));return e>=0?i:"number"===typeof i?-i:"-".concat(i)}(e,i),t}),{})}}function dn(t){var e=un(t.theme);return Object.keys(t).map((function(i){if(-1===cn.indexOf(i))return null;var n=hn(ln(i),e),r=t[i];return function(t,e,i){if(Array.isArray(e)){var n=t.theme.breakpoints||rn;return e.reduce((function(t,r,o){return t[n.up(n.keys[o])]=i(e[o]),t}),{})}if("object"===Object(hi.a)(e)){var r=t.theme.breakpoints||rn;return Object.keys(e).reduce((function(t,n){return t[r.up(n)]=i(e[n]),t}),{})}return i(e)}(t,r,n)})).reduce(en,{})}dn.propTypes={},dn.filterProps=cn;function pn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;var e=un({spacing:t}),i=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return 0===i.length?e(1):1===i.length?e(i[0]):i.map((function(t){if("string"===typeof t)return t;var i=e(t);return"number"===typeof i?"".concat(i,"px"):i})).join(" ")};return Object.defineProperty(i,"unit",{get:function(){return t}}),i.mui=!0,i}var fn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},mn={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function yn(t){return"".concat(Math.round(t),"ms")}var vn={easing:fn,duration:mn,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.duration,n=void 0===i?mn.standard:i,r=e.easing,o=void 0===r?fn.easeInOut:r,s=e.delay,l=void 0===s?0:s;Object(a.a)(e,["duration","easing","delay"]);return(Array.isArray(t)?t:[t]).map((function(t){return"".concat(t," ").concat("string"===typeof n?n:yn(n)," ").concat(o," ").concat("string"===typeof l?l:yn(l))})).join(",")},getAutoHeightDuration:function(t){if(!t)return 0;var e=t/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}},gn={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var _n=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breakpoints,i=void 0===e?{}:e,n=t.mixins,r=void 0===n?{}:n,o=t.palette,s=void 0===o?{}:o,l=t.spacing,c=t.typography,u=void 0===c?{}:c,h=Object(a.a)(t,["breakpoints","mixins","palette","spacing","typography"]),d=Hi(s),p=Pi(i),f=pn(l),m=pi({breakpoints:p,direction:"ltr",mixins:Ti(p,f,r),overrides:{},palette:d,props:{},shadows:Ji,typography:Ki(d,u),spacing:f,shape:Qi,transitions:vn,zIndex:gn},h),y=arguments.length,v=new Array(y>1?y-1:0),g=1;g<y;g++)v[g-1]=arguments[g];return m=v.reduce((function(t,e){return pi(t,e)}),m)}();var bn=function(t,e){return Si(t,Object(o.a)({defaultTheme:_n},e))};function xn(t){if("string"!==typeof t)throw new Error(Ci(7));return t.charAt(0).toUpperCase()+t.slice(1)}var wn=n.forwardRef((function(t,e){var i=t.children,r=t.classes,s=t.className,c=t.color,u=void 0===c?"inherit":c,h=t.component,d=void 0===h?"svg":h,p=t.fontSize,f=void 0===p?"default":p,m=t.htmlColor,y=t.titleAccess,v=t.viewBox,g=void 0===v?"0 0 24 24":v,_=Object(a.a)(t,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return n.createElement(d,Object(o.a)({className:l(r.root,s,"inherit"!==u&&r["color".concat(xn(u))],"default"!==f&&r["fontSize".concat(xn(f))]),focusable:"false",viewBox:g,color:m,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:e},_),i,y?n.createElement("title",null,y):null)}));wn.muiName="SvgIcon";var Sn=bn((function(t){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:t.typography.pxToRem(24),transition:t.transitions.create("fill",{duration:t.transitions.duration.shorter})},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},colorAction:{color:t.palette.action.active},colorError:{color:t.palette.error.main},colorDisabled:{color:t.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:t.typography.pxToRem(20)},fontSizeLarge:{fontSize:t.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(wn);e.a=function(t,e){var i=function(e,i){return r.a.createElement(Sn,Object(o.a)({ref:i},e),t)};return i.muiName=Sn.muiName,r.a.memo(r.a.forwardRef(i))}(n.createElement("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}))},function(t,e,i){"use strict";var n=i(6),r=i(14),o=i(24),a=i.n(o),s=i(2),l=i.n(s),c=i(38);var u=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter((function(t){return null!=t})).reduce((function(t,e){if("function"!==typeof e)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===t?e:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];t.apply(this,n),e.apply(this,n)}}),null)};function h(t){return!t||"#"===t.trim()}var d=l.a.forwardRef((function(t,e){var i=t.as,o=void 0===i?"a":i,a=t.disabled,s=t.onKeyDown,c=Object(r.a)(t,["as","disabled","onKeyDown"]),d=function(t){var e=c.href,i=c.onClick;(a||h(e))&&t.preventDefault(),a?t.stopPropagation():i&&i(t)};return h(c.href)&&(c.role=c.role||"button",c.href=c.href||"#"),a&&(c.tabIndex=-1,c["aria-disabled"]=!0),l.a.createElement(o,Object(n.a)({ref:e},c,{onClick:d,onKeyDown:u((function(t){" "===t.key&&(t.preventDefault(),d(t))}),s)}))}));d.displayName="SafeAnchor";var p=d,f=l.a.forwardRef((function(t,e){var i=t.bsPrefix,o=t.variant,s=t.size,u=t.active,h=t.className,d=t.block,f=t.type,m=t.as,y=Object(r.a)(t,["bsPrefix","variant","size","active","className","block","type","as"]),v=Object(c.a)(i,"btn"),g=a()(h,v,u&&"active",o&&v+"-"+o,d&&v+"-block",s&&v+"-"+s);if(y.href)return l.a.createElement(p,Object(n.a)({},y,{as:m,ref:e,className:a()(g,y.disabled&&"disabled")}));e&&(y.ref=e),f?y.type=f:m||(y.type="button");var _=m||"button";return l.a.createElement(_,Object(n.a)({},y,{className:g}))}));f.displayName="Button",f.defaultProps={variant:"primary",active:!1,disabled:!1};e.a=f},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(50),r=i(427),o=i(48);var a=i(47),s=Object(r.b)((function(t,e){var i=t.url,r=Object(n.a)(t,["url"]);return{instance:new a.TileLayer(i,Object(o.a)(r,e)),context:e}}),(function(t,e,i){var n=e.opacity,r=e.zIndex;null!=n&&n!==i.opacity&&t.setOpacity(n),null!=r&&r!==i.zIndex&&t.setZIndex(r)}))}]]);
//# sourceMappingURL=2.fa2bfeb3.chunk.js.map